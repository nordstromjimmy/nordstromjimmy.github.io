var M3=Object.defineProperty;var E3=(n,e,t)=>e in n?M3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ut=(n,e,t)=>E3(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function z0(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const hr={},Pc=[],Ji=()=>{},N3=()=>!1,vp=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),H0=n=>n.startsWith("onUpdate:"),wn=Object.assign,Y0=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},j3=Object.prototype.hasOwnProperty,Qt=(n,e)=>j3.call(n,e),kt=Array.isArray,Oc=n=>yp(n)==="[object Map]",Lb=n=>yp(n)==="[object Set]",Tt=n=>typeof n=="function",Sr=n=>typeof n=="string",Ea=n=>typeof n=="symbol",vr=n=>n!==null&&typeof n=="object",Db=n=>(vr(n)||Tt(n))&&Tt(n.then)&&Tt(n.catch),Mb=Object.prototype.toString,yp=n=>Mb.call(n),R3=n=>yp(n).slice(8,-1),Eb=n=>yp(n)==="[object Object]",W0=n=>Sr(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,th=z0(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bp=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},F3=/-(\w)/g,Ks=bp(n=>n.replace(F3,(e,t)=>t?t.toUpperCase():"")),I3=/\B([A-Z])/g,Lo=bp(n=>n.replace(I3,"-$1").toLowerCase()),wp=bp(n=>n.charAt(0).toUpperCase()+n.slice(1)),Vg=bp(n=>n?`on${wp(n)}`:""),_o=(n,e)=>!Object.is(n,e),Lf=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},Nb=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},Vm=n=>{const e=parseFloat(n);return isNaN(e)?n:e},B3=n=>{const e=Sr(n)?Number(n):NaN;return isNaN(e)?n:e};let O1;const _p=()=>O1||(O1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $n(n){if(kt(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],s=Sr(r)?V3(r):$n(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Sr(n)||vr(n))return n}const $3=/;(?![^(]*\))/g,q3=/:([^]+)/,U3=/\/\*[^]*?\*\//g;function V3(n){const e={};return n.replace(U3,"").split($3).forEach(t=>{if(t){const r=t.split(q3);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ct(n){let e="";if(Sr(n))e=n;else if(kt(n))for(let t=0;t<n.length;t++){const r=Ct(n[t]);r&&(e+=r+" ")}else if(vr(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function yn(n){if(!n)return null;let{class:e,style:t}=n;return e&&!Sr(e)&&(n.class=Ct(e)),t&&(n.style=$n(t)),n}const z3="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",H3=z0(z3);function jb(n){return!!n||n===""}const Rb=n=>!!(n&&n.__v_isRef===!0),Vt=n=>Sr(n)?n:n==null?"":kt(n)||vr(n)&&(n.toString===Mb||!Tt(n.toString))?Rb(n)?Vt(n.value):JSON.stringify(n,Fb,2):String(n),Fb=(n,e)=>Rb(e)?Fb(n,e.value):Oc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,s],i)=>(t[zg(r,i)+" =>"]=s,t),{})}:Lb(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>zg(t))}:Ea(e)?zg(e):vr(e)&&!kt(e)&&!Eb(e)?String(e):e,zg=(n,e="")=>{var t;return Ea(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Jn;class Y3{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Jn,!e&&Jn&&(this.index=(Jn.scopes||(Jn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Jn;try{return Jn=this,e()}finally{Jn=t}}}on(){Jn=this}off(){Jn=this.parent}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Ib(){return Jn}function W3(n,e=!1){Jn&&Jn.cleanups.push(n)}let mr;const Hg=new WeakSet;class Bb{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Jn&&Jn.active&&Jn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Hg.has(this)&&(Hg.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||qb(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,L1(this),Ub(this);const e=mr,t=Si;mr=this,Si=!0;try{return this.fn()}finally{Vb(this),mr=e,Si=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)K0(e);this.deps=this.depsTail=void 0,L1(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Hg.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){zm(this)&&this.run()}get dirty(){return zm(this)}}let $b=0,rh,nh;function qb(n,e=!1){if(n.flags|=8,e){n.next=nh,nh=n;return}n.next=rh,rh=n}function G0(){$b++}function X0(){if(--$b>0)return;if(nh){let e=nh;for(nh=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;rh;){let e=rh;for(rh=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function Ub(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Vb(n){let e,t=n.depsTail,r=t;for(;r;){const s=r.prevDep;r.version===-1?(r===t&&(t=s),K0(r),G3(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}n.deps=e,n.depsTail=t}function zm(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(zb(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function zb(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===wh))return;n.globalVersion=wh;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!zm(n)){n.flags&=-3;return}const t=mr,r=Si;mr=n,Si=!0;try{Ub(n);const s=n.fn(n._value);(e.version===0||_o(s,n._value))&&(n._value=s,e.version++)}catch(s){throw e.version++,s}finally{mr=t,Si=r,Vb(n),n.flags&=-3}}function K0(n,e=!1){const{dep:t,prevSub:r,nextSub:s}=n;if(r&&(r.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)K0(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function G3(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Si=!0;const Hb=[];function Do(){Hb.push(Si),Si=!1}function Mo(){const n=Hb.pop();Si=n===void 0?!0:n}function L1(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=mr;mr=void 0;try{e()}finally{mr=t}}}let wh=0;class X3{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class J0{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!mr||!Si||mr===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==mr)t=this.activeLink=new X3(mr,this),mr.deps?(t.prevDep=mr.depsTail,mr.depsTail.nextDep=t,mr.depsTail=t):mr.deps=mr.depsTail=t,Yb(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=mr.depsTail,t.nextDep=void 0,mr.depsTail.nextDep=t,mr.depsTail=t,mr.deps===t&&(mr.deps=r)}return t}trigger(e){this.version++,wh++,this.notify(e)}notify(e){G0();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{X0()}}}function Yb(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Yb(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Hf=new WeakMap,hl=Symbol(""),Hm=Symbol(""),_h=Symbol("");function Fn(n,e,t){if(Si&&mr){let r=Hf.get(n);r||Hf.set(n,r=new Map);let s=r.get(t);s||(r.set(t,s=new J0),s.map=r,s.key=t),s.track()}}function _a(n,e,t,r,s,i){const a=Hf.get(n);if(!a){wh++;return}const o=l=>{l&&l.trigger()};if(G0(),e==="clear")a.forEach(o);else{const l=kt(n),u=l&&W0(t);if(l&&t==="length"){const c=Number(r);a.forEach((h,p)=>{(p==="length"||p===_h||!Ea(p)&&p>=c)&&o(h)})}else switch((t!==void 0||a.has(void 0))&&o(a.get(t)),u&&o(a.get(_h)),e){case"add":l?u&&o(a.get("length")):(o(a.get(hl)),Oc(n)&&o(a.get(Hm)));break;case"delete":l||(o(a.get(hl)),Oc(n)&&o(a.get(Hm)));break;case"set":Oc(n)&&o(a.get(hl));break}}X0()}function K3(n,e){const t=Hf.get(n);return t&&t.get(e)}function ec(n){const e=Wt(n);return e===n?e:(Fn(e,"iterate",_h),Xs(n)?e:e.map(In))}function xp(n){return Fn(n=Wt(n),"iterate",_h),n}const J3={__proto__:null,[Symbol.iterator](){return Yg(this,Symbol.iterator,In)},concat(...n){return ec(this).concat(...n.map(e=>kt(e)?ec(e):e))},entries(){return Yg(this,"entries",n=>(n[1]=In(n[1]),n))},every(n,e){return da(this,"every",n,e,void 0,arguments)},filter(n,e){return da(this,"filter",n,e,t=>t.map(In),arguments)},find(n,e){return da(this,"find",n,e,In,arguments)},findIndex(n,e){return da(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return da(this,"findLast",n,e,In,arguments)},findLastIndex(n,e){return da(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return da(this,"forEach",n,e,void 0,arguments)},includes(...n){return Wg(this,"includes",n)},indexOf(...n){return Wg(this,"indexOf",n)},join(n){return ec(this).join(n)},lastIndexOf(...n){return Wg(this,"lastIndexOf",n)},map(n,e){return da(this,"map",n,e,void 0,arguments)},pop(){return $u(this,"pop")},push(...n){return $u(this,"push",n)},reduce(n,...e){return D1(this,"reduce",n,e)},reduceRight(n,...e){return D1(this,"reduceRight",n,e)},shift(){return $u(this,"shift")},some(n,e){return da(this,"some",n,e,void 0,arguments)},splice(...n){return $u(this,"splice",n)},toReversed(){return ec(this).toReversed()},toSorted(n){return ec(this).toSorted(n)},toSpliced(...n){return ec(this).toSpliced(...n)},unshift(...n){return $u(this,"unshift",n)},values(){return Yg(this,"values",In)}};function Yg(n,e,t){const r=xp(n),s=r[e]();return r!==n&&!Xs(n)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=t(i.value)),i}),s}const Q3=Array.prototype;function da(n,e,t,r,s,i){const a=xp(n),o=a!==n&&!Xs(n),l=a[e];if(l!==Q3[e]){const h=l.apply(n,i);return o?In(h):h}let u=t;a!==n&&(o?u=function(h,p){return t.call(this,In(h),p,n)}:t.length>2&&(u=function(h,p){return t.call(this,h,p,n)}));const c=l.call(a,u,r);return o&&s?s(c):c}function D1(n,e,t,r){const s=xp(n);let i=t;return s!==n&&(Xs(n)?t.length>3&&(i=function(a,o,l){return t.call(this,a,o,l,n)}):i=function(a,o,l){return t.call(this,a,In(o),l,n)}),s[e](i,...r)}function Wg(n,e,t){const r=Wt(n);Fn(r,"iterate",_h);const s=r[e](...t);return(s===-1||s===!1)&&ev(t[0])?(t[0]=Wt(t[0]),r[e](...t)):s}function $u(n,e,t=[]){Do(),G0();const r=Wt(n)[e].apply(n,t);return X0(),Mo(),r}const Z3=z0("__proto__,__v_isRef,__isVue"),Wb=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Ea));function eS(n){Ea(n)||(n=String(n));const e=Wt(this);return Fn(e,"has",n),e.hasOwnProperty(n)}class Gb{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return i;if(t==="__v_raw")return r===(s?i?uS:Qb:i?Jb:Kb).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=kt(e);if(!s){let l;if(a&&(l=J3[t]))return l;if(t==="hasOwnProperty")return eS}const o=Reflect.get(e,t,Qr(e)?e:r);return(Ea(t)?Wb.has(t):Z3(t))||(s||Fn(e,"get",t),i)?o:Qr(o)?a&&W0(t)?o:o.value:vr(o)?s?e5(o):Na(o):o}}class Xb extends Gb{constructor(e=!1){super(!1,e)}set(e,t,r,s){let i=e[t];if(!this._isShallow){const l=ml(i);if(!Xs(r)&&!ml(r)&&(i=Wt(i),r=Wt(r)),!kt(e)&&Qr(i)&&!Qr(r))return l?!1:(i.value=r,!0)}const a=kt(e)&&W0(t)?Number(t)<e.length:Qt(e,t),o=Reflect.set(e,t,r,Qr(e)?e:s);return e===Wt(s)&&(a?_o(r,i)&&_a(e,"set",t,r):_a(e,"add",t,r)),o}deleteProperty(e,t){const r=Qt(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&r&&_a(e,"delete",t,void 0),s}has(e,t){const r=Reflect.has(e,t);return(!Ea(t)||!Wb.has(t))&&Fn(e,"has",t),r}ownKeys(e){return Fn(e,"iterate",kt(e)?"length":hl),Reflect.ownKeys(e)}}class tS extends Gb{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const rS=new Xb,nS=new tS,sS=new Xb(!0);const Ym=n=>n,qd=n=>Reflect.getPrototypeOf(n);function iS(n,e,t){return function(...r){const s=this.__v_raw,i=Wt(s),a=Oc(i),o=n==="entries"||n===Symbol.iterator&&a,l=n==="keys"&&a,u=s[n](...r),c=t?Ym:e?Wm:In;return!e&&Fn(i,"iterate",l?Hm:hl),{next(){const{value:h,done:p}=u.next();return p?{value:h,done:p}:{value:o?[c(h[0]),c(h[1])]:c(h),done:p}},[Symbol.iterator](){return this}}}}function Ud(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function aS(n,e){const t={get(s){const i=this.__v_raw,a=Wt(i),o=Wt(s);n||(_o(s,o)&&Fn(a,"get",s),Fn(a,"get",o));const{has:l}=qd(a),u=e?Ym:n?Wm:In;if(l.call(a,s))return u(i.get(s));if(l.call(a,o))return u(i.get(o));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!n&&Fn(Wt(s),"iterate",hl),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=Wt(i),o=Wt(s);return n||(_o(s,o)&&Fn(a,"has",s),Fn(a,"has",o)),s===o?i.has(s):i.has(s)||i.has(o)},forEach(s,i){const a=this,o=a.__v_raw,l=Wt(o),u=e?Ym:n?Wm:In;return!n&&Fn(l,"iterate",hl),o.forEach((c,h)=>s.call(i,u(c),u(h),a))}};return wn(t,n?{add:Ud("add"),set:Ud("set"),delete:Ud("delete"),clear:Ud("clear")}:{add(s){!e&&!Xs(s)&&!ml(s)&&(s=Wt(s));const i=Wt(this);return qd(i).has.call(i,s)||(i.add(s),_a(i,"add",s,s)),this},set(s,i){!e&&!Xs(i)&&!ml(i)&&(i=Wt(i));const a=Wt(this),{has:o,get:l}=qd(a);let u=o.call(a,s);u||(s=Wt(s),u=o.call(a,s));const c=l.call(a,s);return a.set(s,i),u?_o(i,c)&&_a(a,"set",s,i):_a(a,"add",s,i),this},delete(s){const i=Wt(this),{has:a,get:o}=qd(i);let l=a.call(i,s);l||(s=Wt(s),l=a.call(i,s)),o&&o.call(i,s);const u=i.delete(s);return l&&_a(i,"delete",s,void 0),u},clear(){const s=Wt(this),i=s.size!==0,a=s.clear();return i&&_a(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=iS(s,n,e)}),t}function Q0(n,e){const t=aS(n,e);return(r,s,i)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?r:Reflect.get(Qt(t,s)&&s in r?t:r,s,i)}const oS={get:Q0(!1,!1)},lS={get:Q0(!1,!0)},cS={get:Q0(!0,!1)};const Kb=new WeakMap,Jb=new WeakMap,Qb=new WeakMap,uS=new WeakMap;function hS(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function dS(n){return n.__v_skip||!Object.isExtensible(n)?0:hS(R3(n))}function Na(n){return ml(n)?n:Z0(n,!1,rS,oS,Kb)}function Zb(n){return Z0(n,!1,sS,lS,Jb)}function e5(n){return Z0(n,!0,nS,cS,Qb)}function Z0(n,e,t,r,s){if(!vr(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=s.get(n);if(i)return i;const a=dS(n);if(a===0)return n;const o=new Proxy(n,a===2?r:t);return s.set(n,o),o}function Lc(n){return ml(n)?Lc(n.__v_raw):!!(n&&n.__v_isReactive)}function ml(n){return!!(n&&n.__v_isReadonly)}function Xs(n){return!!(n&&n.__v_isShallow)}function ev(n){return n?!!n.__v_raw:!1}function Wt(n){const e=n&&n.__v_raw;return e?Wt(e):n}function fS(n){return!Qt(n,"__v_skip")&&Object.isExtensible(n)&&Nb(n,"__v_skip",!0),n}const In=n=>vr(n)?Na(n):n,Wm=n=>vr(n)?e5(n):n;function Qr(n){return n?n.__v_isRef===!0:!1}function $e(n){return t5(n,!1)}function pS(n){return t5(n,!0)}function t5(n,e){return Qr(n)?n:new gS(n,e)}class gS{constructor(e,t){this.dep=new J0,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Wt(e),this._value=t?e:In(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Xs(e)||ml(e);e=r?e:Wt(e),_o(e,t)&&(this._rawValue=e,this._value=r?e:In(e),this.dep.trigger())}}function ue(n){return Qr(n)?n.value:n}function mS(n){return Tt(n)?n():ue(n)}const vS={get:(n,e,t)=>e==="__v_raw"?n:ue(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const s=n[e];return Qr(s)&&!Qr(t)?(s.value=t,!0):Reflect.set(n,e,t,r)}};function r5(n){return Lc(n)?n:new Proxy(n,vS)}class yS{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return K3(Wt(this._object),this._key)}}class bS{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function xh(n,e,t){return Qr(n)?n:Tt(n)?new bS(n):vr(n)&&arguments.length>1?wS(n,e,t):$e(n)}function wS(n,e,t){const r=n[e];return Qr(r)?r:new yS(n,e,t)}class _S{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new J0(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=wh-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&mr!==this)return qb(this,!0),!0}get value(){const e=this.dep.track();return zb(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function xS(n,e,t=!1){let r,s;return Tt(n)?r=n:(r=n.get,s=n.set),new _S(r,s,t)}const Vd={},Yf=new WeakMap;let el;function SS(n,e=!1,t=el){if(t){let r=Yf.get(t);r||Yf.set(t,r=[]),r.push(n)}}function kS(n,e,t=hr){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:o,call:l}=t,u=I=>s?I:Xs(I)||s===!1||s===0?xa(I,1):xa(I);let c,h,p,f,v=!1,b=!1;if(Qr(n)?(h=()=>n.value,v=Xs(n)):Lc(n)?(h=()=>u(n),v=!0):kt(n)?(b=!0,v=n.some(I=>Lc(I)||Xs(I)),h=()=>n.map(I=>{if(Qr(I))return I.value;if(Lc(I))return u(I);if(Tt(I))return l?l(I,2):I()})):Tt(n)?e?h=l?()=>l(n,2):n:h=()=>{if(p){Do();try{p()}finally{Mo()}}const I=el;el=c;try{return l?l(n,3,[f]):n(f)}finally{el=I}}:h=Ji,e&&s){const I=h,Y=s===!0?1/0:s;h=()=>xa(I(),Y)}const x=Ib(),w=()=>{c.stop(),x&&x.active&&Y0(x.effects,c)};if(i&&e){const I=e;e=(...Y)=>{I(...Y),w()}}let k=b?new Array(n.length).fill(Vd):Vd;const T=I=>{if(!(!(c.flags&1)||!c.dirty&&!I))if(e){const Y=c.run();if(s||v||(b?Y.some((Q,H)=>_o(Q,k[H])):_o(Y,k))){p&&p();const Q=el;el=c;try{const H=[Y,k===Vd?void 0:b&&k[0]===Vd?[]:k,f];l?l(e,3,H):e(...H),k=Y}finally{el=Q}}}else c.run()};return o&&o(T),c=new Bb(h),c.scheduler=a?()=>a(T,!1):T,f=I=>SS(I,!1,c),p=c.onStop=()=>{const I=Yf.get(c);if(I){if(l)l(I,4);else for(const Y of I)Y();Yf.delete(c)}},e?r?T(!0):k=c.run():a?a(T.bind(null,!0),!0):c.run(),w.pause=c.pause.bind(c),w.resume=c.resume.bind(c),w.stop=w,w}function xa(n,e=1/0,t){if(e<=0||!vr(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,Qr(n))xa(n.value,e,t);else if(kt(n))for(let r=0;r<n.length;r++)xa(n[r],e,t);else if(Lb(n)||Oc(n))n.forEach(r=>{xa(r,e,t)});else if(Eb(n)){for(const r in n)xa(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&xa(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Uh(n,e,t,r){try{return r?n(...r):n()}catch(s){Sp(s,e,t)}}function Ai(n,e,t,r){if(Tt(n)){const s=Uh(n,e,t,r);return s&&Db(s)&&s.catch(i=>{Sp(i,e,t)}),s}if(kt(n)){const s=[];for(let i=0;i<n.length;i++)s.push(Ai(n[i],e,t,r));return s}}function Sp(n,e,t,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||hr;if(e){let o=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;o;){const c=o.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](n,l,u)===!1)return}o=o.parent}if(i){Do(),Uh(i,null,10,[n,l,u]),Mo();return}}CS(n,t,s,r,a)}function CS(n,e,t,r=!0,s=!1){if(s)throw n;console.error(n)}const Zn=[];let Vi=-1;const Dc=[];let co=null,gc=0;const n5=Promise.resolve();let Wf=null;function is(n){const e=Wf||n5;return n?e.then(this?n.bind(this):n):e}function AS(n){let e=Vi+1,t=Zn.length;for(;e<t;){const r=e+t>>>1,s=Zn[r],i=Sh(s);i<n||i===n&&s.flags&2?e=r+1:t=r}return e}function tv(n){if(!(n.flags&1)){const e=Sh(n),t=Zn[Zn.length-1];!t||!(n.flags&2)&&e>=Sh(t)?Zn.push(n):Zn.splice(AS(e),0,n),n.flags|=1,s5()}}function s5(){Wf||(Wf=n5.then(a5))}function TS(n){kt(n)?Dc.push(...n):co&&n.id===-1?co.splice(gc+1,0,n):n.flags&1||(Dc.push(n),n.flags|=1),s5()}function M1(n,e,t=Vi+1){for(;t<Zn.length;t++){const r=Zn[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Zn.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function i5(n){if(Dc.length){const e=[...new Set(Dc)].sort((t,r)=>Sh(t)-Sh(r));if(Dc.length=0,co){co.push(...e);return}for(co=e,gc=0;gc<co.length;gc++){const t=co[gc];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}co=null,gc=0}}const Sh=n=>n.id==null?n.flags&2?-1:1/0:n.id;function a5(n){try{for(Vi=0;Vi<Zn.length;Vi++){const e=Zn[Vi];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Uh(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Vi<Zn.length;Vi++){const e=Zn[Vi];e&&(e.flags&=-2)}Vi=-1,Zn.length=0,i5(),Wf=null,(Zn.length||Dc.length)&&a5()}}let bn=null,o5=null;function Gf(n){const e=bn;return bn=n,o5=n&&n.type.__scopeId||null,e}function mt(n,e=bn,t){if(!e||n._n)return n;const r=(...s)=>{r._d&&Y1(-1);const i=Gf(e);let a;try{a=n(...s)}finally{Gf(i),r._d&&Y1(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function rn(n,e){if(bn===null)return n;const t=Op(bn),r=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,o,l=hr]=e[s];i&&(Tt(i)&&(i={mounted:i,updated:i}),i.deep&&xa(a),r.push({dir:i,instance:t,value:a,oldValue:void 0,arg:o,modifiers:l}))}return n}function Xo(n,e,t,r){const s=n.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const o=s[a];i&&(o.oldValue=i[a].value);let l=o.dir[r];l&&(Do(),Ai(l,t,8,[n.el,o,n,e]),Mo())}}const l5=Symbol("_vte"),c5=n=>n.__isTeleport,sh=n=>n&&(n.disabled||n.disabled===""),E1=n=>n&&(n.defer||n.defer===""),N1=n=>typeof SVGElement<"u"&&n instanceof SVGElement,j1=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,Gm=(n,e)=>{const t=n&&n.to;return Sr(t)?e?e(t):null:t},u5={name:"Teleport",__isTeleport:!0,process(n,e,t,r,s,i,a,o,l,u){const{mc:c,pc:h,pbc:p,o:{insert:f,querySelector:v,createText:b,createComment:x}}=u,w=sh(e.props);let{shapeFlag:k,children:T,dynamicChildren:I}=e;if(n==null){const Y=e.el=b(""),Q=e.anchor=b("");f(Y,t,r),f(Q,t,r);const H=(U,K)=>{k&16&&(s&&s.isCE&&(s.ce._teleportTarget=U),c(T,U,K,s,i,a,o,l))},j=()=>{const U=e.target=Gm(e.props,v),K=h5(U,e,b,f);U&&(a!=="svg"&&N1(U)?a="svg":a!=="mathml"&&j1(U)&&(a="mathml"),w||(H(U,K),Df(e,!1)))};w&&(H(t,Q),Df(e,!0)),E1(e.props)?Kn(()=>{j(),e.el.__isMounted=!0},i):j()}else{if(E1(e.props)&&!n.el.__isMounted){Kn(()=>{u5.process(n,e,t,r,s,i,a,o,l,u),delete n.el.__isMounted},i);return}e.el=n.el,e.targetStart=n.targetStart;const Y=e.anchor=n.anchor,Q=e.target=n.target,H=e.targetAnchor=n.targetAnchor,j=sh(n.props),U=j?t:Q,K=j?Y:H;if(a==="svg"||N1(Q)?a="svg":(a==="mathml"||j1(Q))&&(a="mathml"),I?(p(n.dynamicChildren,I,U,s,i,a,o),nv(n,e,!0)):l||h(n,e,U,K,s,i,a,o,!1),w)j?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):zd(e,t,Y,u,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const D=e.target=Gm(e.props,v);D&&zd(e,D,null,u,0)}else j&&zd(e,Q,H,u,1);Df(e,w)}},remove(n,e,t,{um:r,o:{remove:s}},i){const{shapeFlag:a,children:o,anchor:l,targetStart:u,targetAnchor:c,target:h,props:p}=n;if(h&&(s(u),s(c)),i&&s(l),a&16){const f=i||!sh(p);for(let v=0;v<o.length;v++){const b=o[v];r(b,e,t,f,!!b.dynamicChildren)}}},move:zd,hydrate:PS};function zd(n,e,t,{o:{insert:r},m:s},i=2){i===0&&r(n.targetAnchor,e,t);const{el:a,anchor:o,shapeFlag:l,children:u,props:c}=n,h=i===2;if(h&&r(a,e,t),(!h||sh(c))&&l&16)for(let p=0;p<u.length;p++)s(u[p],e,t,2);h&&r(o,e,t)}function PS(n,e,t,r,s,i,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:u,createText:c}},h){const p=e.target=Gm(e.props,l);if(p){const f=sh(e.props),v=p._lpa||p.firstChild;if(e.shapeFlag&16)if(f)e.anchor=h(a(n),e,o(n),t,r,s,i),e.targetStart=v,e.targetAnchor=v&&a(v);else{e.anchor=a(n);let b=v;for(;b;){if(b&&b.nodeType===8){if(b.data==="teleport start anchor")e.targetStart=b;else if(b.data==="teleport anchor"){e.targetAnchor=b,p._lpa=e.targetAnchor&&a(e.targetAnchor);break}}b=a(b)}e.targetAnchor||h5(p,e,c,u),h(v&&a(v),e,p,t,r,s,i)}Df(e,f)}return e.anchor&&a(e.anchor)}const OS=u5;function Df(n,e){const t=n.ctx;if(t&&t.ut){let r,s;for(e?(r=n.el,s=n.anchor):(r=n.targetStart,s=n.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function h5(n,e,t,r){const s=e.targetStart=t(""),i=e.targetAnchor=t("");return s[l5]=i,n&&(r(s,n),r(i,n)),i}const uo=Symbol("_leaveCb"),Hd=Symbol("_enterCb");function LS(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return dr(()=>{n.isMounted=!0}),w5(()=>{n.isUnmounting=!0}),n}const Vs=[Function,Array],d5={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Vs,onEnter:Vs,onAfterEnter:Vs,onEnterCancelled:Vs,onBeforeLeave:Vs,onLeave:Vs,onAfterLeave:Vs,onLeaveCancelled:Vs,onBeforeAppear:Vs,onAppear:Vs,onAfterAppear:Vs,onAppearCancelled:Vs},f5=n=>{const e=n.subTree;return e.component?f5(e.component):e},DS={name:"BaseTransition",props:d5,setup(n,{slots:e}){const t=iv(),r=LS();return()=>{const s=e.default&&m5(e.default(),!0);if(!s||!s.length)return;const i=p5(s),a=Wt(n),{mode:o}=a;if(r.isLeaving)return Gg(i);const l=R1(i);if(!l)return Gg(i);let u=Xm(l,a,r,t,h=>u=h);l.type!==ts&&kh(l,u);let c=t.subTree&&R1(t.subTree);if(c&&c.type!==ts&&!sl(l,c)&&f5(t).type!==ts){let h=Xm(c,a,r,t);if(kh(c,h),o==="out-in"&&l.type!==ts)return r.isLeaving=!0,h.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete h.afterLeave,c=void 0},Gg(i);o==="in-out"&&l.type!==ts?h.delayLeave=(p,f,v)=>{const b=g5(r,c);b[String(c.key)]=c,p[uo]=()=>{f(),p[uo]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{v(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return i}}};function p5(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==ts){e=t;break}}return e}const MS=DS;function g5(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function Xm(n,e,t,r,s){const{appear:i,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:p,onLeave:f,onAfterLeave:v,onLeaveCancelled:b,onBeforeAppear:x,onAppear:w,onAfterAppear:k,onAppearCancelled:T}=e,I=String(n.key),Y=g5(t,n),Q=(U,K)=>{U&&Ai(U,r,9,K)},H=(U,K)=>{const D=K[1];Q(U,K),kt(U)?U.every(O=>O.length<=1)&&D():U.length<=1&&D()},j={mode:a,persisted:o,beforeEnter(U){let K=l;if(!t.isMounted)if(i)K=x||l;else return;U[uo]&&U[uo](!0);const D=Y[I];D&&sl(n,D)&&D.el[uo]&&D.el[uo](),Q(K,[U])},enter(U){let K=u,D=c,O=h;if(!t.isMounted)if(i)K=w||u,D=k||c,O=T||h;else return;let J=!1;const M=U[Hd]=ee=>{J||(J=!0,ee?Q(O,[U]):Q(D,[U]),j.delayedLeave&&j.delayedLeave(),U[Hd]=void 0)};K?H(K,[U,M]):M()},leave(U,K){const D=String(n.key);if(U[Hd]&&U[Hd](!0),t.isUnmounting)return K();Q(p,[U]);let O=!1;const J=U[uo]=M=>{O||(O=!0,K(),M?Q(b,[U]):Q(v,[U]),U[uo]=void 0,Y[D]===n&&delete Y[D])};Y[D]=n,f?H(f,[U,J]):J()},clone(U){const K=Xm(U,e,t,r,s);return s&&s(K),K}};return j}function Gg(n){if(kp(n))return n=ko(n),n.children=null,n}function R1(n){if(!kp(n))return c5(n.type)&&n.children?p5(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Tt(t.default))return t.default()}}function kh(n,e){n.shapeFlag&6&&n.component?(n.transition=e,kh(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function m5(n,e=!1,t){let r=[],s=0;for(let i=0;i<n.length;i++){let a=n[i];const o=t==null?a.key:String(t)+String(a.key!=null?a.key:i);a.type===pt?(a.patchFlag&128&&s++,r=r.concat(m5(a.children,e,o))):(e||a.type!==ts)&&r.push(o!=null?ko(a,{key:o}):a)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function ln(n,e){return Tt(n)?wn({name:n.name},e,{setup:n}):n}function v5(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Xf(n,e,t,r,s=!1){if(kt(n)){n.forEach((v,b)=>Xf(v,e&&(kt(e)?e[b]:e),t,r,s));return}if(Mc(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Xf(n,e,t,r.component.subTree);return}const i=r.shapeFlag&4?Op(r.component):r.el,a=s?null:i,{i:o,r:l}=n,u=e&&e.r,c=o.refs===hr?o.refs={}:o.refs,h=o.setupState,p=Wt(h),f=h===hr?()=>!1:v=>Qt(p,v);if(u!=null&&u!==l&&(Sr(u)?(c[u]=null,f(u)&&(h[u]=null)):Qr(u)&&(u.value=null)),Tt(l))Uh(l,o,12,[a,c]);else{const v=Sr(l),b=Qr(l);if(v||b){const x=()=>{if(n.f){const w=v?f(l)?h[l]:c[l]:l.value;s?kt(w)&&Y0(w,i):kt(w)?w.includes(i)||w.push(i):v?(c[l]=[i],f(l)&&(h[l]=c[l])):(l.value=[i],n.k&&(c[n.k]=l.value))}else v?(c[l]=a,f(l)&&(h[l]=a)):b&&(l.value=a,n.k&&(c[n.k]=a))};a?(x.id=-1,Kn(x,t)):x()}}}_p().requestIdleCallback;_p().cancelIdleCallback;const Mc=n=>!!n.type.__asyncLoader,kp=n=>n.type.__isKeepAlive;function ES(n,e){y5(n,"a",e)}function NS(n,e){y5(n,"da",e)}function y5(n,e,t=An){const r=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(Cp(e,r,t),t){let s=t.parent;for(;s&&s.parent;)kp(s.parent.vnode)&&jS(r,e,t,s),s=s.parent}}function jS(n,e,t,r){const s=Cp(e,n,r,!0);Ra(()=>{Y0(r[e],s)},t)}function Cp(n,e,t=An,r=!1){if(t){const s=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...a)=>{Do();const o=Vh(t),l=Ai(e,t,n,a);return o(),Mo(),l});return r?s.unshift(i):s.push(i),i}}const ja=n=>(e,t=An)=>{(!Th||n==="sp")&&Cp(n,(...r)=>e(...r),t)},RS=ja("bm"),dr=ja("m"),b5=ja("bu"),FS=ja("u"),w5=ja("bum"),Ra=ja("um"),IS=ja("sp"),BS=ja("rtg"),$S=ja("rtc");function qS(n,e=An){Cp("ec",n,e)}const _5="components";function Kf(n,e){return S5(_5,n,!0,e)||n}const x5=Symbol.for("v-ndc");function Ap(n){return Sr(n)?S5(_5,n,!1)||n:n||x5}function S5(n,e,t=!0,r=!1){const s=bn||An;if(s){const i=s.type;{const o=Ck(i,!1);if(o&&(o===e||o===Ks(e)||o===wp(Ks(e))))return i}const a=F1(s[n]||i[n],e)||F1(s.appContext[n],e);return!a&&r?i:a}}function F1(n,e){return n&&(n[e]||n[Ks(e)]||n[wp(Ks(e))])}function nr(n,e,t,r){let s;const i=t,a=kt(n);if(a||Sr(n)){const o=a&&Lc(n);let l=!1;o&&(l=!Xs(n),n=xp(n)),s=new Array(n.length);for(let u=0,c=n.length;u<c;u++)s[u]=e(l?In(n[u]):n[u],u,void 0,i)}else if(typeof n=="number"){s=new Array(n);for(let o=0;o<n;o++)s[o]=e(o+1,o,void 0,i)}else if(vr(n))if(n[Symbol.iterator])s=Array.from(n,(o,l)=>e(o,l,void 0,i));else{const o=Object.keys(n);s=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];s[l]=e(n[c],c,l,i)}}else s=[];return s}function qn(n,e){for(let t=0;t<e.length;t++){const r=e[t];if(kt(r))for(let s=0;s<r.length;s++)n[r[s].name]=r[s].fn;else r&&(n[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return n}function ct(n,e,t={},r,s){if(bn.ce||bn.parent&&Mc(bn.parent)&&bn.parent.ce)return e!=="default"&&(t.name=e),_e(),xt(pt,null,[ot("slot",t,r)],64);let i=n[e];i&&i._c&&(i._d=!1),_e();const a=i&&k5(i(t)),o=t.key||a&&a.key,l=xt(pt,{key:(o&&!Ea(o)?o:`_${e}`)+""},a||[],a&&n._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function k5(n){return n.some(e=>Ah(e)?!(e.type===ts||e.type===pt&&!k5(e.children)):!0)?n:null}const Km=n=>n?Y5(n)?Op(n):Km(n.parent):null,ih=wn(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Km(n.parent),$root:n=>Km(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>T5(n),$forceUpdate:n=>n.f||(n.f=()=>{tv(n.update)}),$nextTick:n=>n.n||(n.n=is.bind(n.proxy)),$watch:n=>ck.bind(n)}),Xg=(n,e)=>n!==hr&&!n.__isScriptSetup&&Qt(n,e),US={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:s,props:i,accessCache:a,type:o,appContext:l}=n;let u;if(e[0]!=="$"){const f=a[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return t[e];case 3:return i[e]}else{if(Xg(r,e))return a[e]=1,r[e];if(s!==hr&&Qt(s,e))return a[e]=2,s[e];if((u=n.propsOptions[0])&&Qt(u,e))return a[e]=3,i[e];if(t!==hr&&Qt(t,e))return a[e]=4,t[e];Jm&&(a[e]=0)}}const c=ih[e];let h,p;if(c)return e==="$attrs"&&Fn(n.attrs,"get",""),c(n);if((h=o.__cssModules)&&(h=h[e]))return h;if(t!==hr&&Qt(t,e))return a[e]=4,t[e];if(p=l.config.globalProperties,Qt(p,e))return p[e]},set({_:n},e,t){const{data:r,setupState:s,ctx:i}=n;return Xg(s,e)?(s[e]=t,!0):r!==hr&&Qt(r,e)?(r[e]=t,!0):Qt(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:s,propsOptions:i}},a){let o;return!!t[a]||n!==hr&&Qt(n,a)||Xg(e,a)||(o=i[0])&&Qt(o,a)||Qt(r,a)||Qt(ih,a)||Qt(s.config.globalProperties,a)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Qt(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function wl(){return C5().slots}function VS(){return C5().attrs}function C5(){const n=iv();return n.setupContext||(n.setupContext=G5(n))}function I1(n){return kt(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Jm=!0;function zS(n){const e=T5(n),t=n.proxy,r=n.ctx;Jm=!1,e.beforeCreate&&B1(e.beforeCreate,n,"bc");const{data:s,computed:i,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:h,mounted:p,beforeUpdate:f,updated:v,activated:b,deactivated:x,beforeDestroy:w,beforeUnmount:k,destroyed:T,unmounted:I,render:Y,renderTracked:Q,renderTriggered:H,errorCaptured:j,serverPrefetch:U,expose:K,inheritAttrs:D,components:O,directives:J,filters:M}=e;if(u&&HS(u,r,null),a)for(const ae in a){const ne=a[ae];Tt(ne)&&(r[ae]=ne.bind(t))}if(s){const ae=s.call(t,t);vr(ae)&&(n.data=Na(ae))}if(Jm=!0,i)for(const ae in i){const ne=i[ae],oe=Tt(ne)?ne.bind(t,t):Tt(ne.get)?ne.get.bind(t,t):Ji,de=!Tt(ne)&&Tt(ne.set)?ne.set.bind(t):Ji,fe=He({get:oe,set:de});Object.defineProperty(r,ae,{enumerable:!0,configurable:!0,get:()=>fe.value,set:P=>fe.value=P})}if(o)for(const ae in o)A5(o[ae],r,t,ae);if(l){const ae=Tt(l)?l.call(t):l;Reflect.ownKeys(ae).forEach(ne=>{ah(ne,ae[ne])})}c&&B1(c,n,"c");function W(ae,ne){kt(ne)?ne.forEach(oe=>ae(oe.bind(t))):ne&&ae(ne.bind(t))}if(W(RS,h),W(dr,p),W(b5,f),W(FS,v),W(ES,b),W(NS,x),W(qS,j),W($S,Q),W(BS,H),W(w5,k),W(Ra,I),W(IS,U),kt(K))if(K.length){const ae=n.exposed||(n.exposed={});K.forEach(ne=>{Object.defineProperty(ae,ne,{get:()=>t[ne],set:oe=>t[ne]=oe})})}else n.exposed||(n.exposed={});Y&&n.render===Ji&&(n.render=Y),D!=null&&(n.inheritAttrs=D),O&&(n.components=O),J&&(n.directives=J),U&&v5(n)}function HS(n,e,t=Ji){kt(n)&&(n=Qm(n));for(const r in n){const s=n[r];let i;vr(s)?"default"in s?i=ms(s.from||r,s.default,!0):i=ms(s.from||r):i=ms(s),Qr(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[r]=i}}function B1(n,e,t){Ai(kt(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function A5(n,e,t,r){let s=r.includes(".")?$5(t,r):()=>t[r];if(Sr(n)){const i=e[n];Tt(i)&&Un(s,i)}else if(Tt(n))Un(s,n.bind(t));else if(vr(n))if(kt(n))n.forEach(i=>A5(i,e,t,r));else{const i=Tt(n.handler)?n.handler.bind(t):e[n.handler];Tt(i)&&Un(s,i,n)}}function T5(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=n.appContext,o=i.get(e);let l;return o?l=o:!s.length&&!t&&!r?l=e:(l={},s.length&&s.forEach(u=>Jf(l,u,a,!0)),Jf(l,e,a)),vr(e)&&i.set(e,l),l}function Jf(n,e,t,r=!1){const{mixins:s,extends:i}=e;i&&Jf(n,i,t,!0),s&&s.forEach(a=>Jf(n,a,t,!0));for(const a in e)if(!(r&&a==="expose")){const o=YS[a]||t&&t[a];n[a]=o?o(n[a],e[a]):e[a]}return n}const YS={data:$1,props:q1,emits:q1,methods:Qu,computed:Qu,beforeCreate:Wn,created:Wn,beforeMount:Wn,mounted:Wn,beforeUpdate:Wn,updated:Wn,beforeDestroy:Wn,beforeUnmount:Wn,destroyed:Wn,unmounted:Wn,activated:Wn,deactivated:Wn,errorCaptured:Wn,serverPrefetch:Wn,components:Qu,directives:Qu,watch:GS,provide:$1,inject:WS};function $1(n,e){return e?n?function(){return wn(Tt(n)?n.call(this,this):n,Tt(e)?e.call(this,this):e)}:e:n}function WS(n,e){return Qu(Qm(n),Qm(e))}function Qm(n){if(kt(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Wn(n,e){return n?[...new Set([].concat(n,e))]:e}function Qu(n,e){return n?wn(Object.create(null),n,e):e}function q1(n,e){return n?kt(n)&&kt(e)?[...new Set([...n,...e])]:wn(Object.create(null),I1(n),I1(e??{})):e}function GS(n,e){if(!n)return e;if(!e)return n;const t=wn(Object.create(null),n);for(const r in e)t[r]=Wn(n[r],e[r]);return t}function P5(){return{app:null,config:{isNativeTag:N3,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let XS=0;function KS(n,e){return function(r,s=null){Tt(r)||(r=wn({},r)),s!=null&&!vr(s)&&(s=null);const i=P5(),a=new WeakSet,o=[];let l=!1;const u=i.app={_uid:XS++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Tk,get config(){return i.config},set config(c){},use(c,...h){return a.has(c)||(c&&Tt(c.install)?(a.add(c),c.install(u,...h)):Tt(c)&&(a.add(c),c(u,...h))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,h){return h?(i.components[c]=h,u):i.components[c]},directive(c,h){return h?(i.directives[c]=h,u):i.directives[c]},mount(c,h,p){if(!l){const f=u._ceVNode||ot(r,s);return f.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),n(f,c,p),l=!0,u._container=c,c.__vue_app__=u,Op(f.component)}},onUnmount(c){o.push(c)},unmount(){l&&(Ai(o,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(c,h){return i.provides[c]=h,u},runWithContext(c){const h=Ec;Ec=u;try{return c()}finally{Ec=h}}};return u}}let Ec=null;function ah(n,e){if(An){let t=An.provides;const r=An.parent&&An.parent.provides;r===t&&(t=An.provides=Object.create(r)),t[n]=e}}function ms(n,e,t=!1){const r=An||bn;if(r||Ec){const s=Ec?Ec._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return t&&Tt(e)?e.call(r&&r.proxy):e}}const O5={},L5=()=>Object.create(O5),D5=n=>Object.getPrototypeOf(n)===O5;function JS(n,e,t,r=!1){const s={},i=L5();n.propsDefaults=Object.create(null),M5(n,e,s,i);for(const a in n.propsOptions[0])a in s||(s[a]=void 0);t?n.props=r?s:Zb(s):n.type.props?n.props=s:n.props=i,n.attrs=i}function QS(n,e,t,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=n,o=Wt(s),[l]=n.propsOptions;let u=!1;if((r||a>0)&&!(a&16)){if(a&8){const c=n.vnode.dynamicProps;for(let h=0;h<c.length;h++){let p=c[h];if(Tp(n.emitsOptions,p))continue;const f=e[p];if(l)if(Qt(i,p))f!==i[p]&&(i[p]=f,u=!0);else{const v=Ks(p);s[v]=Zm(l,o,v,f,n,!1)}else f!==i[p]&&(i[p]=f,u=!0)}}}else{M5(n,e,s,i)&&(u=!0);let c;for(const h in o)(!e||!Qt(e,h)&&((c=Lo(h))===h||!Qt(e,c)))&&(l?t&&(t[h]!==void 0||t[c]!==void 0)&&(s[h]=Zm(l,o,h,void 0,n,!0)):delete s[h]);if(i!==o)for(const h in i)(!e||!Qt(e,h))&&(delete i[h],u=!0)}u&&_a(n.attrs,"set","")}function M5(n,e,t,r){const[s,i]=n.propsOptions;let a=!1,o;if(e)for(let l in e){if(th(l))continue;const u=e[l];let c;s&&Qt(s,c=Ks(l))?!i||!i.includes(c)?t[c]=u:(o||(o={}))[c]=u:Tp(n.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,a=!0)}if(i){const l=Wt(t),u=o||hr;for(let c=0;c<i.length;c++){const h=i[c];t[h]=Zm(s,l,h,u[h],n,!Qt(u,h))}}return a}function Zm(n,e,t,r,s,i){const a=n[t];if(a!=null){const o=Qt(a,"default");if(o&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Tt(l)){const{propsDefaults:u}=s;if(t in u)r=u[t];else{const c=Vh(s);r=u[t]=l.call(null,e),c()}}else r=l;s.ce&&s.ce._setProp(t,r)}a[0]&&(i&&!o?r=!1:a[1]&&(r===""||r===Lo(t))&&(r=!0))}return r}const ZS=new WeakMap;function E5(n,e,t=!1){const r=t?ZS:e.propsCache,s=r.get(n);if(s)return s;const i=n.props,a={},o=[];let l=!1;if(!Tt(n)){const c=h=>{l=!0;const[p,f]=E5(h,e,!0);wn(a,p),f&&o.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}if(!i&&!l)return vr(n)&&r.set(n,Pc),Pc;if(kt(i))for(let c=0;c<i.length;c++){const h=Ks(i[c]);U1(h)&&(a[h]=hr)}else if(i)for(const c in i){const h=Ks(c);if(U1(h)){const p=i[c],f=a[h]=kt(p)||Tt(p)?{type:p}:wn({},p),v=f.type;let b=!1,x=!0;if(kt(v))for(let w=0;w<v.length;++w){const k=v[w],T=Tt(k)&&k.name;if(T==="Boolean"){b=!0;break}else T==="String"&&(x=!1)}else b=Tt(v)&&v.name==="Boolean";f[0]=b,f[1]=x,(b||Qt(f,"default"))&&o.push(h)}}const u=[a,o];return vr(n)&&r.set(n,u),u}function U1(n){return n[0]!=="$"&&!th(n)}const N5=n=>n[0]==="_"||n==="$stable",rv=n=>kt(n)?n.map(zi):[zi(n)],ek=(n,e,t)=>{if(e._n)return e;const r=mt((...s)=>rv(e(...s)),t);return r._c=!1,r},j5=(n,e,t)=>{const r=n._ctx;for(const s in n){if(N5(s))continue;const i=n[s];if(Tt(i))e[s]=ek(s,i,r);else if(i!=null){const a=rv(i);e[s]=()=>a}}},R5=(n,e)=>{const t=rv(e);n.slots.default=()=>t},F5=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},tk=(n,e,t)=>{const r=n.slots=L5();if(n.vnode.shapeFlag&32){const s=e._;s?(F5(r,e,t),t&&Nb(r,"_",s,!0)):j5(e,r)}else e&&R5(n,e)},rk=(n,e,t)=>{const{vnode:r,slots:s}=n;let i=!0,a=hr;if(r.shapeFlag&32){const o=e._;o?t&&o===1?i=!1:F5(s,e,t):(i=!e.$stable,j5(e,s)),a=e}else e&&(R5(n,e),a={default:1});if(i)for(const o in s)!N5(o)&&a[o]==null&&delete s[o]},Kn=mk;function nk(n){return sk(n)}function sk(n,e){const t=_p();t.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:p,setScopeId:f=Ji,insertStaticContent:v}=n,b=(V,R,re,C=null,L=null,he=null,pe=void 0,ge=null,be=!!R.dynamicChildren)=>{if(V===R)return;V&&!sl(V,R)&&(C=_(V),P(V,L,he,!0),V=null),R.patchFlag===-2&&(be=!1,R.dynamicChildren=null);const{type:xe,ref:Ee,shapeFlag:ie}=R;switch(xe){case Pp:x(V,R,re,C);break;case ts:w(V,R,re,C);break;case Mf:V==null&&k(R,re,C,pe);break;case pt:O(V,R,re,C,L,he,pe,ge,be);break;default:ie&1?Y(V,R,re,C,L,he,pe,ge,be):ie&6?J(V,R,re,C,L,he,pe,ge,be):(ie&64||ie&128)&&xe.process(V,R,re,C,L,he,pe,ge,be,Ae)}Ee!=null&&L&&Xf(Ee,V&&V.ref,he,R||V,!R)},x=(V,R,re,C)=>{if(V==null)r(R.el=o(R.children),re,C);else{const L=R.el=V.el;R.children!==V.children&&u(L,R.children)}},w=(V,R,re,C)=>{V==null?r(R.el=l(R.children||""),re,C):R.el=V.el},k=(V,R,re,C)=>{[V.el,V.anchor]=v(V.children,R,re,C,V.el,V.anchor)},T=({el:V,anchor:R},re,C)=>{let L;for(;V&&V!==R;)L=p(V),r(V,re,C),V=L;r(R,re,C)},I=({el:V,anchor:R})=>{let re;for(;V&&V!==R;)re=p(V),s(V),V=re;s(R)},Y=(V,R,re,C,L,he,pe,ge,be)=>{R.type==="svg"?pe="svg":R.type==="math"&&(pe="mathml"),V==null?Q(R,re,C,L,he,pe,ge,be):U(V,R,L,he,pe,ge,be)},Q=(V,R,re,C,L,he,pe,ge)=>{let be,xe;const{props:Ee,shapeFlag:ie,transition:Pe,dirs:Be}=V;if(be=V.el=a(V.type,he,Ee&&Ee.is,Ee),ie&8?c(be,V.children):ie&16&&j(V.children,be,null,C,L,Kg(V,he),pe,ge),Be&&Xo(V,null,C,"created"),H(be,V,V.scopeId,pe,C),Ee){for(const it in Ee)it!=="value"&&!th(it)&&i(be,it,null,Ee[it],he,C);"value"in Ee&&i(be,"value",null,Ee.value,he),(xe=Ee.onVnodeBeforeMount)&&$i(xe,C,V)}Be&&Xo(V,null,C,"beforeMount");const Ze=ik(L,Pe);Ze&&Pe.beforeEnter(be),r(be,R,re),((xe=Ee&&Ee.onVnodeMounted)||Ze||Be)&&Kn(()=>{xe&&$i(xe,C,V),Ze&&Pe.enter(be),Be&&Xo(V,null,C,"mounted")},L)},H=(V,R,re,C,L)=>{if(re&&f(V,re),C)for(let he=0;he<C.length;he++)f(V,C[he]);if(L){let he=L.subTree;if(R===he||U5(he.type)&&(he.ssContent===R||he.ssFallback===R)){const pe=L.vnode;H(V,pe,pe.scopeId,pe.slotScopeIds,L.parent)}}},j=(V,R,re,C,L,he,pe,ge,be=0)=>{for(let xe=be;xe<V.length;xe++){const Ee=V[xe]=ge?ho(V[xe]):zi(V[xe]);b(null,Ee,R,re,C,L,he,pe,ge)}},U=(V,R,re,C,L,he,pe)=>{const ge=R.el=V.el;let{patchFlag:be,dynamicChildren:xe,dirs:Ee}=R;be|=V.patchFlag&16;const ie=V.props||hr,Pe=R.props||hr;let Be;if(re&&Ko(re,!1),(Be=Pe.onVnodeBeforeUpdate)&&$i(Be,re,R,V),Ee&&Xo(R,V,re,"beforeUpdate"),re&&Ko(re,!0),(ie.innerHTML&&Pe.innerHTML==null||ie.textContent&&Pe.textContent==null)&&c(ge,""),xe?K(V.dynamicChildren,xe,ge,re,C,Kg(R,L),he):pe||ne(V,R,ge,null,re,C,Kg(R,L),he,!1),be>0){if(be&16)D(ge,ie,Pe,re,L);else if(be&2&&ie.class!==Pe.class&&i(ge,"class",null,Pe.class,L),be&4&&i(ge,"style",ie.style,Pe.style,L),be&8){const Ze=R.dynamicProps;for(let it=0;it<Ze.length;it++){const qe=Ze[it],tt=ie[qe],ft=Pe[qe];(ft!==tt||qe==="value")&&i(ge,qe,tt,ft,L,re)}}be&1&&V.children!==R.children&&c(ge,R.children)}else!pe&&xe==null&&D(ge,ie,Pe,re,L);((Be=Pe.onVnodeUpdated)||Ee)&&Kn(()=>{Be&&$i(Be,re,R,V),Ee&&Xo(R,V,re,"updated")},C)},K=(V,R,re,C,L,he,pe)=>{for(let ge=0;ge<R.length;ge++){const be=V[ge],xe=R[ge],Ee=be.el&&(be.type===pt||!sl(be,xe)||be.shapeFlag&70)?h(be.el):re;b(be,xe,Ee,null,C,L,he,pe,!0)}},D=(V,R,re,C,L)=>{if(R!==re){if(R!==hr)for(const he in R)!th(he)&&!(he in re)&&i(V,he,R[he],null,L,C);for(const he in re){if(th(he))continue;const pe=re[he],ge=R[he];pe!==ge&&he!=="value"&&i(V,he,ge,pe,L,C)}"value"in re&&i(V,"value",R.value,re.value,L)}},O=(V,R,re,C,L,he,pe,ge,be)=>{const xe=R.el=V?V.el:o(""),Ee=R.anchor=V?V.anchor:o("");let{patchFlag:ie,dynamicChildren:Pe,slotScopeIds:Be}=R;Be&&(ge=ge?ge.concat(Be):Be),V==null?(r(xe,re,C),r(Ee,re,C),j(R.children||[],re,Ee,L,he,pe,ge,be)):ie>0&&ie&64&&Pe&&V.dynamicChildren?(K(V.dynamicChildren,Pe,re,L,he,pe,ge),(R.key!=null||L&&R===L.subTree)&&nv(V,R,!0)):ne(V,R,re,Ee,L,he,pe,ge,be)},J=(V,R,re,C,L,he,pe,ge,be)=>{R.slotScopeIds=ge,V==null?R.shapeFlag&512?L.ctx.activate(R,re,C,pe,be):M(R,re,C,L,he,pe,be):ee(V,R,be)},M=(V,R,re,C,L,he,pe)=>{const ge=V.component=_k(V,C,L);if(kp(V)&&(ge.ctx.renderer=Ae),xk(ge,!1,pe),ge.asyncDep){if(L&&L.registerDep(ge,W,pe),!V.el){const be=ge.subTree=ot(ts);w(null,be,R,re)}}else W(ge,V,R,re,L,he,pe)},ee=(V,R,re)=>{const C=R.component=V.component;if(pk(V,R,re))if(C.asyncDep&&!C.asyncResolved){ae(C,R,re);return}else C.next=R,C.update();else R.el=V.el,C.vnode=R},W=(V,R,re,C,L,he,pe)=>{const ge=()=>{if(V.isMounted){let{next:ie,bu:Pe,u:Be,parent:Ze,vnode:it}=V;{const Yt=I5(V);if(Yt){ie&&(ie.el=it.el,ae(V,ie,pe)),Yt.asyncDep.then(()=>{V.isUnmounted||ge()});return}}let qe=ie,tt;Ko(V,!1),ie?(ie.el=it.el,ae(V,ie,pe)):ie=it,Pe&&Lf(Pe),(tt=ie.props&&ie.props.onVnodeBeforeUpdate)&&$i(tt,Ze,ie,it),Ko(V,!0);const ft=z1(V),et=V.subTree;V.subTree=ft,b(et,ft,h(et.el),_(et),V,L,he),ie.el=ft.el,qe===null&&gk(V,ft.el),Be&&Kn(Be,L),(tt=ie.props&&ie.props.onVnodeUpdated)&&Kn(()=>$i(tt,Ze,ie,it),L)}else{let ie;const{el:Pe,props:Be}=R,{bm:Ze,m:it,parent:qe,root:tt,type:ft}=V,et=Mc(R);Ko(V,!1),Ze&&Lf(Ze),!et&&(ie=Be&&Be.onVnodeBeforeMount)&&$i(ie,qe,R),Ko(V,!0);{tt.ce&&tt.ce._injectChildStyle(ft);const Yt=V.subTree=z1(V);b(null,Yt,re,C,V,L,he),R.el=Yt.el}if(it&&Kn(it,L),!et&&(ie=Be&&Be.onVnodeMounted)){const Yt=R;Kn(()=>$i(ie,qe,Yt),L)}(R.shapeFlag&256||qe&&Mc(qe.vnode)&&qe.vnode.shapeFlag&256)&&V.a&&Kn(V.a,L),V.isMounted=!0,R=re=C=null}};V.scope.on();const be=V.effect=new Bb(ge);V.scope.off();const xe=V.update=be.run.bind(be),Ee=V.job=be.runIfDirty.bind(be);Ee.i=V,Ee.id=V.uid,be.scheduler=()=>tv(Ee),Ko(V,!0),xe()},ae=(V,R,re)=>{R.component=V;const C=V.vnode.props;V.vnode=R,V.next=null,QS(V,R.props,C,re),rk(V,R.children,re),Do(),M1(V),Mo()},ne=(V,R,re,C,L,he,pe,ge,be=!1)=>{const xe=V&&V.children,Ee=V?V.shapeFlag:0,ie=R.children,{patchFlag:Pe,shapeFlag:Be}=R;if(Pe>0){if(Pe&128){de(xe,ie,re,C,L,he,pe,ge,be);return}else if(Pe&256){oe(xe,ie,re,C,L,he,pe,ge,be);return}}Be&8?(Ee&16&&Z(xe,L,he),ie!==xe&&c(re,ie)):Ee&16?Be&16?de(xe,ie,re,C,L,he,pe,ge,be):Z(xe,L,he,!0):(Ee&8&&c(re,""),Be&16&&j(ie,re,C,L,he,pe,ge,be))},oe=(V,R,re,C,L,he,pe,ge,be)=>{V=V||Pc,R=R||Pc;const xe=V.length,Ee=R.length,ie=Math.min(xe,Ee);let Pe;for(Pe=0;Pe<ie;Pe++){const Be=R[Pe]=be?ho(R[Pe]):zi(R[Pe]);b(V[Pe],Be,re,null,L,he,pe,ge,be)}xe>Ee?Z(V,L,he,!0,!1,ie):j(R,re,C,L,he,pe,ge,be,ie)},de=(V,R,re,C,L,he,pe,ge,be)=>{let xe=0;const Ee=R.length;let ie=V.length-1,Pe=Ee-1;for(;xe<=ie&&xe<=Pe;){const Be=V[xe],Ze=R[xe]=be?ho(R[xe]):zi(R[xe]);if(sl(Be,Ze))b(Be,Ze,re,null,L,he,pe,ge,be);else break;xe++}for(;xe<=ie&&xe<=Pe;){const Be=V[ie],Ze=R[Pe]=be?ho(R[Pe]):zi(R[Pe]);if(sl(Be,Ze))b(Be,Ze,re,null,L,he,pe,ge,be);else break;ie--,Pe--}if(xe>ie){if(xe<=Pe){const Be=Pe+1,Ze=Be<Ee?R[Be].el:C;for(;xe<=Pe;)b(null,R[xe]=be?ho(R[xe]):zi(R[xe]),re,Ze,L,he,pe,ge,be),xe++}}else if(xe>Pe)for(;xe<=ie;)P(V[xe],L,he,!0),xe++;else{const Be=xe,Ze=xe,it=new Map;for(xe=Ze;xe<=Pe;xe++){const Pt=R[xe]=be?ho(R[xe]):zi(R[xe]);Pt.key!=null&&it.set(Pt.key,xe)}let qe,tt=0;const ft=Pe-Ze+1;let et=!1,Yt=0;const Et=new Array(ft);for(xe=0;xe<ft;xe++)Et[xe]=0;for(xe=Be;xe<=ie;xe++){const Pt=V[xe];if(tt>=ft){P(Pt,L,he,!0);continue}let Ft;if(Pt.key!=null)Ft=it.get(Pt.key);else for(qe=Ze;qe<=Pe;qe++)if(Et[qe-Ze]===0&&sl(Pt,R[qe])){Ft=qe;break}Ft===void 0?P(Pt,L,he,!0):(Et[Ft-Ze]=xe+1,Ft>=Yt?Yt=Ft:et=!0,b(Pt,R[Ft],re,null,L,he,pe,ge,be),tt++)}const cn=et?ak(Et):Pc;for(qe=cn.length-1,xe=ft-1;xe>=0;xe--){const Pt=Ze+xe,Ft=R[Pt],Sn=Pt+1<Ee?R[Pt+1].el:C;Et[xe]===0?b(null,Ft,re,Sn,L,he,pe,ge,be):et&&(qe<0||xe!==cn[qe]?fe(Ft,re,Sn,2):qe--)}}},fe=(V,R,re,C,L=null)=>{const{el:he,type:pe,transition:ge,children:be,shapeFlag:xe}=V;if(xe&6){fe(V.component.subTree,R,re,C);return}if(xe&128){V.suspense.move(R,re,C);return}if(xe&64){pe.move(V,R,re,Ae);return}if(pe===pt){r(he,R,re);for(let ie=0;ie<be.length;ie++)fe(be[ie],R,re,C);r(V.anchor,R,re);return}if(pe===Mf){T(V,R,re);return}if(C!==2&&xe&1&&ge)if(C===0)ge.beforeEnter(he),r(he,R,re),Kn(()=>ge.enter(he),L);else{const{leave:ie,delayLeave:Pe,afterLeave:Be}=ge,Ze=()=>r(he,R,re),it=()=>{ie(he,()=>{Ze(),Be&&Be()})};Pe?Pe(he,Ze,it):it()}else r(he,R,re)},P=(V,R,re,C=!1,L=!1)=>{const{type:he,props:pe,ref:ge,children:be,dynamicChildren:xe,shapeFlag:Ee,patchFlag:ie,dirs:Pe,cacheIndex:Be}=V;if(ie===-2&&(L=!1),ge!=null&&Xf(ge,null,re,V,!0),Be!=null&&(R.renderCache[Be]=void 0),Ee&256){R.ctx.deactivate(V);return}const Ze=Ee&1&&Pe,it=!Mc(V);let qe;if(it&&(qe=pe&&pe.onVnodeBeforeUnmount)&&$i(qe,R,V),Ee&6)G(V.component,re,C);else{if(Ee&128){V.suspense.unmount(re,C);return}Ze&&Xo(V,null,R,"beforeUnmount"),Ee&64?V.type.remove(V,R,re,Ae,C):xe&&!xe.hasOnce&&(he!==pt||ie>0&&ie&64)?Z(xe,R,re,!1,!0):(he===pt&&ie&384||!L&&Ee&16)&&Z(be,R,re),C&&A(V)}(it&&(qe=pe&&pe.onVnodeUnmounted)||Ze)&&Kn(()=>{qe&&$i(qe,R,V),Ze&&Xo(V,null,R,"unmounted")},re)},A=V=>{const{type:R,el:re,anchor:C,transition:L}=V;if(R===pt){F(re,C);return}if(R===Mf){I(V);return}const he=()=>{s(re),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(V.shapeFlag&1&&L&&!L.persisted){const{leave:pe,delayLeave:ge}=L,be=()=>pe(re,he);ge?ge(V.el,he,be):be()}else he()},F=(V,R)=>{let re;for(;V!==R;)re=p(V),s(V),V=re;s(R)},G=(V,R,re)=>{const{bum:C,scope:L,job:he,subTree:pe,um:ge,m:be,a:xe}=V;V1(be),V1(xe),C&&Lf(C),L.stop(),he&&(he.flags|=8,P(pe,V,R,re)),ge&&Kn(ge,R),Kn(()=>{V.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&V.asyncDep&&!V.asyncResolved&&V.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},Z=(V,R,re,C=!1,L=!1,he=0)=>{for(let pe=he;pe<V.length;pe++)P(V[pe],R,re,C,L)},_=V=>{if(V.shapeFlag&6)return _(V.component.subTree);if(V.shapeFlag&128)return V.suspense.next();const R=p(V.anchor||V.el),re=R&&R[l5];return re?p(re):R};let q=!1;const te=(V,R,re)=>{V==null?R._vnode&&P(R._vnode,null,null,!0):b(R._vnode||null,V,R,null,null,null,re),R._vnode=V,q||(q=!0,M1(),i5(),q=!1)},Ae={p:b,um:P,m:fe,r:A,mt:M,mc:j,pc:ne,pbc:K,n:_,o:n};return{render:te,hydrate:void 0,createApp:KS(te)}}function Kg({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Ko({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function ik(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function nv(n,e,t=!1){const r=n.children,s=e.children;if(kt(r)&&kt(s))for(let i=0;i<r.length;i++){const a=r[i];let o=s[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[i]=ho(s[i]),o.el=a.el),!t&&o.patchFlag!==-2&&nv(a,o)),o.type===Pp&&(o.el=a.el)}}function ak(n){const e=n.slice(),t=[0];let r,s,i,a,o;const l=n.length;for(r=0;r<l;r++){const u=n[r];if(u!==0){if(s=t[t.length-1],n[s]<u){e[r]=s,t.push(r);continue}for(i=0,a=t.length-1;i<a;)o=i+a>>1,n[t[o]]<u?i=o+1:a=o;u<n[t[i]]&&(i>0&&(e[r]=t[i-1]),t[i]=r)}}for(i=t.length,a=t[i-1];i-- >0;)t[i]=a,a=e[a];return t}function I5(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:I5(e)}function V1(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const ok=Symbol.for("v-scx"),lk=()=>ms(ok);function Un(n,e,t){return B5(n,e,t)}function B5(n,e,t=hr){const{immediate:r,deep:s,flush:i,once:a}=t,o=wn({},t),l=e&&r||!e&&i!=="post";let u;if(Th){if(i==="sync"){const f=lk();u=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=Ji,f.resume=Ji,f.pause=Ji,f}}const c=An;o.call=(f,v,b)=>Ai(f,c,v,b);let h=!1;i==="post"?o.scheduler=f=>{Kn(f,c&&c.suspense)}:i!=="sync"&&(h=!0,o.scheduler=(f,v)=>{v?f():tv(f)}),o.augmentJob=f=>{e&&(f.flags|=4),h&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const p=kS(n,e,o);return Th&&(u?u.push(p):l&&p()),p}function ck(n,e,t){const r=this.proxy,s=Sr(n)?n.includes(".")?$5(r,n):()=>r[n]:n.bind(r,r);let i;Tt(e)?i=e:(i=e.handler,t=e);const a=Vh(this),o=B5(s,i.bind(r),t);return a(),o}function $5(n,e){const t=e.split(".");return()=>{let r=n;for(let s=0;s<t.length&&r;s++)r=r[t[s]];return r}}const uk=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Ks(e)}Modifiers`]||n[`${Lo(e)}Modifiers`];function hk(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||hr;let s=t;const i=e.startsWith("update:"),a=i&&uk(r,e.slice(7));a&&(a.trim&&(s=t.map(c=>Sr(c)?c.trim():c)),a.number&&(s=t.map(Vm)));let o,l=r[o=Vg(e)]||r[o=Vg(Ks(e))];!l&&i&&(l=r[o=Vg(Lo(e))]),l&&Ai(l,n,6,s);const u=r[o+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[o])return;n.emitted[o]=!0,Ai(u,n,6,s)}}function q5(n,e,t=!1){const r=e.emitsCache,s=r.get(n);if(s!==void 0)return s;const i=n.emits;let a={},o=!1;if(!Tt(n)){const l=u=>{const c=q5(u,e,!0);c&&(o=!0,wn(a,c))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!i&&!o?(vr(n)&&r.set(n,null),null):(kt(i)?i.forEach(l=>a[l]=null):wn(a,i),vr(n)&&r.set(n,a),a)}function Tp(n,e){return!n||!vp(e)?!1:(e=e.slice(2).replace(/Once$/,""),Qt(n,e[0].toLowerCase()+e.slice(1))||Qt(n,Lo(e))||Qt(n,e))}function z1(n){const{type:e,vnode:t,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:o,emit:l,render:u,renderCache:c,props:h,data:p,setupState:f,ctx:v,inheritAttrs:b}=n,x=Gf(n);let w,k;try{if(t.shapeFlag&4){const I=s||r,Y=I;w=zi(u.call(Y,I,c,h,f,p,v)),k=o}else{const I=e;w=zi(I.length>1?I(h,{attrs:o,slots:a,emit:l}):I(h,null)),k=e.props?o:dk(o)}}catch(I){oh.length=0,Sp(I,n,1),w=ot(ts)}let T=w;if(k&&b!==!1){const I=Object.keys(k),{shapeFlag:Y}=T;I.length&&Y&7&&(i&&I.some(H0)&&(k=fk(k,i)),T=ko(T,k,!1,!0))}return t.dirs&&(T=ko(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(t.dirs):t.dirs),t.transition&&kh(T,t.transition),w=T,Gf(x),w}const dk=n=>{let e;for(const t in n)(t==="class"||t==="style"||vp(t))&&((e||(e={}))[t]=n[t]);return e},fk=(n,e)=>{const t={};for(const r in n)(!H0(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function pk(n,e,t){const{props:r,children:s,component:i}=n,{props:a,children:o,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?H1(r,a,u):!!a;if(l&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const p=c[h];if(a[p]!==r[p]&&!Tp(u,p))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?H1(r,a,u):!0:!!a;return!1}function H1(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==n[i]&&!Tp(t,i))return!0}return!1}function gk({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const U5=n=>n.__isSuspense;function mk(n,e){e&&e.pendingBranch?kt(n)?e.effects.push(...n):e.effects.push(n):TS(n)}const pt=Symbol.for("v-fgt"),Pp=Symbol.for("v-txt"),ts=Symbol.for("v-cmt"),Mf=Symbol.for("v-stc"),oh=[];let Ds=null;function _e(n=!1){oh.push(Ds=n?null:[])}function vk(){oh.pop(),Ds=oh[oh.length-1]||null}let Ch=1;function Y1(n,e=!1){Ch+=n,n<0&&Ds&&e&&(Ds.hasOnce=!0)}function V5(n){return n.dynamicChildren=Ch>0?Ds||Pc:null,vk(),Ch>0&&Ds&&Ds.push(n),n}function Me(n,e,t,r,s,i){return V5(Ne(n,e,t,r,s,i,!0))}function xt(n,e,t,r,s){return V5(ot(n,e,t,r,s,!0))}function Ah(n){return n?n.__v_isVNode===!0:!1}function sl(n,e){return n.type===e.type&&n.key===e.key}const z5=({key:n})=>n??null,Ef=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Sr(n)||Qr(n)||Tt(n)?{i:bn,r:n,k:e,f:!!t}:n:null);function Ne(n,e=null,t=null,r=0,s=null,i=n===pt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&z5(e),ref:e&&Ef(e),scopeId:o5,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:bn};return o?(sv(l,t),i&128&&n.normalize(l)):t&&(l.shapeFlag|=Sr(t)?8:16),Ch>0&&!a&&Ds&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ds.push(l),l}const ot=yk;function yk(n,e=null,t=null,r=0,s=null,i=!1){if((!n||n===x5)&&(n=ts),Ah(n)){const o=ko(n,e,!0);return t&&sv(o,t),Ch>0&&!i&&Ds&&(o.shapeFlag&6?Ds[Ds.indexOf(n)]=o:Ds.push(o)),o.patchFlag=-2,o}if(Ak(n)&&(n=n.__vccOpts),e){e=ns(e);let{class:o,style:l}=e;o&&!Sr(o)&&(e.class=Ct(o)),vr(l)&&(ev(l)&&!kt(l)&&(l=wn({},l)),e.style=$n(l))}const a=Sr(n)?1:U5(n)?128:c5(n)?64:vr(n)?4:Tt(n)?2:0;return Ne(n,e,t,r,s,a,i,!0)}function ns(n){return n?ev(n)||D5(n)?wn({},n):n:null}function ko(n,e,t=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:o,transition:l}=n,u=e?nn(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&z5(u),ref:e&&e.ref?t&&i?kt(i)?i.concat(Ef(e)):[i,Ef(e)]:Ef(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==pt?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&ko(n.ssContent),ssFallback:n.ssFallback&&ko(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&r&&kh(c,l.clone(c)),c}function or(n=" ",e=0){return ot(Pp,null,n,e)}function H5(n,e){const t=ot(Mf,null,n);return t.staticCount=e,t}function Ge(n="",e=!1){return e?(_e(),xt(ts,null,n)):ot(ts,null,n)}function zi(n){return n==null||typeof n=="boolean"?ot(ts):kt(n)?ot(pt,null,n.slice()):Ah(n)?ho(n):ot(Pp,null,String(n))}function ho(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:ko(n)}function sv(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(kt(e))t=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),sv(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!D5(e)?e._ctx=bn:s===3&&bn&&(bn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Tt(e)?(e={default:e,_ctx:bn},t=32):(e=String(e),r&64?(t=16,e=[or(e)]):t=8);n.children=e,n.shapeFlag|=t}function nn(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ct([e.class,r.class]));else if(s==="style")e.style=$n([e.style,r.style]);else if(vp(s)){const i=e[s],a=r[s];a&&i!==a&&!(kt(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=r[s])}return e}function $i(n,e,t,r=null){Ai(n,e,7,[t,r])}const bk=P5();let wk=0;function _k(n,e,t){const r=n.type,s=(e?e.appContext:n.appContext)||bk,i={uid:wk++,vnode:n,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Y3(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:E5(r,s),emitsOptions:q5(r,s),emit:null,emitted:null,propsDefaults:hr,inheritAttrs:r.inheritAttrs,ctx:hr,data:hr,props:hr,attrs:hr,slots:hr,refs:hr,setupState:hr,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=hk.bind(null,i),n.ce&&n.ce(i),i}let An=null;const iv=()=>An||bn;let Qf,e0;{const n=_p(),e=(t,r)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};Qf=e("__VUE_INSTANCE_SETTERS__",t=>An=t),e0=e("__VUE_SSR_SETTERS__",t=>Th=t)}const Vh=n=>{const e=An;return Qf(n),n.scope.on(),()=>{n.scope.off(),Qf(e)}},W1=()=>{An&&An.scope.off(),Qf(null)};function Y5(n){return n.vnode.shapeFlag&4}let Th=!1;function xk(n,e=!1,t=!1){e&&e0(e);const{props:r,children:s}=n.vnode,i=Y5(n);JS(n,r,i,e),tk(n,s,t);const a=i?Sk(n,e):void 0;return e&&e0(!1),a}function Sk(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,US);const{setup:r}=t;if(r){Do();const s=n.setupContext=r.length>1?G5(n):null,i=Vh(n),a=Uh(r,n,0,[n.props,s]),o=Db(a);if(Mo(),i(),(o||n.sp)&&!Mc(n)&&v5(n),o){if(a.then(W1,W1),e)return a.then(l=>{G1(n,l)}).catch(l=>{Sp(l,n,0)});n.asyncDep=a}else G1(n,a)}else W5(n)}function G1(n,e,t){Tt(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:vr(e)&&(n.setupState=r5(e)),W5(n)}function W5(n,e,t){const r=n.type;n.render||(n.render=r.render||Ji);{const s=Vh(n);Do();try{zS(n)}finally{Mo(),s()}}}const kk={get(n,e){return Fn(n,"get",""),n[e]}};function G5(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,kk),slots:n.slots,emit:n.emit,expose:e}}function Op(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(r5(fS(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in ih)return ih[t](n)},has(e,t){return t in e||t in ih}})):n.proxy}function Ck(n,e=!0){return Tt(n)?n.displayName||n.name:n.name||e&&n.__name}function Ak(n){return Tt(n)&&"__vccOpts"in n}const He=(n,e)=>xS(n,e,Th);function vl(n,e,t){const r=arguments.length;return r===2?vr(e)&&!kt(e)?Ah(e)?ot(n,null,[e]):ot(n,e):ot(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Ah(t)&&(t=[t]),ot(n,e,t))}const Tk="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let t0;const X1=typeof window<"u"&&window.trustedTypes;if(X1)try{t0=X1.createPolicy("vue",{createHTML:n=>n})}catch{}const X5=t0?n=>t0.createHTML(n):n=>n,Pk="http://www.w3.org/2000/svg",Ok="http://www.w3.org/1998/Math/MathML",va=typeof document<"u"?document:null,K1=va&&va.createElement("template"),Lk={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const s=e==="svg"?va.createElementNS(Pk,n):e==="mathml"?va.createElementNS(Ok,n):t?va.createElement(n,{is:t}):va.createElement(n);return n==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:n=>va.createTextNode(n),createComment:n=>va.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>va.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,s,i){const a=t?t.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===i||!(s=s.nextSibling)););else{K1.innerHTML=X5(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const o=K1.content;if(r==="svg"||r==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Za="transition",qu="animation",Ph=Symbol("_vtc"),K5={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Dk=wn({},d5,K5),Mk=n=>(n.displayName="Transition",n.props=Dk,n),Zc=Mk((n,{slots:e})=>vl(MS,Ek(n),e)),Jo=(n,e=[])=>{kt(n)?n.forEach(t=>t(...e)):n&&n(...e)},J1=n=>n?kt(n)?n.some(e=>e.length>1):n.length>1:!1;function Ek(n){const e={};for(const O in n)O in K5||(e[O]=n[O]);if(n.css===!1)return e;const{name:t="v",type:r,duration:s,enterFromClass:i=`${t}-enter-from`,enterActiveClass:a=`${t}-enter-active`,enterToClass:o=`${t}-enter-to`,appearFromClass:l=i,appearActiveClass:u=a,appearToClass:c=o,leaveFromClass:h=`${t}-leave-from`,leaveActiveClass:p=`${t}-leave-active`,leaveToClass:f=`${t}-leave-to`}=n,v=Nk(s),b=v&&v[0],x=v&&v[1],{onBeforeEnter:w,onEnter:k,onEnterCancelled:T,onLeave:I,onLeaveCancelled:Y,onBeforeAppear:Q=w,onAppear:H=k,onAppearCancelled:j=T}=e,U=(O,J,M,ee)=>{O._enterCancelled=ee,Qo(O,J?c:o),Qo(O,J?u:a),M&&M()},K=(O,J)=>{O._isLeaving=!1,Qo(O,h),Qo(O,f),Qo(O,p),J&&J()},D=O=>(J,M)=>{const ee=O?H:k,W=()=>U(J,O,M);Jo(ee,[J,W]),Q1(()=>{Qo(J,O?l:i),fa(J,O?c:o),J1(ee)||Z1(J,r,b,W)})};return wn(e,{onBeforeEnter(O){Jo(w,[O]),fa(O,i),fa(O,a)},onBeforeAppear(O){Jo(Q,[O]),fa(O,l),fa(O,u)},onEnter:D(!1),onAppear:D(!0),onLeave(O,J){O._isLeaving=!0;const M=()=>K(O,J);fa(O,h),O._enterCancelled?(fa(O,p),r2()):(r2(),fa(O,p)),Q1(()=>{O._isLeaving&&(Qo(O,h),fa(O,f),J1(I)||Z1(O,r,x,M))}),Jo(I,[O,M])},onEnterCancelled(O){U(O,!1,void 0,!0),Jo(T,[O])},onAppearCancelled(O){U(O,!0,void 0,!0),Jo(j,[O])},onLeaveCancelled(O){K(O),Jo(Y,[O])}})}function Nk(n){if(n==null)return null;if(vr(n))return[Jg(n.enter),Jg(n.leave)];{const e=Jg(n);return[e,e]}}function Jg(n){return B3(n)}function fa(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Ph]||(n[Ph]=new Set)).add(e)}function Qo(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[Ph];t&&(t.delete(e),t.size||(n[Ph]=void 0))}function Q1(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let jk=0;function Z1(n,e,t,r){const s=n._endId=++jk,i=()=>{s===n._endId&&r()};if(t!=null)return setTimeout(i,t);const{type:a,timeout:o,propCount:l}=Rk(n,e);if(!a)return r();const u=a+"end";let c=0;const h=()=>{n.removeEventListener(u,p),i()},p=f=>{f.target===n&&++c>=l&&h()};setTimeout(()=>{c<l&&h()},o+1),n.addEventListener(u,p)}function Rk(n,e){const t=window.getComputedStyle(n),r=v=>(t[v]||"").split(", "),s=r(`${Za}Delay`),i=r(`${Za}Duration`),a=e2(s,i),o=r(`${qu}Delay`),l=r(`${qu}Duration`),u=e2(o,l);let c=null,h=0,p=0;e===Za?a>0&&(c=Za,h=a,p=i.length):e===qu?u>0&&(c=qu,h=u,p=l.length):(h=Math.max(a,u),c=h>0?a>u?Za:qu:null,p=c?c===Za?i.length:l.length:0);const f=c===Za&&/\b(transform|all)(,|$)/.test(r(`${Za}Property`).toString());return{type:c,timeout:h,propCount:p,hasTransform:f}}function e2(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>t2(t)+t2(n[r])))}function t2(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function r2(){return document.body.offsetHeight}function Fk(n,e,t){const r=n[Ph];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Zf=Symbol("_vod"),J5=Symbol("_vsh"),Nf={beforeMount(n,{value:e},{transition:t}){n[Zf]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Uu(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),Uu(n,!0),r.enter(n)):r.leave(n,()=>{Uu(n,!1)}):Uu(n,e))},beforeUnmount(n,{value:e}){Uu(n,e)}};function Uu(n,e){n.style.display=e?n[Zf]:"none",n[J5]=!e}const Ik=Symbol(""),Bk=/(^|;)\s*display\s*:/;function $k(n,e,t){const r=n.style,s=Sr(t);let i=!1;if(t&&!s){if(e)if(Sr(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();t[o]==null&&jf(r,o,"")}else for(const a in e)t[a]==null&&jf(r,a,"");for(const a in t)a==="display"&&(i=!0),jf(r,a,t[a])}else if(s){if(e!==t){const a=r[Ik];a&&(t+=";"+a),r.cssText=t,i=Bk.test(t)}}else e&&n.removeAttribute("style");Zf in n&&(n[Zf]=i?r.display:"",n[J5]&&(r.display="none"))}const n2=/\s*!important$/;function jf(n,e,t){if(kt(t))t.forEach(r=>jf(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=qk(n,e);n2.test(t)?n.setProperty(Lo(r),t.replace(n2,""),"important"):n[r]=t}}const s2=["Webkit","Moz","ms"],Qg={};function qk(n,e){const t=Qg[e];if(t)return t;let r=Ks(e);if(r!=="filter"&&r in n)return Qg[e]=r;r=wp(r);for(let s=0;s<s2.length;s++){const i=s2[s]+r;if(i in n)return Qg[e]=i}return e}const i2="http://www.w3.org/1999/xlink";function a2(n,e,t,r,s,i=H3(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(i2,e.slice(6,e.length)):n.setAttributeNS(i2,e,t):t==null||i&&!jb(t)?n.removeAttribute(e):n.setAttribute(e,i?"":Ea(t)?String(t):t)}function o2(n,e,t,r,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?X5(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(o!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let a=!1;if(t===""||t==null){const o=typeof n[e];o==="boolean"?t=jb(t):t==null&&o==="string"?(t="",a=!0):o==="number"&&(t=0,a=!0)}try{n[e]=t}catch{}a&&n.removeAttribute(s||e)}function mc(n,e,t,r){n.addEventListener(e,t,r)}function Uk(n,e,t,r){n.removeEventListener(e,t,r)}const l2=Symbol("_vei");function Vk(n,e,t,r,s=null){const i=n[l2]||(n[l2]={}),a=i[e];if(r&&a)a.value=r;else{const[o,l]=zk(e);if(r){const u=i[e]=Wk(r,s);mc(n,o,u,l)}else a&&(Uk(n,o,a,l),i[e]=void 0)}}const c2=/(?:Once|Passive|Capture)$/;function zk(n){let e;if(c2.test(n)){e={};let r;for(;r=n.match(c2);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Lo(n.slice(2)),e]}let Zg=0;const Hk=Promise.resolve(),Yk=()=>Zg||(Hk.then(()=>Zg=0),Zg=Date.now());function Wk(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Ai(Gk(r,t.value),e,5,[r])};return t.value=n,t.attached=Yk(),t}function Gk(n,e){if(kt(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const u2=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,Xk=(n,e,t,r,s,i)=>{const a=s==="svg";e==="class"?Fk(n,r,a):e==="style"?$k(n,t,r):vp(e)?H0(e)||Vk(n,e,t,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Kk(n,e,r,a))?(o2(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&a2(n,e,r,a,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Sr(r))?o2(n,Ks(e),r,i,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),a2(n,e,r,a))};function Kk(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&u2(e)&&Tt(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return u2(e)&&Sr(t)?!1:e in n}const h2=n=>{const e=n.props["onUpdate:modelValue"]||!1;return kt(e)?t=>Lf(e,t):e};function Jk(n){n.target.composing=!0}function d2(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const em=Symbol("_assign"),rs={created(n,{modifiers:{lazy:e,trim:t,number:r}},s){n[em]=h2(s);const i=r||s.props&&s.props.type==="number";mc(n,e?"change":"input",a=>{if(a.target.composing)return;let o=n.value;t&&(o=o.trim()),i&&(o=Vm(o)),n[em](o)}),t&&mc(n,"change",()=>{n.value=n.value.trim()}),e||(mc(n,"compositionstart",Jk),mc(n,"compositionend",d2),mc(n,"change",d2))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:s,number:i}},a){if(n[em]=h2(a),n.composing)return;const o=(i||n.type==="number")&&!/^0\d/.test(n.value)?Vm(n.value):n.value,l=e??"";o!==l&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||s&&n.value.trim()===l)||(n.value=l))}},Qk=["ctrl","shift","alt","meta"],Zk={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>Qk.some(t=>n[`${t}Key`]&&!e.includes(t))},Js=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(s,...i)=>{for(let a=0;a<e.length;a++){const o=Zk[e[a]];if(o&&o(s,e))return}return n(s,...i)})},e4={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},t4=(n,e)=>{const t=n._withKeys||(n._withKeys={}),r=e.join(".");return t[r]||(t[r]=s=>{if(!("key"in s))return;const i=Lo(s.key);if(e.some(a=>a===i||e4[a]===i))return n(s)})},r4=wn({patchProp:Xk},Lk);let f2;function Q5(){return f2||(f2=nk(r4))}const p2=(...n)=>{Q5().render(...n)},n4=(...n)=>{const e=Q5().createApp(...n),{mount:t}=e;return e.mount=r=>{const s=i4(r);if(!s)return;const i=e._component;!Tt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=t(s,!1,s4(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e};function s4(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function i4(n){return Sr(n)?document.querySelector(n):n}const xn=(n,e)=>{const t=n.__vccOpts||n;for(const[r,s]of e)t[r]=s;return t},a4={__name:"BaseToast",setup(n,{expose:e}){const t=$e(""),r=$e("error"),s=$e(null);return e({showToast:(a,o="error",l=3e3)=>{t.value=a,r.value=o,s.value&&clearTimeout(s.value),s.value=setTimeout(()=>{t.value=""},l)}}),(a,o)=>t.value?(_e(),Me("div",{key:0,class:Ct(["toast",r.value])},[Ne("p",null,Vt(t.value),1)],2)):Ge("",!0)}},o4=xn(a4,[["__scopeId","data-v-9d6e2f0c"]]),l4={__name:"App",setup(n,{expose:e}){const t=$e(null);return e({showError:i=>{t.value.showToast(i,"error")},showSuccess:i=>{t.value.showToast(i,"success")}}),ah("toast",t),(i,a)=>{const o=Kf("router-view");return _e(),Me("div",null,[ot(o4,{ref_key:"toast",ref:t},null,512),ot(o)])}}};/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const vc=typeof document<"u";function Z5(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function c4(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&Z5(n.default)}const Jt=Object.assign;function tm(n,e){const t={};for(const r in e){const s=e[r];t[r]=Ti(s)?s.map(n):n(s)}return t}const lh=()=>{},Ti=Array.isArray,ew=/#/g,u4=/&/g,h4=/\//g,d4=/=/g,f4=/\?/g,tw=/\+/g,p4=/%5B/g,g4=/%5D/g,rw=/%5E/g,m4=/%60/g,nw=/%7B/g,v4=/%7C/g,sw=/%7D/g,y4=/%20/g;function av(n){return encodeURI(""+n).replace(v4,"|").replace(p4,"[").replace(g4,"]")}function b4(n){return av(n).replace(nw,"{").replace(sw,"}").replace(rw,"^")}function r0(n){return av(n).replace(tw,"%2B").replace(y4,"+").replace(ew,"%23").replace(u4,"%26").replace(m4,"`").replace(nw,"{").replace(sw,"}").replace(rw,"^")}function w4(n){return r0(n).replace(d4,"%3D")}function _4(n){return av(n).replace(ew,"%23").replace(f4,"%3F")}function x4(n){return n==null?"":_4(n).replace(h4,"%2F")}function Oh(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const S4=/\/$/,k4=n=>n.replace(S4,"");function rm(n,e,t="/"){let r,s={},i="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,o>-1?o:e.length),s=n(i)),o>-1&&(r=r||e.slice(0,o),a=e.slice(o,e.length)),r=P4(r??e,t),{fullPath:r+(i&&"?")+i+a,path:r,query:s,hash:Oh(a)}}function C4(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function g2(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function A4(n,e,t){const r=e.matched.length-1,s=t.matched.length-1;return r>-1&&r===s&&Vc(e.matched[r],t.matched[s])&&iw(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Vc(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function iw(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!T4(n[t],e[t]))return!1;return!0}function T4(n,e){return Ti(n)?m2(n,e):Ti(e)?m2(e,n):n===e}function m2(n,e){return Ti(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function P4(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=t.length-1,a,o;for(a=0;a<r.length;a++)if(o=r[a],o!==".")if(o==="..")i>1&&i--;else break;return t.slice(0,i).join("/")+"/"+r.slice(a).join("/")}const eo={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Lh;(function(n){n.pop="pop",n.push="push"})(Lh||(Lh={}));var ch;(function(n){n.back="back",n.forward="forward",n.unknown=""})(ch||(ch={}));function O4(n){if(!n)if(vc){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),k4(n)}const L4=/^[^#]+#/;function D4(n,e){return n.replace(L4,"#")+e}function M4(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const Lp=()=>({left:window.scrollX,top:window.scrollY});function E4(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=M4(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function v2(n,e){return(history.state?history.state.position-e:-1)+n}const n0=new Map;function N4(n,e){n0.set(n,e)}function j4(n){const e=n0.get(n);return n0.delete(n),e}let R4=()=>location.protocol+"//"+location.host;function aw(n,e){const{pathname:t,search:r,hash:s}=e,i=n.indexOf("#");if(i>-1){let o=s.includes(n.slice(i))?n.slice(i).length:1,l=s.slice(o);return l[0]!=="/"&&(l="/"+l),g2(l,"")}return g2(t,n)+r+s}function F4(n,e,t,r){let s=[],i=[],a=null;const o=({state:p})=>{const f=aw(n,location),v=t.value,b=e.value;let x=0;if(p){if(t.value=f,e.value=p,a&&a===v){a=null;return}x=b?p.position-b.position:0}else r(f);s.forEach(w=>{w(t.value,v,{delta:x,type:Lh.pop,direction:x?x>0?ch.forward:ch.back:ch.unknown})})};function l(){a=t.value}function u(p){s.push(p);const f=()=>{const v=s.indexOf(p);v>-1&&s.splice(v,1)};return i.push(f),f}function c(){const{history:p}=window;p.state&&p.replaceState(Jt({},p.state,{scroll:Lp()}),"")}function h(){for(const p of i)p();i=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:h}}function y2(n,e,t,r=!1,s=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:s?Lp():null}}function I4(n){const{history:e,location:t}=window,r={value:aw(n,t)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,c){const h=n.indexOf("#"),p=h>-1?(t.host&&document.querySelector("base")?n:n.slice(h))+l:R4()+n+l;try{e[c?"replaceState":"pushState"](u,"",p),s.value=u}catch(f){console.error(f),t[c?"replace":"assign"](p)}}function a(l,u){const c=Jt({},e.state,y2(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});i(l,c,!0),r.value=l}function o(l,u){const c=Jt({},s.value,e.state,{forward:l,scroll:Lp()});i(c.current,c,!0);const h=Jt({},y2(r.value,l,null),{position:c.position+1},u);i(l,h,!1),r.value=l}return{location:r,state:s,push:o,replace:a}}function B4(n){n=O4(n);const e=I4(n),t=F4(n,e.state,e.location,e.replace);function r(i,a=!0){a||t.pauseListeners(),history.go(i)}const s=Jt({location:"",base:n,go:r,createHref:D4.bind(null,n)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function $4(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),B4(n)}function q4(n){return typeof n=="string"||n&&typeof n=="object"}function ow(n){return typeof n=="string"||typeof n=="symbol"}const lw=Symbol("");var b2;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(b2||(b2={}));function zc(n,e){return Jt(new Error,{type:n,[lw]:!0},e)}function pa(n,e){return n instanceof Error&&lw in n&&(e==null||!!(n.type&e))}const w2="[^/]+?",U4={sensitive:!1,strict:!1,start:!0,end:!0},V4=/[.+*?^${}()[\]/\\]/g;function z4(n,e){const t=Jt({},U4,e),r=[];let s=t.start?"^":"";const i=[];for(const u of n){const c=u.length?[]:[90];t.strict&&!u.length&&(s+="/");for(let h=0;h<u.length;h++){const p=u[h];let f=40+(t.sensitive?.25:0);if(p.type===0)h||(s+="/"),s+=p.value.replace(V4,"\\$&"),f+=40;else if(p.type===1){const{value:v,repeatable:b,optional:x,regexp:w}=p;i.push({name:v,repeatable:b,optional:x});const k=w||w2;if(k!==w2){f+=10;try{new RegExp(`(${k})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${v}" (${k}): `+I.message)}}let T=b?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;h||(T=x&&u.length<2?`(?:/${T})`:"/"+T),x&&(T+="?"),s+=T,f+=20,x&&(f+=-8),b&&(f+=-20),k===".*"&&(f+=-50)}c.push(f)}r.push(c)}if(t.strict&&t.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,t.sensitive?"":"i");function o(u){const c=u.match(a),h={};if(!c)return null;for(let p=1;p<c.length;p++){const f=c[p]||"",v=i[p-1];h[v.name]=f&&v.repeatable?f.split("/"):f}return h}function l(u){let c="",h=!1;for(const p of n){(!h||!c.endsWith("/"))&&(c+="/"),h=!1;for(const f of p)if(f.type===0)c+=f.value;else if(f.type===1){const{value:v,repeatable:b,optional:x}=f,w=v in u?u[v]:"";if(Ti(w)&&!b)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const k=Ti(w)?w.join("/"):w;if(!k)if(x)p.length<2&&(c.endsWith("/")?c=c.slice(0,-1):h=!0);else throw new Error(`Missing required param "${v}"`);c+=k}}return c||"/"}return{re:a,score:r,keys:i,parse:o,stringify:l}}function H4(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function cw(n,e){let t=0;const r=n.score,s=e.score;for(;t<r.length&&t<s.length;){const i=H4(r[t],s[t]);if(i)return i;t++}if(Math.abs(s.length-r.length)===1){if(_2(r))return 1;if(_2(s))return-1}return s.length-r.length}function _2(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const Y4={type:0,value:""},W4=/[a-zA-Z0-9_]/;function G4(n){if(!n)return[[]];if(n==="/")return[[Y4]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(f){throw new Error(`ERR (${t})/"${u}": ${f}`)}let t=0,r=t;const s=[];let i;function a(){i&&s.push(i),i=[]}let o=0,l,u="",c="";function h(){u&&(t===0?i.push({type:0,value:u}):t===1||t===2||t===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;o<n.length;){if(l=n[o++],l==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:l==="/"?(u&&h(),a()):l===":"?(h(),t=1):p();break;case 4:p(),t=r;break;case 1:l==="("?t=2:W4.test(l)?p():(h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:t=3:c+=l;break;case 3:h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,c="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${u}"`),h(),a(),s}function X4(n,e,t){const r=z4(G4(n.path),t),s=Jt(r,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function K4(n,e){const t=[],r=new Map;e=C2({strict:!1,end:!0,sensitive:!1},e);function s(h){return r.get(h)}function i(h,p,f){const v=!f,b=S2(h);b.aliasOf=f&&f.record;const x=C2(e,h),w=[b];if("alias"in h){const I=typeof h.alias=="string"?[h.alias]:h.alias;for(const Y of I)w.push(S2(Jt({},b,{components:f?f.record.components:b.components,path:Y,aliasOf:f?f.record:b})))}let k,T;for(const I of w){const{path:Y}=I;if(p&&Y[0]!=="/"){const Q=p.record.path,H=Q[Q.length-1]==="/"?"":"/";I.path=p.record.path+(Y&&H+Y)}if(k=X4(I,p,x),f?f.alias.push(k):(T=T||k,T!==k&&T.alias.push(k),v&&h.name&&!k2(k)&&a(h.name)),uw(k)&&l(k),b.children){const Q=b.children;for(let H=0;H<Q.length;H++)i(Q[H],k,f&&f.children[H])}f=f||k}return T?()=>{a(T)}:lh}function a(h){if(ow(h)){const p=r.get(h);p&&(r.delete(h),t.splice(t.indexOf(p),1),p.children.forEach(a),p.alias.forEach(a))}else{const p=t.indexOf(h);p>-1&&(t.splice(p,1),h.record.name&&r.delete(h.record.name),h.children.forEach(a),h.alias.forEach(a))}}function o(){return t}function l(h){const p=Z4(h,t);t.splice(p,0,h),h.record.name&&!k2(h)&&r.set(h.record.name,h)}function u(h,p){let f,v={},b,x;if("name"in h&&h.name){if(f=r.get(h.name),!f)throw zc(1,{location:h});x=f.record.name,v=Jt(x2(p.params,f.keys.filter(T=>!T.optional).concat(f.parent?f.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),h.params&&x2(h.params,f.keys.map(T=>T.name))),b=f.stringify(v)}else if(h.path!=null)b=h.path,f=t.find(T=>T.re.test(b)),f&&(v=f.parse(b),x=f.record.name);else{if(f=p.name?r.get(p.name):t.find(T=>T.re.test(p.path)),!f)throw zc(1,{location:h,currentLocation:p});x=f.record.name,v=Jt({},p.params,h.params),b=f.stringify(v)}const w=[];let k=f;for(;k;)w.unshift(k.record),k=k.parent;return{name:x,path:b,params:v,matched:w,meta:Q4(w)}}n.forEach(h=>i(h));function c(){t.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:a,clearRoutes:c,getRoutes:o,getRecordMatcher:s}}function x2(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function S2(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:J4(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function J4(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function k2(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function Q4(n){return n.reduce((e,t)=>Jt(e,t.meta),{})}function C2(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}function Z4(n,e){let t=0,r=e.length;for(;t!==r;){const i=t+r>>1;cw(n,e[i])<0?r=i:t=i+1}const s=eC(n);return s&&(r=e.lastIndexOf(s,r-1)),r}function eC(n){let e=n;for(;e=e.parent;)if(uw(e)&&cw(n,e)===0)return e}function uw({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function tC(n){const e={};if(n===""||n==="?")return e;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(tw," "),a=i.indexOf("="),o=Oh(a<0?i:i.slice(0,a)),l=a<0?null:Oh(i.slice(a+1));if(o in e){let u=e[o];Ti(u)||(u=e[o]=[u]),u.push(l)}else e[o]=l}return e}function A2(n){let e="";for(let t in n){const r=n[t];if(t=w4(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(Ti(r)?r.map(i=>i&&r0(i)):[r&&r0(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+t,i!=null&&(e+="="+i))})}return e}function rC(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=Ti(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const nC=Symbol(""),T2=Symbol(""),Dp=Symbol(""),ov=Symbol(""),s0=Symbol("");function Vu(){let n=[];function e(r){return n.push(r),()=>{const s=n.indexOf(r);s>-1&&n.splice(s,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function fo(n,e,t,r,s,i=a=>a()){const a=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const u=p=>{p===!1?l(zc(4,{from:t,to:e})):p instanceof Error?l(p):q4(p)?l(zc(2,{from:e,to:p})):(a&&r.enterCallbacks[s]===a&&typeof p=="function"&&a.push(p),o())},c=i(()=>n.call(r&&r.instances[s],e,t,u));let h=Promise.resolve(c);n.length<3&&(h=h.then(u)),h.catch(p=>l(p))})}function nm(n,e,t,r,s=i=>i()){const i=[];for(const a of n)for(const o in a.components){let l=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(Z5(l)){const c=(l.__vccOpts||l)[e];c&&i.push(fo(c,t,r,a,o,s))}else{let u=l();i.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const h=c4(c)?c.default:c;a.mods[o]=c,a.components[o]=h;const f=(h.__vccOpts||h)[e];return f&&fo(f,t,r,a,o,s)()}))}}return i}function P2(n){const e=ms(Dp),t=ms(ov),r=He(()=>{const l=ue(n.to);return e.resolve(l)}),s=He(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],h=t.matched;if(!c||!h.length)return-1;const p=h.findIndex(Vc.bind(null,c));if(p>-1)return p;const f=O2(l[u-2]);return u>1&&O2(c)===f&&h[h.length-1].path!==f?h.findIndex(Vc.bind(null,l[u-2])):p}),i=He(()=>s.value>-1&&lC(t.params,r.value.params)),a=He(()=>s.value>-1&&s.value===t.matched.length-1&&iw(t.params,r.value.params));function o(l={}){if(oC(l)){const u=e[ue(n.replace)?"replace":"push"](ue(n.to)).catch(lh);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:He(()=>r.value.href),isActive:i,isExactActive:a,navigate:o}}function sC(n){return n.length===1?n[0]:n}const iC=ln({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:P2,setup(n,{slots:e}){const t=Na(P2(n)),{options:r}=ms(Dp),s=He(()=>({[L2(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[L2(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=e.default&&sC(e.default(t));return n.custom?i:vl("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},i)}}}),aC=iC;function oC(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function lC(n,e){for(const t in e){const r=e[t],s=n[t];if(typeof r=="string"){if(r!==s)return!1}else if(!Ti(s)||s.length!==r.length||r.some((i,a)=>i!==s[a]))return!1}return!0}function O2(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const L2=(n,e,t)=>n??e??t,cC=ln({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=ms(s0),s=He(()=>n.route||r.value),i=ms(T2,0),a=He(()=>{let u=ue(i);const{matched:c}=s.value;let h;for(;(h=c[u])&&!h.components;)u++;return u}),o=He(()=>s.value.matched[a.value]);ah(T2,He(()=>a.value+1)),ah(nC,o),ah(s0,s);const l=$e();return Un(()=>[l.value,o.value,n.name],([u,c,h],[p,f,v])=>{c&&(c.instances[h]=u,f&&f!==c&&u&&u===p&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),u&&c&&(!f||!Vc(c,f)||!p)&&(c.enterCallbacks[h]||[]).forEach(b=>b(u))},{flush:"post"}),()=>{const u=s.value,c=n.name,h=o.value,p=h&&h.components[c];if(!p)return D2(t.default,{Component:p,route:u});const f=h.props[c],v=f?f===!0?u.params:typeof f=="function"?f(u):f:null,x=vl(p,Jt({},v,e,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(h.instances[c]=null)},ref:l}));return D2(t.default,{Component:x,route:u})||x}}});function D2(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const uC=cC;function hC(n){const e=K4(n.routes,n),t=n.parseQuery||tC,r=n.stringifyQuery||A2,s=n.history,i=Vu(),a=Vu(),o=Vu(),l=pS(eo);let u=eo;vc&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=tm.bind(null,_=>""+_),h=tm.bind(null,x4),p=tm.bind(null,Oh);function f(_,q){let te,Ae;return ow(_)?(te=e.getRecordMatcher(_),Ae=q):Ae=_,e.addRoute(Ae,te)}function v(_){const q=e.getRecordMatcher(_);q&&e.removeRoute(q)}function b(){return e.getRoutes().map(_=>_.record)}function x(_){return!!e.getRecordMatcher(_)}function w(_,q){if(q=Jt({},q||l.value),typeof _=="string"){const re=rm(t,_,q.path),C=e.resolve({path:re.path},q),L=s.createHref(re.fullPath);return Jt(re,C,{params:p(C.params),hash:Oh(re.hash),redirectedFrom:void 0,href:L})}let te;if(_.path!=null)te=Jt({},_,{path:rm(t,_.path,q.path).path});else{const re=Jt({},_.params);for(const C in re)re[C]==null&&delete re[C];te=Jt({},_,{params:h(re)}),q.params=h(q.params)}const Ae=e.resolve(te,q),ce=_.hash||"";Ae.params=c(p(Ae.params));const V=C4(r,Jt({},_,{hash:b4(ce),path:Ae.path})),R=s.createHref(V);return Jt({fullPath:V,hash:ce,query:r===A2?rC(_.query):_.query||{}},Ae,{redirectedFrom:void 0,href:R})}function k(_){return typeof _=="string"?rm(t,_,l.value.path):Jt({},_)}function T(_,q){if(u!==_)return zc(8,{from:q,to:_})}function I(_){return H(_)}function Y(_){return I(Jt(k(_),{replace:!0}))}function Q(_){const q=_.matched[_.matched.length-1];if(q&&q.redirect){const{redirect:te}=q;let Ae=typeof te=="function"?te(_):te;return typeof Ae=="string"&&(Ae=Ae.includes("?")||Ae.includes("#")?Ae=k(Ae):{path:Ae},Ae.params={}),Jt({query:_.query,hash:_.hash,params:Ae.path!=null?{}:_.params},Ae)}}function H(_,q){const te=u=w(_),Ae=l.value,ce=_.state,V=_.force,R=_.replace===!0,re=Q(te);if(re)return H(Jt(k(re),{state:typeof re=="object"?Jt({},ce,re.state):ce,force:V,replace:R}),q||te);const C=te;C.redirectedFrom=q;let L;return!V&&A4(r,Ae,te)&&(L=zc(16,{to:C,from:Ae}),fe(Ae,Ae,!0,!1)),(L?Promise.resolve(L):K(C,Ae)).catch(he=>pa(he)?pa(he,2)?he:de(he):ne(he,C,Ae)).then(he=>{if(he){if(pa(he,2))return H(Jt({replace:R},k(he.to),{state:typeof he.to=="object"?Jt({},ce,he.to.state):ce,force:V}),q||C)}else he=O(C,Ae,!0,R,ce);return D(C,Ae,he),he})}function j(_,q){const te=T(_,q);return te?Promise.reject(te):Promise.resolve()}function U(_){const q=F.values().next().value;return q&&typeof q.runWithContext=="function"?q.runWithContext(_):_()}function K(_,q){let te;const[Ae,ce,V]=dC(_,q);te=nm(Ae.reverse(),"beforeRouteLeave",_,q);for(const re of Ae)re.leaveGuards.forEach(C=>{te.push(fo(C,_,q))});const R=j.bind(null,_,q);return te.push(R),Z(te).then(()=>{te=[];for(const re of i.list())te.push(fo(re,_,q));return te.push(R),Z(te)}).then(()=>{te=nm(ce,"beforeRouteUpdate",_,q);for(const re of ce)re.updateGuards.forEach(C=>{te.push(fo(C,_,q))});return te.push(R),Z(te)}).then(()=>{te=[];for(const re of V)if(re.beforeEnter)if(Ti(re.beforeEnter))for(const C of re.beforeEnter)te.push(fo(C,_,q));else te.push(fo(re.beforeEnter,_,q));return te.push(R),Z(te)}).then(()=>(_.matched.forEach(re=>re.enterCallbacks={}),te=nm(V,"beforeRouteEnter",_,q,U),te.push(R),Z(te))).then(()=>{te=[];for(const re of a.list())te.push(fo(re,_,q));return te.push(R),Z(te)}).catch(re=>pa(re,8)?re:Promise.reject(re))}function D(_,q,te){o.list().forEach(Ae=>U(()=>Ae(_,q,te)))}function O(_,q,te,Ae,ce){const V=T(_,q);if(V)return V;const R=q===eo,re=vc?history.state:{};te&&(Ae||R?s.replace(_.fullPath,Jt({scroll:R&&re&&re.scroll},ce)):s.push(_.fullPath,ce)),l.value=_,fe(_,q,te,R),de()}let J;function M(){J||(J=s.listen((_,q,te)=>{if(!G.listening)return;const Ae=w(_),ce=Q(Ae);if(ce){H(Jt(ce,{replace:!0,force:!0}),Ae).catch(lh);return}u=Ae;const V=l.value;vc&&N4(v2(V.fullPath,te.delta),Lp()),K(Ae,V).catch(R=>pa(R,12)?R:pa(R,2)?(H(Jt(k(R.to),{force:!0}),Ae).then(re=>{pa(re,20)&&!te.delta&&te.type===Lh.pop&&s.go(-1,!1)}).catch(lh),Promise.reject()):(te.delta&&s.go(-te.delta,!1),ne(R,Ae,V))).then(R=>{R=R||O(Ae,V,!1),R&&(te.delta&&!pa(R,8)?s.go(-te.delta,!1):te.type===Lh.pop&&pa(R,20)&&s.go(-1,!1)),D(Ae,V,R)}).catch(lh)}))}let ee=Vu(),W=Vu(),ae;function ne(_,q,te){de(_);const Ae=W.list();return Ae.length?Ae.forEach(ce=>ce(_,q,te)):console.error(_),Promise.reject(_)}function oe(){return ae&&l.value!==eo?Promise.resolve():new Promise((_,q)=>{ee.add([_,q])})}function de(_){return ae||(ae=!_,M(),ee.list().forEach(([q,te])=>_?te(_):q()),ee.reset()),_}function fe(_,q,te,Ae){const{scrollBehavior:ce}=n;if(!vc||!ce)return Promise.resolve();const V=!te&&j4(v2(_.fullPath,0))||(Ae||!te)&&history.state&&history.state.scroll||null;return is().then(()=>ce(_,q,V)).then(R=>R&&E4(R)).catch(R=>ne(R,_,q))}const P=_=>s.go(_);let A;const F=new Set,G={currentRoute:l,listening:!0,addRoute:f,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:x,getRoutes:b,resolve:w,options:n,push:I,replace:Y,go:P,back:()=>P(-1),forward:()=>P(1),beforeEach:i.add,beforeResolve:a.add,afterEach:o.add,onError:W.add,isReady:oe,install(_){const q=this;_.component("RouterLink",aC),_.component("RouterView",uC),_.config.globalProperties.$router=q,Object.defineProperty(_.config.globalProperties,"$route",{enumerable:!0,get:()=>ue(l)}),vc&&!A&&l.value===eo&&(A=!0,I(s.location).catch(ce=>{}));const te={};for(const ce in eo)Object.defineProperty(te,ce,{get:()=>l.value[ce],enumerable:!0});_.provide(Dp,q),_.provide(ov,Zb(te)),_.provide(s0,l);const Ae=_.unmount;F.add(_),_.unmount=function(){F.delete(_),F.size<1&&(u=eo,J&&J(),J=null,l.value=eo,A=!1,ae=!1),Ae()}}};function Z(_){return _.reduce((q,te)=>q.then(()=>U(te)),Promise.resolve())}return G}function dC(n,e){const t=[],r=[],s=[],i=Math.max(e.matched.length,n.matched.length);for(let a=0;a<i;a++){const o=e.matched[a];o&&(n.matched.find(u=>Vc(u,o))?r.push(o):t.push(o));const l=n.matched[a];l&&(e.matched.find(u=>Vc(u,l))||s.push(l))}return[t,r,s]}function xs(){return ms(Dp)}function lv(n){return ms(ov)}const fC="modulepreload",pC=function(n){return"/"+n},M2={},Pa=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=pC(l),l in M2)return;M2[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":fC,u||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((p,f)=>{h.addEventListener("load",p),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},gC=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Pa(async()=>{const{default:r}=await Promise.resolve().then(()=>eu);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class cv extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class mC extends cv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class vC extends cv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class yC extends cv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var i0;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(i0||(i0={}));var bC=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class wC{constructor(e,{headers:t={},customFetch:r,region:s=i0.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=gC(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return bC(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=t;let o={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let u;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(o["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(o["Content-Type"]="application/json",u=JSON.stringify(a)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:u}).catch(v=>{throw new mC(v)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new vC(c);if(!c.ok)throw new yC(c);let p=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return p==="application/json"?f=yield c.json():p==="application/octet-stream"?f=yield c.blob():p==="text/event-stream"?f=c:p==="multipart/form-data"?f=yield c.formData():f=yield c.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}}var v7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _C(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function xC(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var pn={},tc={},rc={},nc={},sc={},ic={},SC=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Hc=SC();const kC=Hc.fetch,hw=Hc.fetch.bind(Hc),dw=Hc.Headers,CC=Hc.Request,AC=Hc.Response,eu=Object.freeze(Object.defineProperty({__proto__:null,Headers:dw,Request:CC,Response:AC,default:hw,fetch:kC},Symbol.toStringTag,{value:"Module"})),TC=xC(eu);var Yd={},E2;function fw(){if(E2)return Yd;E2=1,Object.defineProperty(Yd,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Yd.default=n,Yd}var N2;function pw(){if(N2)return ic;N2=1;var n=ic&&ic.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ic,"__esModule",{value:!0});const e=n(TC),t=n(fw());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=Object.assign({},this.headers),this.headers[i]=a,this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,h,p;let f=null,v=null,b=null,x=u.status,w=u.statusText;if(u.ok){if(this.method!=="HEAD"){const Y=await u.text();Y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?v=Y:v=JSON.parse(Y))}const T=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),I=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");T&&I&&I.length>1&&(b=parseInt(I[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(f={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,b=null,x=406,w="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const T=await u.text();try{f=JSON.parse(T),Array.isArray(f)&&u.status===404&&(v=[],f=null,x=200,w="OK")}catch{u.status===404&&T===""?(x=204,w="No Content"):f={message:T}}if(f&&this.isMaybeSingle&&(!((p=f==null?void 0:f.details)===null||p===void 0)&&p.includes("0 rows"))&&(f=null,x=200,w="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:v,count:b,status:x,statusText:w}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,h,p;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(p=u==null?void 0:u.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,a)}returns(){return this}overrideTypes(){return this}}return ic.default=r,ic}var j2;function gw(){if(j2)return sc;j2=1;var n=sc&&sc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(sc,"__esModule",{value:!0});const e=n(pw());class t extends e.default{select(s){let i=!1;const a=(s??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:a,foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${s}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:a=i}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${s}`),this}range(s,i,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(u,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:a=!1,buffers:o=!1,wal:l=!1,format:u="text"}={}){var c;const h=[s?"analyze":null,i?"verbose":null,a?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${p}"; options=${h};`,u==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return sc.default=t,sc}var R2;function uv(){if(R2)return nc;R2=1;var n=nc&&nc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nc,"__esModule",{value:!0});const e=n(gw());class t extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const a=Array.from(new Set(i)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:a,type:o}={}){let l="";o==="plain"?l="pl":o==="phrase"?l="ph":o==="websearch"&&(l="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${l}fts${u}.${i}`),this}match(s){return Object.entries(s).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(s,i,a){return this.url.searchParams.append(s,`not.${i}.${a}`),this}or(s,{foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.or`:"or";return this.url.searchParams.append(o,`(${s})`),this}filter(s,i,a){return this.url.searchParams.append(s,`${i}.${a}`),this}}return nc.default=t,nc}var F2;function mw(){if(F2)return rc;F2=1;var n=rc&&rc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rc,"__esModule",{value:!0});const e=n(uv());class t{constructor(s,{headers:i={},schema:a,fetch:o}){this.url=s,this.headers=i,this.schema=a,this.fetch=o}select(s,{head:i=!1,count:a}={}){const o=i?"HEAD":"GET";let l=!1;const u=(s??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),a&&(this.headers.Prefer=`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:a=!0}={}){const o="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(s)){const u=s.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:a=!1,count:o,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${a?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&c.push(this.headers.Prefer),o&&c.push(`count=${o}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(s)){const h=s.reduce((p,f)=>p.concat(Object.keys(f)),[]);if(h.length>0){const p=[...new Set(h)].map(f=>`"${f}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const a="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),this.headers.Prefer=o.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",a=[];return s&&a.push(`count=${s}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return rc.default=t,rc}var zu={},Hu={},I2;function PC(){return I2||(I2=1,Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.version=void 0,Hu.version="0.0.0-automated"),Hu}var B2;function OC(){if(B2)return zu;B2=1,Object.defineProperty(zu,"__esModule",{value:!0}),zu.DEFAULT_HEADERS=void 0;const n=PC();return zu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},zu}var $2;function LC(){if($2)return tc;$2=1;var n=tc&&tc.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(tc,"__esModule",{value:!0});const e=n(mw()),t=n(uv()),r=OC();class s{constructor(a,{headers:o={},schema:l,fetch:u}={}){this.url=a,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),o),this.schemaName=l,this.fetch=u}from(a){const o=new URL(`${this.url}/${a}`);return new e.default(o,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new s(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:l=!1,get:u=!1,count:c}={}){let h;const p=new URL(`${this.url}/rpc/${a}`);let f;l||u?(h=l?"HEAD":"GET",Object.entries(o).filter(([b,x])=>x!==void 0).map(([b,x])=>[b,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([b,x])=>{p.searchParams.append(b,x)})):(h="POST",f=o);const v=Object.assign({},this.headers);return c&&(v.Prefer=`count=${c}`),new t.default({method:h,url:p,headers:v,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return tc.default=s,tc}var q2;function DC(){if(q2)return pn;q2=1;var n=pn&&pn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(pn,"__esModule",{value:!0}),pn.PostgrestError=pn.PostgrestBuilder=pn.PostgrestTransformBuilder=pn.PostgrestFilterBuilder=pn.PostgrestQueryBuilder=pn.PostgrestClient=void 0;const e=n(LC());pn.PostgrestClient=e.default;const t=n(mw());pn.PostgrestQueryBuilder=t.default;const r=n(uv());pn.PostgrestFilterBuilder=r.default;const s=n(gw());pn.PostgrestTransformBuilder=s.default;const i=n(pw());pn.PostgrestBuilder=i.default;const a=n(fw());return pn.PostgrestError=a.default,pn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:a.default},pn}var MC=DC();const EC=_C(MC),{PostgrestClient:NC,PostgrestQueryBuilder:y7,PostgrestFilterBuilder:b7,PostgrestTransformBuilder:w7,PostgrestBuilder:_7,PostgrestError:x7}=EC,jC="2.11.2",RC={"X-Client-Info":`realtime-js/${jC}`},FC="1.0.0",vw=1e4,IC=1e3;var Nc;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Nc||(Nc={}));var Ls;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ls||(Ls={}));var vi;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(vi||(vi={}));var a0;(function(n){n.websocket="websocket"})(a0||(a0={}));var il;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(il||(il={}));class BC{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+s));a=a+s;const l=r.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class yw{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gr;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(gr||(gr={}));const U2=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=$C(a,n,e,s),i),{})},$C=(n,e,t,r)=>{const s=e.find(o=>o.name===n),i=s==null?void 0:s.type,a=t[n];return i&&!r.includes(i)?bw(i,a):o0(a)},bw=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return zC(e,t)}switch(n){case gr.bool:return qC(e);case gr.float4:case gr.float8:case gr.int2:case gr.int4:case gr.int8:case gr.numeric:case gr.oid:return UC(e);case gr.json:case gr.jsonb:return VC(e);case gr.timestamp:return HC(e);case gr.abstime:case gr.date:case gr.daterange:case gr.int4range:case gr.int8range:case gr.money:case gr.reltime:case gr.text:case gr.time:case gr.timestamptz:case gr.timetz:case gr.tsrange:case gr.tstzrange:return o0(e);default:return o0(e)}},o0=n=>n,qC=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},UC=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},VC=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},zC=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const a=n.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>bw(e,o))}return n},HC=n=>typeof n=="string"?n.replace(" ","T"):n,ww=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class sm{constructor(e,t,r={},s=vw){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var V2;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(V2||(V2={}));class uh{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=uh.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=uh.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=uh.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(i,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const h=i[u];if(h){const p=c.map(x=>x.presence_ref),f=h.map(x=>x.presence_ref),v=c.filter(x=>f.indexOf(x.presence_ref)<0),b=h.filter(x=>p.indexOf(x.presence_ref)<0);v.length>0&&(o[u]=v),b.length>0&&(l[u]=b)}else o[u]=c}),this.syncDiff(i,{joins:o,leaves:l},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var u;const c=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),c.length>0){const h=e[o].map(f=>f.presence_ref),p=c.filter(f=>h.indexOf(f.presence_ref)<0);e[o].unshift(...p)}r(o,c,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[o]=u,s(o,u,l),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var z2;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(z2||(z2={}));var H2;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(H2||(H2={}));var ya;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ya||(ya={}));class hv{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Ls.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new sm(this,vi.join,this.params,this.timeout),this.rejoinTimer=new yw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ls.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ls.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ls.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ls.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vi.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new uh(this),this.broadcastEndpointURL=ww(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(c=>e==null?void 0:e(ya.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(ya.CLOSED));const l={},u={broadcast:i,presence:a,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&s!==void 0?s:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var h;if(this.socket.setAuth(),c===void 0){e==null||e(ya.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,f=(h=p==null?void 0:p.length)!==null&&h!==void 0?h:0,v=[];for(let b=0;b<f;b++){const x=p[b],{filter:{event:w,schema:k,table:T,filter:I}}=x,Y=c&&c[b];if(Y&&Y.event===w&&Y.schema===k&&Y.table===T&&Y.filter===I)v.push(Object.assign(Object.assign({},x),{id:Y.id}));else{this.unsubscribe(),e==null||e(ya.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(ya.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(ya.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ya.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ls.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vi.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new sm(this,vi.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new sm(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=vi;if(r&&[o,l,u,c].indexOf(a)>=0&&r!==this._joinRef())return;let p=this._onMessage(a,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var v,b,x;return((v=f.filter)===null||v===void 0?void 0:v.event)==="*"||((x=(b=f.filter)===null||b===void 0?void 0:b.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===a}).map(f=>f.callback(p,r)):(i=this.bindings[a])===null||i===void 0||i.filter(f=>{var v,b,x,w,k,T;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in f){const I=f.id,Y=(v=f.filter)===null||v===void 0?void 0:v.event;return I&&((b=t.ids)===null||b===void 0?void 0:b.includes(I))&&(Y==="*"||(Y==null?void 0:Y.toLocaleLowerCase())===((x=t.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const I=(k=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return I==="*"||I===((T=t==null?void 0:t.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===a}).map(f=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:b,table:x,commit_timestamp:w,type:k,errors:T}=v;p=Object.assign(Object.assign({},{schema:b,table:x,commit_timestamp:w,eventType:k,new:{},old:{},errors:T}),this._getPayloadRecords(v))}f.callback(p,r)})}_isClosed(){return this.state===Ls.closed}_isJoined(){return this.state===Ls.joined}_isJoining(){return this.state===Ls.joining}_isLeaving(){return this.state===Ls.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&hv.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(vi.close,{},e)}_onError(e){this._on(vi.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ls.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=U2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=U2(e.columns,e.old_record)),t}}const YC=()=>{},WC=typeof WebSocket<"u",GC=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class XC{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=RC,this.params={},this.timeout=vw,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=YC,this.conn=null,this.sendBuffer=[],this.serializer=new BC,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Pa(async()=>{const{default:l}=await Promise.resolve().then(()=>eu);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${a0.websocket}`,this.httpEndpoint=ww(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new yw(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(WC){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new KC(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Pa(async()=>{const{default:e}=await import("./browser-0UC7BkNb.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:FC}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Nc.connecting:return il.Connecting;case Nc.open:return il.Open;case Nc.closing:return il.Closing;default:return il.Closed}}isConnected(){return this.connectionState()===il.Open}channel(e,t={config:{}}){const r=new hv(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t}),s.joinedOnce&&s._isJoined()&&s._push(vi.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(IC,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:i,ref:a}=t;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(r)).forEach(o=>o._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(vi.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([GC],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class KC{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Nc.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class dv extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function mn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class JC extends dv{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class l0 extends dv{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var QC=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const _w=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Pa(async()=>{const{default:r}=await Promise.resolve().then(()=>eu);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},ZC=()=>QC(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Pa(()=>Promise.resolve().then(()=>eu),void 0)).Response:Response}),c0=n=>{if(Array.isArray(n))return n.map(t=>c0(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=c0(r)}),e};var _l=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const im=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),eA=(n,e,t)=>_l(void 0,void 0,void 0,function*(){const r=yield ZC();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{e(new JC(im(s),n.status||500))}).catch(s=>{e(new l0(im(s),s))}):e(new l0(im(n),n))}),tA=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),t))};function zh(n,e,t,r,s,i){return _l(this,void 0,void 0,function*(){return new Promise((a,o)=>{n(t,tA(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>eA(l,o,r))})})}function ep(n,e,t,r){return _l(this,void 0,void 0,function*(){return zh(n,"GET",e,t,r)})}function po(n,e,t,r,s){return _l(this,void 0,void 0,function*(){return zh(n,"POST",e,r,s,t)})}function rA(n,e,t,r,s){return _l(this,void 0,void 0,function*(){return zh(n,"PUT",e,r,s,t)})}function nA(n,e,t,r){return _l(this,void 0,void 0,function*(){return zh(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function xw(n,e,t,r,s){return _l(this,void 0,void 0,function*(){return zh(n,"DELETE",e,r,s,t)})}var ps=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const sA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Y2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class iA{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=_w(s)}uploadOrUpdate(e,t,r,s){return ps(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Y2),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),p=yield h.json();return h.ok?{data:{path:u,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(i){if(mn(i))return{data:null,error:i};throw i}})}upload(e,t,r){return ps(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return ps(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:Y2.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:c}),p=yield h.json();return h.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(mn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return ps(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield po(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new dv("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(mn(r))return{data:null,error:r};throw r}})}update(e,t,r){return ps(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return ps(this,void 0,void 0,function*(){try{return{data:yield po(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(mn(s))return{data:null,error:s};throw s}})}copy(e,t,r){return ps(this,void 0,void 0,function*(){try{return{data:{path:(yield po(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(mn(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return ps(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield po(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(mn(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return ps(this,void 0,void 0,function*(){try{const s=yield po(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(mn(s))return{data:null,error:s};throw s}})}download(e,t){return ps(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield ep(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(mn(o))return{data:null,error:o};throw o}})}info(e){return ps(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield ep(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:c0(r),error:null}}catch(r){if(mn(r))return{data:null,error:r};throw r}})}exists(e){return ps(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield nA(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(mn(r)&&r instanceof l0){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return ps(this,void 0,void 0,function*(){try{return{data:yield xw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(mn(t))return{data:null,error:t};throw t}})}list(e,t,r){return ps(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},sA),t),{prefix:e||""});return{data:yield po(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(mn(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const aA="2.7.1",oA={"X-Client-Info":`storage-js/${aA}`};var ac=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class lA{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},oA),t),this.fetch=_w(r)}listBuckets(){return ac(this,void 0,void 0,function*(){try{return{data:yield ep(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(mn(e))return{data:null,error:e};throw e}})}getBucket(e){return ac(this,void 0,void 0,function*(){try{return{data:yield ep(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(mn(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ac(this,void 0,void 0,function*(){try{return{data:yield po(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(mn(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ac(this,void 0,void 0,function*(){try{return{data:yield rA(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(mn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ac(this,void 0,void 0,function*(){try{return{data:yield po(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(mn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ac(this,void 0,void 0,function*(){try{return{data:yield xw(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(mn(t))return{data:null,error:t};throw t}})}}class cA extends lA{constructor(e,t={},r){super(e,t,r)}from(e){return new iA(this.url,this.headers,e,this.fetch)}}const uA="2.49.4";let Zu="";typeof Deno<"u"?Zu="deno":typeof document<"u"?Zu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zu="react-native":Zu="node";const hA={"X-Client-Info":`supabase-js-${Zu}/${uA}`},dA={headers:hA},fA={schema:"public"},pA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},gA={};var mA=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const vA=n=>{let e;return n?e=n:typeof fetch>"u"?e=hw:e=fetch,(...t)=>e(...t)},yA=()=>typeof Headers>"u"?dw:Headers,bA=(n,e,t)=>{const r=vA(t),s=yA();return(i,a)=>mA(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:n;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var wA=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};function _A(n){return n.replace(/\/$/,"")}function xA(n,e){const{db:t,auth:r,realtime:s,global:i}=n,{db:a,auth:o,realtime:l,global:u}=e,c={db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},u),i),accessToken:()=>wA(this,void 0,void 0,function*(){return""})};return n.accessToken?c.accessToken=n.accessToken:delete c.accessToken,c}const Sw="2.69.1",yc=30*1e3,u0=3,am=u0*yc,SA="http://localhost:9999",kA="supabase.auth.token",CA={"X-Client-Info":`gotrue-js/${Sw}`},h0="X-Supabase-Api-Version",kw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},AA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,TA=6e5;class fv extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function jt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class PA extends fv{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function OA(n){return jt(n)&&n.name==="AuthApiError"}class Cw extends fv{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Eo extends fv{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class oo extends Eo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function LA(n){return jt(n)&&n.name==="AuthSessionMissingError"}class om extends Eo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wd extends Eo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Gd extends Eo{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function DA(n){return jt(n)&&n.name==="AuthImplicitGrantRedirectError"}class W2 extends Eo{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class d0 extends Eo{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function lm(n){return jt(n)&&n.name==="AuthRetryableFetchError"}class G2 extends Eo{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class hh extends Eo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const X2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),K2=` 	
\r=`.split(""),MA=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<K2.length;e+=1)n[K2[e].charCodeAt(0)]=-2;for(let e=0;e<X2.length;e+=1)n[X2[e].charCodeAt(0)]=e;return n})();function Aw(n,e,t){const r=MA[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function J2(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{jA(a,r,t)};for(let a=0;a<n.length;a+=1)Aw(n.charCodeAt(a),s,i);return e.join("")}function EA(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function NA(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}EA(r,e)}}function jA(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function RA(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)Aw(n.charCodeAt(s),t,r);return new Uint8Array(e)}function FA(n){const e=[];return NA(n,t=>e.push(t)),new Uint8Array(e)}function IA(n){return Math.round(Date.now()/1e3)+n}function BA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const qi=()=>typeof window<"u"&&typeof document<"u",Zo={tested:!1,writable:!1},dh=()=>{if(!qi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Zo.tested)return Zo.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Zo.tested=!0,Zo.writable=!0}catch{Zo.tested=!0,Zo.writable=!1}return Zo.writable};function $A(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const Tw=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Pa(async()=>{const{default:r}=await Promise.resolve().then(()=>eu);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},qA=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Pw=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Xd=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Kd=async(n,e)=>{await n.removeItem(e)};class Mp{constructor(){this.promise=new Mp.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Mp.promiseConstructor=Promise;function cm(n){const e=n.split(".");if(e.length!==3)throw new hh("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!AA.test(e[r]))throw new hh("JWT not in base64url format");return{header:JSON.parse(J2(e[0])),payload:JSON.parse(J2(e[1])),signature:RA(e[2]),raw:{header:e[0],payload:e[1]}}}async function UA(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function VA(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await n(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function zA(n){return("0"+n.toString(16)).substr(-2)}function HA(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,zA).join("")}async function YA(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function WA(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await YA(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function oc(n,e,t=!1){const r=HA();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await Pw(n,`${e}-code-verifier`,s);const i=await WA(r);return[i,r===i?"plain":"s256"]}const GA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function XA(n){const e=n.headers.get(h0);if(!e||!e.match(GA))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function KA(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function JA(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var QA=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const tl=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),ZA=[502,503,504];async function Q2(n){var e;if(!qA(n))throw new d0(tl(n),0);if(ZA.includes(n.status))throw new d0(tl(n),n.status);let t;try{t=await n.json()}catch(i){throw new Cw(tl(i),i)}let r;const s=XA(n);if(s&&s.getTime()>=kw["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new G2(tl(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new oo}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new G2(tl(t),n.status,t.weak_password.reasons);throw new PA(tl(t),n.status||500,r)}const eT=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function $t(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[h0]||(i[h0]=kw["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await tT(n,e,t+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function tT(n,e,t,r,s,i){const a=eT(e,r,s,i);let o;try{o=await n(t,Object.assign({},a))}catch(l){throw console.error(l),new d0(tl(l),0)}if(o.ok||await Q2(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await Q2(l)}}function lo(n){var e;let t=null;iT(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=IA(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Z2(n){const e=lo(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function go(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function rT(n){return{data:n,error:null}}function nT(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,a=QA(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function sT(n){return n}function iT(n){return n.access_token&&n.refresh_token&&n.expires_in}var aT=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class oT{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Tw(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await $t(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(jt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await $t(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:go})}catch(r){if(jt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=aT(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await $t(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:nT,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(jt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await $t(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:go})}catch(t){if(jt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await $t(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:sT});if(c.error)throw c.error;const h=await c.json(),p=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=b}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(jt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await $t(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:go})}catch(t){if(jt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await $t(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:go})}catch(r){if(jt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await $t(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:go})}catch(r){if(jt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await $t(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(jt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await $t(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(jt(t))return{data:null,error:t};throw t}}}const lT={getItem:n=>dh()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{dh()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{dh()&&globalThis.localStorage.removeItem(n)}};function ey(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function cT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const lc={debug:!!(globalThis&&dh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ow extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class uT extends Ow{}async function hT(n,e,t){lc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),lc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){lc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{lc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw lc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new uT(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(lc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}cT();const dT={url:SA,storageKey:kA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:CA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ty(n,e,t){return await t()}class Dh{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Dh.nextInstanceID,Dh.nextInstanceID+=1,this.instanceID>0&&qi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},dT),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new oT({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Tw(s.fetch),this.lock=s.lock||ty,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:qi()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=hT:this.lock=ty,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:dh()?this.storage=lT:(this.memoryStorage={},this.storage=ey(this.memoryStorage)):(this.memoryStorage={},this.storage=ey(this.memoryStorage)),qi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Sw}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=$A(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),qi()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),DA(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return jt(t)?{error:t}:{error:new Cw("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await $t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:lo}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(jt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:c,password:h,options:p}=e;let f=null,v=null;this.flowType==="pkce"&&([f,v]=await oc(this.storage,this.storageKey)),i=await $t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:c,password:h,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:f,code_challenge_method:v},xform:lo})}else if("phone"in e){const{phone:c,password:h,options:p}=e;i=await $t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:lo})}else throw new Wd("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(jt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await $t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Z2})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await $t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Z2})}else throw new Wd("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new om}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(jt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Xd(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:i,error:a}=await $t(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:lo});if(await Kd(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new om}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(jt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:a}=e,o=await $t(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:lo}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new om}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(jt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await oc(this.storage,this.storageKey));const{error:h}=await $t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:c}=await $t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Wd("You must provide either an email or phone number.")}catch(o){if(jt(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await $t(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:lo});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(jt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await oc(this.storage,this.storageKey)),await $t(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:rT})}catch(i){if(jt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new oo;const{error:s}=await $t(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(jt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await $t(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:o}=await $t(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Wd("You must provide either an email or phone number and a type")}catch(t){if(jt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Xd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<am:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await $t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:go}):await this._useSession(async t=>{var r,s,i;const{data:a,error:o}=t;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new oo}:await $t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:go})})}catch(t){if(jt(t))return LA(t)&&(await this._removeSession(),await Kd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new oo;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await oc(this.storage,this.storageKey));const{data:u,error:c}=await $t(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:go});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(jt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new oo;const t=Date.now()/1e3;let r=t,s=!0,i=null;const{payload:a}=cm(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(jt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new oo;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(jt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!qi())throw new Gd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Gd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new W2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Gd("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new W2("No code detected.");const{data:k,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=e;if(!i||!o||!a||!u)throw new Gd("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(o);let p=c+h;l&&(p=parseInt(l));const f=p-c;f*1e3<=yc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const v=p-h;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,c);const{data:b,error:x}=await this._getUser(i);if(x)throw x;const w={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:p,refresh_token:a,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(jt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Xd(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(OA(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Kd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=BA(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await oc(this.storage,this.storageKey,!0));try{return await $t(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(jt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(jt(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var a,o,l,u,c;const{data:h,error:p}=i;if(p)throw p;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await $t(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return qi()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(jt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)throw a;return await $t(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(jt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await VA(async s=>(s>0&&await UA(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await $t(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:lo})),(s,i)=>{const a=200*Math.pow(2,s);return i&&lm(i)&&Date.now()+a-r<yc})}catch(r){if(this._debug(t,"error",r),jt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),qi()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Xd(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<am;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${am}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),lm(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new oo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Mp;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new oo;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),jt(i)){const a={session:null,error:i};return lm(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Pw(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Kd(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&qi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),yc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/yc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${yc}ms, refresh threshold is ${u0} ticks`),s<=u0&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ow)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await oc(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await $t(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(jt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await $t(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(jt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await $t(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(jt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await $t(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(jt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=cm(s.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(a=>a.kid===e);if(r||(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+TA>Date.now()))return r;const{data:s,error:i}=await $t(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new hh("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(a=>a.kid===e),!r)throw new hh("No matching signing key found in JWKS");return r}async getClaims(e,t={keys:[]}){try{let r=e;if(!r){const{data:f,error:v}=await this.getSession();if(v||!f.session)return{data:null,error:v};r=f.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:l}}=cm(r);if(KA(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:a},error:null}}const u=JA(s.alg),c=await this.fetchJwk(s.kid,t),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,a,FA(`${o}.${l}`)))throw new hh("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(jt(r))return{data:null,error:r};throw r}}}Dh.nextInstanceID=0;const fT=Dh;class pT extends fT{constructor(e){super(e)}}var gT=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class mT{constructor(e,t,r){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=_A(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:fA,realtime:gA,auth:Object.assign(Object.assign({},pA),{storageKey:l}),global:dA},c=xA(r??{},u);this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=c.auth)!==null&&a!==void 0?a:{},this.headers,c.global.fetch),this.fetch=bA(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new NC(`${o}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new wC(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new cA(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return gT(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:o,debug:l},u,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pT({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:a,lock:o,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new XC(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const vT=(n,e,t)=>new mT(n,e,t),yT="https://ksyzvskmdyaopajckqra.supabase.co",bT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtzeXp2c2ttZHlhb3BhamNrcXJhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE5NzEwNzIsImV4cCI6MjA1NzU0NzA3Mn0.ITMQ5luBCqYyLgzTNH3yVj22K2U_C5Cal4L3iRWnA_c",sn=vT(yT,bT),Lw="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2025.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Camada_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2081%2046'%20style='enable-background:new%200%200%2081%2046;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{clip-path:url(%23SVGID_2_);}%20.st1{fill:%23007B4E;}%20%3c/style%3e%3cg%3e%3cdefs%3e%3crect%20id='SVGID_1_'%20width='81'%20height='46'/%3e%3c/defs%3e%3cclipPath%20id='SVGID_2_'%3e%3cuse%20xlink:href='%23SVGID_1_'%20style='overflow:visible;'/%3e%3c/clipPath%3e%3cg%20class='st0'%3e%3cpath%20class='st1'%20d='M81,1.7H70.6L48.1,23.8L70.6,46H81L58.5,23.8L81,1.7z'/%3e%3cpath%20class='st1'%20d='M41.1,23.8V46h-7.4V31.1H18.6v-7.3H41.1z'/%3e%3cpath%20class='st1'%20d='M7.4,23.8c0-9.2,7.6-16.6,16.9-16.6c4.3,0,8.4,1.6,11.6,4.5L41,6.6C31.3-2.5,16-2.2,6.7,7.4%20C2.4,11.8,0,17.7,0,23.8H7.4z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",wT="/assets/menu-BTYy-uCu.png",_T=["type"],xT={__name:"BaseButton",props:{label:String,color:{type:String,default:"green"},type:{type:String,default:"button"}},setup(n){return(e,t)=>(_e(),Me("button",{class:Ct(["base-button",n.color]),type:n.type},Vt(n.label),11,_T))}},Qs=xn(xT,[["__scopeId","data-v-5a23f10e"]]),ST={class:"container"},kT=["src"],CT={key:0},AT={key:1},TT={class:"main-content"},PT={class:"header"},OT=["src"],LT={class:"content"},DT={__name:"DashboardView",setup(n){const e=xs(),t=$e(!1),r=()=>{t.value=!t.value},s=$e(""),i=$e(""),a=async()=>{const{data:u}=await sn.auth.getUser();if(!u||!u.user)return;const{data:c,error:h}=await sn.from("users").select("name, role").eq("auth_id",u.user.id).single();if(h){console.log("Error fecthing user data",h);return}s.value=c.name,i.value=c.role},o=async()=>{await sn.auth.signOut(),e.push("/")},l=()=>{e.push("/dashboard")};return dr(a),(u,c)=>{const h=Kf("RouterLink"),p=Kf("RouterView");return _e(),Me("div",ST,[Ne("aside",{class:Ct(["sidebar",{"sidebar-open":t.value}])},[Ne("img",{src:ue(Lw),class:"logo",onClick:l,alt:""},null,8,kT),c[18]||(c[18]=Ne("h1",null,"Service Portal",-1)),i.value&&i.value==="service_leader"?(_e(),Me("nav",CT,[ot(h,{to:"/technicians","active-class":"active",onClick:r},{default:mt(()=>c[0]||(c[0]=[or("Tekniker")])),_:1}),ot(h,{to:"/services","active-class":"active",onClick:r},{default:mt(()=>c[1]||(c[1]=[or("Service")])),_:1}),ot(h,{to:"/orders","active-class":"active",onClick:r},{default:mt(()=>c[2]||(c[2]=[or("Arbetsorder")])),_:1}),ot(h,{to:"/projects","active-class":"active",onClick:r},{default:mt(()=>c[3]||(c[3]=[or("Projekt")])),_:1}),c[8]||(c[8]=Ne("div",{class:"border"},null,-1)),ot(h,{to:"/devices","active-class":"active",onClick:r},{default:mt(()=>c[4]||(c[4]=[or("Mätinstrument")])),_:1}),ot(h,{to:"/department","active-class":"active",onClick:r},{default:mt(()=>c[5]||(c[5]=[or("Avdelning")])),_:1}),ot(h,{to:"/skogsblomman","active-class":"active",onClick:r},{default:mt(()=>c[6]||(c[6]=[or("Skogsblomman")])),_:1}),ot(h,{to:"/gkpaint","active-class":"active",onClick:r},{default:mt(()=>c[7]||(c[7]=[or("GKPaint")])),_:1}),c[9]||(c[9]=Ne("div",{class:"spacer"},null,-1)),ot(Qs,{label:"Logga ut",color:"white",onClick:o})])):i.value&&i.value==="technician"?(_e(),Me("nav",AT,[ot(h,{to:"/services","active-class":"active",onClick:r},{default:mt(()=>c[10]||(c[10]=[or("Service")])),_:1}),ot(h,{to:"/orders","active-class":"active",onClick:r},{default:mt(()=>c[11]||(c[11]=[or("Arbetsorder")])),_:1}),c[16]||(c[16]=Ne("div",{class:"border"},null,-1)),ot(h,{to:"/department","active-class":"active",onClick:r},{default:mt(()=>c[12]||(c[12]=[or("Avdelning")])),_:1}),ot(h,{to:"/skogsblomman","active-class":"active",onClick:r},{default:mt(()=>c[13]||(c[13]=[or("Skogsblomman")])),_:1}),ot(h,{to:"/gkpaint","active-class":"active",onClick:r},{default:mt(()=>c[14]||(c[14]=[or("GKPaint")])),_:1}),ot(h,{to:"/jobs","active-class":"active",onClick:r},{default:mt(()=>c[15]||(c[15]=[or("Mina jobb")])),_:1}),c[17]||(c[17]=Ne("div",{class:"spacer"},null,-1)),ot(Qs,{label:"Logga ut",color:"white",onClick:o})])):Ge("",!0)],2),t.value?(_e(),Me("div",{key:0,class:"overlay",onClick:r})):Ge("",!0),Ne("div",TT,[Ne("header",PT,[Ne("div",null,[Ne("img",{src:ue(wT),class:"hamburger",alt:"menu",onClick:r},null,8,OT),Ne("p",null,[c[19]||(c[19]=Ne("strong",null,"Inloggad som:",-1)),or(" "+Vt(s.value),1)])])]),Ne("main",LT,[ot(p)])])])}}},MT=xn(DT,[["__scopeId","data-v-d368a6ed"]]),ET={class:"login-container"},NT={class:"login-box"},jT=["src"],RT={__name:"LoginView",setup(n){const e=$e(""),t=$e(""),r=xs(),s=ms("toast"),i=async()=>{const{error:a}=await sn.auth.signInWithPassword({email:e.value,password:t.value});a?s.value.showToast("Fel inloggningsuppgifter, testa igen","error"):r.push("/dashboard")};return(a,o)=>(_e(),Me("div",ET,[Ne("div",NT,[Ne("img",{src:ue(Lw),alt:"Company Logo",class:"login-image"},null,8,jT),Ne("form",{onSubmit:Js(i,["prevent"])},[rn(Ne("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>e.value=l),type:"email",placeholder:"Email..",class:"input-field",required:""},null,512),[[rs,e.value]]),rn(Ne("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>t.value=l),type:"password",placeholder:"Lösenord..",class:"input-field",required:""},null,512),[[rs,t.value]]),o[2]||(o[2]=Ne("button",{type:"submit",class:"login-button"},"Logga in",-1))],32)])]))}},FT=xn(RT,[["__scopeId","data-v-90fe9a52"]]),IT="/assets/setting-BStQKzCh.png",BT="/assets/avatar-CBrJvkTF.png",$T={class:"tech-container"},qT={class:"tech-header"},UT={class:"card-container"},VT={class:"card-avatar"},zT=["src"],HT={class:"card-header"},YT=["src"],WT={__name:"TechniciansView",setup(n){const e=xs(),t=$e([]),r=async()=>{const{data:i,error:a}=await sn.from("users").select("id, name, employment_id, phone, email").eq("role","technician");a?console.error("Error fetching tech data:",a):(t.value=i,t.value.sort((o,l)=>o.name.localeCompare(l.name)))},s=()=>{e.push("/technicians/add")};return dr(()=>{r()}),(i,a)=>{const o=Kf("router-link");return _e(),Me("div",$T,[Ne("div",qT,[a[0]||(a[0]=Ne("h2",null,"Tekniker",-1)),ot(Qs,{label:"Lägg till tekniker",color:"green",onClick:s})]),Ne("div",UT,[(_e(!0),Me(pt,null,nr(t.value,l=>(_e(),Me("div",{class:"card",key:l.id},[Ne("div",VT,[Ne("img",{src:ue(BT),alt:"avatar",style:{width:"70px"}},null,8,zT)]),Ne("div",HT,[Ne("h3",null,Vt(l.name),1),ot(o,{to:`/technicians/edit/${l.id}`},{default:mt(()=>[Ne("img",{src:ue(IT),alt:""},null,8,YT)]),_:2},1032,["to"])]),Ne("p",null,[a[1]||(a[1]=Ne("strong",null,"Anställningsnr:",-1)),or(" "+Vt(l.employment_id),1)]),Ne("p",null,[a[2]||(a[2]=Ne("strong",null,"Mail:",-1)),or(" "+Vt(l.email),1)]),Ne("p",null,[a[3]||(a[3]=Ne("strong",null,"Telefon:",-1)),or(" "+Vt(l.phone),1)])]))),128))])])}}},GT=xn(WT,[["__scopeId","data-v-59692fd8"]]),XT="/assets/edit-B_CFJpB4.png",KT=["onClick"],JT=["src"],QT={class:"content"},ZT={class:"row-title"},eP={class:"row"},tP={key:1},rP={class:"edit"},nP=["src","onClick"],sP={__name:"BaseView",props:{tableName:String,fields:Array},setup(n){const e=n,t=xs(),r=$e([]),s=$e(!1),i=async()=>{e.tableName==="devices"&&(s.value=!0);let c=sn.from(e.tableName).select("*");const{data:h,error:p}=await c;if(p){console.error("Error fetiching data:",p);return}r.value=h,a()},a=()=>{e.tableName==="services"&&r.value.sort((c,h)=>c.customer.localeCompare(h.customer)),e.tableName==="orders"&&r.value.sort((c,h)=>c.ordername.localeCompare(h.ordername)),e.tableName==="projects"&&r.value.sort((c,h)=>c.projectname.localeCompare(h.projectname)),e.tableName==="devices"&&r.value.sort((c,h)=>c.name.localeCompare(h.name))},o=c=>{if(!c)return;const h=new Date,f=new Date(c).getTime()-h.getTime(),v=Math.ceil(f/(1e3*3600*24));return v<0?"text-red":v<=30?"text-orange":""},l=c=>{t.push(`/${e.tableName}/${c}`)},u=c=>{t.push(`/${e.tableName}/edit/${c}`)};return dr(()=>{i()}),(c,h)=>(_e(),Me("div",null,[Ne("ul",null,[(_e(!0),Me(pt,null,nr(r.value,p=>(_e(),Me("li",{key:p.id,class:"card",onClick:f=>l(p.id)},[Ne("div",null,[s.value?(_e(),Me("img",{key:0,src:p.image_url,class:"device-image",alt:""},null,8,JT)):Ge("",!0)]),Ne("div",QT,[Ne("div",ZT,Vt(p[n.fields[0]]),1),Ne("div",eP,[s.value?(_e(),Me("div",{key:0,class:Ct(o(p.nextdate))}," Kalibreras senast: "+Vt(p[n.fields[1]]),3)):(_e(),Me("div",tP,Vt(p[n.fields[1]]),1))])]),Ne("div",rP,[Ne("img",{src:ue(XT),alt:"",onClick:Js(f=>u(p.id),["stop"])},null,8,nP)])],8,KT))),128))])]))}},Ep=xn(sP,[["__scopeId","data-v-e817fb24"]]),iP={__name:"OrdersView",setup(n){const e=xs(),t=()=>{e.push("/orders/add")};return(r,s)=>(_e(),Me(pt,null,[Ne("div",null,[s[0]||(s[0]=Ne("h2",null,"Arbetsorder",-1)),ot(Qs,{label:"Lägg till arbetsorder",color:"green",onClick:t})]),ot(Ep,{tableName:"orders",fields:["ordername","address"]})],64))}},aP={};function oP(n,e){return"Mina Jobb"}const lP=xn(aP,[["render",oP]]),cP={class:"edit-technician"},uP={__name:"EditTechniciansView",setup(n){const e=lv(),t=xs(),r=ms("toast"),s=$e({name:"",email:"",phone:"",employment_id:"",id:null}),i=async()=>{const u=e.params.id,{data:c,error:h}=await sn.from("users").select("*").eq("id",u).single();if(h){console.error("Error fetching technician:",h);return}s.value=c},a=async()=>{const{error:u}=await sn.from("users").update({name:s.value.name,email:s.value.email,phone:s.value.phone,employment_id:s.value.employment_id}).eq("id",s.value.id);if(u){console.error("Error updating technician:",u),r.value.showToast("Kunde inte uppdatera tekniker","error");return}r.value.showToast("Tekniker uppdaterad","success"),t.push("/technicians")},o=()=>{window.confirm("Vill du verkligen ta bort denna tekniker?")&&l()},l=async()=>{const{error:u}=await sn.from("users").delete().eq("id",s.value.id);if(u){console.error("Error deleting technician:",u);return}r.value.showToast("Tekniker borttagen","warning"),t.push("/technicians")};return dr(()=>{i()}),(u,c)=>(_e(),Me("div",cP,[c[4]||(c[4]=Ne("h3",null,"Redigera",-1)),Ne("form",{onSubmit:Js(a,["prevent"])},[rn(Ne("input",{"onUpdate:modelValue":c[0]||(c[0]=h=>s.value.name=h),type:"text",placeholder:"Namn.."},null,512),[[rs,s.value.name]]),rn(Ne("input",{"onUpdate:modelValue":c[1]||(c[1]=h=>s.value.email=h),id:"email",type:"email",placeholder:"Email.."},null,512),[[rs,s.value.email]]),rn(Ne("input",{"onUpdate:modelValue":c[2]||(c[2]=h=>s.value.phone=h),id:"phone",type:"text",placeholder:"Telefon.."},null,512),[[rs,s.value.phone]]),rn(Ne("input",{"onUpdate:modelValue":c[3]||(c[3]=h=>s.value.employment_id=h),id:"empId",type:"text",placeholder:"Anställningsnummer.."},null,512),[[rs,s.value.employment_id]]),ot(Qs,{label:"Uppdatera",color:"green",type:"submit"})],32),ot(Qs,{label:"Ta bort tekniker",color:"red",onClick:o})]))}},hP=xn(uP,[["__scopeId","data-v-3727f8e7"]]),dP={__name:"AddTechniciansView",setup(n){const e=xs(),t=$e(""),r=$e(""),s=$e(""),i=$e(""),a=$e(""),o=ms("toast"),l=async()=>{const{error:u}=await sn.from("users").insert([{name:t.value,employment_id:r.value,phone:s.value,email:i.value,role:"technician"}]);if(u){console.error("Error adding tech:",u),o.value.showToast("Kunde inte skapa ny tekniker","error");return}o.value.showToast("Ny tekniker skapad","success"),t.value=r.value=s.value=i.value=a.value="",e.push("/technicians")};return(u,c)=>(_e(),Me("div",null,[c[5]||(c[5]=Ne("h3",null,"Skapa ny tekniker",-1)),Ne("form",{onSubmit:Js(l,["prevent"])},[rn(Ne("input",{"onUpdate:modelValue":c[0]||(c[0]=h=>t.value=h),placeholder:"Namn",required:""},null,512),[[rs,t.value]]),rn(Ne("input",{"onUpdate:modelValue":c[1]||(c[1]=h=>r.value=h),placeholder:"Anställningsnummer",required:""},null,512),[[rs,r.value]]),rn(Ne("input",{"onUpdate:modelValue":c[2]||(c[2]=h=>s.value=h),placeholder:"Telefonnummer",required:""},null,512),[[rs,s.value]]),rn(Ne("input",{"onUpdate:modelValue":c[3]||(c[3]=h=>i.value=h),placeholder:"Email",type:"email",required:""},null,512),[[rs,i.value]]),rn(Ne("input",{"onUpdate:modelValue":c[4]||(c[4]=h=>a.value=h),placeholder:"Lösenord",type:"password",required:""},null,512),[[rs,a.value]]),ot(Qs,{label:"Lägg till",color:"green",type:"submit"})],32)]))}},fP=xn(dP,[["__scopeId","data-v-5bfb1303"]]),pP={__name:"ServicesView",setup(n){const e=xs(),t=()=>{e.push("/services/add")};return(r,s)=>(_e(),Me(pt,null,[Ne("div",null,[s[0]||(s[0]=Ne("h2",null,"Service",-1)),ot(Qs,{label:"Lägg till service",color:"green",onClick:t})]),ot(Ep,{tableName:"services",fields:["customer","address"]})],64))}},Dw=6048e5,gP=864e5,mP=6e4,Mw=36e5,vP=1e3,ry=Symbol.for("constructDateFrom");function ir(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&ry in n?n[ry](e):n instanceof Date?new n.constructor(e):new Date(e)}function wt(n,e){return ir(e||n,n)}function Ws(n,e,t){const r=wt(n,t==null?void 0:t.in);return isNaN(e)?ir((t==null?void 0:t.in)||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function ki(n,e,t){const r=wt(n,t==null?void 0:t.in);if(isNaN(e))return ir(n,NaN);if(!e)return r;const s=r.getDate(),i=ir(n,r.getTime());i.setMonth(r.getMonth()+e+1,0);const a=i.getDate();return s>=a?i:(r.setFullYear(i.getFullYear(),i.getMonth(),s),r)}function Ew(n,e,t){const{years:r=0,months:s=0,weeks:i=0,days:a=0,hours:o=0,minutes:l=0,seconds:u=0}=e,c=wt(n,t==null?void 0:t.in),h=s||r?ki(c,s+r*12):c,p=a||i?Ws(h,a+i*7):h,f=l+o*60,b=(u+f*60)*1e3;return ir(n,+p+b)}function yP(n,e,t){return ir(n,+wt(n)+e)}function bP(n,e,t){return yP(n,e*Mw)}let wP={};function xl(){return wP}function Pi(n,e){var o,l,u,c;const t=xl(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((c=(u=t.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??0,s=wt(n,e==null?void 0:e.in),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Yc(n,e){return Pi(n,{...e,weekStartsOn:1})}function Nw(n,e){const t=wt(n,e==null?void 0:e.in),r=t.getFullYear(),s=ir(t,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Yc(s),a=ir(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=Yc(a);return t.getTime()>=i.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function tp(n){const e=wt(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Hh(n,...e){const t=ir.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function ny(n,e){const t=wt(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function jw(n,e,t){const[r,s]=Hh(t==null?void 0:t.in,n,e),i=ny(r),a=ny(s),o=+i-tp(i),l=+a-tp(a);return Math.round((o-l)/gP)}function _P(n,e){const t=Nw(n,e),r=ir(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Yc(r)}function xP(n,e,t){return ki(n,e*3,t)}function pv(n,e,t){return ki(n,e*12,t)}function sy(n,e){const t=+wt(n)-+wt(e);return t<0?-1:t>0?1:t}function Rw(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function fh(n){return!(!Rw(n)&&typeof n!="number"||isNaN(+wt(n)))}function iy(n,e){const t=wt(n,e==null?void 0:e.in);return Math.trunc(t.getMonth()/3)+1}function SP(n,e,t){const[r,s]=Hh(t==null?void 0:t.in,n,e);return r.getFullYear()-s.getFullYear()}function kP(n,e,t){const[r,s]=Hh(t==null?void 0:t.in,n,e),i=sy(r,s),a=Math.abs(SP(r,s));r.setFullYear(1584),s.setFullYear(1584);const o=sy(r,s)===-i,l=i*(a-+o);return l===0?0:l}function Fw(n,e){const[t,r]=Hh(n,e.start,e.end);return{start:t,end:r}}function Iw(n,e){const{start:t,end:r}=Fw(e==null?void 0:e.in,n);let s=+t>+r;const i=s?+t:+r,a=s?r:t;a.setHours(0,0,0,0);let o=1;const l=[];for(;+a<=i;)l.push(ir(t,a)),a.setDate(a.getDate()+o),a.setHours(0,0,0,0);return s?l.reverse():l}function cl(n,e){const t=wt(n,e==null?void 0:e.in),r=t.getMonth(),s=r-r%3;return t.setMonth(s,1),t.setHours(0,0,0,0),t}function CP(n,e){const{start:t,end:r}=Fw(e==null?void 0:e.in,n);let s=+t>+r;const i=s?+cl(t):+cl(r);let a=cl(s?r:t),o=1;const l=[];for(;+a<=i;)l.push(ir(t,a)),a=xP(a,o);return s?l.reverse():l}function AP(n,e){const t=wt(n,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function Bw(n,e){const t=wt(n,e==null?void 0:e.in),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function Mh(n,e){const t=wt(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function $w(n,e){var o,l,u,c;const t=xl(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((c=(u=t.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??0,s=wt(n,e==null?void 0:e.in),i=s.getDay(),a=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}function ay(n,e){const t=wt(n,e==null?void 0:e.in),r=t.getMonth(),s=r-r%3+3;return t.setMonth(s,0),t.setHours(23,59,59,999),t}const TP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},PP=(n,e,t)=>{let r;const s=TP[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function um(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const OP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},LP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},DP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},MP={date:um({formats:OP,defaultWidth:"full"}),time:um({formats:LP,defaultWidth:"full"}),dateTime:um({formats:DP,defaultWidth:"full"})},EP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},NP=(n,e,t,r)=>EP[n];function Yu(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):a;s=n.formattingValues[o]||n.formattingValues[a]}else{const a=n.defaultWidth,o=t!=null&&t.width?String(t.width):n.defaultWidth;s=n.values[o]||n.values[a]}const i=n.argumentCallback?n.argumentCallback(e):e;return s[i]}}const jP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},RP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},FP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},IP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},BP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$P={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},qP=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},UP={ordinalNumber:qP,era:Yu({values:jP,defaultWidth:"wide"}),quarter:Yu({values:RP,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Yu({values:FP,defaultWidth:"wide"}),day:Yu({values:IP,defaultWidth:"wide"}),dayPeriod:Yu({values:BP,defaultWidth:"wide",formattingValues:$P,defaultFormattingWidth:"wide"})};function Wu(n){return(e,t={})=>{const r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?zP(o,h=>h.test(a)):VP(o,h=>h.test(a));let u;u=n.valueCallback?n.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;const c=e.slice(a.length);return{value:u,rest:c}}}function VP(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function zP(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function HP(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const s=r[0],i=e.match(n.parsePattern);if(!i)return null;let a=n.valueCallback?n.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const YP=/^(\d+)(th|st|nd|rd)?/i,WP=/\d+/i,GP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},XP={any:[/^b/i,/^(a|c)/i]},KP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},JP={any:[/1/i,/2/i,/3/i,/4/i]},QP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ZP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},e6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},t6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},r6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},n6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},s6={ordinalNumber:HP({matchPattern:YP,parsePattern:WP,valueCallback:n=>parseInt(n,10)}),era:Wu({matchPatterns:GP,defaultMatchWidth:"wide",parsePatterns:XP,defaultParseWidth:"any"}),quarter:Wu({matchPatterns:KP,defaultMatchWidth:"wide",parsePatterns:JP,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Wu({matchPatterns:QP,defaultMatchWidth:"wide",parsePatterns:ZP,defaultParseWidth:"any"}),day:Wu({matchPatterns:e6,defaultMatchWidth:"wide",parsePatterns:t6,defaultParseWidth:"any"}),dayPeriod:Wu({matchPatterns:r6,defaultMatchWidth:"any",parsePatterns:n6,defaultParseWidth:"any"})},qw={code:"en-US",formatDistance:PP,formatLong:MP,formatRelative:NP,localize:UP,match:s6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function i6(n,e){const t=wt(n,e==null?void 0:e.in);return jw(t,Mh(t))+1}function gv(n,e){const t=wt(n,e==null?void 0:e.in),r=+Yc(t)-+_P(t);return Math.round(r/Dw)+1}function mv(n,e){var c,h,p,f;const t=wt(n,e==null?void 0:e.in),r=t.getFullYear(),s=xl(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((f=(p=s.locale)==null?void 0:p.options)==null?void 0:f.firstWeekContainsDate)??1,a=ir((e==null?void 0:e.in)||n,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const o=Pi(a,e),l=ir((e==null?void 0:e.in)||n,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const u=Pi(l,e);return+t>=+o?r+1:+t>=+u?r:r-1}function a6(n,e){var o,l,u,c;const t=xl(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((c=(u=t.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??1,s=mv(n,e),i=ir((e==null?void 0:e.in)||n,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Pi(i,e)}function vv(n,e){const t=wt(n,e==null?void 0:e.in),r=+Pi(t,e)-+a6(t,e);return Math.round(r/Dw)+1}function rr(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const to={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return rr(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):rr(t+1,2)},d(n,e){return rr(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return rr(n.getHours()%12||12,e.length)},H(n,e){return rr(n.getHours(),e.length)},m(n,e){return rr(n.getMinutes(),e.length)},s(n,e){return rr(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return rr(s,e.length)}},cc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},oy={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return to.y(n,e)},Y:function(n,e,t,r){const s=mv(n,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return rr(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):rr(i,e.length)},R:function(n,e){const t=Nw(n);return rr(t,e.length)},u:function(n,e){const t=n.getFullYear();return rr(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return rr(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return rr(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return to.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return rr(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const s=vv(n,r);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):rr(s,e.length)},I:function(n,e,t){const r=gv(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):rr(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):to.d(n,e)},D:function(n,e,t){const r=i6(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):rr(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return rr(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return rr(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return rr(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let s;switch(r===12?s=cc.noon:r===0?s=cc.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let s;switch(r>=17?s=cc.evening:r>=12?s=cc.afternoon:r>=4?s=cc.morning:s=cc.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return to.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):to.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):rr(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):rr(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):to.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):to.s(n,e)},S:function(n,e){return to.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return cy(r);case"XXXX":case"XX":return rl(r);case"XXXXX":case"XXX":default:return rl(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return cy(r);case"xxxx":case"xx":return rl(r);case"xxxxx":case"xxx":default:return rl(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ly(r,":");case"OOOO":default:return"GMT"+rl(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ly(r,":");case"zzzz":default:return"GMT"+rl(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return rr(r,e.length)},T:function(n,e,t){return rr(+n,e.length)}};function ly(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Math.trunc(r/60),i=r%60;return i===0?t+String(s):t+String(s)+e+rr(i,2)}function cy(n,e){return n%60===0?(n>0?"-":"+")+rr(Math.abs(n)/60,2):rl(n,e)}function rl(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=rr(Math.trunc(r/60),2),i=rr(r%60,2);return t+s+e+i}const uy=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Uw=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},o6=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return uy(n,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",uy(r,e)).replace("{{time}}",Uw(s,e))},f0={p:Uw,P:o6},l6=/^D+$/,c6=/^Y+$/,u6=["D","DD","YY","YYYY"];function Vw(n){return l6.test(n)}function zw(n){return c6.test(n)}function p0(n,e,t){const r=h6(n,e,t);if(console.warn(r),u6.includes(n))throw new RangeError(r)}function h6(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const d6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,f6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,p6=/^'([^]*?)'?$/,g6=/''/g,m6=/[a-zA-Z]/;function Qi(n,e,t){var c,h,p,f,v,b,x,w;const r=xl(),s=(t==null?void 0:t.locale)??r.locale??qw,i=(t==null?void 0:t.firstWeekContainsDate)??((h=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(p=r.locale)==null?void 0:p.options)==null?void 0:f.firstWeekContainsDate)??1,a=(t==null?void 0:t.weekStartsOn)??((b=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((w=(x=r.locale)==null?void 0:x.options)==null?void 0:w.weekStartsOn)??0,o=wt(n,t==null?void 0:t.in);if(!fh(o))throw new RangeError("Invalid time value");let l=e.match(f6).map(k=>{const T=k[0];if(T==="p"||T==="P"){const I=f0[T];return I(k,s.formatLong)}return k}).join("").match(d6).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const T=k[0];if(T==="'")return{isToken:!1,value:v6(k)};if(oy[T])return{isToken:!0,value:k};if(T.match(m6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:k}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const u={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return l.map(k=>{if(!k.isToken)return k.value;const T=k.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&zw(T)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&Vw(T))&&p0(T,e,String(n));const I=oy[T[0]];return I(o,T,s.localize,u)}).join("")}function v6(n){const e=n.match(p6);return e?e[1].replace(g6,"'"):n}function y6(n,e){return wt(n,e==null?void 0:e.in).getDay()}function b6(n,e){const t=wt(n,e==null?void 0:e.in),r=t.getFullYear(),s=t.getMonth(),i=ir(t,0);return i.setFullYear(r,s+1,0),i.setHours(0,0,0,0),i.getDate()}function w6(){return Object.assign({},xl())}function Oa(n,e){return wt(n,e==null?void 0:e.in).getHours()}function _6(n,e){const t=wt(n,e==null?void 0:e.in).getDay();return t===0?7:t}function Co(n,e){return wt(n,e==null?void 0:e.in).getMinutes()}function qt(n,e){return wt(n,e==null?void 0:e.in).getMonth()}function Wc(n){return wt(n).getSeconds()}function At(n,e){return wt(n,e==null?void 0:e.in).getFullYear()}function yl(n,e){return+wt(n)>+wt(e)}function Gc(n,e){return+wt(n)<+wt(e)}function Sc(n,e){return+wt(n)==+wt(e)}function x6(n,e){const t=S6(e)?new e(0):ir(e,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}function S6(n){var e;return typeof n=="function"&&((e=n.prototype)==null?void 0:e.constructor)===n}const k6=10;class Hw{constructor(){ut(this,"subPriority",0)}validate(e,t){return!0}}class C6 extends Hw{constructor(e,t,r,s,i){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=s,i&&(this.subPriority=i)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class A6 extends Hw{constructor(t,r){super();ut(this,"priority",k6);ut(this,"subPriority",-1);this.context=t||(s=>ir(r,s))}set(t,r){return r.timestampIsSet?t:ir(t,x6(t,this.context))}}class Kt{run(e,t,r,s){const i=this.parse(e,t,r,s);return i?{setter:new C6(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,t,r){return!0}}class T6 extends Kt{constructor(){super(...arguments);ut(this,"priority",140);ut(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,s){switch(r){case"G":case"GG":case"GGG":return s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"});case"GGGGG":return s.era(t,{width:"narrow"});case"GGGG":default:return s.era(t,{width:"wide"})||s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"})}}set(t,r,s){return r.era=s,t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}const Vr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Hi={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function zr(n,e){return n&&{value:e(n.value),rest:n.rest}}function Pr(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Yi(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,s=t[2]?parseInt(t[2],10):0,i=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:r*(s*Mw+i*mP+a*vP),rest:e.slice(t[0].length)}}function Yw(n){return Pr(Vr.anyDigitsSigned,n)}function Er(n,e){switch(n){case 1:return Pr(Vr.singleDigit,e);case 2:return Pr(Vr.twoDigits,e);case 3:return Pr(Vr.threeDigits,e);case 4:return Pr(Vr.fourDigits,e);default:return Pr(new RegExp("^\\d{1,"+n+"}"),e)}}function rp(n,e){switch(n){case 1:return Pr(Vr.singleDigitSigned,e);case 2:return Pr(Vr.twoDigitsSigned,e);case 3:return Pr(Vr.threeDigitsSigned,e);case 4:return Pr(Vr.fourDigitsSigned,e);default:return Pr(new RegExp("^-?\\d{1,"+n+"}"),e)}}function yv(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Ww(n,e){const t=e>0,r=t?e:1-e;let s;if(r<=50)s=n||100;else{const i=r+50,a=Math.trunc(i/100)*100,o=n>=i%100;s=n+a-(o?100:0)}return t?s:1-s}function Gw(n){return n%400===0||n%4===0&&n%100!==0}class P6 extends Kt{constructor(){super(...arguments);ut(this,"priority",130);ut(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,s){const i=a=>({year:a,isTwoDigitYear:r==="yy"});switch(r){case"y":return zr(Er(4,t),i);case"yo":return zr(s.ordinalNumber(t,{unit:"year"}),i);default:return zr(Er(r.length,t),i)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,s){const i=t.getFullYear();if(s.isTwoDigitYear){const o=Ww(s.year,i);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const a=!("era"in r)||r.era===1?s.year:1-s.year;return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}}class O6 extends Kt{constructor(){super(...arguments);ut(this,"priority",130);ut(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,s){const i=a=>({year:a,isTwoDigitYear:r==="YY"});switch(r){case"Y":return zr(Er(4,t),i);case"Yo":return zr(s.ordinalNumber(t,{unit:"year"}),i);default:return zr(Er(r.length,t),i)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,s,i){const a=mv(t,i);if(s.isTwoDigitYear){const l=Ww(s.year,a);return t.setFullYear(l,0,i.firstWeekContainsDate),t.setHours(0,0,0,0),Pi(t,i)}const o=!("era"in r)||r.era===1?s.year:1-s.year;return t.setFullYear(o,0,i.firstWeekContainsDate),t.setHours(0,0,0,0),Pi(t,i)}}class L6 extends Kt{constructor(){super(...arguments);ut(this,"priority",130);ut(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return rp(r==="R"?4:r.length,t)}set(t,r,s){const i=ir(t,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),Yc(i)}}class D6 extends Kt{constructor(){super(...arguments);ut(this,"priority",130);ut(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return rp(r==="u"?4:r.length,t)}set(t,r,s){return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}class M6 extends Kt{constructor(){super(...arguments);ut(this,"priority",120);ut(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,s){switch(r){case"Q":case"QQ":return Er(r.length,t);case"Qo":return s.ordinalNumber(t,{unit:"quarter"});case"QQQ":return s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(t,{width:"wide",context:"formatting"})||s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}}class E6 extends Kt{constructor(){super(...arguments);ut(this,"priority",120);ut(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,s){switch(r){case"q":case"qq":return Er(r.length,t);case"qo":return s.ordinalNumber(t,{unit:"quarter"});case"qqq":return s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(t,{width:"wide",context:"standalone"})||s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}}class N6 extends Kt{constructor(){super(...arguments);ut(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);ut(this,"priority",110)}parse(t,r,s){const i=a=>a-1;switch(r){case"M":return zr(Pr(Vr.month,t),i);case"MM":return zr(Er(2,t),i);case"Mo":return zr(s.ordinalNumber(t,{unit:"month"}),i);case"MMM":return s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(t,{width:"wide",context:"formatting"})||s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}class j6 extends Kt{constructor(){super(...arguments);ut(this,"priority",110);ut(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,s){const i=a=>a-1;switch(r){case"L":return zr(Pr(Vr.month,t),i);case"LL":return zr(Er(2,t),i);case"Lo":return zr(s.ordinalNumber(t,{unit:"month"}),i);case"LLL":return s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(t,{width:"wide",context:"standalone"})||s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}function R6(n,e,t){const r=wt(n,t==null?void 0:t.in),s=vv(r,t)-e;return r.setDate(r.getDate()-s*7),wt(r,t==null?void 0:t.in)}class F6 extends Kt{constructor(){super(...arguments);ut(this,"priority",100);ut(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,s){switch(r){case"w":return Pr(Vr.week,t);case"wo":return s.ordinalNumber(t,{unit:"week"});default:return Er(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,s,i){return Pi(R6(t,s,i),i)}}function I6(n,e,t){const r=wt(n,t==null?void 0:t.in),s=gv(r,t)-e;return r.setDate(r.getDate()-s*7),r}class B6 extends Kt{constructor(){super(...arguments);ut(this,"priority",100);ut(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,s){switch(r){case"I":return Pr(Vr.week,t);case"Io":return s.ordinalNumber(t,{unit:"week"});default:return Er(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,s){return Yc(I6(t,s))}}const $6=[31,28,31,30,31,30,31,31,30,31,30,31],q6=[31,29,31,30,31,30,31,31,30,31,30,31];class U6 extends Kt{constructor(){super(...arguments);ut(this,"priority",90);ut(this,"subPriority",1);ut(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,s){switch(r){case"d":return Pr(Vr.date,t);case"do":return s.ordinalNumber(t,{unit:"date"});default:return Er(r.length,t)}}validate(t,r){const s=t.getFullYear(),i=Gw(s),a=t.getMonth();return i?r>=1&&r<=q6[a]:r>=1&&r<=$6[a]}set(t,r,s){return t.setDate(s),t.setHours(0,0,0,0),t}}class V6 extends Kt{constructor(){super(...arguments);ut(this,"priority",90);ut(this,"subpriority",1);ut(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,s){switch(r){case"D":case"DD":return Pr(Vr.dayOfYear,t);case"Do":return s.ordinalNumber(t,{unit:"date"});default:return Er(r.length,t)}}validate(t,r){const s=t.getFullYear();return Gw(s)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,s){return t.setMonth(0,s),t.setHours(0,0,0,0),t}}function bv(n,e,t){var h,p,f,v;const r=xl(),s=(t==null?void 0:t.weekStartsOn)??((p=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??r.weekStartsOn??((v=(f=r.locale)==null?void 0:f.options)==null?void 0:v.weekStartsOn)??0,i=wt(n,t==null?void 0:t.in),a=i.getDay(),l=(e%7+7)%7,u=7-s,c=e<0||e>6?e-(a+u)%7:(l+u)%7-(a+u)%7;return Ws(i,c,t)}class z6 extends Kt{constructor(){super(...arguments);ut(this,"priority",90);ut(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,s){switch(r){case"E":case"EE":case"EEE":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,s,i){return t=bv(t,s,i),t.setHours(0,0,0,0),t}}class H6 extends Kt{constructor(){super(...arguments);ut(this,"priority",90);ut(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,s,i){const a=o=>{const l=Math.floor((o-1)/7)*7;return(o+i.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return zr(Er(r.length,t),a);case"eo":return zr(s.ordinalNumber(t,{unit:"day"}),a);case"eee":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeeee":return s.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,s,i){return t=bv(t,s,i),t.setHours(0,0,0,0),t}}class Y6 extends Kt{constructor(){super(...arguments);ut(this,"priority",90);ut(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,s,i){const a=o=>{const l=Math.floor((o-1)/7)*7;return(o+i.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return zr(Er(r.length,t),a);case"co":return zr(s.ordinalNumber(t,{unit:"day"}),a);case"ccc":return s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"ccccc":return s.day(t,{width:"narrow",context:"standalone"});case"cccccc":return s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(t,{width:"wide",context:"standalone"})||s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,s,i){return t=bv(t,s,i),t.setHours(0,0,0,0),t}}function W6(n,e,t){const r=wt(n,t==null?void 0:t.in),s=_6(r,t),i=e-s;return Ws(r,i,t)}class G6 extends Kt{constructor(){super(...arguments);ut(this,"priority",90);ut(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,s){const i=a=>a===0?7:a;switch(r){case"i":case"ii":return Er(r.length,t);case"io":return s.ordinalNumber(t,{unit:"day"});case"iii":return zr(s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),i);case"iiiii":return zr(s.day(t,{width:"narrow",context:"formatting"}),i);case"iiiiii":return zr(s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),i);case"iiii":default:return zr(s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),i)}}validate(t,r){return r>=1&&r<=7}set(t,r,s){return t=W6(t,s),t.setHours(0,0,0,0),t}}class X6 extends Kt{constructor(){super(...arguments);ut(this,"priority",80);ut(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,s){switch(r){case"a":case"aa":case"aaa":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,s){return t.setHours(yv(s),0,0,0),t}}class K6 extends Kt{constructor(){super(...arguments);ut(this,"priority",80);ut(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,s){switch(r){case"b":case"bb":case"bbb":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,s){return t.setHours(yv(s),0,0,0),t}}class J6 extends Kt{constructor(){super(...arguments);ut(this,"priority",80);ut(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,s){switch(r){case"B":case"BB":case"BBB":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,s){return t.setHours(yv(s),0,0,0),t}}class Q6 extends Kt{constructor(){super(...arguments);ut(this,"priority",70);ut(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,s){switch(r){case"h":return Pr(Vr.hour12h,t);case"ho":return s.ordinalNumber(t,{unit:"hour"});default:return Er(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,s){const i=t.getHours()>=12;return i&&s<12?t.setHours(s+12,0,0,0):!i&&s===12?t.setHours(0,0,0,0):t.setHours(s,0,0,0),t}}class Z6 extends Kt{constructor(){super(...arguments);ut(this,"priority",70);ut(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,s){switch(r){case"H":return Pr(Vr.hour23h,t);case"Ho":return s.ordinalNumber(t,{unit:"hour"});default:return Er(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,s){return t.setHours(s,0,0,0),t}}class eO extends Kt{constructor(){super(...arguments);ut(this,"priority",70);ut(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,s){switch(r){case"K":return Pr(Vr.hour11h,t);case"Ko":return s.ordinalNumber(t,{unit:"hour"});default:return Er(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,s){return t.getHours()>=12&&s<12?t.setHours(s+12,0,0,0):t.setHours(s,0,0,0),t}}class tO extends Kt{constructor(){super(...arguments);ut(this,"priority",70);ut(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,s){switch(r){case"k":return Pr(Vr.hour24h,t);case"ko":return s.ordinalNumber(t,{unit:"hour"});default:return Er(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,s){const i=s<=24?s%24:s;return t.setHours(i,0,0,0),t}}class rO extends Kt{constructor(){super(...arguments);ut(this,"priority",60);ut(this,"incompatibleTokens",["t","T"])}parse(t,r,s){switch(r){case"m":return Pr(Vr.minute,t);case"mo":return s.ordinalNumber(t,{unit:"minute"});default:return Er(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,s){return t.setMinutes(s,0,0),t}}class nO extends Kt{constructor(){super(...arguments);ut(this,"priority",50);ut(this,"incompatibleTokens",["t","T"])}parse(t,r,s){switch(r){case"s":return Pr(Vr.second,t);case"so":return s.ordinalNumber(t,{unit:"second"});default:return Er(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,s){return t.setSeconds(s,0),t}}class sO extends Kt{constructor(){super(...arguments);ut(this,"priority",30);ut(this,"incompatibleTokens",["t","T"])}parse(t,r){const s=i=>Math.trunc(i*Math.pow(10,-r.length+3));return zr(Er(r.length,t),s)}set(t,r,s){return t.setMilliseconds(s),t}}class iO extends Kt{constructor(){super(...arguments);ut(this,"priority",10);ut(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return Yi(Hi.basicOptionalMinutes,t);case"XX":return Yi(Hi.basic,t);case"XXXX":return Yi(Hi.basicOptionalSeconds,t);case"XXXXX":return Yi(Hi.extendedOptionalSeconds,t);case"XXX":default:return Yi(Hi.extended,t)}}set(t,r,s){return r.timestampIsSet?t:ir(t,t.getTime()-tp(t)-s)}}class aO extends Kt{constructor(){super(...arguments);ut(this,"priority",10);ut(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return Yi(Hi.basicOptionalMinutes,t);case"xx":return Yi(Hi.basic,t);case"xxxx":return Yi(Hi.basicOptionalSeconds,t);case"xxxxx":return Yi(Hi.extendedOptionalSeconds,t);case"xxx":default:return Yi(Hi.extended,t)}}set(t,r,s){return r.timestampIsSet?t:ir(t,t.getTime()-tp(t)-s)}}class oO extends Kt{constructor(){super(...arguments);ut(this,"priority",40);ut(this,"incompatibleTokens","*")}parse(t){return Yw(t)}set(t,r,s){return[ir(t,s*1e3),{timestampIsSet:!0}]}}class lO extends Kt{constructor(){super(...arguments);ut(this,"priority",20);ut(this,"incompatibleTokens","*")}parse(t){return Yw(t)}set(t,r,s){return[ir(t,s),{timestampIsSet:!0}]}}const cO={G:new T6,y:new P6,Y:new O6,R:new L6,u:new D6,Q:new M6,q:new E6,M:new N6,L:new j6,w:new F6,I:new B6,d:new U6,D:new V6,E:new z6,e:new H6,c:new Y6,i:new G6,a:new X6,b:new K6,B:new J6,h:new Q6,H:new Z6,K:new eO,k:new tO,m:new rO,s:new nO,S:new sO,X:new iO,x:new aO,t:new oO,T:new lO},uO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,dO=/^'([^]*?)'?$/,fO=/''/g,pO=/\S/,gO=/[a-zA-Z]/;function g0(n,e,t,r){var x,w,k,T,I,Y,Q,H;const s=()=>ir((r==null?void 0:r.in)||t,NaN),i=w6(),a=(r==null?void 0:r.locale)??i.locale??qw,o=(r==null?void 0:r.firstWeekContainsDate)??((w=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:w.firstWeekContainsDate)??i.firstWeekContainsDate??((T=(k=i.locale)==null?void 0:k.options)==null?void 0:T.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((Y=(I=r==null?void 0:r.locale)==null?void 0:I.options)==null?void 0:Y.weekStartsOn)??i.weekStartsOn??((H=(Q=i.locale)==null?void 0:Q.options)==null?void 0:H.weekStartsOn)??0;if(!e)return n?s():wt(t,r==null?void 0:r.in);const u={firstWeekContainsDate:o,weekStartsOn:l,locale:a},c=[new A6(r==null?void 0:r.in,t)],h=e.match(hO).map(j=>{const U=j[0];if(U in f0){const K=f0[U];return K(j,a.formatLong)}return j}).join("").match(uO),p=[];for(let j of h){!(r!=null&&r.useAdditionalWeekYearTokens)&&zw(j)&&p0(j,e,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&Vw(j)&&p0(j,e,n);const U=j[0],K=cO[U];if(K){const{incompatibleTokens:D}=K;if(Array.isArray(D)){const J=p.find(M=>D.includes(M.token)||M.token===U);if(J)throw new RangeError(`The format string mustn't contain \`${J.fullToken}\` and \`${j}\` at the same time`)}else if(K.incompatibleTokens==="*"&&p.length>0)throw new RangeError(`The format string mustn't contain \`${j}\` and any other token at the same time`);p.push({token:U,fullToken:j});const O=K.run(n,j,a.match,u);if(!O)return s();c.push(O.setter),n=O.rest}else{if(U.match(gO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+U+"`");if(j==="''"?j="'":U==="'"&&(j=mO(j)),n.indexOf(j)===0)n=n.slice(j.length);else return s()}}if(n.length>0&&pO.test(n))return s();const f=c.map(j=>j.priority).sort((j,U)=>U-j).filter((j,U,K)=>K.indexOf(j)===U).map(j=>c.filter(U=>U.priority===j).sort((U,K)=>K.subPriority-U.subPriority)).map(j=>j[0]);let v=wt(t,r==null?void 0:r.in);if(isNaN(+v))return s();const b={};for(const j of f){if(!j.validate(v,u))return s();const U=j.set(v,b,u);Array.isArray(U)?(v=U[0],Object.assign(b,U[1])):v=U}return v}function mO(n){return n.match(dO)[1].replace(fO,"'")}function hy(n,e,t){const[r,s]=Hh(t==null?void 0:t.in,n,e);return+cl(r)==+cl(s)}function Xw(n,e,t){return Ws(n,-e,t)}function Kw(n,e,t){const r=wt(n,t==null?void 0:t.in),s=r.getFullYear(),i=r.getDate(),a=ir(n,0);a.setFullYear(s,e,15),a.setHours(0,0,0,0);const o=b6(a);return r.setMonth(e,Math.min(i,o)),r}function lr(n,e,t){let r=wt(n,t==null?void 0:t.in);return isNaN(+r)?ir(n,NaN):(e.year!=null&&r.setFullYear(e.year),e.month!=null&&(r=Kw(r,e.month)),e.date!=null&&r.setDate(e.date),e.hours!=null&&r.setHours(e.hours),e.minutes!=null&&r.setMinutes(e.minutes),e.seconds!=null&&r.setSeconds(e.seconds),e.milliseconds!=null&&r.setMilliseconds(e.milliseconds),r)}function vO(n,e,t){const r=wt(n,t==null?void 0:t.in);return r.setHours(e),r}function Jw(n,e,t){const r=wt(n,t==null?void 0:t.in);return r.setMilliseconds(e),r}function yO(n,e,t){const r=wt(n,t==null?void 0:t.in);return r.setMinutes(e),r}function Qw(n,e,t){const r=wt(n,t==null?void 0:t.in);return r.setSeconds(e),r}function Gi(n,e,t){const r=wt(n,t==null?void 0:t.in);return isNaN(+r)?ir(n,NaN):(r.setFullYear(e),r)}function Xc(n,e,t){return ki(n,-e,t)}function bO(n,e,t){const{years:r=0,months:s=0,weeks:i=0,days:a=0,hours:o=0,minutes:l=0,seconds:u=0}=e,c=Xc(n,s+r*12,t),h=Xw(c,a+i*7,t),p=l+o*60,v=(u+p*60)*1e3;return ir(n,+h-v)}function Zw(n,e,t){return pv(n,-e,t)}function tu(){const n=VS();return _e(),Me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img",...n},[Ne("path",{d:"M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"}),Ne("path",{d:"M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),Ne("path",{d:"M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),Ne("path",{d:"M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"})])}tu.compatConfig={MODE:3};function e_(){return _e(),Me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[Ne("path",{d:"M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"}),Ne("path",{d:"M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}e_.compatConfig={MODE:3};function wv(){return _e(),Me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[Ne("path",{d:"M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}wv.compatConfig={MODE:3};function _v(){return _e(),Me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[Ne("path",{d:"M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"})])}_v.compatConfig={MODE:3};function xv(){return _e(),Me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[Ne("path",{d:"M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"}),Ne("path",{d:"M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"})])}xv.compatConfig={MODE:3};function Sv(){return _e(),Me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[Ne("path",{d:"M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}Sv.compatConfig={MODE:3};function kv(){return _e(),Me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[Ne("path",{d:"M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}kv.compatConfig={MODE:3};const vs=(n,e)=>e?new Date(n.toLocaleString("en-US",{timeZone:e})):new Date(n),Cv=(n,e,t)=>m0(n,e,t)||Ke(),wO=(n,e,t)=>{const r=e.dateInTz?vs(new Date(n),e.dateInTz):Ke(n);return t?_n(r,!0):r},m0=(n,e,t)=>{if(!n)return null;const r=t?_n(Ke(n),!0):Ke(n);return e?e.exactMatch?wO(n,e,t):vs(r,e.timezone):r},_O=n=>{const e=new Date(n.getFullYear(),0,1).getTimezoneOffset();return n.getTimezoneOffset()<e},xO=(n,e)=>{if(!n)return 0;const t=new Date,r=new Date(t.toLocaleString("en-US",{timeZone:"UTC"})),s=new Date(t.toLocaleString("en-US",{timeZone:n})),i=(_O(e??s)?s:e??s).getTimezoneOffset()/60;return(+r-+s)/(1e3*60*60)-i};var fi=(n=>(n.month="month",n.year="year",n))(fi||{}),pi=(n=>(n.top="top",n.bottom="bottom",n))(pi||{}),dl=(n=>(n.header="header",n.calendar="calendar",n.timePicker="timePicker",n))(dl||{}),Rn=(n=>(n.month="month",n.year="year",n.calendar="calendar",n.time="time",n.minutes="minutes",n.hours="hours",n.seconds="seconds",n))(Rn||{});const SO=["timestamp","date","iso"];var Gn=(n=>(n.up="up",n.down="down",n.left="left",n.right="right",n))(Gn||{}),wr=(n=>(n.arrowUp="ArrowUp",n.arrowDown="ArrowDown",n.arrowLeft="ArrowLeft",n.arrowRight="ArrowRight",n.enter="Enter",n.space=" ",n.esc="Escape",n.tab="Tab",n.home="Home",n.end="End",n.pageUp="PageUp",n.pageDown="PageDown",n))(wr||{}),jc=(n=>(n.MONTH_AND_YEAR="MM-yyyy",n.YEAR="yyyy",n.DATE="dd-MM-yyyy",n))(jc||{});function dy(n){return e=>{const t=new Intl.DateTimeFormat(n,{weekday:"short",timeZone:"UTC"}).format(new Date(`2017-01-0${e}T00:00:00+00:00`));return n==="ar"?t.slice(2,5):t.slice(0,2)}}function kO(n){return e=>Qi(vs(new Date(`2017-01-0${e}T00:00:00+00:00`),"UTC"),"EEEEEE",{locale:n})}const CO=(n,e,t)=>{const r=[1,2,3,4,5,6,7];let s;if(n!==null)try{s=r.map(kO(n))}catch{s=r.map(dy(e))}else s=r.map(dy(e));const i=s.slice(0,t),a=s.slice(t+1,s.length);return[s[t]].concat(...a).concat(...i)},Av=(n,e,t)=>{const r=[];for(let s=+n[0];s<=+n[1];s++)r.push({value:+s,text:s_(s,e)});return t?r.reverse():r},t_=(n,e,t)=>{const r=[1,2,3,4,5,6,7,8,9,10,11,12].map(i=>{const a=i<10?`0${i}`:i;return new Date(`2017-${a}-01T00:00:00+00:00`)});if(n!==null)try{const i=t==="long"?"LLLL":"LLL";return r.map((a,o)=>{const l=Qi(vs(a,"UTC"),i,{locale:n});return{text:l.charAt(0).toUpperCase()+l.substring(1),value:o}})}catch{}const s=new Intl.DateTimeFormat(e,{month:t,timeZone:"UTC"});return r.map((i,a)=>{const o=s.format(i);return{text:o.charAt(0).toUpperCase()+o.substring(1),value:a}})},AO=n=>[12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11][n],Jr=n=>{const e=ue(n);return e!=null&&e.$el?e==null?void 0:e.$el:e},TO=n=>({type:"dot",...n??{}}),r_=n=>Array.isArray(n)?!!n[0]&&!!n[1]:!1,Tv={prop:n=>`"${n}" prop must be enabled!`,dateArr:n=>`You need to use array as "model-value" binding in order to support "${n}"`},gn=n=>n,fy=n=>n===0?n:!n||isNaN(+n)?null:+n,py=n=>n===null,n_=n=>{if(n)return[...n.querySelectorAll("input, button, select, textarea, a[href]")][0]},PO=n=>{const e=[],t=r=>r.filter(s=>s);for(let r=0;r<n.length;r+=3){const s=[n[r],n[r+1],n[r+2]];e.push(t(s))}return e},Eh=(n,e,t)=>{const r=t!=null,s=e!=null;if(!r&&!s)return!1;const i=+t,a=+e;return r&&s?+n>i||+n<a:r?+n>i:s?+n<a:!1},Kc=(n,e)=>PO(n).map(t=>t.map(r=>{const{active:s,disabled:i,isBetween:a,highlighted:o}=e(r);return{...r,active:s,disabled:i,className:{dp__overlay_cell_active:s,dp__overlay_cell:!s,dp__overlay_cell_disabled:i,dp__overlay_cell_pad:!0,dp__overlay_cell_active_disabled:i&&s,dp__cell_in_between:a,"dp--highlighted":o}}})),xo=(n,e,t=!1)=>{n&&e.allowStopPropagation&&(t&&n.stopImmediatePropagation(),n.stopPropagation())},OO=()=>["a[href]","area[href]","input:not([disabled]):not([type='hidden'])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","[tabindex]:not([tabindex='-1'])","[data-datepicker-instance]"].join(", ");function LO(n,e){let t=[...document.querySelectorAll(OO())];t=t.filter(s=>!n.contains(s)||s.hasAttribute("data-datepicker-instance"));const r=t.indexOf(n);if(r>=0&&(e?r-1>=0:r+1<=t.length))return t[r+(e?-1:1)]}const v0=(n,e)=>n==null?void 0:n.querySelector(`[data-dp-element="${e}"]`),s_=(n,e)=>new Intl.NumberFormat(e,{useGrouping:!1,style:"decimal"}).format(n),Pv=(n,e)=>Qi(n,e??jc.DATE),hm=n=>Array.isArray(n),np=(n,e,t)=>e.get(Pv(n,t)),DO=(n,e)=>n?e?e instanceof Map?!!np(n,e):e(Ke(n)):!1:!0,ss=(n,e,t=!1,r)=>{if(n.key===wr.enter||n.key===wr.space)return t&&n.preventDefault(),e();if(r)return r(n)},MO=()=>"ontouchstart"in window||navigator.maxTouchPoints>0,i_=(n,e)=>n?jc.MONTH_AND_YEAR:e?jc.YEAR:jc.DATE,a_=n=>n<10?`0${n}`:n,gy=(n,e,t,r,s,i)=>{const a=g0(n,e.slice(0,n.length),new Date,{locale:i});return fh(a)&&Rw(a)?r||s?a:lr(a,{hours:+t.hours,minutes:+(t==null?void 0:t.minutes),seconds:+(t==null?void 0:t.seconds),milliseconds:0}):null},EO=(n,e,t,r,s,i)=>{const a=Array.isArray(t)?t[0]:t;if(typeof e=="string")return gy(n,e,a,r,s,i);if(Array.isArray(e)){let o=null;for(const l of e)if(o=gy(n,l,a,r,s,i),o)break;return o}return typeof e=="function"?e(n):null},Ke=n=>n?new Date(n):new Date,NO=(n,e,t)=>{if(e){const s=(n.getMonth()+1).toString().padStart(2,"0"),i=n.getDate().toString().padStart(2,"0"),a=n.getHours().toString().padStart(2,"0"),o=n.getMinutes().toString().padStart(2,"0"),l=t?n.getSeconds().toString().padStart(2,"0"):"00";return`${n.getFullYear()}-${s}-${i}T${a}:${o}:${l}.000Z`}const r=Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds());return new Date(r).toISOString()},_n=(n,e)=>{const t=Ke(JSON.parse(JSON.stringify(n))),r=lr(t,{hours:0,minutes:0,seconds:0,milliseconds:0});return e?AP(r):r},So=(n,e,t,r)=>{let s=n?Ke(n):Ke();return(e||e===0)&&(s=vO(s,+e)),(t||t===0)&&(s=yO(s,+t)),(r||r===0)&&(s=Qw(s,+r)),Jw(s,0)},Mr=(n,e)=>!n||!e?!1:Gc(_n(n),_n(e)),Ut=(n,e)=>!n||!e?!1:Sc(_n(n),_n(e)),Ir=(n,e)=>!n||!e?!1:yl(_n(n),_n(e)),Nh=(n,e,t)=>n!=null&&n[0]&&n!=null&&n[1]?Ir(t,n[0])&&Mr(t,n[1]):n!=null&&n[0]&&e?Ir(t,n[0])&&Mr(t,e)||Mr(t,n[0])&&Ir(t,e):!1,wi=n=>{const e=lr(new Date(n),{date:1});return _n(e)},dm=(n,e,t)=>e&&(t||t===0)?Object.fromEntries(["hours","minutes","seconds"].map(r=>r===e?[r,t]:[r,isNaN(+n[r])?void 0:+n[r]])):{hours:isNaN(+n.hours)?void 0:+n.hours,minutes:isNaN(+n.minutes)?void 0:+n.minutes,seconds:isNaN(+n.seconds)?void 0:+n.seconds},fl=n=>({hours:Oa(n),minutes:Co(n),seconds:Wc(n)}),o_=(n,e)=>{if(e){const t=At(Ke(e));if(t>n)return 12;if(t===n)return qt(Ke(e))}},l_=(n,e)=>{if(e){const t=At(Ke(e));return t<n?-1:t===n?qt(Ke(e)):void 0}},Jc=n=>{if(n)return At(Ke(n))},c_=(n,e)=>{const t=Ir(n,e)?e:n,r=Ir(e,n)?e:n;return Iw({start:t,end:r})},jO=n=>{const e=ki(n,1);return{month:qt(e),year:At(e)}},ba=(n,e)=>{const t=Pi(n,{weekStartsOn:+e}),r=$w(n,{weekStartsOn:+e});return[t,r]},u_=(n,e)=>{const t={hours:Oa(Ke()),minutes:Co(Ke()),seconds:e?Wc(Ke()):0};return Object.assign(t,n)},vo=(n,e,t)=>[lr(Ke(n),{date:1}),lr(Ke(),{month:e,year:t,date:1})],Sa=(n,e,t)=>{let r=n?Ke(n):Ke();return(e||e===0)&&(r=Kw(r,e)),t&&(r=Gi(r,t)),r},h_=(n,e,t,r,s)=>{if(!r||s&&!e||!s&&!t)return!1;const i=s?ki(n,1):Xc(n,1),a=[qt(i),At(i)];return s?!FO(...a,e):!RO(...a,t)},RO=(n,e,t)=>Mr(...vo(t,n,e))||Ut(...vo(t,n,e)),FO=(n,e,t)=>Ir(...vo(t,n,e))||Ut(...vo(t,n,e)),d_=(n,e,t,r,s,i,a)=>{if(typeof e=="function"&&!a)return e(n);const o=t?{locale:t}:void 0;return Array.isArray(n)?`${Qi(n[0],i,o)}${s&&!n[1]?"":r}${n[1]?Qi(n[1],i,o):""}`:Qi(n,i,o)},uc=n=>{if(n)return null;throw new Error(Tv.prop("partial-range"))},Jd=(n,e)=>{if(e)return n();throw new Error(Tv.prop("range"))},y0=n=>Array.isArray(n)?fh(n[0])&&(n[1]?fh(n[1]):!0):n?fh(n):!1,IO=(n,e)=>lr(e??Ke(),{hours:+n.hours||0,minutes:+n.minutes||0,seconds:+n.seconds||0}),fm=(n,e,t,r)=>{if(!n)return!0;if(r){const s=t==="max"?Gc(n,e):yl(n,e),i={seconds:0,milliseconds:0};return s||Sc(lr(n,i),lr(e,i))}return t==="max"?n.getTime()<=e.getTime():n.getTime()>=e.getTime()},pm=(n,e,t)=>n?IO(n,e):Ke(t??e),my=(n,e,t,r,s)=>{if(Array.isArray(r)){const a=pm(n,r[0],e),o=pm(n,r[1],e);return fm(r[0],a,t,!!e)&&fm(r[1],o,t,!!e)&&s}const i=pm(n,r,e);return fm(r,i,t,!!e)&&s},gm=n=>lr(Ke(),fl(n)),BO=(n,e,t)=>{if(n instanceof Map){const r=`${a_(t+1)}-${e}`;return n.size?n.has(r):!1}return typeof n=="function"?n(_n(lr(Ke(),{month:t,year:e}),!0)):!1},$O=(n,e,t)=>{if(n instanceof Map){const r=`${a_(t+1)}-${e}`;return n.size?n.has(r):!0}return!0},f_=(n,e,t)=>typeof n=="function"?n({month:e,year:t}):!!n.months.find(r=>r.month===e&&r.year===t),Ov=(n,e)=>typeof n=="function"?n(e):n.years.includes(e),b0=n=>`dp-${Qi(n,"yyyy-MM-dd")}`,vy=(n,e)=>{const t=Xw(_n(e),n),r=Ws(_n(e),n);return{before:t,after:r}},Gu=Na({menuFocused:!1,shiftKeyInMenu:!1}),p_=()=>{const n=t=>{Gu.menuFocused=t},e=t=>{Gu.shiftKeyInMenu!==t&&(Gu.shiftKeyInMenu=t)};return{control:He(()=>({shiftKeyInMenu:Gu.shiftKeyInMenu,menuFocused:Gu.menuFocused})),setMenuFocused:n,setShiftKey:e}},br=Na({monthYear:[],calendar:[],time:[],actionRow:[],selectionGrid:[],timePicker:{0:[],1:[]},monthPicker:[]}),mm=$e(null),Qd=$e(!1),vm=$e(!1),ym=$e(!1),bm=$e(!1),Ln=$e(0),Fr=$e(0),No=()=>{const n=He(()=>Qd.value?[...br.selectionGrid,br.actionRow].filter(h=>h.length):vm.value?[...br.timePicker[0],...br.timePicker[1],bm.value?[]:[mm.value],br.actionRow].filter(h=>h.length):ym.value?[...br.monthPicker,br.actionRow]:[br.monthYear,...br.calendar,br.time,br.actionRow].filter(h=>h.length)),e=h=>{Ln.value=h?Ln.value+1:Ln.value-1;let p=null;n.value[Fr.value]&&(p=n.value[Fr.value][Ln.value]),!p&&n.value[Fr.value+(h?1:-1)]?(Fr.value=Fr.value+(h?1:-1),Ln.value=h?0:n.value[Fr.value].length-1):p||(Ln.value=h?Ln.value-1:Ln.value+1)},t=h=>{Fr.value===0&&!h||Fr.value===n.value.length&&h||(Fr.value=h?Fr.value+1:Fr.value-1,n.value[Fr.value]?n.value[Fr.value]&&!n.value[Fr.value][Ln.value]&&Ln.value!==0&&(Ln.value=n.value[Fr.value].length-1):Fr.value=h?Fr.value-1:Fr.value+1)},r=h=>{let p=null;n.value[Fr.value]&&(p=n.value[Fr.value][Ln.value]),p?p.focus({preventScroll:!Qd.value}):Ln.value=h?Ln.value-1:Ln.value+1},s=()=>{e(!0),r(!0)},i=()=>{e(!1),r(!1)},a=()=>{t(!1),r(!0)},o=()=>{t(!0),r(!0)},l=(h,p)=>{br[p]=h},u=(h,p)=>{br[p]=h},c=()=>{Ln.value=0,Fr.value=0};return{buildMatrix:l,buildMultiLevelMatrix:u,setTimePickerBackRef:h=>{mm.value=h},setSelectionGrid:h=>{Qd.value=h,c(),h||(br.selectionGrid=[])},setTimePicker:(h,p=!1)=>{vm.value=h,bm.value=p,c(),h||(br.timePicker[0]=[],br.timePicker[1]=[])},setTimePickerElements:(h,p=0)=>{br.timePicker[p]=h},arrowRight:s,arrowLeft:i,arrowUp:a,arrowDown:o,clearArrowNav:()=>{br.monthYear=[],br.calendar=[],br.time=[],br.actionRow=[],br.selectionGrid=[],br.timePicker[0]=[],br.timePicker[1]=[],Qd.value=!1,vm.value=!1,bm.value=!1,ym.value=!1,c(),mm.value=null},setMonthPicker:h=>{ym.value=h,c()},refSets:br}},yy=n=>({menuAppearTop:"dp-menu-appear-top",menuAppearBottom:"dp-menu-appear-bottom",open:"dp-slide-down",close:"dp-slide-up",next:"calendar-next",previous:"calendar-prev",vNext:"dp-slide-up",vPrevious:"dp-slide-down",...n??{}}),qO=n=>({toggleOverlay:"Toggle overlay",menu:"Datepicker menu",input:"Datepicker input",openTimePicker:"Open time picker",closeTimePicker:"Close time Picker",incrementValue:e=>`Increment ${e}`,decrementValue:e=>`Decrement ${e}`,openTpOverlay:e=>`Open ${e} overlay`,amPmButton:"Switch AM/PM mode",openYearsOverlay:"Open years overlay",openMonthsOverlay:"Open months overlay",nextMonth:"Next month",prevMonth:"Previous month",nextYear:"Next year",prevYear:"Previous year",day:void 0,weekDay:void 0,clearInput:"Clear value",calendarIcon:"Calendar icon",timePicker:"Time picker",monthPicker:e=>`Month picker${e?" overlay":""}`,yearPicker:e=>`Year picker${e?" overlay":""}`,timeOverlay:e=>`${e} overlay`,...n??{}}),by=n=>n?typeof n=="boolean"?n?2:0:+n>=2?+n:2:0,UO=n=>{const e=typeof n=="object"&&n,t={static:!0,solo:!1};if(!n)return{...t,count:by(!1)};const r=e?n:{},s=e?r.count??!0:n,i=by(s);return Object.assign(t,r,{count:i})},VO=(n,e,t)=>n||(typeof t=="string"?t:e),zO=n=>typeof n=="boolean"?n?yy({}):!1:yy(n),HO=n=>{const e={enterSubmit:!0,tabSubmit:!0,openMenu:"open",selectOnFocus:!1,rangeSeparator:" - ",escClose:!0};return typeof n=="object"?{...e,...n??{},enabled:!0}:{...e,enabled:n}},YO=n=>({months:[],years:[],times:{hours:[],minutes:[],seconds:[]},...n??{}}),WO=n=>({showSelect:!0,showCancel:!0,showNow:!1,showPreview:!0,...n??{}}),GO=n=>{const e={input:!1};return typeof n=="object"?{...e,...n??{},enabled:!0}:{enabled:n,...e}},XO=n=>({allowStopPropagation:!0,closeOnScroll:!1,modeHeight:255,allowPreventDefault:!1,closeOnClearValue:!0,closeOnAutoApply:!0,noSwipe:!1,keepActionRow:!1,onClickOutside:void 0,tabOutClosesMenu:!0,arrowLeft:void 0,keepViewOnOffsetClick:!1,timeArrowHoldThreshold:0,shadowDom:!1,mobileBreakpoint:600,setDateOnMenuClose:!1,...n??{}}),KO=n=>{const e={dates:Array.isArray(n)?n.map(t=>Ke(t)):[],years:[],months:[],quarters:[],weeks:[],weekdays:[],options:{highlightDisabled:!1}};return typeof n=="function"?n:{...e,...n??{}}},JO=n=>typeof n=="object"?{type:(n==null?void 0:n.type)??"local",hideOnOffsetDates:(n==null?void 0:n.hideOnOffsetDates)??!1}:{type:n,hideOnOffsetDates:!1},QO=n=>{const e={noDisabledRange:!1,showLastInRange:!0,minMaxRawRange:!1,partialRange:!0,disableTimeRangeValidation:!1,maxRange:void 0,minRange:void 0,autoRange:void 0,fixedStart:!1,fixedEnd:!1};return typeof n=="object"?{enabled:!0,...e,...n}:{enabled:n,...e}},ZO=n=>n?typeof n=="string"?{timezone:n,exactMatch:!1,dateInTz:void 0,emitTimezone:void 0,convertModel:!0}:{timezone:n.timezone,exactMatch:n.exactMatch??!1,dateInTz:n.dateInTz??void 0,emitTimezone:n.emitTimezone??void 0,convertModel:n.convertModel??!0}:{timezone:void 0,exactMatch:!1,emitTimezone:void 0},wm=(n,e,t,r)=>new Map(n.map(s=>{const i=Cv(s,e,r);return[Pv(i,t),i]})),eL=(n,e)=>n.length?new Map(n.map(t=>{const r=Cv(t.date,e);return[Pv(r,jc.DATE),t]})):null,tL=n=>{var e;const t=i_(n.isMonthPicker,n.isYearPicker);return{minDate:m0(n.minDate,n.timezone,n.isSpecific),maxDate:m0(n.maxDate,n.timezone,n.isSpecific),disabledDates:hm(n.disabledDates)?wm(n.disabledDates,n.timezone,t,n.isSpecific):n.disabledDates,allowedDates:hm(n.allowedDates)?wm(n.allowedDates,n.timezone,t,n.isSpecific):null,highlight:typeof n.highlight=="object"&&hm((e=n.highlight)==null?void 0:e.dates)?wm(n.highlight.dates,n.timezone,t):n.highlight,markers:eL(n.markers,n.timezone)}},rL=n=>typeof n=="boolean"?{enabled:n,dragSelect:!0,limit:null}:{enabled:!!n,limit:n.limit?+n.limit:null,dragSelect:n.dragSelect??!0},nL=n=>({...Object.fromEntries(Object.keys(n).map(e=>{const t=e,r=n[t],s=typeof n[t]=="string"?{[r]:!0}:Object.fromEntries(r.map(i=>[i,!0]));return[e,s]}))}),Cr=n=>{const e=()=>{const Q=n.enableSeconds?":ss":"",H=n.enableMinutes?":mm":"";return n.is24?`HH${H}${Q}`:`hh${H}${Q} aa`},t=()=>{var Q;return n.format?n.format:n.monthPicker?"MM/yyyy":n.timePicker?e():n.weekPicker?`${((Q=x.value)==null?void 0:Q.type)==="iso"?"II":"ww"}-RR`:n.yearPicker?"yyyy":n.quarterPicker?"QQQ/yyyy":n.enableTimePicker?`MM/dd/yyyy, ${e()}`:"MM/dd/yyyy"},r=Q=>u_(Q,n.enableSeconds),s=()=>I.value.enabled?n.startTime&&Array.isArray(n.startTime)?[r(n.startTime[0]),r(n.startTime[1])]:null:n.startTime&&!Array.isArray(n.startTime)?r(n.startTime):null,i=He(()=>UO(n.multiCalendars)),a=He(()=>s()),o=He(()=>qO(n.ariaLabels)),l=He(()=>YO(n.filters)),u=He(()=>zO(n.transitions)),c=He(()=>WO(n.actionRow)),h=He(()=>VO(n.previewFormat,n.format,t())),p=He(()=>HO(n.textInput)),f=He(()=>GO(n.inline)),v=He(()=>XO(n.config)),b=He(()=>KO(n.highlight)),x=He(()=>JO(n.weekNumbers)),w=He(()=>ZO(n.timezone)),k=He(()=>rL(n.multiDates)),T=He(()=>tL({minDate:n.minDate,maxDate:n.maxDate,disabledDates:n.disabledDates,allowedDates:n.allowedDates,highlight:b.value,markers:n.markers,timezone:w.value,isSpecific:n.monthPicker||n.yearPicker||n.quarterPicker,isMonthPicker:n.monthPicker,isYearPicker:n.yearPicker})),I=He(()=>QO(n.range)),Y=He(()=>nL(n.ui));return{defaultedTransitions:u,defaultedMultiCalendars:i,defaultedStartTime:a,defaultedAriaLabels:o,defaultedFilters:l,defaultedActionRow:c,defaultedPreviewFormat:h,defaultedTextInput:p,defaultedInline:f,defaultedConfig:v,defaultedHighlight:b,defaultedWeekNumbers:x,defaultedRange:I,propDates:T,defaultedTz:w,defaultedMultiDates:k,defaultedUI:Y,getDefaultPattern:t,getDefaultStartTime:s,handleEventPropagation:Q=>{v.value.allowStopPropagation&&Q.stopPropagation(),v.value.allowPreventDefault&&Q.preventDefault()}}},sL=(n,e,t)=>{const r=$e(),{defaultedTextInput:s,defaultedRange:i,defaultedTz:a,defaultedMultiDates:o,getDefaultPattern:l}=Cr(e),u=$e(""),c=xh(e,"format"),h=xh(e,"formatLocale");Un(r,()=>{typeof e.onInternalModelChange=="function"&&n("internal-model-change",r.value,Z(!0))},{deep:!0}),Un(i,(_,q)=>{_.enabled!==q.enabled&&(r.value=null)}),Un(c,()=>{ne()});const p=_=>a.value.timezone&&a.value.convertModel?vs(_,a.value.timezone):_,f=_=>{if(a.value.timezone&&a.value.convertModel){const q=xO(a.value.timezone,_);return bP(_,q)}return _},v=(_,q,te=!1)=>d_(_,e.format,e.formatLocale,s.value.rangeSeparator,e.modelAuto,q??l(),te),b=_=>_?e.modelType?de(_):{hours:Oa(_),minutes:Co(_),seconds:e.enableSeconds?Wc(_):0}:null,x=_=>e.modelType?de(_):{month:qt(_),year:At(_)},w=_=>Array.isArray(_)?o.value.enabled?_.map(q=>k(q,Gi(Ke(),q))):Jd(()=>[Gi(Ke(),_[0]),_[1]?Gi(Ke(),_[1]):uc(i.value.partialRange)],i.value.enabled):Gi(Ke(),+_),k=(_,q)=>(typeof _=="string"||typeof _=="number")&&e.modelType?oe(_):q,T=_=>Array.isArray(_)?[k(_[0],So(null,+_[0].hours,+_[0].minutes,_[0].seconds)),k(_[1],So(null,+_[1].hours,+_[1].minutes,_[1].seconds))]:k(_,So(null,_.hours,_.minutes,_.seconds)),I=_=>{const q=lr(Ke(),{date:1});return Array.isArray(_)?o.value.enabled?_.map(te=>k(te,Sa(q,+te.month,+te.year))):Jd(()=>[k(_[0],Sa(q,+_[0].month,+_[0].year)),k(_[1],_[1]?Sa(q,+_[1].month,+_[1].year):uc(i.value.partialRange))],i.value.enabled):k(_,Sa(q,+_.month,+_.year))},Y=_=>{if(Array.isArray(_))return _.map(q=>oe(q));throw new Error(Tv.dateArr("multi-dates"))},Q=_=>{if(Array.isArray(_)&&i.value.enabled){const q=_[0],te=_[1];return[Ke(Array.isArray(q)?q[0]:null),Array.isArray(te)&&te.length?Ke(te[0]):null]}return Ke(_[0])},H=_=>e.modelAuto?Array.isArray(_)?[oe(_[0]),oe(_[1])]:e.autoApply?[oe(_)]:[oe(_),null]:Array.isArray(_)?Jd(()=>_[1]?[oe(_[0]),_[1]?oe(_[1]):uc(i.value.partialRange)]:[oe(_[0])],i.value.enabled):oe(_),j=()=>{Array.isArray(r.value)&&i.value.enabled&&r.value.length===1&&r.value.push(uc(i.value.partialRange))},U=()=>{const _=r.value;return[de(_[0]),_[1]?de(_[1]):uc(i.value.partialRange)]},K=()=>Array.isArray(r.value)?r.value[1]?U():de(gn(r.value[0])):[],D=()=>(r.value||[]).map(_=>de(_)),O=(_=!1)=>(_||j(),e.modelAuto?K():o.value.enabled?D():Array.isArray(r.value)?Jd(()=>U(),i.value.enabled):de(gn(r.value))),J=_=>!_||Array.isArray(_)&&!_.length?null:e.timePicker?T(gn(_)):e.monthPicker?I(gn(_)):e.yearPicker?w(gn(_)):o.value.enabled?Y(gn(_)):e.weekPicker?Q(gn(_)):H(gn(_)),M=_=>{const q=J(_);y0(gn(q))?(r.value=gn(q),ne()):(r.value=null,u.value="")},ee=()=>{const _=q=>Qi(q,s.value.format);return`${_(r.value[0])} ${s.value.rangeSeparator} ${r.value[1]?_(r.value[1]):""}`},W=()=>t.value&&r.value?Array.isArray(r.value)?ee():Qi(r.value,s.value.format):v(r.value),ae=()=>r.value?o.value.enabled?r.value.map(_=>v(_)).join("; "):s.value.enabled&&typeof s.value.format=="string"?W():v(r.value):"",ne=()=>{!e.format||typeof e.format=="string"||s.value.enabled&&typeof s.value.format=="string"?u.value=ae():u.value=e.format(r.value)},oe=_=>{if(e.utc){const q=new Date(_);return e.utc==="preserve"?new Date(q.getTime()+q.getTimezoneOffset()*6e4):q}return e.modelType?SO.includes(e.modelType)?p(new Date(_)):e.modelType==="format"&&(typeof e.format=="string"||!e.format)?p(g0(_,l(),new Date,{locale:h.value})):p(g0(_,e.modelType,new Date,{locale:h.value})):p(new Date(_))},de=_=>_?e.utc?NO(_,e.utc==="preserve",e.enableSeconds):e.modelType?e.modelType==="timestamp"?+f(_):e.modelType==="iso"?f(_).toISOString():e.modelType==="format"&&(typeof e.format=="string"||!e.format)?v(f(_)):v(f(_),e.modelType,!0):f(_):"",fe=(_,q=!1,te=!1)=>{if(te)return _;if(n("update:model-value",_),a.value.emitTimezone&&q){const Ae=Array.isArray(_)?_.map(ce=>vs(gn(ce),a.value.emitTimezone)):vs(gn(_),a.value.emitTimezone);n("update:model-timezone-value",Ae)}},P=_=>Array.isArray(r.value)?o.value.enabled?r.value.map(q=>_(q)):[_(r.value[0]),r.value[1]?_(r.value[1]):uc(i.value.partialRange)]:_(gn(r.value)),A=()=>{if(Array.isArray(r.value)){const _=ba(r.value[0],e.weekStart),q=r.value[1]?ba(r.value[1],e.weekStart):[];return[_.map(te=>Ke(te)),q.map(te=>Ke(te))]}return ba(r.value,e.weekStart).map(_=>Ke(_))},F=(_,q)=>fe(gn(P(_)),!1,q),G=_=>{const q=A();return _?q:n("update:model-value",A())},Z=(_=!1)=>(_||ne(),e.monthPicker?F(x,_):e.timePicker?F(b,_):e.yearPicker?F(At,_):e.weekPicker?G(_):fe(O(_),!0,_));return{inputValue:u,internalModelValue:r,checkBeforeEmit:()=>r.value?i.value.enabled?i.value.partialRange?r.value.length>=1:r.value.length===2:!!r.value:!1,parseExternalModelValue:M,formatInputValue:ne,emitModelValue:Z}},iL=(n,e)=>{const{defaultedFilters:t,propDates:r}=Cr(n),{validateMonthYearInRange:s}=jo(n),i=(c,h)=>{let p=c;return t.value.months.includes(qt(p))?(p=h?ki(c,1):Xc(c,1),i(p,h)):p},a=(c,h)=>{let p=c;return t.value.years.includes(At(p))?(p=h?pv(c,1):Zw(c,1),a(p,h)):p},o=(c,h=!1)=>{const p=lr(Ke(),{month:n.month,year:n.year});let f=c?ki(p,1):Xc(p,1);n.disableYearSelect&&(f=Gi(f,n.year));let v=qt(f),b=At(f);t.value.months.includes(v)&&(f=i(f,c),v=qt(f),b=At(f)),t.value.years.includes(b)&&(f=a(f,c),b=At(f)),s(v,b,c,n.preventMinMaxNavigation)&&l(v,b,h)},l=(c,h,p)=>{e("update-month-year",{month:c,year:h,fromNav:p})},u=He(()=>c=>h_(lr(Ke(),{month:n.month,year:n.year}),r.value.maxDate,r.value.minDate,n.preventMinMaxNavigation,c));return{handleMonthYearChange:o,isDisabled:u,updateMonthYear:l}},Np={multiCalendars:{type:[Boolean,Number,String,Object],default:void 0},modelValue:{type:[String,Date,Array,Object,Number],default:null},modelType:{type:String,default:null},position:{type:String,default:"center"},dark:{type:Boolean,default:!1},format:{type:[String,Function],default:()=>null},autoPosition:{type:[Boolean,String],default:!0},altPosition:{type:Function,default:null},transitions:{type:[Boolean,Object],default:!0},formatLocale:{type:Object,default:null},utc:{type:[Boolean,String],default:!1},ariaLabels:{type:Object,default:()=>({})},offset:{type:[Number,String],default:10},hideNavigation:{type:Array,default:()=>[]},timezone:{type:[String,Object],default:null},vertical:{type:Boolean,default:!1},disableMonthYearSelect:{type:Boolean,default:!1},disableYearSelect:{type:Boolean,default:!1},dayClass:{type:Function,default:null},yearRange:{type:Array,default:()=>[1900,2100]},enableTimePicker:{type:Boolean,default:!0},autoApply:{type:Boolean,default:!1},disabledDates:{type:[Array,Function],default:()=>[]},monthNameFormat:{type:String,default:"short"},startDate:{type:[Date,String],default:null},startTime:{type:[Object,Array],default:null},hideOffsetDates:{type:Boolean,default:!1},noToday:{type:Boolean,default:!1},disabledWeekDays:{type:Array,default:()=>[]},allowedDates:{type:Array,default:null},nowButtonLabel:{type:String,default:"Now"},markers:{type:Array,default:()=>[]},escClose:{type:Boolean,default:!0},spaceConfirm:{type:Boolean,default:!0},monthChangeOnArrows:{type:Boolean,default:!0},presetDates:{type:Array,default:()=>[]},flow:{type:Array,default:()=>[]},partialFlow:{type:Boolean,default:!1},preventMinMaxNavigation:{type:Boolean,default:!1},reverseYears:{type:Boolean,default:!1},weekPicker:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},arrowNavigation:{type:Boolean,default:!1},highlight:{type:[Function,Object],default:null},teleport:{type:[Boolean,String,Object],default:null},teleportCenter:{type:Boolean,default:!1},locale:{type:String,default:"en-Us"},weekNumName:{type:String,default:"W"},weekStart:{type:[Number,String],default:1},weekNumbers:{type:[String,Function,Object],default:null},monthChangeOnScroll:{type:[Boolean,String],default:!0},dayNames:{type:[Function,Array],default:null},monthPicker:{type:Boolean,default:!1},customProps:{type:Object,default:null},yearPicker:{type:Boolean,default:!1},modelAuto:{type:Boolean,default:!1},selectText:{type:String,default:"Select"},cancelText:{type:String,default:"Cancel"},previewFormat:{type:[String,Function],default:()=>""},multiDates:{type:[Object,Boolean],default:!1},ignoreTimeValidation:{type:Boolean,default:!1},minDate:{type:[Date,String],default:null},maxDate:{type:[Date,String],default:null},minTime:{type:Object,default:null},maxTime:{type:Object,default:null},name:{type:String,default:null},placeholder:{type:String,default:""},hideInputIcon:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},alwaysClearable:{type:Boolean,default:!1},state:{type:Boolean,default:null},required:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},timePicker:{type:Boolean,default:!1},enableSeconds:{type:Boolean,default:!1},is24:{type:Boolean,default:!0},noHoursOverlay:{type:Boolean,default:!1},noMinutesOverlay:{type:Boolean,default:!1},noSecondsOverlay:{type:Boolean,default:!1},hoursGridIncrement:{type:[String,Number],default:1},minutesGridIncrement:{type:[String,Number],default:5},secondsGridIncrement:{type:[String,Number],default:5},hoursIncrement:{type:[Number,String],default:1},minutesIncrement:{type:[Number,String],default:1},secondsIncrement:{type:[Number,String],default:1},range:{type:[Boolean,Object],default:!1},uid:{type:String,default:null},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},inline:{type:[Boolean,Object],default:!1},textInput:{type:[Boolean,Object],default:!1},sixWeeks:{type:[Boolean,String],default:!1},actionRow:{type:Object,default:()=>({})},focusStartDate:{type:Boolean,default:!1},disabledTimes:{type:[Function,Array],default:void 0},timePickerInline:{type:Boolean,default:!1},calendar:{type:Function,default:null},config:{type:Object,default:void 0},quarterPicker:{type:Boolean,default:!1},yearFirst:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},onInternalModelChange:{type:[Function,Object],default:null},enableMinutes:{type:Boolean,default:!0},ui:{type:Object,default:()=>({})}},Li={...Np,shadow:{type:Boolean,default:!1},flowStep:{type:Number,default:0},internalModelValue:{type:[Date,Array],default:null},noOverlayFocus:{type:Boolean,default:!1},collapse:{type:Boolean,default:!1},menuWrapRef:{type:Object,default:null},getInputRect:{type:Function,default:()=>({})},isTextInputDate:{type:Boolean,default:!1},isMobile:{type:Boolean,default:void 0}},aL=["title"],oL=["disabled"],lL=ln({compatConfig:{MODE:3},__name:"ActionRow",props:{menuMount:{type:Boolean,default:!1},calendarWidth:{type:Number,default:0},...Li},emits:["close-picker","select-date","select-now","invalid-select"],setup(n,{emit:e}){const t=e,r=n,{defaultedActionRow:s,defaultedPreviewFormat:i,defaultedMultiCalendars:a,defaultedTextInput:o,defaultedInline:l,defaultedRange:u,defaultedMultiDates:c}=Cr(r),{isTimeValid:h,isMonthValid:p}=jo(r),{buildMatrix:f}=No(),v=$e(null),b=$e(null),x=$e(!1),w=$e({}),k=$e(null),T=$e(null);dr(()=>{r.arrowNavigation&&f([Jr(v),Jr(b)],"actionRow"),I(),window.addEventListener("resize",I)}),Ra(()=>{window.removeEventListener("resize",I)});const I=()=>{x.value=!1,setTimeout(()=>{var M,ee;const W=(M=k.value)==null?void 0:M.getBoundingClientRect(),ae=(ee=T.value)==null?void 0:ee.getBoundingClientRect();W&&ae&&(w.value.maxWidth=`${ae.width-W.width-20}px`),x.value=!0},0)},Y=He(()=>u.value.enabled&&!u.value.partialRange&&r.internalModelValue?r.internalModelValue.length===2:!0),Q=He(()=>!h.value(r.internalModelValue)||!p.value(r.internalModelValue)||!Y.value),H=()=>{const M=i.value;return r.timePicker||r.monthPicker,M(gn(r.internalModelValue))},j=()=>{const M=r.internalModelValue;return a.value.count>0?`${U(M[0])} - ${U(M[1])}`:[U(M[0]),U(M[1])]},U=M=>d_(M,i.value,r.formatLocale,o.value.rangeSeparator,r.modelAuto,i.value),K=He(()=>!r.internalModelValue||!r.menuMount?"":typeof i.value=="string"?Array.isArray(r.internalModelValue)?r.internalModelValue.length===2&&r.internalModelValue[1]?j():c.value.enabled?r.internalModelValue.map(M=>`${U(M)}`):r.modelAuto?`${U(r.internalModelValue[0])}`:`${U(r.internalModelValue[0])} -`:U(r.internalModelValue):H()),D=()=>c.value.enabled?"; ":" - ",O=He(()=>Array.isArray(K.value)?K.value.join(D()):K.value),J=()=>{h.value(r.internalModelValue)&&p.value(r.internalModelValue)&&Y.value?t("select-date"):t("invalid-select")};return(M,ee)=>(_e(),Me("div",{ref_key:"actionRowRef",ref:T,class:"dp__action_row"},[M.$slots["action-row"]?ct(M.$slots,"action-row",yn(nn({key:0},{internalModelValue:M.internalModelValue,disabled:Q.value,selectDate:()=>M.$emit("select-date"),closePicker:()=>M.$emit("close-picker")}))):(_e(),Me(pt,{key:1},[ue(s).showPreview?(_e(),Me("div",{key:0,class:"dp__selection_preview",title:O.value,style:$n(w.value)},[M.$slots["action-preview"]&&x.value?ct(M.$slots,"action-preview",{key:0,value:M.internalModelValue}):Ge("",!0),!M.$slots["action-preview"]&&x.value?(_e(),Me(pt,{key:1},[or(Vt(O.value),1)],64)):Ge("",!0)],12,aL)):Ge("",!0),Ne("div",{ref_key:"actionBtnContainer",ref:k,class:"dp__action_buttons","data-dp-element":"action-row"},[M.$slots["action-buttons"]?ct(M.$slots,"action-buttons",{key:0,value:M.internalModelValue}):Ge("",!0),M.$slots["action-buttons"]?Ge("",!0):(_e(),Me(pt,{key:1},[!ue(l).enabled&&ue(s).showCancel?(_e(),Me("button",{key:0,ref_key:"cancelButtonRef",ref:v,type:"button",class:"dp__action_button dp__action_cancel",onClick:ee[0]||(ee[0]=W=>M.$emit("close-picker")),onKeydown:ee[1]||(ee[1]=W=>ue(ss)(W,()=>M.$emit("close-picker")))},Vt(M.cancelText),545)):Ge("",!0),ue(s).showNow?(_e(),Me("button",{key:1,type:"button",class:"dp__action_button dp__action_cancel",onClick:ee[2]||(ee[2]=W=>M.$emit("select-now")),onKeydown:ee[3]||(ee[3]=W=>ue(ss)(W,()=>M.$emit("select-now")))},Vt(M.nowButtonLabel),33)):Ge("",!0),ue(s).showSelect?(_e(),Me("button",{key:2,ref_key:"selectButtonRef",ref:b,type:"button",class:"dp__action_button dp__action_select",disabled:Q.value,"data-test-id":"select-button",onKeydown:ee[4]||(ee[4]=W=>ue(ss)(W,()=>J())),onClick:J},Vt(M.selectText),41,oL)):Ge("",!0)],64))],512)],64))],512))}}),cL=["role","aria-label","tabindex"],uL={class:"dp__selection_grid_header"},hL=["aria-selected","aria-disabled","data-test-id","onClick","onKeydown","onMouseover"],dL=["aria-label"],Yh=ln({__name:"SelectionOverlay",props:{items:{},type:{},isLast:{type:Boolean},arrowNavigation:{type:Boolean},skipButtonRef:{type:Boolean},headerRefs:{},hideNavigation:{},escClose:{type:Boolean},useRelative:{type:Boolean},height:{},textInput:{type:[Boolean,Object]},config:{},noOverlayFocus:{type:Boolean},focusValue:{},menuWrapRef:{},ariaLabels:{},overlayLabel:{}},emits:["selected","toggle","reset-flow","hover-value"],setup(n,{expose:e,emit:t}){const{setSelectionGrid:r,buildMultiLevelMatrix:s,setMonthPicker:i}=No(),a=t,o=n,{defaultedAriaLabels:l,defaultedTextInput:u,defaultedConfig:c,handleEventPropagation:h}=Cr(o),{hideNavigationButtons:p}=Fp(),f=$e(!1),v=$e(null),b=$e(null),x=$e([]),w=$e(),k=$e(null),T=$e(0),I=$e(null);b5(()=>{v.value=null}),dr(()=>{is().then(()=>O()),o.noOverlayFocus||Q(),Y(!0)}),Ra(()=>Y(!1));const Y=A=>{var F;o.arrowNavigation&&((F=o.headerRefs)!=null&&F.length?i(A):r(A))},Q=()=>{var A;const F=Jr(b);F&&(u.value.enabled||(v.value?(A=v.value)==null||A.focus({preventScroll:!0}):F.focus({preventScroll:!0})),f.value=F.clientHeight<F.scrollHeight)},H=He(()=>({dp__overlay:!0,"dp--overlay-absolute":!o.useRelative,"dp--overlay-relative":o.useRelative})),j=He(()=>o.useRelative?{height:`${o.height}px`,width:"var(--dp-menu-min-width)"}:void 0),U=He(()=>({dp__overlay_col:!0})),K=He(()=>({dp__btn:!0,dp__button:!0,dp__overlay_action:!0,dp__over_action_scroll:f.value,dp__button_bottom:o.isLast})),D=He(()=>{var A,F;return{dp__overlay_container:!0,dp__container_flex:((A=o.items)==null?void 0:A.length)<=6,dp__container_block:((F=o.items)==null?void 0:F.length)>6}});Un(()=>o.items,()=>O(!1),{deep:!0});const O=(A=!0)=>{is().then(()=>{const F=Jr(v),G=Jr(b),Z=Jr(k),_=Jr(I),q=Z?Z.getBoundingClientRect().height:0;G&&(G.getBoundingClientRect().height?T.value=G.getBoundingClientRect().height-q:T.value=c.value.modeHeight-q),F&&_&&A&&(_.scrollTop=F.offsetTop-_.offsetTop-(T.value/2-F.getBoundingClientRect().height)-q)})},J=A=>{A.disabled||a("selected",A.value)},M=()=>{a("toggle"),a("reset-flow")},ee=A=>{o.escClose&&(M(),h(A))},W=(A,F,G,Z)=>{A&&((F.active||F.value===o.focusValue)&&(v.value=A),o.arrowNavigation&&(Array.isArray(x.value[G])?x.value[G][Z]=A:x.value[G]=[A],ae()))},ae=()=>{var A,F;const G=(A=o.headerRefs)!=null&&A.length?[o.headerRefs].concat(x.value):x.value.concat([o.skipButtonRef?[]:[k.value]]);s(gn(G),(F=o.headerRefs)!=null&&F.length?"monthPicker":"selectionGrid")},ne=A=>{o.arrowNavigation||xo(A,c.value,!0)},oe=A=>{w.value=A,a("hover-value",A)},de=()=>{if(M(),!o.isLast){const A=v0(o.menuWrapRef??null,"action-row");if(A){const F=n_(A);F==null||F.focus()}}},fe=A=>{switch(A.key){case wr.esc:return ee(A);case wr.arrowLeft:return ne(A);case wr.arrowRight:return ne(A);case wr.arrowUp:return ne(A);case wr.arrowDown:return ne(A);default:return}},P=A=>{if(A.key===wr.enter)return M();if(A.key===wr.tab)return de()};return e({focusGrid:Q}),(A,F)=>{var G;return _e(),Me("div",{ref_key:"gridWrapRef",ref:b,class:Ct(H.value),style:$n(j.value),role:A.useRelative?void 0:"dialog","aria-label":A.overlayLabel,tabindex:A.useRelative?void 0:"0",onKeydown:fe,onClick:F[0]||(F[0]=Js(()=>{},["prevent"]))},[Ne("div",{ref_key:"containerRef",ref:I,class:Ct(D.value),style:$n({"--dp-overlay-height":`${T.value}px`}),role:"grid"},[Ne("div",uL,[ct(A.$slots,"header")]),A.$slots.overlay?ct(A.$slots,"overlay",{key:0}):(_e(!0),Me(pt,{key:1},nr(A.items,(Z,_)=>(_e(),Me("div",{key:_,class:Ct(["dp__overlay_row",{dp__flex_row:A.items.length>=3}]),role:"row"},[(_e(!0),Me(pt,null,nr(Z,(q,te)=>(_e(),Me("div",{key:q.value,ref_for:!0,ref:Ae=>W(Ae,q,_,te),role:"gridcell",class:Ct(U.value),"aria-selected":q.active||void 0,"aria-disabled":q.disabled||void 0,tabindex:"0","data-test-id":q.text,onClick:Js(Ae=>J(q),["prevent"]),onKeydown:Ae=>ue(ss)(Ae,()=>J(q),!0),onMouseover:Ae=>oe(q.value)},[Ne("div",{class:Ct(q.className)},[A.$slots.item?ct(A.$slots,"item",{key:0,item:q}):Ge("",!0),A.$slots.item?Ge("",!0):(_e(),Me(pt,{key:1},[or(Vt(q.text),1)],64))],2)],42,hL))),128))],2))),128))],6),A.$slots["button-icon"]?rn((_e(),Me("button",{key:0,ref_key:"toggleButton",ref:k,type:"button","aria-label":(G=ue(l))==null?void 0:G.toggleOverlay,class:Ct(K.value),tabindex:"0",onClick:M,onKeydown:P},[ct(A.$slots,"button-icon")],42,dL)),[[Nf,!ue(p)(A.hideNavigation,A.type)]]):Ge("",!0)],46,cL)}}}),fL=["data-dp-mobile"],jp=ln({__name:"InstanceWrap",props:{multiCalendars:{},stretch:{type:Boolean},collapse:{type:Boolean},isMobile:{type:Boolean}},setup(n){const e=n,t=He(()=>e.multiCalendars>0?[...Array(e.multiCalendars).keys()]:[0]),r=He(()=>({dp__instance_calendar:e.multiCalendars>0}));return(s,i)=>(_e(),Me("div",{class:Ct({dp__menu_inner:!s.stretch,"dp--menu--inner-stretched":s.stretch,dp__flex_display:s.multiCalendars>0,"dp--flex-display-collapsed":s.collapse}),"data-dp-mobile":s.isMobile},[(_e(!0),Me(pt,null,nr(t.value,(a,o)=>(_e(),Me("div",{key:a,class:Ct(r.value)},[ct(s.$slots,"default",{instance:a,index:o})],2))),128))],10,fL))}}),pL=["data-dp-element","aria-label","aria-disabled"],ph=ln({compatConfig:{MODE:3},__name:"ArrowBtn",props:{ariaLabel:{},elName:{},disabled:{type:Boolean}},emits:["activate","set-ref"],setup(n,{emit:e}){const t=e,r=$e(null);return dr(()=>t("set-ref",r)),(s,i)=>(_e(),Me("button",{ref_key:"elRef",ref:r,type:"button","data-dp-element":s.elName,class:"dp__btn dp--arrow-btn-nav",tabindex:"0","aria-label":s.ariaLabel,"aria-disabled":s.disabled||void 0,onClick:i[0]||(i[0]=a=>s.$emit("activate")),onKeydown:i[1]||(i[1]=a=>ue(ss)(a,()=>s.$emit("activate"),!0))},[Ne("span",{class:Ct(["dp__inner_nav",{dp__inner_nav_disabled:s.disabled}])},[ct(s.$slots,"default")],2)],40,pL))}}),gL=["aria-label","data-test-id"],g_=ln({__name:"YearModePicker",props:{...Li,showYearPicker:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},instance:{type:Number,default:0},year:{type:Number,default:0},isDisabled:{type:Function,default:()=>!1}},emits:["toggle-year-picker","year-select","handle-year"],setup(n,{emit:e}){const t=e,r=n,{showRightIcon:s,showLeftIcon:i}=Fp(),{defaultedConfig:a,defaultedMultiCalendars:o,defaultedAriaLabels:l,defaultedTransitions:u,defaultedUI:c}=Cr(r),{showTransition:h,transitionName:p}=Wh(u),f=$e(!1),v=(w=!1,k)=>{f.value=!f.value,t("toggle-year-picker",{flow:w,show:k})},b=w=>{f.value=!1,t("year-select",w)},x=(w=!1)=>{t("handle-year",w)};return(w,k)=>{var T,I,Y,Q,H;return _e(),Me(pt,null,[Ne("div",{class:Ct(["dp--year-mode-picker",{"dp--hidden-el":f.value}])},[ue(i)(ue(o),n.instance)?(_e(),xt(ph,{key:0,ref:"mpPrevIconRef","aria-label":(T=ue(l))==null?void 0:T.prevYear,disabled:n.isDisabled(!1),class:Ct((I=ue(c))==null?void 0:I.navBtnPrev),onActivate:k[0]||(k[0]=j=>x(!1))},{default:mt(()=>[w.$slots["arrow-left"]?ct(w.$slots,"arrow-left",{key:0}):Ge("",!0),w.$slots["arrow-left"]?Ge("",!0):(_e(),xt(ue(wv),{key:1}))]),_:3},8,["aria-label","disabled","class"])):Ge("",!0),Ne("button",{ref:"mpYearButtonRef",class:"dp__btn dp--year-select",type:"button","aria-label":`${n.year}-${(Y=ue(l))==null?void 0:Y.openYearsOverlay}`,"data-test-id":`year-mode-btn-${n.instance}`,onClick:k[1]||(k[1]=()=>v(!1)),onKeydown:k[2]||(k[2]=t4(()=>v(!1),["enter"]))},[w.$slots.year?ct(w.$slots,"year",{key:0,year:n.year}):Ge("",!0),w.$slots.year?Ge("",!0):(_e(),Me(pt,{key:1},[or(Vt(n.year),1)],64))],40,gL),ue(s)(ue(o),n.instance)?(_e(),xt(ph,{key:1,ref:"mpNextIconRef","aria-label":(Q=ue(l))==null?void 0:Q.nextYear,disabled:n.isDisabled(!0),class:Ct((H=ue(c))==null?void 0:H.navBtnNext),onActivate:k[3]||(k[3]=j=>x(!0))},{default:mt(()=>[w.$slots["arrow-right"]?ct(w.$slots,"arrow-right",{key:0}):Ge("",!0),w.$slots["arrow-right"]?Ge("",!0):(_e(),xt(ue(_v),{key:1}))]),_:3},8,["aria-label","disabled","class"])):Ge("",!0)],2),ot(Zc,{name:ue(p)(n.showYearPicker),css:ue(h)},{default:mt(()=>{var j,U;return[n.showYearPicker?(_e(),xt(Yh,{key:0,items:n.items,"text-input":w.textInput,"esc-close":w.escClose,config:w.config,"is-last":w.autoApply&&!ue(a).keepActionRow,"hide-navigation":w.hideNavigation,"aria-labels":w.ariaLabels,"overlay-label":(U=(j=ue(l))==null?void 0:j.yearPicker)==null?void 0:U.call(j,!0),type:"year",onToggle:v,onSelected:k[4]||(k[4]=K=>b(K))},qn({"button-icon":mt(()=>[w.$slots["calendar-icon"]?ct(w.$slots,"calendar-icon",{key:0}):Ge("",!0),w.$slots["calendar-icon"]?Ge("",!0):(_e(),xt(ue(tu),{key:1}))]),_:2},[w.$slots["year-overlay-value"]?{name:"item",fn:mt(({item:K})=>[ct(w.$slots,"year-overlay-value",{text:K.text,value:K.value})]),key:"0"}:void 0]),1032,["items","text-input","esc-close","config","is-last","hide-navigation","aria-labels","overlay-label"])):Ge("",!0)]}),_:3},8,["name","css"])],64)}}}),Lv=(n,e,t)=>{if(e.value&&Array.isArray(e.value))if(e.value.some(r=>Ut(n,r))){const r=e.value.filter(s=>!Ut(s,n));e.value=r.length?r:null}else(t&&+t>e.value.length||!t)&&e.value.push(n);else e.value=[n]},Dv=(n,e,t)=>{let r=n.value?n.value.slice():[];return r.length===2&&r[1]!==null&&(r=[]),r.length?(Mr(e,r[0])?r.unshift(e):r[1]=e,t("range-end",e)):(r=[e],t("range-start",e)),r},Rp=(n,e,t,r)=>{n&&(n[0]&&n[1]&&t&&e("auto-apply"),n[0]&&!n[1]&&r&&t&&e("auto-apply"))},m_=n=>{Array.isArray(n.value)&&n.value.length<=2&&n.range?n.modelValue.value=n.value.map(e=>vs(Ke(e),n.timezone)):Array.isArray(n.value)||(n.modelValue.value=vs(Ke(n.value),n.timezone))},v_=(n,e,t,r)=>Array.isArray(e.value)&&(e.value.length===2||e.value.length===1&&r.value.partialRange)?r.value.fixedStart&&(Ir(n,e.value[0])||Ut(n,e.value[0]))?[e.value[0],n]:r.value.fixedEnd&&(Mr(n,e.value[1])||Ut(n,e.value[1]))?[n,e.value[1]]:(t("invalid-fixed-range",n),e.value):[],y_=({multiCalendars:n,range:e,highlight:t,propDates:r,calendars:s,modelValue:i,props:a,filters:o,year:l,month:u,emit:c})=>{const h=He(()=>Av(a.yearRange,a.locale,a.reverseYears)),p=$e([!1]),f=He(()=>(K,D)=>{const O=lr(wi(new Date),{month:u.value(K),year:l.value(K)}),J=D?Bw(O):Mh(O);return h_(J,r.value.maxDate,r.value.minDate,a.preventMinMaxNavigation,D)}),v=()=>Array.isArray(i.value)&&n.value.solo&&i.value[1],b=()=>{for(let K=0;K<n.value.count;K++)if(K===0)s.value[K]=s.value[0];else if(K===n.value.count-1&&v())s.value[K]={month:qt(i.value[1]),year:At(i.value[1])};else{const D=lr(Ke(),s.value[K-1]);s.value[K]={month:qt(D),year:At(pv(D,1))}}},x=K=>{if(!K)return b();const D=lr(Ke(),s.value[K]);return s.value[0].year=At(Zw(D,n.value.count-1)),b()},w=(K,D)=>{const O=kP(D,K);return e.value.showLastInRange&&O>1?D:K},k=K=>a.focusStartDate||n.value.solo?K[0]:K[1]?w(K[0],K[1]):K[0],T=()=>{if(i.value){const K=Array.isArray(i.value)?k(i.value):i.value;s.value[0]={month:qt(K),year:At(K)}}},I=()=>{T(),n.value.count&&b()};Un(i,(K,D)=>{a.isTextInputDate&&JSON.stringify(K??{})!==JSON.stringify(D??{})&&I()}),dr(()=>{I()});const Y=(K,D)=>{s.value[D].year=K,c("update-month-year",{instance:D,year:K,month:s.value[D].month}),n.value.count&&!n.value.solo&&x(D)},Q=He(()=>K=>Kc(h.value,D=>{var O;const J=l.value(K)===D.value,M=Eh(D.value,Jc(r.value.minDate),Jc(r.value.maxDate))||((O=o.value.years)==null?void 0:O.includes(l.value(K))),ee=Ov(t.value,D.value);return{active:J,disabled:M,highlighted:ee}})),H=(K,D)=>{Y(K,D),U(D)},j=(K,D=!1)=>{if(!f.value(K,D)){const O=D?l.value(K)+1:l.value(K)-1;Y(O,K)}},U=(K,D=!1,O)=>{D||c("reset-flow"),O!==void 0?p.value[K]=O:p.value[K]=!p.value[K],p.value[K]?c("overlay-toggle",{open:!0,overlay:Rn.year}):(c("overlay-closed"),c("overlay-toggle",{open:!1,overlay:Rn.year}))};return{isDisabled:f,groupedYears:Q,showYearPicker:p,selectYear:Y,toggleYearPicker:U,handleYearSelect:H,handleYear:j}},mL=(n,e)=>{const{defaultedMultiCalendars:t,defaultedAriaLabels:r,defaultedTransitions:s,defaultedConfig:i,defaultedRange:a,defaultedHighlight:o,propDates:l,defaultedTz:u,defaultedFilters:c,defaultedMultiDates:h}=Cr(n),p=()=>{n.isTextInputDate&&I(At(Ke(n.startDate)),0)},{modelValue:f,year:v,month:b,calendars:x}=Gh(n,e,p),w=He(()=>t_(n.formatLocale,n.locale,n.monthNameFormat)),k=$e(null),{checkMinMaxRange:T}=jo(n),{selectYear:I,groupedYears:Y,showYearPicker:Q,toggleYearPicker:H,handleYearSelect:j,handleYear:U,isDisabled:K}=y_({modelValue:f,multiCalendars:t,range:a,highlight:o,calendars:x,year:v,propDates:l,month:b,filters:c,props:n,emit:e});dr(()=>{n.startDate&&(f.value&&n.focusStartDate||!f.value)&&I(At(Ke(n.startDate)),0)});const D=F=>F?{month:qt(F),year:At(F)}:{month:null,year:null},O=()=>f.value?Array.isArray(f.value)?f.value.map(F=>D(F)):D(f.value):D(),J=(F,G)=>{const Z=x.value[F],_=O();return Array.isArray(_)?_.some(q=>q.year===(Z==null?void 0:Z.year)&&q.month===G):(Z==null?void 0:Z.year)===_.year&&G===_.month},M=(F,G,Z)=>{var _,q;const te=O();return Array.isArray(te)?v.value(G)===((_=te[Z])==null?void 0:_.year)&&F===((q=te[Z])==null?void 0:q.month):!1},ee=(F,G)=>{if(a.value.enabled){const Z=O();if(Array.isArray(f.value)&&Array.isArray(Z)){const _=M(F,G,0)||M(F,G,1),q=Sa(wi(Ke()),F,v.value(G));return Nh(f.value,k.value,q)&&!_}return!1}return!1},W=He(()=>F=>Kc(w.value,G=>{var Z;const _=J(F,G.value),q=Eh(G.value,o_(v.value(F),l.value.minDate),l_(v.value(F),l.value.maxDate))||BO(l.value.disabledDates,v.value(F),G.value)||((Z=c.value.months)==null?void 0:Z.includes(G.value))||!$O(l.value.allowedDates,v.value(F),G.value),te=ee(G.value,F),Ae=f_(o.value,G.value,v.value(F));return{active:_,disabled:q,isBetween:te,highlighted:Ae}})),ae=(F,G)=>Sa(wi(Ke()),F,v.value(G)),ne=(F,G)=>{const Z=f.value?f.value:wi(new Date);f.value=Sa(Z,F,v.value(G)),e("auto-apply"),e("update-flow-step")},oe=(F,G)=>{const Z=ae(F,G);a.value.fixedEnd||a.value.fixedStart?f.value=v_(Z,f,e,a):f.value?T(Z,f.value)&&(f.value=Dv(f,ae(F,G),e)):f.value=[ae(F,G)],is().then(()=>{Rp(f.value,e,n.autoApply,n.modelAuto)})},de=(F,G)=>{Lv(ae(F,G),f,h.value.limit),e("auto-apply",!0)},fe=(F,G)=>(x.value[G].month=F,A(G,x.value[G].year,F),h.value.enabled?de(F,G):a.value.enabled?oe(F,G):ne(F,G)),P=(F,G)=>{I(F,G),A(G,F,null)},A=(F,G,Z)=>{let _=Z;if(!_&&_!==0){const q=O();_=Array.isArray(q)?q[F].month:q.month}e("update-month-year",{instance:F,year:G,month:_})};return{groupedMonths:W,groupedYears:Y,year:v,isDisabled:K,defaultedMultiCalendars:t,defaultedAriaLabels:r,defaultedTransitions:s,defaultedConfig:i,showYearPicker:Q,modelValue:f,presetDate:(F,G)=>{m_({value:F,modelValue:f,range:a.value.enabled,timezone:G?void 0:u.value.timezone}),e("auto-apply")},setHoverDate:(F,G)=>{k.value=ae(F,G)},selectMonth:fe,selectYear:P,toggleYearPicker:H,handleYearSelect:j,handleYear:U,getModelMonthYear:O}},vL=ln({compatConfig:{MODE:3},__name:"MonthPicker",props:{...Li},emits:["update:internal-model-value","overlay-closed","reset-flow","range-start","range-end","auto-apply","update-month-year","update-flow-step","mount","invalid-fixed-range","overlay-toggle"],setup(n,{expose:e,emit:t}){const r=t,s=wl(),i=Ms(s,"yearMode"),a=n;dr(()=>{a.shadow||r("mount",null)});const{groupedMonths:o,groupedYears:l,year:u,isDisabled:c,defaultedMultiCalendars:h,defaultedConfig:p,showYearPicker:f,modelValue:v,presetDate:b,setHoverDate:x,selectMonth:w,selectYear:k,toggleYearPicker:T,handleYearSelect:I,handleYear:Y,getModelMonthYear:Q}=mL(a,r);return e({getSidebarProps:()=>({modelValue:v,year:u,getModelMonthYear:Q,selectMonth:w,selectYear:k,handleYear:Y}),presetDate:b,toggleYearPicker:H=>T(0,H)}),(H,j)=>(_e(),xt(jp,{"multi-calendars":ue(h).count,collapse:H.collapse,stretch:"","is-mobile":H.isMobile},{default:mt(({instance:U})=>[H.$slots["top-extra"]?ct(H.$slots,"top-extra",{key:0,value:H.internalModelValue}):Ge("",!0),H.$slots["month-year"]?ct(H.$slots,"month-year",yn(nn({key:1},{year:ue(u),months:ue(o)(U),years:ue(l)(U),selectMonth:ue(w),selectYear:ue(k),instance:U}))):(_e(),xt(Yh,{key:2,items:ue(o)(U),"arrow-navigation":H.arrowNavigation,"is-last":H.autoApply&&!ue(p).keepActionRow,"esc-close":H.escClose,height:ue(p).modeHeight,config:H.config,"no-overlay-focus":!!(H.noOverlayFocus||H.textInput),"use-relative":"",type:"month",onSelected:K=>ue(w)(K,U),onHoverValue:K=>ue(x)(K,U)},qn({header:mt(()=>[ot(g_,nn(H.$props,{items:ue(l)(U),instance:U,"show-year-picker":ue(f)[U],year:ue(u)(U),"is-disabled":K=>ue(c)(U,K),onHandleYear:K=>ue(Y)(U,K),onYearSelect:K=>ue(I)(K,U),onToggleYearPicker:K=>ue(T)(U,K==null?void 0:K.flow,K==null?void 0:K.show)}),qn({_:2},[nr(ue(i),(K,D)=>({name:K,fn:mt(O=>[ct(H.$slots,K,yn(ns(O)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),_:2},[H.$slots["month-overlay-value"]?{name:"item",fn:mt(({item:K})=>[ct(H.$slots,"month-overlay-value",{text:K.text,value:K.value})]),key:"0"}:void 0]),1032,["items","arrow-navigation","is-last","esc-close","height","config","no-overlay-focus","onSelected","onHoverValue"]))]),_:3},8,["multi-calendars","collapse","is-mobile"]))}}),yL=(n,e)=>{const t=()=>{n.isTextInputDate&&(c.value=At(Ke(n.startDate)))},{modelValue:r}=Gh(n,e,t),s=$e(null),{defaultedHighlight:i,defaultedMultiDates:a,defaultedFilters:o,defaultedRange:l,propDates:u}=Cr(n),c=$e();dr(()=>{n.startDate&&(r.value&&n.focusStartDate||!r.value)&&(c.value=At(Ke(n.startDate)))});const h=w=>Array.isArray(r.value)?r.value.some(k=>At(k)===w):r.value?At(r.value)===w:!1,p=w=>l.value.enabled&&Array.isArray(r.value)?Nh(r.value,s.value,x(w)):!1,f=w=>u.value.allowedDates instanceof Map?u.value.allowedDates.size?u.value.allowedDates.has(`${w}`):!1:!0,v=w=>u.value.disabledDates instanceof Map?u.value.disabledDates.size?u.value.disabledDates.has(`${w}`):!1:!0,b=He(()=>Kc(Av(n.yearRange,n.locale,n.reverseYears),w=>{const k=h(w.value),T=Eh(w.value,Jc(u.value.minDate),Jc(u.value.maxDate))||o.value.years.includes(w.value)||!f(w.value)||v(w.value),I=p(w.value)&&!k,Y=Ov(i.value,w.value);return{active:k,disabled:T,isBetween:I,highlighted:Y}})),x=w=>Gi(wi(Mh(new Date)),w);return{groupedYears:b,modelValue:r,focusYear:c,setHoverValue:w=>{s.value=Gi(wi(new Date),w)},selectYear:w=>{var k;if(e("update-month-year",{instance:0,year:w}),a.value.enabled)return r.value?Array.isArray(r.value)&&(((k=r.value)==null?void 0:k.map(T=>At(T))).includes(w)?r.value=r.value.filter(T=>At(T)!==w):r.value.push(Gi(_n(Ke()),w))):r.value=[Gi(_n(Mh(Ke())),w)],e("auto-apply",!0);l.value.enabled?(r.value=Dv(r,x(w),e),is().then(()=>{Rp(r.value,e,n.autoApply,n.modelAuto)})):(r.value=x(w),e("auto-apply"))}}},bL=ln({compatConfig:{MODE:3},__name:"YearPicker",props:{...Li},emits:["update:internal-model-value","reset-flow","range-start","range-end","auto-apply","update-month-year"],setup(n,{expose:e,emit:t}){const r=t,s=n,{groupedYears:i,modelValue:a,focusYear:o,selectYear:l,setHoverValue:u}=yL(s,r),{defaultedConfig:c}=Cr(s);return e({getSidebarProps:()=>({modelValue:a,selectYear:l})}),(h,p)=>(_e(),Me("div",null,[h.$slots["top-extra"]?ct(h.$slots,"top-extra",{key:0,value:h.internalModelValue}):Ge("",!0),h.$slots["month-year"]?ct(h.$slots,"month-year",yn(nn({key:1},{years:ue(i),selectYear:ue(l)}))):(_e(),xt(Yh,{key:2,items:ue(i),"is-last":h.autoApply&&!ue(c).keepActionRow,height:ue(c).modeHeight,config:h.config,"no-overlay-focus":!!(h.noOverlayFocus||h.textInput),"focus-value":ue(o),type:"year","use-relative":"",onSelected:ue(l),onHoverValue:ue(u)},qn({_:2},[h.$slots["year-overlay-value"]?{name:"item",fn:mt(({item:f})=>[ct(h.$slots,"year-overlay-value",{text:f.text,value:f.value})]),key:"0"}:void 0]),1032,["items","is-last","height","config","no-overlay-focus","focus-value","onSelected","onHoverValue"]))]))}}),wL={key:0,class:"dp__time_input"},_L=["data-compact","data-collapsed"],xL=["data-test-id","aria-label","onKeydown","onClick","onMousedown"],SL=["aria-label","disabled","data-test-id","onKeydown","onClick"],kL=["data-test-id","aria-label","onKeydown","onClick","onMousedown"],CL={key:0},AL=["aria-label","data-compact"],TL=ln({compatConfig:{MODE:3},__name:"TimeInput",props:{hours:{type:Number,default:0},minutes:{type:Number,default:0},seconds:{type:Number,default:0},closeTimePickerBtn:{type:Object,default:null},order:{type:Number,default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...Li},emits:["set-hours","set-minutes","update:hours","update:minutes","update:seconds","reset-flow","mounted","overlay-closed","overlay-opened","am-pm-change"],setup(n,{expose:e,emit:t}){const r=t,s=n,{setTimePickerElements:i,setTimePickerBackRef:a}=No(),{defaultedAriaLabels:o,defaultedTransitions:l,defaultedFilters:u,defaultedConfig:c,defaultedRange:h,defaultedMultiCalendars:p}=Cr(s),{transitionName:f,showTransition:v}=Wh(l),b=Na({hours:!1,minutes:!1,seconds:!1}),x=$e("AM"),w=$e(null),k=$e([]),T=$e(),I=$e(!1);dr(()=>{r("mounted")});const Y=C=>lr(new Date,{hours:C.hours,minutes:C.minutes,seconds:s.enableSeconds?C.seconds:0,milliseconds:0}),Q=He(()=>C=>oe(C,s[C])||j(C,s[C])),H=He(()=>({hours:s.hours,minutes:s.minutes,seconds:s.seconds})),j=(C,L)=>h.value.enabled&&!h.value.disableTimeRangeValidation?!s.validateTime(C,L):!1,U=(C,L)=>{if(h.value.enabled&&!h.value.disableTimeRangeValidation){const he=L?+s[`${C}Increment`]:-+s[`${C}Increment`],pe=s[C]+he;return!s.validateTime(C,pe)}return!1},K=He(()=>C=>!F(+s[C]+ +s[`${C}Increment`],C)||U(C,!0)),D=He(()=>C=>!F(+s[C]-+s[`${C}Increment`],C)||U(C,!1)),O=(C,L)=>Ew(lr(Ke(),C),L),J=(C,L)=>bO(lr(Ke(),C),L),M=He(()=>({dp__time_col:!0,dp__time_col_block:!s.timePickerInline,dp__time_col_reg_block:!s.enableSeconds&&s.is24&&!s.timePickerInline,dp__time_col_reg_inline:!s.enableSeconds&&s.is24&&s.timePickerInline,dp__time_col_reg_with_button:!s.enableSeconds&&!s.is24,dp__time_col_sec:s.enableSeconds&&s.is24,dp__time_col_sec_with_button:s.enableSeconds&&!s.is24})),ee=He(()=>s.timePickerInline&&h.value.enabled&&!p.value.count),W=He(()=>{const C=[{type:"hours"}];return s.enableMinutes&&C.push({type:"",separator:!0},{type:"minutes"}),s.enableSeconds&&C.push({type:"",separator:!0},{type:"seconds"}),C}),ae=He(()=>W.value.filter(C=>!C.separator)),ne=He(()=>C=>{if(C==="hours"){const L=Ae(+s.hours);return{text:L<10?`0${L}`:`${L}`,value:L}}return{text:s[C]<10?`0${s[C]}`:`${s[C]}`,value:s[C]}}),oe=(C,L)=>{var he;if(!s.disabledTimesConfig)return!1;const pe=s.disabledTimesConfig(s.order,C==="hours"?L:void 0);return pe[C]?!!((he=pe[C])!=null&&he.includes(L)):!0},de=(C,L)=>L!=="hours"||x.value==="AM"?C:C+12,fe=C=>{const L=s.is24?24:12,he=C==="hours"?L:60,pe=+s[`${C}GridIncrement`],ge=C==="hours"&&!s.is24?pe:0,be=[];for(let xe=ge;xe<he;xe+=pe)be.push({value:s.is24?xe:de(xe,C),text:xe<10?`0${xe}`:`${xe}`});return C==="hours"&&!s.is24&&be.unshift({value:x.value==="PM"?12:0,text:"12"}),Kc(be,xe=>({active:!1,disabled:u.value.times[C].includes(xe.value)||!F(xe.value,C)||oe(C,xe.value)||j(C,xe.value)}))},P=C=>C>=0?C:59,A=C=>C>=0?C:23,F=(C,L)=>{const he=s.minTime?Y(dm(s.minTime)):null,pe=s.maxTime?Y(dm(s.maxTime)):null,ge=Y(dm(H.value,L,L==="minutes"||L==="seconds"?P(C):A(C)));return he&&pe?(Gc(ge,pe)||Sc(ge,pe))&&(yl(ge,he)||Sc(ge,he)):he?yl(ge,he)||Sc(ge,he):pe?Gc(ge,pe)||Sc(ge,pe):!0},G=C=>s[`no${C[0].toUpperCase()+C.slice(1)}Overlay`],Z=C=>{G(C)||(b[C]=!b[C],b[C]?(I.value=!0,r("overlay-opened",C)):(I.value=!1,r("overlay-closed",C)))},_=C=>C==="hours"?Oa:C==="minutes"?Co:Wc,q=()=>{T.value&&clearTimeout(T.value)},te=(C,L=!0,he)=>{const pe=L?O:J,ge=L?+s[`${C}Increment`]:-+s[`${C}Increment`];F(+s[C]+ge,C)&&r(`update:${C}`,_(C)(pe({[C]:+s[C]},{[C]:+s[`${C}Increment`]}))),!(he!=null&&he.keyboard)&&c.value.timeArrowHoldThreshold&&(T.value=setTimeout(()=>{te(C,L)},c.value.timeArrowHoldThreshold))},Ae=C=>s.is24?C:(C>=12?x.value="PM":x.value="AM",AO(C)),ce=()=>{x.value==="PM"?(x.value="AM",r("update:hours",s.hours-12)):(x.value="PM",r("update:hours",s.hours+12)),r("am-pm-change",x.value)},V=C=>{b[C]=!0},R=(C,L,he)=>{if(C&&s.arrowNavigation){Array.isArray(k.value[L])?k.value[L][he]=C:k.value[L]=[C];const pe=k.value.reduce((ge,be)=>be.map((xe,Ee)=>[...ge[Ee]||[],be[Ee]]),[]);a(s.closeTimePickerBtn),w.value&&(pe[1]=pe[1].concat(w.value)),i(pe,s.order)}},re=(C,L)=>(Z(C),r(`update:${C}`,L));return e({openChildCmp:V}),(C,L)=>{var he;return C.disabled?Ge("",!0):(_e(),Me("div",wL,[(_e(!0),Me(pt,null,nr(W.value,(pe,ge)=>{var be,xe,Ee;return _e(),Me("div",{key:ge,class:Ct(M.value),"data-compact":ee.value&&!C.enableSeconds,"data-collapsed":ee.value&&C.enableSeconds},[pe.separator?(_e(),Me(pt,{key:0},[I.value?Ge("",!0):(_e(),Me(pt,{key:0},[or(":")],64))],64)):(_e(),Me(pt,{key:1},[Ne("button",{ref_for:!0,ref:ie=>R(ie,ge,0),type:"button",class:Ct({dp__btn:!0,dp__inc_dec_button:!C.timePickerInline,dp__inc_dec_button_inline:C.timePickerInline,dp__tp_inline_btn_top:C.timePickerInline,dp__inc_dec_button_disabled:K.value(pe.type),"dp--hidden-el":I.value}),"data-test-id":`${pe.type}-time-inc-btn-${s.order}`,"aria-label":(be=ue(o))==null?void 0:be.incrementValue(pe.type),tabindex:"0",onKeydown:ie=>ue(ss)(ie,()=>te(pe.type,!0,{keyboard:!0}),!0),onClick:ie=>ue(c).timeArrowHoldThreshold?void 0:te(pe.type,!0),onMousedown:ie=>ue(c).timeArrowHoldThreshold?te(pe.type,!0):void 0,onMouseup:q},[s.timePickerInline?(_e(),Me(pt,{key:1},[C.$slots["tp-inline-arrow-up"]?ct(C.$slots,"tp-inline-arrow-up",{key:0}):(_e(),Me(pt,{key:1},[L[2]||(L[2]=Ne("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1)),L[3]||(L[3]=Ne("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1))],64))],64)):(_e(),Me(pt,{key:0},[C.$slots["arrow-up"]?ct(C.$slots,"arrow-up",{key:0}):Ge("",!0),C.$slots["arrow-up"]?Ge("",!0):(_e(),xt(ue(Sv),{key:1}))],64))],42,xL),Ne("button",{ref_for:!0,ref:ie=>R(ie,ge,1),type:"button","aria-label":`${ne.value(pe.type).text}-${(xe=ue(o))==null?void 0:xe.openTpOverlay(pe.type)}`,class:Ct({dp__time_display:!0,dp__time_display_block:!C.timePickerInline,dp__time_display_inline:C.timePickerInline,"dp--time-invalid":Q.value(pe.type),"dp--time-overlay-btn":!Q.value(pe.type),"dp--hidden-el":I.value}),disabled:G(pe.type),tabindex:"0","data-test-id":`${pe.type}-toggle-overlay-btn-${s.order}`,onKeydown:ie=>ue(ss)(ie,()=>Z(pe.type),!0),onClick:ie=>Z(pe.type)},[C.$slots[pe.type]?ct(C.$slots,pe.type,{key:0,text:ne.value(pe.type).text,value:ne.value(pe.type).value}):Ge("",!0),C.$slots[pe.type]?Ge("",!0):(_e(),Me(pt,{key:1},[or(Vt(ne.value(pe.type).text),1)],64))],42,SL),Ne("button",{ref_for:!0,ref:ie=>R(ie,ge,2),type:"button",class:Ct({dp__btn:!0,dp__inc_dec_button:!C.timePickerInline,dp__inc_dec_button_inline:C.timePickerInline,dp__tp_inline_btn_bottom:C.timePickerInline,dp__inc_dec_button_disabled:D.value(pe.type),"dp--hidden-el":I.value}),"data-test-id":`${pe.type}-time-dec-btn-${s.order}`,"aria-label":(Ee=ue(o))==null?void 0:Ee.decrementValue(pe.type),tabindex:"0",onKeydown:ie=>ue(ss)(ie,()=>te(pe.type,!1,{keyboard:!0}),!0),onClick:ie=>ue(c).timeArrowHoldThreshold?void 0:te(pe.type,!1),onMousedown:ie=>ue(c).timeArrowHoldThreshold?te(pe.type,!1):void 0,onMouseup:q},[s.timePickerInline?(_e(),Me(pt,{key:1},[C.$slots["tp-inline-arrow-down"]?ct(C.$slots,"tp-inline-arrow-down",{key:0}):(_e(),Me(pt,{key:1},[L[4]||(L[4]=Ne("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1)),L[5]||(L[5]=Ne("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1))],64))],64)):(_e(),Me(pt,{key:0},[C.$slots["arrow-down"]?ct(C.$slots,"arrow-down",{key:0}):Ge("",!0),C.$slots["arrow-down"]?Ge("",!0):(_e(),xt(ue(kv),{key:1}))],64))],42,kL)],64))],10,_L)}),128)),C.is24?Ge("",!0):(_e(),Me("div",CL,[C.$slots["am-pm-button"]?ct(C.$slots,"am-pm-button",{key:0,toggle:ce,value:x.value}):Ge("",!0),C.$slots["am-pm-button"]?Ge("",!0):(_e(),Me("button",{key:1,ref_key:"amPmButton",ref:w,type:"button",class:"dp__pm_am_button",role:"button","aria-label":(he=ue(o))==null?void 0:he.amPmButton,tabindex:"0","data-compact":ee.value,onClick:ce,onKeydown:L[0]||(L[0]=pe=>ue(ss)(pe,()=>ce(),!0))},Vt(x.value),41,AL))])),(_e(!0),Me(pt,null,nr(ae.value,(pe,ge)=>(_e(),xt(Zc,{key:ge,name:ue(f)(b[pe.type]),css:ue(v)},{default:mt(()=>{var be,xe;return[b[pe.type]?(_e(),xt(Yh,{key:0,items:fe(pe.type),"is-last":C.autoApply&&!ue(c).keepActionRow,"esc-close":C.escClose,type:pe.type,"text-input":C.textInput,config:C.config,"arrow-navigation":C.arrowNavigation,"aria-labels":C.ariaLabels,"overlay-label":(xe=(be=ue(o)).timeOverlay)==null?void 0:xe.call(be,pe.type),onSelected:Ee=>re(pe.type,Ee),onToggle:Ee=>Z(pe.type),onResetFlow:L[1]||(L[1]=Ee=>C.$emit("reset-flow"))},qn({"button-icon":mt(()=>[C.$slots["clock-icon"]?ct(C.$slots,"clock-icon",{key:0}):Ge("",!0),C.$slots["clock-icon"]?Ge("",!0):(_e(),xt(Ap(C.timePickerInline?ue(tu):ue(xv)),{key:1}))]),_:2},[C.$slots[`${pe.type}-overlay-value`]?{name:"item",fn:mt(({item:Ee})=>[ct(C.$slots,`${pe.type}-overlay-value`,{text:Ee.text,value:Ee.value})]),key:"0"}:void 0,C.$slots[`${pe.type}-overlay-header`]?{name:"header",fn:mt(()=>[ct(C.$slots,`${pe.type}-overlay-header`,{toggle:()=>Z(pe.type)})]),key:"1"}:void 0]),1032,["items","is-last","esc-close","type","text-input","config","arrow-navigation","aria-labels","overlay-label","onSelected","onToggle"])):Ge("",!0)]}),_:2},1032,["name","css"]))),128))]))}}}),PL=["data-dp-mobile"],OL=["aria-label","tabindex"],LL=["role","aria-label","tabindex"],DL=["aria-label"],b_=ln({compatConfig:{MODE:3},__name:"TimePicker",props:{hours:{type:[Number,Array],default:0},minutes:{type:[Number,Array],default:0},seconds:{type:[Number,Array],default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...Li},emits:["update:hours","update:minutes","update:seconds","mount","reset-flow","overlay-opened","overlay-closed","am-pm-change"],setup(n,{expose:e,emit:t}){const r=t,s=n,{buildMatrix:i,setTimePicker:a}=No(),o=wl(),{defaultedTransitions:l,defaultedAriaLabels:u,defaultedTextInput:c,defaultedConfig:h,defaultedRange:p}=Cr(s),{transitionName:f,showTransition:v}=Wh(l),{hideNavigationButtons:b}=Fp(),x=$e(null),w=$e(null),k=$e([]),T=$e(null),I=$e(!1);dr(()=>{r("mount"),!s.timePicker&&s.arrowNavigation?i([Jr(x.value)],"time"):a(!0,s.timePicker)});const Y=He(()=>p.value.enabled&&s.modelAuto?r_(s.internalModelValue):!0),Q=$e(!1),H=oe=>({hours:Array.isArray(s.hours)?s.hours[oe]:s.hours,minutes:Array.isArray(s.minutes)?s.minutes[oe]:s.minutes,seconds:Array.isArray(s.seconds)?s.seconds[oe]:s.seconds}),j=He(()=>{const oe=[];if(p.value.enabled)for(let de=0;de<2;de++)oe.push(H(de));else oe.push(H(0));return oe}),U=(oe,de=!1,fe="")=>{de||r("reset-flow"),Q.value=oe,r(oe?"overlay-opened":"overlay-closed",Rn.time),s.arrowNavigation&&a(oe),is(()=>{fe!==""&&k.value[0]&&k.value[0].openChildCmp(fe)})},K=He(()=>({dp__btn:!0,dp__button:!0,dp__button_bottom:s.autoApply&&!h.value.keepActionRow})),D=Ms(o,"timePicker"),O=(oe,de,fe)=>p.value.enabled?de===0?[oe,j.value[1][fe]]:[j.value[0][fe],oe]:oe,J=oe=>{r("update:hours",oe)},M=oe=>{r("update:minutes",oe)},ee=oe=>{r("update:seconds",oe)},W=()=>{if(T.value&&!c.value.enabled&&!s.noOverlayFocus){const oe=n_(T.value);oe&&oe.focus({preventScroll:!0})}},ae=oe=>{I.value=!1,r("overlay-closed",oe)},ne=oe=>{I.value=!0,r("overlay-opened",oe)};return e({toggleTimePicker:U}),(oe,de)=>{var fe;return _e(),Me("div",{class:"dp--tp-wrap","data-dp-mobile":oe.isMobile},[!oe.timePicker&&!oe.timePickerInline?rn((_e(),Me("button",{key:0,ref_key:"openTimePickerBtn",ref:x,type:"button",class:Ct({...K.value,"dp--hidden-el":Q.value}),"aria-label":(fe=ue(u))==null?void 0:fe.openTimePicker,tabindex:oe.noOverlayFocus?void 0:0,"data-test-id":"open-time-picker-btn",onKeydown:de[0]||(de[0]=P=>ue(ss)(P,()=>U(!0))),onClick:de[1]||(de[1]=P=>U(!0))},[oe.$slots["clock-icon"]?ct(oe.$slots,"clock-icon",{key:0}):Ge("",!0),oe.$slots["clock-icon"]?Ge("",!0):(_e(),xt(ue(xv),{key:1}))],42,OL)),[[Nf,!ue(b)(oe.hideNavigation,"time")]]):Ge("",!0),ot(Zc,{name:ue(f)(Q.value),css:ue(v)&&!oe.timePickerInline},{default:mt(()=>{var P,A;return[Q.value||oe.timePicker||oe.timePickerInline?(_e(),Me("div",{key:0,ref_key:"overlayRef",ref:T,role:oe.timePickerInline?void 0:"dialog",class:Ct({dp__overlay:!oe.timePickerInline,"dp--overlay-absolute":!s.timePicker&&!oe.timePickerInline,"dp--overlay-relative":s.timePicker}),style:$n(oe.timePicker?{height:`${ue(h).modeHeight}px`}:void 0),"aria-label":(P=ue(u))==null?void 0:P.timePicker,tabindex:oe.timePickerInline?void 0:0},[Ne("div",{class:Ct(oe.timePickerInline?"dp__time_picker_inline_container":"dp__overlay_container dp__container_flex dp__time_picker_overlay_container"),style:{display:"flex"}},[oe.$slots["time-picker-overlay"]?ct(oe.$slots,"time-picker-overlay",{key:0,hours:n.hours,minutes:n.minutes,seconds:n.seconds,setHours:J,setMinutes:M,setSeconds:ee}):Ge("",!0),oe.$slots["time-picker-overlay"]?Ge("",!0):(_e(),Me("div",{key:1,class:Ct(oe.timePickerInline?"dp__flex":"dp__overlay_row dp__flex_row")},[(_e(!0),Me(pt,null,nr(j.value,(F,G)=>rn((_e(),xt(TL,nn({key:G,ref_for:!0},{...oe.$props,order:G,hours:F.hours,minutes:F.minutes,seconds:F.seconds,closeTimePickerBtn:w.value,disabledTimesConfig:n.disabledTimesConfig,disabled:G===0?ue(p).fixedStart:ue(p).fixedEnd},{ref_for:!0,ref_key:"timeInputRefs",ref:k,"validate-time":(Z,_)=>n.validateTime(Z,O(_,G,Z)),"onUpdate:hours":Z=>J(O(Z,G,"hours")),"onUpdate:minutes":Z=>M(O(Z,G,"minutes")),"onUpdate:seconds":Z=>ee(O(Z,G,"seconds")),onMounted:W,onOverlayClosed:ae,onOverlayOpened:ne,onAmPmChange:de[2]||(de[2]=Z=>oe.$emit("am-pm-change",Z))}),qn({_:2},[nr(ue(D),(Z,_)=>({name:Z,fn:mt(q=>[ct(oe.$slots,Z,nn({ref_for:!0},q))])}))]),1040,["validate-time","onUpdate:hours","onUpdate:minutes","onUpdate:seconds"])),[[Nf,G===0?!0:Y.value]])),128))],2)),!oe.timePicker&&!oe.timePickerInline?rn((_e(),Me("button",{key:2,ref_key:"closeTimePickerBtn",ref:w,type:"button",class:Ct({...K.value,"dp--hidden-el":I.value}),"aria-label":(A=ue(u))==null?void 0:A.closeTimePicker,tabindex:"0",onKeydown:de[3]||(de[3]=F=>ue(ss)(F,()=>U(!1))),onClick:de[4]||(de[4]=F=>U(!1))},[oe.$slots["calendar-icon"]?ct(oe.$slots,"calendar-icon",{key:0}):Ge("",!0),oe.$slots["calendar-icon"]?Ge("",!0):(_e(),xt(ue(tu),{key:1}))],42,DL)),[[Nf,!ue(b)(oe.hideNavigation,"time")]]):Ge("",!0)],2)],14,LL)):Ge("",!0)]}),_:3},8,["name","css"])],8,PL)}}}),w_=(n,e,t,r)=>{const{defaultedRange:s}=Cr(n),i=(T,I)=>Array.isArray(e[T])?e[T][I]:e[T],a=T=>n.enableSeconds?Array.isArray(e.seconds)?e.seconds[T]:e.seconds:0,o=(T,I)=>T?I!==void 0?So(T,i("hours",I),i("minutes",I),a(I)):So(T,e.hours,e.minutes,a()):Qw(Ke(),a(I)),l=(T,I)=>{e[T]=I},u=He(()=>n.modelAuto&&s.value.enabled?Array.isArray(t.value)?t.value.length>1:!1:s.value.enabled),c=(T,I)=>{const Y=Object.fromEntries(Object.keys(e).map(Q=>Q===T?[Q,I]:[Q,e[Q]].slice()));if(u.value&&!s.value.disableTimeRangeValidation){const Q=j=>t.value?So(t.value[j],Y.hours[j],Y.minutes[j],Y.seconds[j]):null,H=j=>Jw(t.value[j],0);return!(Ut(Q(0),Q(1))&&(yl(Q(0),H(1))||Gc(Q(1),H(0))))}return!0},h=(T,I)=>{c(T,I)&&(l(T,I),r&&r())},p=T=>{h("hours",T)},f=T=>{h("minutes",T)},v=T=>{h("seconds",T)},b=(T,I,Y,Q)=>{I&&p(T),!I&&!Y&&f(T),Y&&v(T),t.value&&Q(t.value)},x=T=>{if(T){const I=Array.isArray(T),Y=I?[+T[0].hours,+T[1].hours]:+T.hours,Q=I?[+T[0].minutes,+T[1].minutes]:+T.minutes,H=I?[+T[0].seconds,+T[1].seconds]:+T.seconds;l("hours",Y),l("minutes",Q),n.enableSeconds&&l("seconds",H)}},w=(T,I)=>{const Y={hours:Array.isArray(e.hours)?e.hours[T]:e.hours,disabledArr:[]};return(I||I===0)&&(Y.hours=I),Array.isArray(n.disabledTimes)&&(Y.disabledArr=s.value.enabled&&Array.isArray(n.disabledTimes[T])?n.disabledTimes[T]:n.disabledTimes),Y},k=He(()=>(T,I)=>{var Y;if(Array.isArray(n.disabledTimes)){const{disabledArr:Q,hours:H}=w(T,I),j=Q.filter(U=>+U.hours===H);return((Y=j[0])==null?void 0:Y.minutes)==="*"?{hours:[H],minutes:void 0,seconds:void 0}:{hours:[],minutes:(j==null?void 0:j.map(U=>+U.minutes))??[],seconds:(j==null?void 0:j.map(U=>U.seconds?+U.seconds:void 0))??[]}}return{hours:[],minutes:[],seconds:[]}});return{setTime:l,updateHours:p,updateMinutes:f,updateSeconds:v,getSetDateTime:o,updateTimeValues:b,getSecondsValue:a,assignStartTime:x,validateTime:c,disabledTimesConfig:k}},ML=(n,e)=>{const t=()=>{n.isTextInputDate&&I()},{modelValue:r,time:s}=Gh(n,e,t),{defaultedStartTime:i,defaultedRange:a,defaultedTz:o}=Cr(n),{updateTimeValues:l,getSetDateTime:u,setTime:c,assignStartTime:h,disabledTimesConfig:p,validateTime:f}=w_(n,s,r,v);function v(){e("update-flow-step")}const b=Q=>{const{hours:H,minutes:j,seconds:U}=Q;return{hours:+H,minutes:+j,seconds:U?+U:0}},x=()=>{if(n.startTime){if(Array.isArray(n.startTime)){const H=b(n.startTime[0]),j=b(n.startTime[1]);return[lr(Ke(),H),lr(Ke(),j)]}const Q=b(n.startTime);return lr(Ke(),Q)}return a.value.enabled?[null,null]:null},w=()=>{if(a.value.enabled){const[Q,H]=x();r.value=[vs(u(Q,0),o.value.timezone),vs(u(H,1),o.value.timezone)]}else r.value=vs(u(x()),o.value.timezone)},k=Q=>Array.isArray(Q)?[fl(Ke(Q[0])),fl(Ke(Q[1]))]:[fl(Q??Ke())],T=(Q,H,j)=>{c("hours",Q),c("minutes",H),c("seconds",n.enableSeconds?j:0)},I=()=>{const[Q,H]=k(r.value);return a.value.enabled?T([Q.hours,H.hours],[Q.minutes,H.minutes],[Q.seconds,H.seconds]):T(Q.hours,Q.minutes,Q.seconds)};dr(()=>{if(!n.shadow)return h(i.value),r.value?I():w()});const Y=()=>{Array.isArray(r.value)?r.value=r.value.map((Q,H)=>Q&&u(Q,H)):r.value=u(r.value),e("time-update")};return{modelValue:r,time:s,disabledTimesConfig:p,updateTime:(Q,H=!0,j=!1)=>{l(Q,H,j,Y)},validateTime:f}},EL=ln({compatConfig:{MODE:3},__name:"TimePickerSolo",props:{...Li},emits:["update:internal-model-value","time-update","am-pm-change","mount","reset-flow","update-flow-step","overlay-toggle"],setup(n,{expose:e,emit:t}){const r=t,s=n,i=wl(),a=Ms(i,"timePicker"),o=$e(null),{time:l,modelValue:u,disabledTimesConfig:c,updateTime:h,validateTime:p}=ML(s,r);return dr(()=>{s.shadow||r("mount",null)}),e({getSidebarProps:()=>({modelValue:u,time:l,updateTime:h}),toggleTimePicker:(f,v=!1,b="")=>{var x;(x=o.value)==null||x.toggleTimePicker(f,v,b)}}),(f,v)=>(_e(),xt(jp,{"multi-calendars":0,stretch:"","is-mobile":f.isMobile},{default:mt(()=>[ot(b_,nn({ref_key:"tpRef",ref:o},f.$props,{hours:ue(l).hours,minutes:ue(l).minutes,seconds:ue(l).seconds,"internal-model-value":f.internalModelValue,"disabled-times-config":ue(c),"validate-time":ue(p),"onUpdate:hours":v[0]||(v[0]=b=>ue(h)(b)),"onUpdate:minutes":v[1]||(v[1]=b=>ue(h)(b,!1)),"onUpdate:seconds":v[2]||(v[2]=b=>ue(h)(b,!1,!0)),onAmPmChange:v[3]||(v[3]=b=>f.$emit("am-pm-change",b)),onResetFlow:v[4]||(v[4]=b=>f.$emit("reset-flow")),onOverlayClosed:v[5]||(v[5]=b=>f.$emit("overlay-toggle",{open:!1,overlay:b})),onOverlayOpened:v[6]||(v[6]=b=>f.$emit("overlay-toggle",{open:!0,overlay:b}))}),qn({_:2},[nr(ue(a),(b,x)=>({name:b,fn:mt(w=>[ct(f.$slots,b,yn(ns(w)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"])]),_:3},8,["is-mobile"]))}}),NL={class:"dp--header-wrap"},jL={key:0,class:"dp__month_year_wrap"},RL={key:0},FL={class:"dp__month_year_wrap"},IL=["data-dp-element","aria-label","data-test-id","onClick","onKeydown"],BL=ln({compatConfig:{MODE:3},__name:"DpHeader",props:{month:{type:Number,default:0},year:{type:Number,default:0},instance:{type:Number,default:0},years:{type:Array,default:()=>[]},months:{type:Array,default:()=>[]},...Li},emits:["update-month-year","mount","reset-flow","overlay-closed","overlay-opened"],setup(n,{expose:e,emit:t}){const r=t,s=n,{defaultedTransitions:i,defaultedAriaLabels:a,defaultedMultiCalendars:o,defaultedFilters:l,defaultedConfig:u,defaultedHighlight:c,propDates:h,defaultedUI:p}=Cr(s),{transitionName:f,showTransition:v}=Wh(i),{buildMatrix:b}=No(),{handleMonthYearChange:x,isDisabled:w,updateMonthYear:k}=iL(s,r),{showLeftIcon:T,showRightIcon:I}=Fp(),Y=$e(!1),Q=$e(!1),H=$e(!1),j=$e([null,null,null,null]);dr(()=>{r("mount")});const U=A=>({get:()=>s[A],set:F=>{const G=A===fi.month?fi.year:fi.month;r("update-month-year",{[A]:F,[G]:s[G]}),A===fi.month?ae(!0):ne(!0)}}),K=He(U(fi.month)),D=He(U(fi.year)),O=He(()=>A=>({month:s.month,year:s.year,items:A===fi.month?s.months:s.years,instance:s.instance,updateMonthYear:k,toggle:A===fi.month?ae:ne})),J=He(()=>s.months.find(F=>F.value===s.month)||{text:"",value:0}),M=He(()=>Kc(s.months,A=>{const F=s.month===A.value,G=Eh(A.value,o_(s.year,h.value.minDate),l_(s.year,h.value.maxDate))||l.value.months.includes(A.value),Z=f_(c.value,A.value,s.year);return{active:F,disabled:G,highlighted:Z}})),ee=He(()=>Kc(s.years,A=>{const F=s.year===A.value,G=Eh(A.value,Jc(h.value.minDate),Jc(h.value.maxDate))||l.value.years.includes(A.value),Z=Ov(c.value,A.value);return{active:F,disabled:G,highlighted:Z}})),W=(A,F,G)=>{G!==void 0?A.value=G:A.value=!A.value,A.value?(H.value=!0,r("overlay-opened",F)):(H.value=!1,r("overlay-closed",F))},ae=(A=!1,F)=>{oe(A),W(Y,Rn.month,F)},ne=(A=!1,F)=>{oe(A),W(Q,Rn.year,F)},oe=A=>{A||r("reset-flow")},de=(A,F)=>{s.arrowNavigation&&(j.value[F]=Jr(A),b(j.value,"monthYear"))},fe=He(()=>{var A,F,G,Z,_,q;return[{type:fi.month,index:1,toggle:ae,modelValue:K.value,updateModelValue:te=>K.value=te,text:J.value.text,showSelectionGrid:Y.value,items:M.value,ariaLabel:(A=a.value)==null?void 0:A.openMonthsOverlay,overlayLabel:((G=(F=a.value).monthPicker)==null?void 0:G.call(F,!0))??void 0},{type:fi.year,index:2,toggle:ne,modelValue:D.value,updateModelValue:te=>D.value=te,text:s_(s.year,s.locale),showSelectionGrid:Q.value,items:ee.value,ariaLabel:(Z=a.value)==null?void 0:Z.openYearsOverlay,overlayLabel:((q=(_=a.value).yearPicker)==null?void 0:q.call(_,!0))??void 0}]}),P=He(()=>s.disableYearSelect?[fe.value[0]]:s.yearFirst?[...fe.value].reverse():fe.value);return e({toggleMonthPicker:ae,toggleYearPicker:ne,handleMonthYearChange:x}),(A,F)=>{var G,Z,_,q,te,Ae;return _e(),Me("div",NL,[A.$slots["month-year"]?(_e(),Me("div",jL,[ct(A.$slots,"month-year",yn(ns({month:n.month,year:n.year,months:n.months,years:n.years,updateMonthYear:ue(k),handleMonthYearChange:ue(x),instance:n.instance,isDisabled:ue(w)})))])):(_e(),Me(pt,{key:1},[A.$slots["top-extra"]?(_e(),Me("div",RL,[ct(A.$slots,"top-extra",{value:A.internalModelValue})])):Ge("",!0),Ne("div",FL,[ue(T)(ue(o),n.instance)&&!A.vertical?(_e(),xt(ph,{key:0,"aria-label":(G=ue(a))==null?void 0:G.prevMonth,disabled:ue(w)(!1),class:Ct((Z=ue(p))==null?void 0:Z.navBtnPrev),"el-name":"action-prev",onActivate:F[0]||(F[0]=ce=>ue(x)(!1,!0)),onSetRef:F[1]||(F[1]=ce=>de(ce,0))},{default:mt(()=>[A.$slots["arrow-left"]?ct(A.$slots,"arrow-left",{key:0}):Ge("",!0),A.$slots["arrow-left"]?Ge("",!0):(_e(),xt(ue(wv),{key:1}))]),_:3},8,["aria-label","disabled","class"])):Ge("",!0),Ne("div",{class:Ct(["dp__month_year_wrap",{dp__year_disable_select:A.disableYearSelect}])},[(_e(!0),Me(pt,null,nr(P.value,(ce,V)=>(_e(),Me(pt,{key:ce.type},[Ne("button",{ref_for:!0,ref:R=>de(R,V+1),type:"button","data-dp-element":`overlay-${ce.type}`,class:Ct(["dp__btn dp__month_year_select",{"dp--hidden-el":H.value}]),"aria-label":`${ce.text}-${ce.ariaLabel}`,"data-test-id":`${ce.type}-toggle-overlay-${n.instance}`,onClick:ce.toggle,onKeydown:R=>ue(ss)(R,()=>ce.toggle(),!0)},[A.$slots[ce.type]?ct(A.$slots,ce.type,{key:0,text:ce.text,value:s[ce.type]}):Ge("",!0),A.$slots[ce.type]?Ge("",!0):(_e(),Me(pt,{key:1},[or(Vt(ce.text),1)],64))],42,IL),ot(Zc,{name:ue(f)(ce.showSelectionGrid),css:ue(v)},{default:mt(()=>[ce.showSelectionGrid?(_e(),xt(Yh,{key:0,items:ce.items,"arrow-navigation":A.arrowNavigation,"hide-navigation":A.hideNavigation,"is-last":A.autoApply&&!ue(u).keepActionRow,"skip-button-ref":!1,config:A.config,type:ce.type,"header-refs":[],"esc-close":A.escClose,"menu-wrap-ref":A.menuWrapRef,"text-input":A.textInput,"aria-labels":A.ariaLabels,"overlay-label":ce.overlayLabel,onSelected:ce.updateModelValue,onToggle:ce.toggle},qn({"button-icon":mt(()=>[A.$slots["calendar-icon"]?ct(A.$slots,"calendar-icon",{key:0}):Ge("",!0),A.$slots["calendar-icon"]?Ge("",!0):(_e(),xt(ue(tu),{key:1}))]),_:2},[A.$slots[`${ce.type}-overlay-value`]?{name:"item",fn:mt(({item:R})=>[ct(A.$slots,`${ce.type}-overlay-value`,{text:R.text,value:R.value})]),key:"0"}:void 0,A.$slots[`${ce.type}-overlay`]?{name:"overlay",fn:mt(()=>[ct(A.$slots,`${ce.type}-overlay`,nn({ref_for:!0},O.value(ce.type)))]),key:"1"}:void 0,A.$slots[`${ce.type}-overlay-header`]?{name:"header",fn:mt(()=>[ct(A.$slots,`${ce.type}-overlay-header`,{toggle:ce.toggle})]),key:"2"}:void 0]),1032,["items","arrow-navigation","hide-navigation","is-last","config","type","esc-close","menu-wrap-ref","text-input","aria-labels","overlay-label","onSelected","onToggle"])):Ge("",!0)]),_:2},1032,["name","css"])],64))),128))],2),ue(T)(ue(o),n.instance)&&A.vertical?(_e(),xt(ph,{key:1,"aria-label":(_=ue(a))==null?void 0:_.prevMonth,"el-name":"action-prev",disabled:ue(w)(!1),class:Ct((q=ue(p))==null?void 0:q.navBtnPrev),onActivate:F[2]||(F[2]=ce=>ue(x)(!1,!0))},{default:mt(()=>[A.$slots["arrow-up"]?ct(A.$slots,"arrow-up",{key:0}):Ge("",!0),A.$slots["arrow-up"]?Ge("",!0):(_e(),xt(ue(Sv),{key:1}))]),_:3},8,["aria-label","disabled","class"])):Ge("",!0),ue(I)(ue(o),n.instance)?(_e(),xt(ph,{key:2,ref:"rightIcon","el-name":"action-next",disabled:ue(w)(!0),"aria-label":(te=ue(a))==null?void 0:te.nextMonth,class:Ct((Ae=ue(p))==null?void 0:Ae.navBtnNext),onActivate:F[3]||(F[3]=ce=>ue(x)(!0,!0)),onSetRef:F[4]||(F[4]=ce=>de(ce,A.disableYearSelect?2:3))},{default:mt(()=>[A.$slots[A.vertical?"arrow-down":"arrow-right"]?ct(A.$slots,A.vertical?"arrow-down":"arrow-right",{key:0}):Ge("",!0),A.$slots[A.vertical?"arrow-down":"arrow-right"]?Ge("",!0):(_e(),xt(Ap(A.vertical?ue(kv):ue(_v)),{key:1}))]),_:3},8,["disabled","aria-label","class"])):Ge("",!0)])],64))])}}}),$L={class:"dp__calendar_header",role:"row"},qL={key:0,class:"dp__calendar_header_item",role:"gridcell"},UL=["aria-label"],VL={key:0,class:"dp__calendar_item dp__week_num",role:"gridcell"},zL={class:"dp__cell_inner"},HL=["id","aria-pressed","aria-disabled","aria-label","tabindex","data-test-id","onClick","onTouchend","onKeydown","onMouseenter","onMouseleave","onMousedown"],YL=ln({compatConfig:{MODE:3},__name:"DpCalendar",props:{mappedDates:{type:Array,default:()=>[]},instance:{type:Number,default:0},month:{type:Number,default:0},year:{type:Number,default:0},...Li},emits:["select-date","set-hover-date","handle-scroll","mount","handle-swipe","handle-space","tooltip-open","tooltip-close"],setup(n,{expose:e,emit:t}){const r=t,s=n,{buildMultiLevelMatrix:i}=No(),{defaultedTransitions:a,defaultedConfig:o,defaultedAriaLabels:l,defaultedMultiCalendars:u,defaultedWeekNumbers:c,defaultedMultiDates:h,defaultedUI:p}=Cr(s),f=$e(null),v=$e({bottom:"",left:"",transform:""}),b=$e([]),x=$e(null),w=$e(!0),k=$e(""),T=$e({startX:0,endX:0,startY:0,endY:0}),I=$e([]),Y=$e({left:"50%"}),Q=$e(!1),H=He(()=>s.calendar?s.calendar(s.mappedDates):s.mappedDates),j=He(()=>s.dayNames?Array.isArray(s.dayNames)?s.dayNames:s.dayNames(s.locale,+s.weekStart):CO(s.formatLocale,s.locale,+s.weekStart));dr(()=>{r("mount",{cmp:"calendar",refs:b}),o.value.noSwipe||x.value&&(x.value.addEventListener("touchstart",de,{passive:!1}),x.value.addEventListener("touchend",fe,{passive:!1}),x.value.addEventListener("touchmove",P,{passive:!1})),s.monthChangeOnScroll&&x.value&&x.value.addEventListener("wheel",G,{passive:!1})}),Ra(()=>{o.value.noSwipe||x.value&&(x.value.removeEventListener("touchstart",de),x.value.removeEventListener("touchend",fe),x.value.removeEventListener("touchmove",P)),s.monthChangeOnScroll&&x.value&&x.value.removeEventListener("wheel",G)});const U=ce=>ce?s.vertical?"vNext":"next":s.vertical?"vPrevious":"previous",K=(ce,V)=>{if(s.transitions){const R=_n(Sa(Ke(),s.month,s.year));k.value=Ir(_n(Sa(Ke(),ce,V)),R)?a.value[U(!0)]:a.value[U(!1)],w.value=!1,is(()=>{w.value=!0})}},D=He(()=>({...p.value.calendar??{}})),O=He(()=>ce=>{const V=TO(ce);return{dp__marker_dot:V.type==="dot",dp__marker_line:V.type==="line"}}),J=He(()=>ce=>Ut(ce,f.value)),M=He(()=>({dp__calendar:!0,dp__calendar_next:u.value.count>0&&s.instance!==0})),ee=He(()=>ce=>s.hideOffsetDates?ce.current:!0),W=async(ce,V)=>{const{width:R,height:re}=ce.getBoundingClientRect();f.value=V.value;let C={left:`${R/2}px`},L=-50;if(await is(),I.value[0]){const{left:he,width:pe}=I.value[0].getBoundingClientRect();he<0&&(C={left:"0"},L=0,Y.value.left=`${R/2}px`),window.innerWidth<he+pe&&(C={right:"0"},L=0,Y.value.left=`${pe-R/2}px`)}v.value={bottom:`${re}px`,...C,transform:`translateX(${L}%)`}},ae=async(ce,V,R)=>{var re,C,L;const he=Jr(b.value[V][R]);he&&((re=ce.marker)!=null&&re.customPosition&&(L=(C=ce.marker)==null?void 0:C.tooltip)!=null&&L.length?v.value=ce.marker.customPosition(he):await W(he,ce),r("tooltip-open",ce.marker))},ne=async(ce,V,R)=>{var re,C;if(Q.value&&h.value.enabled&&h.value.dragSelect)return r("select-date",ce);if(r("set-hover-date",ce),(C=(re=ce.marker)==null?void 0:re.tooltip)!=null&&C.length){if(s.hideOffsetDates&&!ce.current)return;await ae(ce,V,R)}},oe=ce=>{f.value&&(f.value=null,v.value=JSON.parse(JSON.stringify({bottom:"",left:"",transform:""})),r("tooltip-close",ce.marker))},de=ce=>{T.value.startX=ce.changedTouches[0].screenX,T.value.startY=ce.changedTouches[0].screenY},fe=ce=>{T.value.endX=ce.changedTouches[0].screenX,T.value.endY=ce.changedTouches[0].screenY,A()},P=ce=>{s.vertical&&!s.inline&&ce.preventDefault()},A=()=>{const ce=s.vertical?"Y":"X";Math.abs(T.value[`start${ce}`]-T.value[`end${ce}`])>10&&r("handle-swipe",T.value[`start${ce}`]>T.value[`end${ce}`]?"right":"left")},F=(ce,V,R)=>{ce&&(Array.isArray(b.value[V])?b.value[V][R]=ce:b.value[V]=[ce]),s.arrowNavigation&&i(b.value,"calendar")},G=ce=>{s.monthChangeOnScroll&&(ce.preventDefault(),r("handle-scroll",ce))},Z=ce=>c.value.type==="local"?vv(ce.value,{weekStartsOn:+s.weekStart}):c.value.type==="iso"?gv(ce.value):typeof c.value.type=="function"?c.value.type(ce.value):"",_=ce=>{const V=ce[0];return c.value.hideOnOffsetDates?ce.some(R=>R.current)?Z(V):"":Z(V)},q=(ce,V,R=!0)=>{!R&&MO()||(!h.value.enabled||o.value.allowPreventDefault)&&(xo(ce,o.value),r("select-date",V))},te=ce=>{xo(ce,o.value)},Ae=ce=>{h.value.enabled&&h.value.dragSelect?(Q.value=!0,r("select-date",ce)):h.value.enabled&&r("select-date",ce)};return e({triggerTransition:K}),(ce,V)=>(_e(),Me("div",{class:Ct(M.value)},[Ne("div",{ref_key:"calendarWrapRef",ref:x,class:Ct(D.value),role:"grid"},[Ne("div",$L,[ce.weekNumbers?(_e(),Me("div",qL,Vt(ce.weekNumName),1)):Ge("",!0),(_e(!0),Me(pt,null,nr(j.value,(R,re)=>{var C,L;return _e(),Me("div",{key:re,class:"dp__calendar_header_item",role:"gridcell","data-test-id":"calendar-header","aria-label":(L=(C=ue(l))==null?void 0:C.weekDay)==null?void 0:L.call(C,re)},[ce.$slots["calendar-header"]?ct(ce.$slots,"calendar-header",{key:0,day:R,index:re}):Ge("",!0),ce.$slots["calendar-header"]?Ge("",!0):(_e(),Me(pt,{key:1},[or(Vt(R),1)],64))],8,UL)}),128))]),V[2]||(V[2]=Ne("div",{class:"dp__calendar_header_separator"},null,-1)),ot(Zc,{name:k.value,css:!!ce.transitions},{default:mt(()=>[w.value?(_e(),Me("div",{key:0,class:"dp__calendar",role:"rowgroup",onMouseleave:V[1]||(V[1]=R=>Q.value=!1)},[(_e(!0),Me(pt,null,nr(H.value,(R,re)=>(_e(),Me("div",{key:re,class:"dp__calendar_row",role:"row"},[ce.weekNumbers?(_e(),Me("div",VL,[Ne("div",zL,Vt(_(R.days)),1)])):Ge("",!0),(_e(!0),Me(pt,null,nr(R.days,(C,L)=>{var he,pe,ge;return _e(),Me("div",{id:ue(b0)(C.value),ref_for:!0,ref:be=>F(be,re,L),key:L+re,role:"gridcell",class:"dp__calendar_item","aria-pressed":(C.classData.dp__active_date||C.classData.dp__range_start||C.classData.dp__range_start)??void 0,"aria-disabled":C.classData.dp__cell_disabled||void 0,"aria-label":(pe=(he=ue(l))==null?void 0:he.day)==null?void 0:pe.call(he,C),tabindex:!C.current&&ce.hideOffsetDates?void 0:0,"data-test-id":ue(b0)(C.value),onClick:Js(be=>q(be,C),["prevent"]),onTouchend:be=>q(be,C,!1),onKeydown:be=>ue(ss)(be,()=>ce.$emit("select-date",C)),onMouseenter:be=>ne(C,re,L),onMouseleave:be=>oe(C),onMousedown:be=>Ae(C),onMouseup:V[0]||(V[0]=be=>Q.value=!1)},[Ne("div",{class:Ct(["dp__cell_inner",C.classData])},[ce.$slots.day&&ee.value(C)?ct(ce.$slots,"day",{key:0,day:+C.text,date:C.value}):Ge("",!0),ce.$slots.day?Ge("",!0):(_e(),Me(pt,{key:1},[or(Vt(C.text),1)],64)),C.marker&&ee.value(C)?(_e(),Me(pt,{key:2},[ce.$slots.marker?ct(ce.$slots,"marker",{key:0,marker:C.marker,day:+C.text,date:C.value}):(_e(),Me("div",{key:1,class:Ct(O.value(C.marker)),style:$n(C.marker.color?{backgroundColor:C.marker.color}:{})},null,6))],64)):Ge("",!0),J.value(C.value)?(_e(),Me("div",{key:3,ref_for:!0,ref_key:"activeTooltip",ref:I,class:"dp__marker_tooltip",style:$n(v.value)},[(ge=C.marker)!=null&&ge.tooltip?(_e(),Me("div",{key:0,class:"dp__tooltip_content",onClick:te},[(_e(!0),Me(pt,null,nr(C.marker.tooltip,(be,xe)=>(_e(),Me("div",{key:xe,class:"dp__tooltip_text"},[ce.$slots["marker-tooltip"]?ct(ce.$slots,"marker-tooltip",{key:0,tooltip:be,day:C.value}):Ge("",!0),ce.$slots["marker-tooltip"]?Ge("",!0):(_e(),Me(pt,{key:1},[Ne("div",{class:"dp__tooltip_mark",style:$n(be.color?{backgroundColor:be.color}:{})},null,4),Ne("div",null,Vt(be.text),1)],64))]))),128)),Ne("div",{class:"dp__arrow_bottom_tp",style:$n(Y.value)},null,4)])):Ge("",!0)],4)):Ge("",!0)],2)],40,HL)}),128))]))),128))],32)):Ge("",!0)]),_:3},8,["name","css"])],2)],2))}}),wy=n=>Array.isArray(n),WL=(n,e,t,r)=>{const s=$e([]),i=$e(new Date),a=$e(),o=()=>fe(n.isTextInputDate),{modelValue:l,calendars:u,time:c,today:h}=Gh(n,e,o),{defaultedMultiCalendars:p,defaultedStartTime:f,defaultedRange:v,defaultedConfig:b,defaultedTz:x,propDates:w,defaultedMultiDates:k}=Cr(n),{validateMonthYearInRange:T,isDisabled:I,isDateRangeAllowed:Y,checkMinMaxRange:Q}=jo(n),{updateTimeValues:H,getSetDateTime:j,setTime:U,assignStartTime:K,validateTime:D,disabledTimesConfig:O}=w_(n,c,l,r),J=He(()=>Ce=>u.value[Ce]?u.value[Ce].month:0),M=He(()=>Ce=>u.value[Ce]?u.value[Ce].year:0),ee=Ce=>!b.value.keepViewOnOffsetClick||Ce?!0:!a.value,W=(Ce,Je,st,bt=!1)=>{var Ie,Qe;ee(bt)&&(u.value[Ce]||(u.value[Ce]={month:0,year:0}),u.value[Ce].month=py(Je)?(Ie=u.value[Ce])==null?void 0:Ie.month:Je,u.value[Ce].year=py(st)?(Qe=u.value[Ce])==null?void 0:Qe.year:st)},ae=()=>{n.autoApply&&e("select-date")},ne=()=>{f.value&&K(f.value)};dr(()=>{n.shadow||(l.value||(V(),ne()),fe(!0),n.focusStartDate&&n.startDate&&V())});const oe=He(()=>{var Ce;return(Ce=n.flow)!=null&&Ce.length&&!n.partialFlow?n.flowStep===n.flow.length:!0}),de=()=>{n.autoApply&&oe.value&&e("auto-apply",n.partialFlow?n.flowStep!==n.flow.length:!1)},fe=(Ce=!1)=>{if(l.value)return Array.isArray(l.value)?(s.value=l.value,q(Ce)):F(l.value,Ce);if(p.value.count&&Ce&&!n.startDate)return A(Ke(),Ce)},P=()=>Array.isArray(l.value)&&v.value.enabled?qt(l.value[0])===qt(l.value[1]??l.value[0]):!1,A=(Ce=new Date,Je=!1)=>{if((!p.value.count||!p.value.static||Je)&&W(0,qt(Ce),At(Ce)),p.value.count&&(!l.value||P()||!p.value.solo)&&(!p.value.solo||Je))for(let st=1;st<p.value.count;st++){const bt=lr(Ke(),{month:J.value(st-1),year:M.value(st-1)}),Ie=Ew(bt,{months:1});u.value[st]={month:qt(Ie),year:At(Ie)}}},F=(Ce,Je)=>{A(Ce),U("hours",Oa(Ce)),U("minutes",Co(Ce)),U("seconds",Wc(Ce)),p.value.count&&Je&&ce()},G=Ce=>{if(p.value.count){if(p.value.solo)return 0;const Je=qt(Ce[0]),st=qt(Ce[1]);return Math.abs(st-Je)<p.value.count?0:1}return 1},Z=(Ce,Je)=>{Ce[1]&&v.value.showLastInRange?A(Ce[G(Ce)],Je):A(Ce[0],Je);const st=(bt,Ie)=>[bt(Ce[0]),Ce[1]?bt(Ce[1]):c[Ie][1]];U("hours",st(Oa,"hours")),U("minutes",st(Co,"minutes")),U("seconds",st(Wc,"seconds"))},_=(Ce,Je)=>{if((v.value.enabled||n.weekPicker)&&!k.value.enabled)return Z(Ce,Je);if(k.value.enabled&&Je){const st=Ce[Ce.length-1];return F(st,Je)}},q=Ce=>{const Je=l.value;_(Je,Ce),p.value.count&&p.value.solo&&ce()},te=(Ce,Je)=>{const st=lr(Ke(),{month:J.value(Je),year:M.value(Je)}),bt=Ce<0?ki(st,1):Xc(st,1);T(qt(bt),At(bt),Ce<0,n.preventMinMaxNavigation)&&(W(Je,qt(bt),At(bt)),e("update-month-year",{instance:Je,month:qt(bt),year:At(bt)}),p.value.count&&!p.value.solo&&Ae(Je),t())},Ae=Ce=>{for(let Je=Ce-1;Je>=0;Je--){const st=Xc(lr(Ke(),{month:J.value(Je+1),year:M.value(Je+1)}),1);W(Je,qt(st),At(st))}for(let Je=Ce+1;Je<=p.value.count-1;Je++){const st=ki(lr(Ke(),{month:J.value(Je-1),year:M.value(Je-1)}),1);W(Je,qt(st),At(st))}},ce=()=>{if(Array.isArray(l.value)&&l.value.length===2){const Ce=Ke(Ke(l.value[1]?l.value[1]:ki(l.value[0],1))),[Je,st]=[qt(l.value[0]),At(l.value[0])],[bt,Ie]=[qt(l.value[1]),At(l.value[1])];(Je!==bt||Je===bt&&st!==Ie)&&p.value.solo&&W(1,qt(Ce),At(Ce))}else l.value&&!Array.isArray(l.value)&&(W(0,qt(l.value),At(l.value)),A(Ke()))},V=()=>{n.startDate&&(W(0,qt(Ke(n.startDate)),At(Ke(n.startDate))),p.value.count&&Ae(0))},R=(Ce,Je)=>{if(n.monthChangeOnScroll){const st=new Date().getTime()-i.value.getTime(),bt=Math.abs(Ce.deltaY);let Ie=500;bt>1&&(Ie=100),bt>100&&(Ie=0),st>Ie&&(i.value=new Date,te(n.monthChangeOnScroll!=="inverse"?-Ce.deltaY:Ce.deltaY,Je))}},re=(Ce,Je,st=!1)=>{n.monthChangeOnArrows&&n.vertical===st&&C(Ce,Je)},C=(Ce,Je)=>{te(Ce==="right"?-1:1,Je)},L=Ce=>{if(w.value.markers)return np(Ce.value,w.value.markers)},he=(Ce,Je)=>{switch(n.sixWeeks===!0?"append":n.sixWeeks){case"prepend":return[!0,!1];case"center":return[Ce==0,!0];case"fair":return[Ce==0||Je>Ce,!0];case"append":return[!1,!1];default:return[!1,!1]}},pe=(Ce,Je,st,bt)=>{if(n.sixWeeks&&Ce.length<6){const Ie=6-Ce.length,Qe=(Je.getDay()+7-bt)%7,We=6-(st.getDay()+7-bt)%7,[Rt,un]=he(Qe,We);for(let yr=1;yr<=Ie;yr++)if(un?!!(yr%2)==Rt:Rt){const Zr=Ce[0].days[0],os=ge(Ws(Zr.value,-7),qt(Je));Ce.unshift({days:os})}else{const Zr=Ce[Ce.length-1],os=Zr.days[Zr.days.length-1],vt=ge(Ws(os.value,1),qt(Je));Ce.push({days:vt})}}return Ce},ge=(Ce,Je)=>{const st=Ke(Ce),bt=[];for(let Ie=0;Ie<7;Ie++){const Qe=Ws(st,Ie),We=qt(Qe)!==Je;bt.push({text:n.hideOffsetDates&&We?"":Qe.getDate(),value:Qe,current:!We,classData:{}})}return bt},be=(Ce,Je)=>{const st=[],bt=new Date(Je,Ce),Ie=new Date(Je,Ce+1,0),Qe=n.weekStart,We=Pi(bt,{weekStartsOn:Qe}),Rt=un=>{const yr=ge(un,Ce);if(st.push({days:yr}),!st[st.length-1].days.some(Zr=>Ut(_n(Zr.value),_n(Ie)))){const Zr=Ws(un,7);Rt(Zr)}};return Rt(We),pe(st,bt,Ie,Qe)},xe=Ce=>{const Je=So(Ke(Ce.value),c.hours,c.minutes,qe());e("date-update",Je),k.value.enabled?Lv(Je,l,k.value.limit):l.value=Je,r(),is().then(()=>{de()})},Ee=Ce=>v.value.noDisabledRange?c_(s.value[0],Ce).some(Je=>I(Je)):!1,ie=()=>{s.value=l.value?l.value.slice():[],s.value.length===2&&!(v.value.fixedStart||v.value.fixedEnd)&&(s.value=[])},Pe=(Ce,Je)=>{const st=[Ke(Ce.value),Ws(Ke(Ce.value),+v.value.autoRange)];Y(st)?(Je&&Be(Ce.value),s.value=st):e("invalid-date",Ce.value)},Be=Ce=>{const Je=qt(Ke(Ce)),st=At(Ke(Ce));if(W(0,Je,st),p.value.count>0)for(let bt=1;bt<p.value.count;bt++){const Ie=jO(lr(Ke(Ce),{year:M.value(bt-1),month:J.value(bt-1)}));W(bt,Ie.month,Ie.year)}},Ze=Ce=>{if(Ee(Ce.value)||!Q(Ce.value,l.value,v.value.fixedStart?0:1))return e("invalid-date",Ce.value);s.value=v_(Ke(Ce.value),l,e,v)},it=(Ce,Je)=>{if(ie(),v.value.autoRange)return Pe(Ce,Je);if(v.value.fixedStart||v.value.fixedEnd)return Ze(Ce);s.value[0]?Q(Ke(Ce.value),l.value)&&!Ee(Ce.value)?Mr(Ke(Ce.value),Ke(s.value[0]))?(s.value.unshift(Ke(Ce.value)),e("range-end",s.value[0])):(s.value[1]=Ke(Ce.value),e("range-end",s.value[1])):(n.autoApply&&e("auto-apply-invalid",Ce.value),e("invalid-date",Ce.value)):(s.value[0]=Ke(Ce.value),e("range-start",s.value[0]))},qe=(Ce=!0)=>n.enableSeconds?Array.isArray(c.seconds)?Ce?c.seconds[0]:c.seconds[1]:c.seconds:0,tt=Ce=>{s.value[Ce]=So(s.value[Ce],c.hours[Ce],c.minutes[Ce],qe(Ce!==1))},ft=()=>{var Ce,Je;s.value[0]&&s.value[1]&&+((Ce=s.value)==null?void 0:Ce[0])>+((Je=s.value)==null?void 0:Je[1])&&(s.value.reverse(),e("range-start",s.value[0]),e("range-end",s.value[1]))},et=()=>{s.value.length&&(s.value[0]&&!s.value[1]?tt(0):(tt(0),tt(1),r()),ft(),l.value=s.value.slice(),Rp(s.value,e,n.autoApply,n.modelAuto))},Yt=(Ce,Je=!1)=>{if(I(Ce.value)||!Ce.current&&n.hideOffsetDates)return e("invalid-date",Ce.value);if(a.value=JSON.parse(JSON.stringify(Ce)),!v.value.enabled)return xe(Ce);wy(c.hours)&&wy(c.minutes)&&!k.value.enabled&&(it(Ce,Je),et())},Et=(Ce,Je)=>{var st;W(Ce,Je.month,Je.year,!0),p.value.count&&!p.value.solo&&Ae(Ce),e("update-month-year",{instance:Ce,month:Je.month,year:Je.year}),t(p.value.solo?Ce:void 0);const bt=(st=n.flow)!=null&&st.length?n.flow[n.flowStep]:void 0;!Je.fromNav&&(bt===Rn.month||bt===Rn.year)&&r()},cn=(Ce,Je)=>{m_({value:Ce,modelValue:l,range:v.value.enabled,timezone:Je?void 0:x.value.timezone}),ae(),n.multiCalendars&&is().then(()=>fe(!0))},Pt=()=>{const Ce=Cv(Ke(),x.value);!v.value.enabled&&!k.value.enabled?l.value=Ce:l.value&&Array.isArray(l.value)&&l.value[0]?k.value.enabled?l.value=[...l.value,Ce]:l.value=Mr(Ce,l.value[0])?[Ce,l.value[0]]:[l.value[0],Ce]:l.value=[Ce],ae()},Ft=()=>{if(Array.isArray(l.value))if(k.value.enabled){const Ce=Sn();l.value[l.value.length-1]=j(Ce)}else l.value=l.value.map((Ce,Je)=>Ce&&j(Ce,Je));else l.value=j(l.value);e("time-update")},Sn=()=>Array.isArray(l.value)&&l.value.length?l.value[l.value.length-1]:null;return{calendars:u,modelValue:l,month:J,year:M,time:c,disabledTimesConfig:O,today:h,validateTime:D,getCalendarDays:be,getMarker:L,handleScroll:R,handleSwipe:C,handleArrow:re,selectDate:Yt,updateMonthYear:Et,presetDate:cn,selectCurrentDate:Pt,updateTime:(Ce,Je=!0,st=!1)=>{H(Ce,Je,st,Ft)},assignMonthAndYear:A,setStartTime:ne}},GL={key:0},XL=ln({__name:"DatePicker",props:{...Li},emits:["tooltip-open","tooltip-close","mount","update:internal-model-value","update-flow-step","reset-flow","auto-apply","focus-menu","select-date","range-start","range-end","invalid-fixed-range","time-update","am-pm-change","time-picker-open","time-picker-close","recalculate-position","update-month-year","auto-apply-invalid","date-update","invalid-date","overlay-toggle"],setup(n,{expose:e,emit:t}){const r=t,s=n,{calendars:i,month:a,year:o,modelValue:l,time:u,disabledTimesConfig:c,today:h,validateTime:p,getCalendarDays:f,getMarker:v,handleArrow:b,handleScroll:x,handleSwipe:w,selectDate:k,updateMonthYear:T,presetDate:I,selectCurrentDate:Y,updateTime:Q,assignMonthAndYear:H,setStartTime:j}=WL(s,r,P,A),U=wl(),{setHoverDate:K,getDayClassData:D,clearHoverDate:O}=dD(l,s),{defaultedMultiCalendars:J}=Cr(s),M=$e([]),ee=$e([]),W=$e(null),ae=Ms(U,"calendar"),ne=Ms(U,"monthYear"),oe=Ms(U,"timePicker"),de=R=>{s.shadow||r("mount",R)};Un(i,()=>{s.shadow||setTimeout(()=>{r("recalculate-position")},0)},{deep:!0}),Un(J,(R,re)=>{R.count-re.count>0&&H()},{deep:!0});const fe=He(()=>R=>f(a.value(R),o.value(R)).map(re=>({...re,days:re.days.map(C=>(C.marker=v(C),C.classData=D(C),C))})));function P(R){var re;R||R===0?(re=ee.value[R])==null||re.triggerTransition(a.value(R),o.value(R)):ee.value.forEach((C,L)=>C.triggerTransition(a.value(L),o.value(L)))}function A(){r("update-flow-step")}const F=(R,re=!1)=>{k(R,re),s.spaceConfirm&&r("select-date")},G=(R,re,C=0)=>{var L;(L=M.value[C])==null||L.toggleMonthPicker(R,re)},Z=(R,re,C=0)=>{var L;(L=M.value[C])==null||L.toggleYearPicker(R,re)},_=(R,re,C)=>{var L;(L=W.value)==null||L.toggleTimePicker(R,re,C)},q=(R,re)=>{var C;if(!s.range){const L=l.value?l.value:h,he=re?new Date(re):L,pe=R?Pi(he,{weekStartsOn:1}):$w(he,{weekStartsOn:1});k({value:pe,current:qt(he)===a.value(0),text:"",classData:{}}),(C=document.getElementById(b0(pe)))==null||C.focus()}},te=R=>{var re;(re=M.value[0])==null||re.handleMonthYearChange(R,!0)},Ae=R=>{T(0,{month:a.value(0),year:o.value(0)+(R?1:-1),fromNav:!0})},ce=(R,re)=>{R===Rn.time&&r(`time-picker-${re?"open":"close"}`),r("overlay-toggle",{open:re,overlay:R})},V=R=>{r("overlay-toggle",{open:!1,overlay:R}),r("focus-menu")};return e({clearHoverDate:O,presetDate:I,selectCurrentDate:Y,toggleMonthPicker:G,toggleYearPicker:Z,toggleTimePicker:_,handleArrow:b,updateMonthYear:T,getSidebarProps:()=>({modelValue:l,month:a,year:o,time:u,updateTime:Q,updateMonthYear:T,selectDate:k,presetDate:I}),changeMonth:te,changeYear:Ae,selectWeekDate:q,setStartTime:j}),(R,re)=>(_e(),Me(pt,null,[ot(jp,{"multi-calendars":ue(J).count,collapse:R.collapse,"is-mobile":R.isMobile},{default:mt(({instance:C,index:L})=>[R.disableMonthYearSelect?Ge("",!0):(_e(),xt(BL,nn({key:0,ref:he=>{he&&(M.value[L]=he)},months:ue(t_)(R.formatLocale,R.locale,R.monthNameFormat),years:ue(Av)(R.yearRange,R.locale,R.reverseYears),month:ue(a)(C),year:ue(o)(C),instance:C},R.$props,{onMount:re[0]||(re[0]=he=>de(ue(dl).header)),onResetFlow:re[1]||(re[1]=he=>R.$emit("reset-flow")),onUpdateMonthYear:he=>ue(T)(C,he),onOverlayClosed:V,onOverlayOpened:re[2]||(re[2]=he=>R.$emit("overlay-toggle",{open:!0,overlay:he}))}),qn({_:2},[nr(ue(ne),(he,pe)=>({name:he,fn:mt(ge=>[ct(R.$slots,he,yn(ns(ge)))])}))]),1040,["months","years","month","year","instance","onUpdateMonthYear"])),ot(YL,nn({ref:he=>{he&&(ee.value[L]=he)},"mapped-dates":fe.value(C),month:ue(a)(C),year:ue(o)(C),instance:C},R.$props,{onSelectDate:he=>ue(k)(he,C!==1),onHandleSpace:he=>F(he,C!==1),onSetHoverDate:re[3]||(re[3]=he=>ue(K)(he)),onHandleScroll:he=>ue(x)(he,C),onHandleSwipe:he=>ue(w)(he,C),onMount:re[4]||(re[4]=he=>de(ue(dl).calendar)),onResetFlow:re[5]||(re[5]=he=>R.$emit("reset-flow")),onTooltipOpen:re[6]||(re[6]=he=>R.$emit("tooltip-open",he)),onTooltipClose:re[7]||(re[7]=he=>R.$emit("tooltip-close",he))}),qn({_:2},[nr(ue(ae),(he,pe)=>({name:he,fn:mt(ge=>[ct(R.$slots,he,yn(ns({...ge})))])}))]),1040,["mapped-dates","month","year","instance","onSelectDate","onHandleSpace","onHandleScroll","onHandleSwipe"])]),_:3},8,["multi-calendars","collapse","is-mobile"]),R.enableTimePicker?(_e(),Me("div",GL,[R.$slots["time-picker"]?ct(R.$slots,"time-picker",yn(nn({key:0},{time:ue(u),updateTime:ue(Q)}))):(_e(),xt(b_,nn({key:1,ref_key:"timePickerRef",ref:W},R.$props,{hours:ue(u).hours,minutes:ue(u).minutes,seconds:ue(u).seconds,"internal-model-value":R.internalModelValue,"disabled-times-config":ue(c),"validate-time":ue(p),onMount:re[8]||(re[8]=C=>de(ue(dl).timePicker)),"onUpdate:hours":re[9]||(re[9]=C=>ue(Q)(C)),"onUpdate:minutes":re[10]||(re[10]=C=>ue(Q)(C,!1)),"onUpdate:seconds":re[11]||(re[11]=C=>ue(Q)(C,!1,!0)),onResetFlow:re[12]||(re[12]=C=>R.$emit("reset-flow")),onOverlayClosed:re[13]||(re[13]=C=>ce(C,!1)),onOverlayOpened:re[14]||(re[14]=C=>ce(C,!0)),onAmPmChange:re[15]||(re[15]=C=>R.$emit("am-pm-change",C))}),qn({_:2},[nr(ue(oe),(C,L)=>({name:C,fn:mt(he=>[ct(R.$slots,C,yn(ns(he)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"]))])):Ge("",!0)],64))}}),KL=(n,e)=>{const t=$e(),{defaultedMultiCalendars:r,defaultedConfig:s,defaultedHighlight:i,defaultedRange:a,propDates:o,defaultedFilters:l,defaultedMultiDates:u}=Cr(n),{modelValue:c,year:h,month:p,calendars:f}=Gh(n,e),{isDisabled:v}=jo(n),{selectYear:b,groupedYears:x,showYearPicker:w,isDisabled:k,toggleYearPicker:T,handleYearSelect:I,handleYear:Y}=y_({modelValue:c,multiCalendars:r,range:a,highlight:i,calendars:f,propDates:o,month:p,year:h,filters:l,props:n,emit:e}),Q=(ee,W)=>[ee,W].map(ae=>Qi(ae,"MMMM",{locale:n.formatLocale})).join("-"),H=He(()=>ee=>c.value?Array.isArray(c.value)?c.value.some(W=>hy(ee,W)):hy(c.value,ee):!1),j=ee=>{if(a.value.enabled){if(Array.isArray(c.value)){const W=Ut(ee,c.value[0])||Ut(ee,c.value[1]);return Nh(c.value,t.value,ee)&&!W}return!1}return!1},U=(ee,W)=>ee.quarter===iy(W)&&ee.year===At(W),K=ee=>typeof i.value=="function"?i.value({quarter:iy(ee),year:At(ee)}):!!i.value.quarters.find(W=>U(W,ee)),D=He(()=>ee=>{const W=lr(new Date,{year:h.value(ee)});return CP({start:Mh(W),end:Bw(W)}).map(ae=>{const ne=cl(ae),oe=ay(ae),de=v(ae),fe=j(ne),P=K(ne);return{text:Q(ne,oe),value:ne,active:H.value(ne),highlighted:P,disabled:de,isBetween:fe}})}),O=ee=>{Lv(ee,c,u.value.limit),e("auto-apply",!0)},J=ee=>{c.value=Dv(c,ee,e),Rp(c.value,e,n.autoApply,n.modelAuto)},M=ee=>{c.value=ee,e("auto-apply")};return{defaultedConfig:s,defaultedMultiCalendars:r,groupedYears:x,year:h,isDisabled:k,quarters:D,showYearPicker:w,modelValue:c,setHoverDate:ee=>{t.value=ee},selectYear:b,selectQuarter:(ee,W,ae)=>{if(!ae)return f.value[W].month=qt(ay(ee)),u.value.enabled?O(ee):a.value.enabled?J(ee):M(ee)},toggleYearPicker:T,handleYearSelect:I,handleYear:Y}},JL={class:"dp--quarter-items"},QL=["data-test-id","disabled","onClick","onMouseover"],ZL=ln({compatConfig:{MODE:3},__name:"QuarterPicker",props:{...Li},emits:["update:internal-model-value","reset-flow","overlay-closed","auto-apply","range-start","range-end","overlay-toggle","update-month-year"],setup(n,{expose:e,emit:t}){const r=t,s=n,i=wl(),a=Ms(i,"yearMode"),{defaultedMultiCalendars:o,defaultedConfig:l,groupedYears:u,year:c,isDisabled:h,quarters:p,modelValue:f,showYearPicker:v,setHoverDate:b,selectQuarter:x,toggleYearPicker:w,handleYearSelect:k,handleYear:T}=KL(s,r);return e({getSidebarProps:()=>({modelValue:f,year:c,selectQuarter:x,handleYearSelect:k,handleYear:T})}),(I,Y)=>(_e(),xt(jp,{"multi-calendars":ue(o).count,collapse:I.collapse,stretch:"","is-mobile":I.isMobile},{default:mt(({instance:Q})=>[Ne("div",{class:"dp-quarter-picker-wrap",style:$n({minHeight:`${ue(l).modeHeight}px`})},[I.$slots["top-extra"]?ct(I.$slots,"top-extra",{key:0,value:I.internalModelValue}):Ge("",!0),Ne("div",null,[ot(g_,nn(I.$props,{items:ue(u)(Q),instance:Q,"show-year-picker":ue(v)[Q],year:ue(c)(Q),"is-disabled":H=>ue(h)(Q,H),onHandleYear:H=>ue(T)(Q,H),onYearSelect:H=>ue(k)(H,Q),onToggleYearPicker:H=>ue(w)(Q,H==null?void 0:H.flow,H==null?void 0:H.show)}),qn({_:2},[nr(ue(a),(H,j)=>({name:H,fn:mt(U=>[ct(I.$slots,H,yn(ns(U)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),Ne("div",JL,[(_e(!0),Me(pt,null,nr(ue(p)(Q),(H,j)=>(_e(),Me("div",{key:j},[Ne("button",{type:"button",class:Ct(["dp--qr-btn",{"dp--qr-btn-active":H.active,"dp--qr-btn-between":H.isBetween,"dp--qr-btn-disabled":H.disabled,"dp--highlighted":H.highlighted}]),"data-test-id":H.value,disabled:H.disabled,onClick:U=>ue(x)(H.value,Q,H.disabled),onMouseover:U=>ue(b)(H.value)},[I.$slots.quarter?ct(I.$slots,"quarter",{key:0,value:H.value,text:H.text}):(_e(),Me(pt,{key:1},[or(Vt(H.text),1)],64))],42,QL)]))),128))])],4)]),_:3},8,["multi-calendars","collapse","is-mobile"]))}}),__=(n,e)=>{const t=$e(0);dr(()=>{r(),window.addEventListener("resize",r,{passive:!0})}),Ra(()=>{window.removeEventListener("resize",r)});const r=()=>{t.value=window.document.documentElement.clientWidth};return{isMobile:He(()=>t.value<=n.value.mobileBreakpoint&&!e?!0:void 0)}},eD=["id","tabindex","role","aria-label"],tD={key:0,class:"dp--menu-load-container"},rD={key:1,class:"dp--menu-header"},nD=["data-dp-mobile"],sD={key:0,class:"dp__sidebar_left"},iD=["data-dp-mobile"],aD=["data-test-id","data-dp-mobile","onClick","onKeydown"],oD={key:2,class:"dp__sidebar_right"},lD={key:3,class:"dp__action_extra"},_y=ln({compatConfig:{MODE:3},__name:"DatepickerMenu",props:{...Np,shadow:{type:Boolean,default:!1},openOnTop:{type:Boolean,default:!1},internalModelValue:{type:[Date,Array],default:null},noOverlayFocus:{type:Boolean,default:!1},collapse:{type:Boolean,default:!1},getInputRect:{type:Function,default:()=>({})},isTextInputDate:{type:Boolean,default:!1}},emits:["close-picker","select-date","auto-apply","time-update","flow-step","update-month-year","invalid-select","update:internal-model-value","recalculate-position","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","auto-apply-invalid","date-update","invalid-date","overlay-toggle","menu-blur"],setup(n,{expose:e,emit:t}){const r=t,s=n,i=$e(null),a=He(()=>{const{openOnTop:ie,...Pe}=s;return{...Pe,isMobile:x.value,flowStep:J.value,menuWrapRef:i.value}}),{setMenuFocused:o,setShiftKey:l,control:u}=p_(),c=wl(),{defaultedTextInput:h,defaultedInline:p,defaultedConfig:f,defaultedUI:v,handleEventPropagation:b}=Cr(s),{isMobile:x}=__(f,s.shadow),w=$e(null),k=$e(0),T=$e(null),I=$e(!1),Y=$e(null),Q=$e(!1),H=ie=>{Q.value=!0,f.value.allowPreventDefault&&ie.preventDefault(),xo(ie,f.value,!0)};dr(()=>{if(!s.shadow){I.value=!0,j(),window.addEventListener("resize",j);const ie=Jr(i);ie&&!h.value.enabled&&!p.value.enabled&&(o(!0),de()),ie&&(ie.addEventListener("pointerdown",H),ie.addEventListener("mousedown",H))}document.addEventListener("mousedown",Ee)}),Ra(()=>{window.removeEventListener("resize",j),document.removeEventListener("mousedown",Ee);const ie=Jr(i);ie&&(ie.removeEventListener("pointerdown",H),ie.removeEventListener("mousedown",H))});const j=()=>{const ie=Jr(T);ie&&(k.value=ie.getBoundingClientRect().width)},{arrowRight:U,arrowLeft:K,arrowDown:D,arrowUp:O}=No(),{flowStep:J,updateFlowStep:M,childMount:ee,resetFlow:W,handleFlow:ae}=fD(s,r,Y),ne=He(()=>s.monthPicker?vL:s.yearPicker?bL:s.timePicker?EL:s.quarterPicker?ZL:XL),oe=He(()=>{var ie;if(f.value.arrowLeft)return f.value.arrowLeft;const Pe=(ie=i.value)==null?void 0:ie.getBoundingClientRect(),Be=s.getInputRect();return(Be==null?void 0:Be.width)<(k==null?void 0:k.value)&&(Be==null?void 0:Be.left)<=((Pe==null?void 0:Pe.left)??0)?`${(Be==null?void 0:Be.width)/2}px`:(Be==null?void 0:Be.right)>=((Pe==null?void 0:Pe.right)??0)&&(Be==null?void 0:Be.width)<(k==null?void 0:k.value)?`${(k==null?void 0:k.value)-(Be==null?void 0:Be.width)/2}px`:"50%"}),de=()=>{const ie=Jr(i);ie&&ie.focus({preventScroll:!0})},fe=He(()=>{var ie;return((ie=Y.value)==null?void 0:ie.getSidebarProps())||{}}),P=()=>{s.openOnTop&&r("recalculate-position")},A=Ms(c,"action"),F=He(()=>s.monthPicker||s.yearPicker?Ms(c,"monthYear"):s.timePicker?Ms(c,"timePicker"):Ms(c,"shared")),G=He(()=>s.openOnTop?"dp__arrow_bottom":"dp__arrow_top"),Z=He(()=>({dp__menu_disabled:s.disabled,dp__menu_readonly:s.readonly,"dp-menu-loading":s.loading})),_=He(()=>({dp__menu:!0,dp__menu_index:!p.value.enabled,dp__relative:p.value.enabled,...v.value.menu??{}})),q=ie=>{xo(ie,f.value,!0)},te=ie=>{s.escClose&&(r("close-picker"),b(ie))},Ae=ie=>{if(s.arrowNavigation){if(ie===Gn.up)return O();if(ie===Gn.down)return D();if(ie===Gn.left)return K();if(ie===Gn.right)return U()}else ie===Gn.left||ie===Gn.up?C("handleArrow",Gn.left,0,ie===Gn.up):C("handleArrow",Gn.right,0,ie===Gn.down)},ce=ie=>{l(ie.shiftKey),!s.disableMonthYearSelect&&ie.code===wr.tab&&ie.target.classList.contains("dp__menu")&&u.value.shiftKeyInMenu&&(ie.preventDefault(),xo(ie,f.value,!0),r("close-picker"))},V=()=>{de(),r("time-picker-close")},R=ie=>{var Pe,Be,Ze;(Pe=Y.value)==null||Pe.toggleTimePicker(!1,!1),(Be=Y.value)==null||Be.toggleMonthPicker(!1,!1,ie),(Ze=Y.value)==null||Ze.toggleYearPicker(!1,!1,ie)},re=(ie,Pe=0)=>{var Be,Ze,it;return ie==="month"?(Be=Y.value)==null?void 0:Be.toggleMonthPicker(!1,!0,Pe):ie==="year"?(Ze=Y.value)==null?void 0:Ze.toggleYearPicker(!1,!0,Pe):ie==="time"?(it=Y.value)==null?void 0:it.toggleTimePicker(!0,!1):R(Pe)},C=(ie,...Pe)=>{var Be,Ze;(Be=Y.value)!=null&&Be[ie]&&((Ze=Y.value)==null||Ze[ie](...Pe))},L=()=>{C("selectCurrentDate")},he=(ie,Pe)=>{C("presetDate",mS(ie),Pe)},pe=()=>{C("clearHoverDate")},ge=(ie,Pe)=>{C("updateMonthYear",ie,Pe)},be=(ie,Pe)=>{ie.preventDefault(),Ae(Pe)},xe=ie=>{var Pe,Be,Ze;if(ce(ie),ie.key===wr.home||ie.key===wr.end)return C("selectWeekDate",ie.key===wr.home,ie.target.getAttribute("id"));switch((ie.key===wr.pageUp||ie.key===wr.pageDown)&&(ie.shiftKey?(C("changeYear",ie.key===wr.pageUp),(Pe=v0(i.value,"overlay-year"))==null||Pe.focus()):(C("changeMonth",ie.key===wr.pageUp),(Be=v0(i.value,ie.key===wr.pageUp?"action-prev":"action-next"))==null||Be.focus()),ie.target.getAttribute("id")&&((Ze=i.value)==null||Ze.focus({preventScroll:!0}))),ie.key){case wr.esc:return te(ie);case wr.arrowLeft:return be(ie,Gn.left);case wr.arrowRight:return be(ie,Gn.right);case wr.arrowUp:return be(ie,Gn.up);case wr.arrowDown:return be(ie,Gn.down);default:return}},Ee=ie=>{var Pe;p.value.enabled&&!p.value.input&&!((Pe=i.value)!=null&&Pe.contains(ie.target))&&Q.value&&(Q.value=!1,r("menu-blur"))};return e({updateMonthYear:ge,switchView:re,handleFlow:ae,onValueCleared:()=>{var ie,Pe;(Pe=(ie=Y.value)==null?void 0:ie.setStartTime)==null||Pe.call(ie)}}),(ie,Pe)=>{var Be,Ze,it;return _e(),Me("div",{id:ie.uid?`dp-menu-${ie.uid}`:void 0,ref_key:"dpMenuRef",ref:i,tabindex:ue(p).enabled?void 0:"0",role:ue(p).enabled?void 0:"dialog","aria-label":(Be=ie.ariaLabels)==null?void 0:Be.menu,class:Ct(_.value),style:$n({"--dp-arrow-left":oe.value}),onMouseleave:pe,onClick:q,onKeydown:xe},[(ie.disabled||ie.readonly)&&ue(p).enabled||ie.loading?(_e(),Me("div",{key:0,class:Ct(Z.value)},[ie.loading?(_e(),Me("div",tD,Pe[19]||(Pe[19]=[Ne("span",{class:"dp--menu-loader"},null,-1)]))):Ge("",!0)],2)):Ge("",!0),ie.$slots["menu-header"]?(_e(),Me("div",rD,[ct(ie.$slots,"menu-header")])):Ge("",!0),!ue(p).enabled&&!ie.teleportCenter?(_e(),Me("div",{key:2,class:Ct(G.value)},null,2)):Ge("",!0),Ne("div",{ref_key:"innerMenuRef",ref:T,class:Ct({dp__menu_content_wrapper:((Ze=ie.presetDates)==null?void 0:Ze.length)||!!ie.$slots["left-sidebar"]||!!ie.$slots["right-sidebar"],"dp--menu-content-wrapper-collapsed":n.collapse&&(((it=ie.presetDates)==null?void 0:it.length)||!!ie.$slots["left-sidebar"]||!!ie.$slots["right-sidebar"])}),"data-dp-mobile":ue(x),style:$n({"--dp-menu-width":`${k.value}px`})},[ie.$slots["left-sidebar"]?(_e(),Me("div",sD,[ct(ie.$slots,"left-sidebar",yn(ns(fe.value)))])):Ge("",!0),ie.presetDates.length?(_e(),Me("div",{key:1,class:Ct({"dp--preset-dates-collapsed":n.collapse,"dp--preset-dates":!0}),"data-dp-mobile":ue(x)},[(_e(!0),Me(pt,null,nr(ie.presetDates,(qe,tt)=>(_e(),Me(pt,{key:tt},[qe.slot?ct(ie.$slots,qe.slot,{key:0,presetDate:he,label:qe.label,value:qe.value}):(_e(),Me("button",{key:1,type:"button",style:$n(qe.style||{}),class:Ct(["dp__btn dp--preset-range",{"dp--preset-range-collapsed":n.collapse}]),"data-test-id":qe.testId??void 0,"data-dp-mobile":ue(x),onClick:Js(ft=>he(qe.value,qe.noTz),["prevent"]),onKeydown:ft=>ue(ss)(ft,()=>he(qe.value,qe.noTz),!0)},Vt(qe.label),47,aD))],64))),128))],10,iD)):Ge("",!0),Ne("div",{ref_key:"calendarWrapperRef",ref:w,class:"dp__instance_calendar",role:"document"},[(_e(),xt(Ap(ne.value),nn({ref_key:"dynCmpRef",ref:Y},a.value,{"flow-step":ue(J),onMount:ue(ee),onUpdateFlowStep:ue(M),onResetFlow:ue(W),onFocusMenu:de,onSelectDate:Pe[0]||(Pe[0]=qe=>ie.$emit("select-date")),onDateUpdate:Pe[1]||(Pe[1]=qe=>ie.$emit("date-update",qe)),onTooltipOpen:Pe[2]||(Pe[2]=qe=>ie.$emit("tooltip-open",qe)),onTooltipClose:Pe[3]||(Pe[3]=qe=>ie.$emit("tooltip-close",qe)),onAutoApply:Pe[4]||(Pe[4]=qe=>ie.$emit("auto-apply",qe)),onRangeStart:Pe[5]||(Pe[5]=qe=>ie.$emit("range-start",qe)),onRangeEnd:Pe[6]||(Pe[6]=qe=>ie.$emit("range-end",qe)),onInvalidFixedRange:Pe[7]||(Pe[7]=qe=>ie.$emit("invalid-fixed-range",qe)),onTimeUpdate:Pe[8]||(Pe[8]=qe=>ie.$emit("time-update")),onAmPmChange:Pe[9]||(Pe[9]=qe=>ie.$emit("am-pm-change",qe)),onTimePickerOpen:Pe[10]||(Pe[10]=qe=>ie.$emit("time-picker-open",qe)),onTimePickerClose:V,onRecalculatePosition:P,onUpdateMonthYear:Pe[11]||(Pe[11]=qe=>ie.$emit("update-month-year",qe)),onAutoApplyInvalid:Pe[12]||(Pe[12]=qe=>ie.$emit("auto-apply-invalid",qe)),onInvalidDate:Pe[13]||(Pe[13]=qe=>ie.$emit("invalid-date",qe)),onOverlayToggle:Pe[14]||(Pe[14]=qe=>ie.$emit("overlay-toggle",qe)),"onUpdate:internalModelValue":Pe[15]||(Pe[15]=qe=>ie.$emit("update:internal-model-value",qe))}),qn({_:2},[nr(F.value,(qe,tt)=>({name:qe,fn:mt(ft=>[ct(ie.$slots,qe,yn(ns({...ft})))])}))]),1040,["flow-step","onMount","onUpdateFlowStep","onResetFlow"]))],512),ie.$slots["right-sidebar"]?(_e(),Me("div",oD,[ct(ie.$slots,"right-sidebar",yn(ns(fe.value)))])):Ge("",!0),ie.$slots["action-extra"]?(_e(),Me("div",lD,[ie.$slots["action-extra"]?ct(ie.$slots,"action-extra",{key:0,selectCurrentDate:L}):Ge("",!0)])):Ge("",!0)],14,nD),!ie.autoApply||ue(f).keepActionRow?(_e(),xt(lL,nn({key:3,"menu-mount":I.value},a.value,{"calendar-width":k.value,onClosePicker:Pe[16]||(Pe[16]=qe=>ie.$emit("close-picker")),onSelectDate:Pe[17]||(Pe[17]=qe=>ie.$emit("select-date")),onInvalidSelect:Pe[18]||(Pe[18]=qe=>ie.$emit("invalid-select")),onSelectNow:L}),qn({_:2},[nr(ue(A),(qe,tt)=>({name:qe,fn:mt(ft=>[ct(ie.$slots,qe,yn(ns({...ft})))])}))]),1040,["menu-mount","calendar-width"])):Ge("",!0)],46,eD)}}});var bc=(n=>(n.center="center",n.left="left",n.right="right",n))(bc||{});const cD=({menuRef:n,menuRefInner:e,inputRef:t,pickerWrapperRef:r,inline:s,emit:i,props:a,slots:o})=>{const{defaultedConfig:l}=Cr(a),u=$e({}),c=$e(!1),h=$e({top:"0",left:"0"}),p=$e(!1),f=xh(a,"teleportCenter");Un(f,()=>{h.value=JSON.parse(JSON.stringify({})),Y()});const v=W=>{if(a.teleport){const ae=W.getBoundingClientRect();return{left:ae.left+window.scrollX,top:ae.top+window.scrollY}}return{top:0,left:0}},b=(W,ae)=>{h.value.left=`${W+ae-u.value.width}px`},x=W=>{h.value.left=`${W}px`},w=(W,ae)=>{a.position===bc.left&&x(W),a.position===bc.right&&b(W,ae),a.position===bc.center&&(h.value.left=`${W+ae/2-u.value.width/2}px`)},k=W=>{const{width:ae,height:ne}=W.getBoundingClientRect(),{top:oe,left:de}=v(W);return{top:+oe,left:+de,width:ae,height:ne}},T=()=>{h.value.left="50%",h.value.top="50%",h.value.transform="translate(-50%, -50%)",h.value.position="fixed",delete h.value.opacity},I=()=>{const W=Jr(t);h.value=a.altPosition(W)},Y=(W=!0)=>{var ae;if(!s.value.enabled){if(f.value)return T();if(a.altPosition!==null)return I();if(W){const ne=a.teleport?(ae=e.value)==null?void 0:ae.$el:n.value;ne&&(u.value=ne.getBoundingClientRect()),i("recalculate-position")}return O()}},Q=({inputEl:W,left:ae,width:ne})=>{window.screen.width>768&&!c.value&&w(ae,ne),U(W)},H=W=>{const{top:ae,left:ne,height:oe,width:de}=k(W);h.value.top=`${oe+ae+ +a.offset}px`,p.value=!1,c.value||(h.value.left=`${ne+de/2-u.value.width/2}px`),Q({inputEl:W,left:ne,width:de})},j=W=>{const{top:ae,left:ne,width:oe}=k(W);h.value.top=`${ae-+a.offset-u.value.height}px`,p.value=!0,Q({inputEl:W,left:ne,width:oe})},U=W=>{if(a.autoPosition){const{left:ae,width:ne}=k(W),{left:oe,right:de}=u.value;if(!c.value){if(Math.abs(oe)!==Math.abs(de)){if(oe<=0)return c.value=!0,x(ae);if(de>=document.documentElement.clientWidth)return c.value=!0,b(ae,ne)}return w(ae,ne)}}},K=()=>{const W=Jr(t);if(W){if(a.autoPosition===pi.top)return pi.top;if(a.autoPosition===pi.bottom)return pi.bottom;const{height:ae}=u.value,{top:ne,height:oe}=W.getBoundingClientRect(),de=window.innerHeight-ne-oe,fe=ne;return ae<=de?pi.bottom:ae>de&&ae<=fe?pi.top:de>=fe?pi.bottom:pi.top}return pi.bottom},D=W=>K()===pi.bottom?H(W):j(W),O=()=>{const W=Jr(t);if(W)return a.autoPosition?D(W):H(W)},J=function(W){if(W){const ae=W.scrollHeight>W.clientHeight,ne=window.getComputedStyle(W).overflowY.indexOf("hidden")!==-1;return ae&&!ne}return!0},M=function(W){return!W||W===document.body||W.nodeType===Node.DOCUMENT_FRAGMENT_NODE?window:J(W)?W:M(W.assignedSlot&&l.value.shadowDom?W.assignedSlot.parentNode:W.parentNode)},ee=W=>{if(W)switch(a.position){case bc.left:return{left:0,transform:"translateX(0)"};case bc.right:return{left:`${W.width}px`,transform:"translateX(-100%)"};default:return{left:`${W.width/2}px`,transform:"translateX(-50%)"}}return{}};return{openOnTop:p,menuStyle:h,xCorrect:c,setMenuPosition:Y,getScrollableParent:M,shadowRender:(W,ae,ne)=>{var oe,de,fe;const P=document.createElement("div"),A=(oe=Jr(t))==null?void 0:oe.getBoundingClientRect();P.setAttribute("id","dp--temp-container");const F=(de=r.value)!=null&&de.clientWidth?r.value:document.body;F.append(P);const G=ee(A),Z=l.value.shadowDom?Object.keys(o).filter(q=>["right-sidebar","left-sidebar","top-extra","action-extra"].includes(q)):Object.keys(o),_=vl(ae,{...ne,shadow:!0,style:{opacity:0,position:"absolute",...G}},Object.fromEntries(Z.map(q=>[q,o[q]])));W!=null&&(_.appContext=W.appContext),p2(_,P),u.value=(fe=_.el)==null?void 0:fe.getBoundingClientRect(),p2(null,P),F.removeChild(P)}}},ro=[{name:"clock-icon",use:["time","calendar","shared"]},{name:"arrow-left",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-right",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-up",use:["time","calendar","month-year","shared"]},{name:"arrow-down",use:["time","calendar","month-year","shared"]},{name:"calendar-icon",use:["month-year","time","calendar","shared","year-mode"]},{name:"day",use:["calendar","shared"]},{name:"month-overlay-value",use:["calendar","month-year","shared"]},{name:"year-overlay-value",use:["calendar","month-year","shared","year-mode"]},{name:"year-overlay",use:["month-year","shared"]},{name:"month-overlay",use:["month-year","shared"]},{name:"month-overlay-header",use:["month-year","shared"]},{name:"year-overlay-header",use:["month-year","shared"]},{name:"hours-overlay-value",use:["calendar","time","shared"]},{name:"hours-overlay-header",use:["calendar","time","shared"]},{name:"minutes-overlay-value",use:["calendar","time","shared"]},{name:"minutes-overlay-header",use:["calendar","time","shared"]},{name:"seconds-overlay-value",use:["calendar","time","shared"]},{name:"seconds-overlay-header",use:["calendar","time","shared"]},{name:"hours",use:["calendar","time","shared"]},{name:"minutes",use:["calendar","time","shared"]},{name:"month",use:["calendar","month-year","shared"]},{name:"year",use:["calendar","month-year","shared","year-mode"]},{name:"action-buttons",use:["action"]},{name:"action-preview",use:["action"]},{name:"calendar-header",use:["calendar","shared"]},{name:"marker-tooltip",use:["calendar","shared"]},{name:"action-extra",use:["menu"]},{name:"time-picker-overlay",use:["calendar","time","shared"]},{name:"am-pm-button",use:["calendar","time","shared"]},{name:"left-sidebar",use:["menu"]},{name:"right-sidebar",use:["menu"]},{name:"month-year",use:["month-year","shared"]},{name:"time-picker",use:["menu","shared"]},{name:"action-row",use:["action"]},{name:"marker",use:["calendar","shared"]},{name:"quarter",use:["shared"]},{name:"top-extra",use:["shared","month-year"]},{name:"tp-inline-arrow-up",use:["shared","time"]},{name:"tp-inline-arrow-down",use:["shared","time"]},{name:"menu-header",use:["menu"]}],uD=[{name:"trigger"},{name:"input-icon"},{name:"clear-icon"},{name:"dp-input"}],hD={all:()=>ro,monthYear:()=>ro.filter(n=>n.use.includes("month-year")),input:()=>uD,timePicker:()=>ro.filter(n=>n.use.includes("time")),action:()=>ro.filter(n=>n.use.includes("action")),calendar:()=>ro.filter(n=>n.use.includes("calendar")),menu:()=>ro.filter(n=>n.use.includes("menu")),shared:()=>ro.filter(n=>n.use.includes("shared")),yearMode:()=>ro.filter(n=>n.use.includes("year-mode"))},Ms=(n,e,t)=>{const r=[];return hD[e]().forEach(s=>{n[s.name]&&r.push(s.name)}),t!=null&&t.length&&t.forEach(s=>{s.slot&&r.push(s.slot)}),r},Wh=n=>{const e=He(()=>r=>n.value?r?n.value.open:n.value.close:""),t=He(()=>r=>n.value?r?n.value.menuAppearTop:n.value.menuAppearBottom:"");return{transitionName:e,showTransition:!!n.value,menuTransition:t}},Gh=(n,e,t)=>{const{defaultedRange:r,defaultedTz:s}=Cr(n),i=Ke(vs(Ke(),s.value.timezone)),a=$e([{month:qt(i),year:At(i)}]),o=p=>{const f={hours:Oa(i),minutes:Co(i),seconds:0};return r.value.enabled?[f[p],f[p]]:f[p]},l=Na({hours:o("hours"),minutes:o("minutes"),seconds:o("seconds")});Un(r,(p,f)=>{p.enabled!==f.enabled&&(l.hours=o("hours"),l.minutes=o("minutes"),l.seconds=o("seconds"))},{deep:!0});const u=He({get:()=>n.internalModelValue,set:p=>{!n.readonly&&!n.disabled&&e("update:internal-model-value",p)}}),c=He(()=>p=>a.value[p]?a.value[p].month:0),h=He(()=>p=>a.value[p]?a.value[p].year:0);return Un(u,(p,f)=>{t&&JSON.stringify(p??{})!==JSON.stringify(f??{})&&t()},{deep:!0}),{calendars:a,time:l,modelValue:u,month:c,year:h,today:i}},dD=(n,e)=>{const{defaultedMultiCalendars:t,defaultedMultiDates:r,defaultedUI:s,defaultedHighlight:i,defaultedTz:a,propDates:o,defaultedRange:l}=Cr(e),{isDisabled:u}=jo(e),c=$e(null),h=$e(vs(new Date,a.value.timezone)),p=_=>{!_.current&&e.hideOffsetDates||(c.value=_.value)},f=()=>{c.value=null},v=_=>Array.isArray(n.value)&&l.value.enabled&&n.value[0]&&c.value?_?Ir(c.value,n.value[0]):Mr(c.value,n.value[0]):!0,b=(_,q)=>{const te=()=>n.value?q?n.value[0]||null:n.value[1]:null,Ae=n.value&&Array.isArray(n.value)?te():null;return Ut(Ke(_.value),Ae)},x=_=>{const q=Array.isArray(n.value)?n.value[0]:null;return _?!Mr(c.value??null,q):!0},w=(_,q=!0)=>(l.value.enabled||e.weekPicker)&&Array.isArray(n.value)&&n.value.length===2?e.hideOffsetDates&&!_.current?!1:Ut(Ke(_.value),n.value[q?0:1]):l.value.enabled?b(_,q)&&x(q)||Ut(_.value,Array.isArray(n.value)?n.value[0]:null)&&v(q):!1,k=(_,q)=>{if(Array.isArray(n.value)&&n.value[0]&&n.value.length===1){const te=Ut(_.value,c.value);return q?Ir(n.value[0],_.value)&&te:Mr(n.value[0],_.value)&&te}return!1},T=_=>!n.value||e.hideOffsetDates&&!_.current?!1:l.value.enabled?e.modelAuto&&Array.isArray(n.value)?Ut(_.value,n.value[0]?n.value[0]:h.value):!1:r.value.enabled&&Array.isArray(n.value)?n.value.some(q=>Ut(q,_.value)):Ut(_.value,n.value?n.value:h.value),I=_=>{if(l.value.autoRange||e.weekPicker){if(c.value){if(e.hideOffsetDates&&!_.current)return!1;const q=Ws(c.value,+l.value.autoRange),te=ba(Ke(c.value),e.weekStart);return e.weekPicker?Ut(te[1],Ke(_.value)):Ut(q,Ke(_.value))}return!1}return!1},Y=_=>{if(l.value.autoRange||e.weekPicker){if(c.value){const q=Ws(c.value,+l.value.autoRange);if(e.hideOffsetDates&&!_.current)return!1;const te=ba(Ke(c.value),e.weekStart);return e.weekPicker?Ir(_.value,te[0])&&Mr(_.value,te[1]):Ir(_.value,c.value)&&Mr(_.value,q)}return!1}return!1},Q=_=>{if(l.value.autoRange||e.weekPicker){if(c.value){if(e.hideOffsetDates&&!_.current)return!1;const q=ba(Ke(c.value),e.weekStart);return e.weekPicker?Ut(q[0],_.value):Ut(c.value,_.value)}return!1}return!1},H=_=>Nh(n.value,c.value,_.value),j=()=>e.modelAuto&&Array.isArray(e.internalModelValue)?!!e.internalModelValue[0]:!1,U=()=>e.modelAuto?r_(e.internalModelValue):!0,K=_=>{if(e.weekPicker)return!1;const q=l.value.enabled?!w(_)&&!w(_,!1):!0;return!u(_.value)&&!T(_)&&!(!_.current&&e.hideOffsetDates)&&q},D=_=>l.value.enabled?e.modelAuto?j()&&T(_):!1:T(_),O=_=>i.value?DO(_.value,o.value.highlight):!1,J=_=>{const q=u(_.value);return q&&(typeof i.value=="function"?!i.value(_.value,q):!i.value.options.highlightDisabled)},M=_=>{var q;return typeof i.value=="function"?i.value(_.value):(q=i.value.weekdays)==null?void 0:q.includes(_.value.getDay())},ee=_=>(l.value.enabled||e.weekPicker)&&(!(t.value.count>0)||_.current)&&U()&&!(!_.current&&e.hideOffsetDates)&&!T(_)?H(_):!1,W=_=>{if(Array.isArray(n.value)&&n.value.length===1){const{before:q,after:te}=vy(+l.value.maxRange,n.value[0]);return Gc(_.value,q)||yl(_.value,te)}return!1},ae=_=>{if(Array.isArray(n.value)&&n.value.length===1){const{before:q,after:te}=vy(+l.value.minRange,n.value[0]);return Nh([q,te],n.value[0],_.value)}return!1},ne=_=>l.value.enabled&&(l.value.maxRange||l.value.minRange)?l.value.maxRange&&l.value.minRange?W(_)||ae(_):l.value.maxRange?W(_):ae(_):!1,oe=_=>{const{isRangeStart:q,isRangeEnd:te}=A(_),Ae=l.value.enabled?q||te:!1;return{dp__cell_offset:!_.current,dp__pointer:!e.disabled&&!(!_.current&&e.hideOffsetDates)&&!u(_.value)&&!ne(_),dp__cell_disabled:u(_.value)||ne(_),dp__cell_highlight:!J(_)&&(O(_)||M(_))&&!D(_)&&!Ae&&!Q(_)&&!(ee(_)&&e.weekPicker)&&!te,dp__cell_highlight_active:!J(_)&&(O(_)||M(_))&&D(_),dp__today:!e.noToday&&Ut(_.value,h.value)&&_.current,"dp--past":Mr(_.value,h.value),"dp--future":Ir(_.value,h.value)}},de=_=>({dp__active_date:D(_),dp__date_hover:K(_)}),fe=_=>{if(n.value&&!Array.isArray(n.value)){const q=ba(n.value,e.weekStart);return{...G(_),dp__range_start:Ut(q[0],_.value),dp__range_end:Ut(q[1],_.value),dp__range_between_week:Ir(_.value,q[0])&&Mr(_.value,q[1])}}return{...G(_)}},P=_=>{if(n.value&&Array.isArray(n.value)){const q=ba(n.value[0],e.weekStart),te=n.value[1]?ba(n.value[1],e.weekStart):[];return{...G(_),dp__range_start:Ut(q[0],_.value)||Ut(te[0],_.value),dp__range_end:Ut(q[1],_.value)||Ut(te[1],_.value),dp__range_between_week:Ir(_.value,q[0])&&Mr(_.value,q[1])||Ir(_.value,te[0])&&Mr(_.value,te[1]),dp__range_between:Ir(_.value,q[1])&&Mr(_.value,te[0])}}return{...G(_)}},A=_=>{const q=t.value.count>0?_.current&&w(_)&&U():w(_)&&U(),te=t.value.count>0?_.current&&w(_,!1)&&U():w(_,!1)&&U();return{isRangeStart:q,isRangeEnd:te}},F=_=>{const{isRangeStart:q,isRangeEnd:te}=A(_);return{dp__range_start:q,dp__range_end:te,dp__range_between:ee(_),dp__date_hover:Ut(_.value,c.value)&&!q&&!te&&!e.weekPicker,dp__date_hover_start:k(_,!0),dp__date_hover_end:k(_,!1)}},G=_=>({...F(_),dp__cell_auto_range:Y(_),dp__cell_auto_range_start:Q(_),dp__cell_auto_range_end:I(_)}),Z=_=>l.value.enabled?l.value.autoRange?G(_):e.modelAuto?{...de(_),...F(_)}:e.weekPicker?P(_):F(_):e.weekPicker?fe(_):de(_);return{setHoverDate:p,clearHoverDate:f,getDayClassData:_=>e.hideOffsetDates&&!_.current?{}:{...oe(_),...Z(_),[e.dayClass?e.dayClass(_.value,e.internalModelValue):""]:!0,...s.value.calendarCell??{}}}},jo=n=>{const{defaultedFilters:e,defaultedRange:t,propDates:r,defaultedMultiDates:s}=Cr(n),i=M=>r.value.disabledDates?typeof r.value.disabledDates=="function"?r.value.disabledDates(Ke(M)):!!np(M,r.value.disabledDates):!1,a=M=>r.value.maxDate?n.yearPicker?At(M)>At(r.value.maxDate):Ir(M,r.value.maxDate):!1,o=M=>r.value.minDate?n.yearPicker?At(M)<At(r.value.minDate):Mr(M,r.value.minDate):!1,l=M=>{const ee=a(M),W=o(M),ae=i(M),ne=e.value.months.map(A=>+A).includes(qt(M)),oe=n.disabledWeekDays.length?n.disabledWeekDays.some(A=>+A===y6(M)):!1,de=f(M),fe=At(M),P=fe<+n.yearRange[0]||fe>+n.yearRange[1];return!(ee||W||ae||ne||P||oe||de)},u=(M,ee)=>Mr(...vo(r.value.minDate,M,ee))||Ut(...vo(r.value.minDate,M,ee)),c=(M,ee)=>Ir(...vo(r.value.maxDate,M,ee))||Ut(...vo(r.value.maxDate,M,ee)),h=(M,ee,W)=>{let ae=!1;return r.value.maxDate&&W&&c(M,ee)&&(ae=!0),r.value.minDate&&!W&&u(M,ee)&&(ae=!0),ae},p=(M,ee,W,ae)=>{let ne=!1;return ae&&(r.value.minDate||r.value.maxDate)?r.value.minDate&&r.value.maxDate?ne=h(M,ee,W):(r.value.minDate&&u(M,ee)||r.value.maxDate&&c(M,ee))&&(ne=!0):ne=!0,ne},f=M=>Array.isArray(r.value.allowedDates)&&!r.value.allowedDates.length?!0:r.value.allowedDates?!np(M,r.value.allowedDates,i_(n.monthPicker,n.yearPicker)):!1,v=M=>!l(M),b=M=>t.value.noDisabledRange?!Iw({start:M[0],end:M[1]}).some(ee=>v(ee)):!0,x=M=>{if(M){const ee=At(M);return ee>=+n.yearRange[0]&&ee<=n.yearRange[1]}return!0},w=(M,ee)=>!!(Array.isArray(M)&&M[ee]&&(t.value.maxRange||t.value.minRange)&&x(M[ee])),k=(M,ee,W=0)=>{if(w(ee,W)&&x(M)){const ae=jw(M,ee[W]),ne=c_(ee[W],M),oe=ne.length===1?0:ne.filter(fe=>v(fe)).length,de=Math.abs(ae)-(t.value.minMaxRawRange?0:oe);if(t.value.minRange&&t.value.maxRange)return de>=+t.value.minRange&&de<=+t.value.maxRange;if(t.value.minRange)return de>=+t.value.minRange;if(t.value.maxRange)return de<=+t.value.maxRange}return!0},T=()=>!n.enableTimePicker||n.monthPicker||n.yearPicker||n.ignoreTimeValidation,I=M=>Array.isArray(M)?[M[0]?gm(M[0]):null,M[1]?gm(M[1]):null]:gm(M),Y=(M,ee,W)=>M.find(ae=>+ae.hours===Oa(ee)&&ae.minutes==="*"?!0:+ae.minutes===Co(ee)&&+ae.hours===Oa(ee))&&W,Q=(M,ee,W)=>{const[ae,ne]=M,[oe,de]=ee;return!Y(ae,oe,W)&&!Y(ne,de,W)&&W},H=(M,ee)=>{const W=Array.isArray(ee)?ee:[ee];return Array.isArray(n.disabledTimes)?Array.isArray(n.disabledTimes[0])?Q(n.disabledTimes,W,M):!W.some(ae=>Y(n.disabledTimes,ae,M)):M},j=(M,ee)=>{const W=Array.isArray(ee)?[fl(ee[0]),ee[1]?fl(ee[1]):void 0]:fl(ee),ae=!n.disabledTimes(W);return M&&ae},U=(M,ee)=>n.disabledTimes?Array.isArray(n.disabledTimes)?H(ee,M):j(ee,M):ee,K=M=>{let ee=!0;if(!M||T())return!0;const W=!r.value.minDate&&!r.value.maxDate?I(M):M;return(n.maxTime||r.value.maxDate)&&(ee=my(n.maxTime,r.value.maxDate,"max",gn(W),ee)),(n.minTime||r.value.minDate)&&(ee=my(n.minTime,r.value.minDate,"min",gn(W),ee)),U(M,ee)},D=M=>{if(!n.monthPicker)return!0;let ee=!0;const W=Ke(wi(M));if(r.value.minDate&&r.value.maxDate){const ae=Ke(wi(r.value.minDate)),ne=Ke(wi(r.value.maxDate));return Ir(W,ae)&&Mr(W,ne)||Ut(W,ae)||Ut(W,ne)}if(r.value.minDate){const ae=Ke(wi(r.value.minDate));ee=Ir(W,ae)||Ut(W,ae)}if(r.value.maxDate){const ae=Ke(wi(r.value.maxDate));ee=Mr(W,ae)||Ut(W,ae)}return ee},O=He(()=>M=>!n.enableTimePicker||n.ignoreTimeValidation?!0:K(M)),J=He(()=>M=>n.monthPicker?Array.isArray(M)&&(t.value.enabled||s.value.enabled)?!M.filter(ee=>!D(ee)).length:D(M):!0);return{isDisabled:v,validateDate:l,validateMonthYearInRange:p,isDateRangeAllowed:b,checkMinMaxRange:k,isValidTime:K,isTimeValid:O,isMonthValid:J}},Fp=()=>{const n=He(()=>(r,s)=>r==null?void 0:r.includes(s)),e=He(()=>(r,s)=>r.count?r.solo?!0:s===0:!0),t=He(()=>(r,s)=>r.count?r.solo?!0:s===r.count-1:!0);return{hideNavigationButtons:n,showLeftIcon:e,showRightIcon:t}},fD=(n,e,t)=>{const r=$e(0),s=Na({[dl.timePicker]:!n.enableTimePicker||n.timePicker||n.monthPicker,[dl.calendar]:!1,[dl.header]:!1}),i=He(()=>n.monthPicker||n.timePicker),a=h=>{var p;if((p=n.flow)!=null&&p.length){if(!h&&i.value)return c();s[h]=!0,Object.keys(s).filter(f=>!s[f]).length||c()}},o=()=>{var h,p;(h=n.flow)!=null&&h.length&&r.value!==-1&&(r.value+=1,e("flow-step",r.value),c()),((p=n.flow)==null?void 0:p.length)===r.value&&is().then(()=>l())},l=()=>{r.value=-1},u=(h,p,...f)=>{var v,b;n.flow[r.value]===h&&t.value&&((b=(v=t.value)[p])==null||b.call(v,...f))},c=(h=0)=>{h&&(r.value+=h),u(Rn.month,"toggleMonthPicker",!0),u(Rn.year,"toggleYearPicker",!0),u(Rn.calendar,"toggleTimePicker",!1,!0),u(Rn.time,"toggleTimePicker",!0,!0);const p=n.flow[r.value];(p===Rn.hours||p===Rn.minutes||p===Rn.seconds)&&u(p,"toggleTimePicker",!0,!0,p)};return{childMount:a,updateFlowStep:o,resetFlow:l,handleFlow:c,flowStep:r}},pD={key:1,class:"dp__input_wrap"},gD=["id","name","inputmode","placeholder","disabled","readonly","required","value","autocomplete","aria-label","aria-disabled","aria-invalid"],mD={key:2,class:"dp--clear-btn"},vD=["aria-label"],yD=ln({compatConfig:{MODE:3},__name:"DatepickerInput",props:{isMenuOpen:{type:Boolean,default:!1},inputValue:{type:String,default:""},...Np},emits:["clear","open","update:input-value","set-input-date","close","select-date","set-empty-date","toggle","focus-prev","focus","blur","real-blur","text-input"],setup(n,{expose:e,emit:t}){const r=t,s=n,{defaultedTextInput:i,defaultedAriaLabels:a,defaultedInline:o,defaultedConfig:l,defaultedRange:u,defaultedMultiDates:c,defaultedUI:h,getDefaultPattern:p,getDefaultStartTime:f}=Cr(s),{checkMinMaxRange:v}=jo(s),b=$e(),x=$e(null),w=$e(!1),k=$e(!1),T=He(()=>({dp__pointer:!s.disabled&&!s.readonly&&!i.value.enabled,dp__disabled:s.disabled,dp__input_readonly:!i.value.enabled,dp__input:!0,dp__input_icon_pad:!s.hideInputIcon,dp__input_valid:typeof s.state=="boolean"?s.state:!1,dp__input_invalid:typeof s.state=="boolean"?!s.state:!1,dp__input_focus:w.value||s.isMenuOpen,dp__input_reg:!i.value.enabled,...h.value.input??{}})),I=()=>{r("set-input-date",null),s.clearable&&s.autoApply&&(r("set-empty-date"),b.value=null)},Y=fe=>{const P=f();return EO(fe,i.value.format??p(),P??u_({},s.enableSeconds),s.inputValue,k.value,s.formatLocale)},Q=fe=>{const{rangeSeparator:P}=i.value,[A,F]=fe.split(`${P}`);if(A){const G=Y(A.trim()),Z=F?Y(F.trim()):void 0;if(yl(G,Z))return;const _=G&&Z?[G,Z]:[G];v(Z,_,0)&&(b.value=G?_:null)}},H=()=>{k.value=!0},j=fe=>{if(u.value.enabled)Q(fe);else if(c.value.enabled){const P=fe.split(";");b.value=P.map(A=>Y(A.trim())).filter(A=>A)}else b.value=Y(fe)},U=fe=>{var P;const A=typeof fe=="string"?fe:(P=fe.target)==null?void 0:P.value;A!==""?(i.value.openMenu&&!s.isMenuOpen&&r("open"),j(A),r("set-input-date",b.value)):I(),k.value=!1,r("update:input-value",A),r("text-input",fe,b.value)},K=fe=>{i.value.enabled?(j(fe.target.value),i.value.enterSubmit&&y0(b.value)&&s.inputValue!==""?(r("set-input-date",b.value,!0),b.value=null):i.value.enterSubmit&&s.inputValue===""&&(b.value=null,r("clear"))):J(fe)},D=(fe,P)=>{i.value.enabled&&i.value.tabSubmit&&!P&&j(fe.target.value),i.value.tabSubmit&&y0(b.value)&&s.inputValue!==""?(r("set-input-date",b.value,!0,!0),b.value=null):i.value.tabSubmit&&s.inputValue===""&&(b.value=null,r("clear",!0))},O=()=>{w.value=!0,r("focus"),is().then(()=>{var fe;i.value.enabled&&i.value.selectOnFocus&&((fe=x.value)==null||fe.select())})},J=fe=>{if(xo(fe,l.value,!0),i.value.enabled&&i.value.openMenu&&!o.value.input){if(i.value.openMenu==="open"&&!s.isMenuOpen)return r("open");if(i.value.openMenu==="toggle")return r("toggle")}else i.value.enabled||r("toggle")},M=()=>{r("real-blur"),w.value=!1,(!s.isMenuOpen||o.value.enabled&&o.value.input)&&r("blur"),s.autoApply&&i.value.enabled&&b.value&&!s.isMenuOpen&&(r("set-input-date",b.value),r("select-date"),b.value=null)},ee=fe=>{xo(fe,l.value,!0),r("clear")},W=()=>{r("close")},ae=fe=>{if(fe.key==="Tab"&&D(fe),fe.key==="Enter"&&K(fe),fe.key==="Escape"&&i.value.escClose&&W(),!i.value.enabled){if(fe.code==="Tab")return;fe.preventDefault()}},ne=()=>{var fe;(fe=x.value)==null||fe.focus({preventScroll:!0})},oe=fe=>{b.value=fe},de=fe=>{fe.key===wr.tab&&D(fe,!0)};return e({focusInput:ne,setParsedDate:oe}),(fe,P)=>{var A,F,G;return _e(),Me("div",{onClick:J},[fe.$slots.trigger&&!fe.$slots["dp-input"]&&!ue(o).enabled?ct(fe.$slots,"trigger",{key:0}):Ge("",!0),!fe.$slots.trigger&&(!ue(o).enabled||ue(o).input)?(_e(),Me("div",pD,[fe.$slots["dp-input"]&&!fe.$slots.trigger&&(!ue(o).enabled||ue(o).enabled&&ue(o).input)?ct(fe.$slots,"dp-input",{key:0,value:n.inputValue,isMenuOpen:n.isMenuOpen,onInput:U,onEnter:K,onTab:D,onClear:ee,onBlur:M,onKeypress:ae,onPaste:H,onFocus:O,openMenu:()=>fe.$emit("open"),closeMenu:()=>fe.$emit("close"),toggleMenu:()=>fe.$emit("toggle")}):Ge("",!0),fe.$slots["dp-input"]?Ge("",!0):(_e(),Me("input",{key:1,id:fe.uid?`dp-input-${fe.uid}`:void 0,ref_key:"inputRef",ref:x,"data-test-id":"dp-input",name:fe.name,class:Ct(T.value),inputmode:ue(i).enabled?"text":"none",placeholder:fe.placeholder,disabled:fe.disabled,readonly:fe.readonly,required:fe.required,value:n.inputValue,autocomplete:fe.autocomplete,"aria-label":(A=ue(a))==null?void 0:A.input,"aria-disabled":fe.disabled||void 0,"aria-invalid":fe.state===!1?!0:void 0,onInput:U,onBlur:M,onFocus:O,onKeypress:ae,onKeydown:P[0]||(P[0]=Z=>ae(Z)),onPaste:H},null,42,gD)),Ne("div",{onClick:P[3]||(P[3]=Z=>r("toggle"))},[fe.$slots["input-icon"]&&!fe.hideInputIcon?(_e(),Me("span",{key:0,class:"dp__input_icon",onClick:P[1]||(P[1]=Z=>r("toggle"))},[ct(fe.$slots,"input-icon")])):Ge("",!0),!fe.$slots["input-icon"]&&!fe.hideInputIcon&&!fe.$slots["dp-input"]?(_e(),xt(ue(tu),{key:1,"aria-label":(F=ue(a))==null?void 0:F.calendarIcon,class:"dp__input_icon dp__input_icons",onClick:P[2]||(P[2]=Z=>r("toggle"))},null,8,["aria-label"])):Ge("",!0)]),fe.$slots["clear-icon"]&&(fe.alwaysClearable||n.inputValue&&fe.clearable&&!fe.disabled&&!fe.readonly)?(_e(),Me("span",mD,[ct(fe.$slots,"clear-icon",{clear:ee})])):Ge("",!0),!fe.$slots["clear-icon"]&&(fe.alwaysClearable||fe.clearable&&n.inputValue&&!fe.disabled&&!fe.readonly)?(_e(),Me("button",{key:3,"aria-label":(G=ue(a))==null?void 0:G.clearInput,class:"dp--clear-btn",type:"button",onKeydown:P[4]||(P[4]=Z=>ue(ss)(Z,()=>ee(Z),!0,de)),onClick:P[5]||(P[5]=Js(Z=>ee(Z),["prevent"]))},[ot(ue(e_),{class:"dp__input_icons","data-test-id":"clear-icon"})],40,vD)):Ge("",!0)])):Ge("",!0)])}}}),bD=typeof window<"u"?window:void 0,_m=()=>{},wD=n=>Ib()?(W3(n),!0):!1,_D=(n,e,t,r)=>{if(!n)return _m;let s=_m;const i=Un(()=>ue(n),o=>{s(),o&&(o.removeEventListener(e,t),o.addEventListener(e,t,r),s=()=>{o.removeEventListener(e,t,r),s=_m})},{immediate:!0,flush:"post"}),a=()=>{i(),s()};return wD(a),a},xD=(n,e,t,r={})=>{const{window:s=bD,event:i="pointerdown"}=r;return s?_D(s,i,a=>{const o=Jr(n),l=Jr(e);!o||!l||o===a.target||a.composedPath().includes(o)||a.composedPath().includes(l)||t(a)},{passive:!0}):void 0},SD=["data-dp-mobile"],kD=ln({compatConfig:{MODE:3},__name:"VueDatePicker",props:{...Np},emits:["update:model-value","update:model-timezone-value","text-submit","closed","cleared","open","focus","blur","internal-model-change","recalculate-position","flow-step","update-month-year","invalid-select","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","date-update","invalid-date","overlay-toggle","text-input"],setup(n,{expose:e,emit:t}){const r=t,s=n,i=wl(),a=$e(!1),o=xh(s,"modelValue"),l=xh(s,"timezone"),u=$e(null),c=$e(null),h=$e(null),p=$e(!1),f=$e(null),v=$e(!1),b=$e(!1),x=$e(!1),w=$e(!1),{setMenuFocused:k,setShiftKey:T}=p_(),{clearArrowNav:I}=No(),{validateDate:Y,isValidTime:Q}=jo(s),{defaultedTransitions:H,defaultedTextInput:j,defaultedInline:U,defaultedConfig:K,defaultedRange:D,defaultedMultiDates:O}=Cr(s),{menuTransition:J,showTransition:M}=Wh(H),{isMobile:ee}=__(K),W=iv();dr(()=>{_(s.modelValue),is().then(()=>{if(!U.value.enabled){const Ie=A(f.value);Ie==null||Ie.addEventListener("scroll",he),window==null||window.addEventListener("resize",pe)}}),U.value.enabled&&(a.value=!0),window==null||window.addEventListener("keyup",ge),window==null||window.addEventListener("keydown",be)}),Ra(()=>{if(!U.value.enabled){const Ie=A(f.value);Ie==null||Ie.removeEventListener("scroll",he),window==null||window.removeEventListener("resize",pe)}window==null||window.removeEventListener("keyup",ge),window==null||window.removeEventListener("keydown",be)});const ae=Ms(i,"all",s.presetDates),ne=Ms(i,"input");Un([o,l],()=>{_(o.value)},{deep:!0});const{openOnTop:oe,menuStyle:de,xCorrect:fe,setMenuPosition:P,getScrollableParent:A,shadowRender:F}=cD({menuRef:u,menuRefInner:c,inputRef:h,pickerWrapperRef:f,inline:U,emit:r,props:s,slots:i}),{inputValue:G,internalModelValue:Z,parseExternalModelValue:_,emitModelValue:q,formatInputValue:te,checkBeforeEmit:Ae}=sL(r,s,p),ce=He(()=>({dp__main:!0,dp__theme_dark:s.dark,dp__theme_light:!s.dark,dp__flex_display:U.value.enabled,"dp--flex-display-collapsed":x.value,dp__flex_display_with_input:U.value.input})),V=He(()=>s.dark?"dp__theme_dark":"dp__theme_light"),R=He(()=>s.teleport?{to:typeof s.teleport=="boolean"?"body":s.teleport,disabled:!s.teleport||U.value.enabled}:{}),re=He(()=>({class:"dp__outer_menu_wrap"})),C=He(()=>U.value.enabled&&(s.timePicker||s.monthPicker||s.yearPicker||s.quarterPicker)),L=()=>{var Ie,Qe;return((Qe=(Ie=h.value)==null?void 0:Ie.$el)==null?void 0:Qe.getBoundingClientRect())??{width:0,left:0,right:0}},he=()=>{a.value&&(K.value.closeOnScroll?tt():P())},pe=()=>{var Ie;a.value&&P();const Qe=((Ie=c.value)==null?void 0:Ie.$el.getBoundingClientRect().width)??0;x.value=document.body.offsetWidth<=Qe},ge=Ie=>{Ie.key==="Tab"&&!U.value.enabled&&!s.teleport&&K.value.tabOutClosesMenu&&(f.value.contains(document.activeElement)||tt()),b.value=Ie.shiftKey},be=Ie=>{b.value=Ie.shiftKey},xe=()=>{!s.disabled&&!s.readonly&&(F(W,_y,s),P(!1),a.value=!0,a.value&&r("open"),a.value||qe(),_(s.modelValue))},Ee=()=>{var Ie,Qe;G.value="",qe(),(Ie=c.value)==null||Ie.onValueCleared(),(Qe=h.value)==null||Qe.setParsedDate(null),r("update:model-value",null),r("update:model-timezone-value",null),r("cleared"),K.value.closeOnClearValue&&tt()},ie=()=>{const Ie=Z.value;return!Ie||!Array.isArray(Ie)&&Y(Ie)?!0:Array.isArray(Ie)?O.value.enabled||Ie.length===2&&Y(Ie[0])&&Y(Ie[1])?!0:D.value.partialRange&&!s.timePicker?Y(Ie[0]):!1:!1},Pe=()=>{Ae()&&ie()?(q(),tt()):r("invalid-select",Z.value)},Be=Ie=>{Ze(),q(),K.value.closeOnAutoApply&&!Ie&&tt()},Ze=()=>{h.value&&j.value.enabled&&h.value.setParsedDate(Z.value)},it=(Ie=!1)=>{s.autoApply&&Q(Z.value)&&ie()&&(D.value.enabled&&Array.isArray(Z.value)?(D.value.partialRange||Z.value.length===2)&&Be(Ie):Be(Ie))},qe=()=>{j.value.enabled||(Z.value=null)},tt=(Ie=!1)=>{var Qe,We;Ie&&Z.value&&K.value.setDateOnMenuClose&&Pe(),U.value.enabled||(a.value&&(a.value=!1,fe.value=!1,k(!1),T(!1),I(),r("closed"),G.value&&_(o.value)),qe(),r("blur"),(We=(Qe=c.value)==null?void 0:Qe.$el)==null||We.remove())},ft=(Ie,Qe,We=!1)=>{if(!Ie){Z.value=null;return}const Rt=Array.isArray(Ie)?!Ie.some(yr=>!Y(yr)):Y(Ie),un=Q(Ie);Rt&&un?(w.value=!0,Z.value=Ie,Qe?(v.value=We,Pe(),r("text-submit")):s.autoApply&&it(),is().then(()=>{w.value=!1})):r("invalid-date",Ie)},et=()=>{s.autoApply&&Q(Z.value)&&q(),Ze()},Yt=()=>a.value?tt():xe(),Et=Ie=>{Z.value=Ie},cn=()=>{j.value.enabled&&(p.value=!0,te()),r("focus")},Pt=()=>{if(j.value.enabled&&(p.value=!1,_(s.modelValue),v.value)){const Ie=LO(f.value,b.value);Ie==null||Ie.focus()}r("blur")},Ft=Ie=>{c.value&&c.value.updateMonthYear(0,{month:fy(Ie.month),year:fy(Ie.year)})},Sn=Ie=>{_(Ie??s.modelValue)},Ce=(Ie,Qe)=>{var We;(We=c.value)==null||We.switchView(Ie,Qe)},Je=(Ie,Qe)=>K.value.onClickOutside?K.value.onClickOutside(Ie,Qe):tt(!0),st=(Ie=0)=>{var Qe;(Qe=c.value)==null||Qe.handleFlow(Ie)},bt=()=>u;return xD(u,h,Ie=>Je(ie,Ie)),e({closeMenu:tt,selectDate:Pe,clearValue:Ee,openMenu:xe,onScroll:he,formatInputValue:te,updateInternalModelValue:Et,setMonthYear:Ft,parseModel:Sn,switchView:Ce,toggleMenu:Yt,handleFlow:st,getDpWrapMenuRef:bt}),(Ie,Qe)=>(_e(),Me("div",{ref_key:"pickerWrapperRef",ref:f,class:Ct(ce.value),"data-datepicker-instance":"","data-dp-mobile":ue(ee)},[ot(yD,nn({ref_key:"inputRef",ref:h,"input-value":ue(G),"onUpdate:inputValue":Qe[0]||(Qe[0]=We=>Qr(G)?G.value=We:null),"is-menu-open":a.value},Ie.$props,{onClear:Ee,onOpen:xe,onSetInputDate:ft,onSetEmptyDate:ue(q),onSelectDate:Pe,onToggle:Yt,onClose:tt,onFocus:cn,onBlur:Pt,onRealBlur:Qe[1]||(Qe[1]=We=>p.value=!1),onTextInput:Qe[2]||(Qe[2]=We=>Ie.$emit("text-input",We))}),qn({_:2},[nr(ue(ne),(We,Rt)=>({name:We,fn:mt(un=>[ct(Ie.$slots,We,yn(ns(un)))])}))]),1040,["input-value","is-menu-open","onSetEmptyDate"]),(_e(),xt(Ap(Ie.teleport?OS:"div"),yn(ns(R.value)),{default:mt(()=>[ot(Zc,{name:ue(J)(ue(oe)),css:ue(M)&&!ue(U).enabled},{default:mt(()=>[a.value?(_e(),Me("div",nn({key:0,ref_key:"dpWrapMenuRef",ref:u},re.value,{class:{"dp--menu-wrapper":!ue(U).enabled},style:ue(U).enabled?void 0:ue(de)}),[ot(_y,nn({ref_key:"dpMenuRef",ref:c},Ie.$props,{"internal-model-value":ue(Z),"onUpdate:internalModelValue":Qe[3]||(Qe[3]=We=>Qr(Z)?Z.value=We:null),class:{[V.value]:!0,"dp--menu-wrapper":Ie.teleport},"open-on-top":ue(oe),"no-overlay-focus":C.value,collapse:x.value,"get-input-rect":L,"is-text-input-date":w.value,onClosePicker:tt,onSelectDate:Pe,onAutoApply:it,onTimeUpdate:et,onFlowStep:Qe[4]||(Qe[4]=We=>Ie.$emit("flow-step",We)),onUpdateMonthYear:Qe[5]||(Qe[5]=We=>Ie.$emit("update-month-year",We)),onInvalidSelect:Qe[6]||(Qe[6]=We=>Ie.$emit("invalid-select",ue(Z))),onAutoApplyInvalid:Qe[7]||(Qe[7]=We=>Ie.$emit("invalid-select",We)),onInvalidFixedRange:Qe[8]||(Qe[8]=We=>Ie.$emit("invalid-fixed-range",We)),onRecalculatePosition:ue(P),onTooltipOpen:Qe[9]||(Qe[9]=We=>Ie.$emit("tooltip-open",We)),onTooltipClose:Qe[10]||(Qe[10]=We=>Ie.$emit("tooltip-close",We)),onTimePickerOpen:Qe[11]||(Qe[11]=We=>Ie.$emit("time-picker-open",We)),onTimePickerClose:Qe[12]||(Qe[12]=We=>Ie.$emit("time-picker-close",We)),onAmPmChange:Qe[13]||(Qe[13]=We=>Ie.$emit("am-pm-change",We)),onRangeStart:Qe[14]||(Qe[14]=We=>Ie.$emit("range-start",We)),onRangeEnd:Qe[15]||(Qe[15]=We=>Ie.$emit("range-end",We)),onDateUpdate:Qe[16]||(Qe[16]=We=>Ie.$emit("date-update",We)),onInvalidDate:Qe[17]||(Qe[17]=We=>Ie.$emit("invalid-date",We)),onOverlayToggle:Qe[18]||(Qe[18]=We=>Ie.$emit("overlay-toggle",We)),onMenuBlur:Qe[19]||(Qe[19]=We=>Ie.$emit("blur"))}),qn({_:2},[nr(ue(ae),(We,Rt)=>({name:We,fn:mt(un=>[ct(Ie.$slots,We,yn(ns({...un})))])}))]),1040,["internal-model-value","class","open-on-top","no-overlay-focus","collapse","is-text-input-date","onRecalculatePosition"])],16)):Ge("",!0)]),_:3},8,["name","css"])]),_:3},16))],10,SD))}}),Ip=(()=>{const n=kD;return n.install=e=>{e.component("Vue3DatePicker",n)},n})(),CD=Object.freeze(Object.defineProperty({__proto__:null,default:Ip},Symbol.toStringTag,{value:"Module"}));Object.entries(CD).forEach(([n,e])=>{n!=="default"&&(Ip[n]=e)});const AD=["onUpdate:modelValue"],TD=["onUpdate:modelValue"],PD={key:0,class:"image-upload"},OD={__name:"BaseAddView",props:{tableName:String,title:String,fields:Array,fieldLabels:Object},setup(n){const e=n,t=xs(),r=$e({}),s=$e(!1),i=$e(null),a={lastdate:"date",interval:"number"};e.fields.forEach(h=>{r.value[h]=a[h]==="date"?null:a[h]==="number"?1:""});const o=()=>{e.tableName==="devices"&&(s.value=!0)},l=He(()=>{if(!r.value.lastdate||!r.value.interval)return"";const h=new Date(r.value.lastdate);return h.setMonth(h.getMonth()+Number(r.value.interval)),h.toISOString().split("T")[0]}),u=async()=>{e.tableName==="devices"&&(r.value.nextdate=l.value),r.value.image_url||(r.value.image_url="https://ksyzvskmdyaopajckqra.supabase.co/storage/v1/object/public/devices-images//noimage.png");const{error:h}=await sn.from(e.tableName).insert([r.value]);if(h){console.error("Error adding item:",h);return}t.push(`/${e.tableName}`)},c=async h=>{if(!h.target.files[0])return;const f=`${i.value.name}`,{data:v,error:b}=await sn.storage.from("devices-images").upload(f,i.value);if(b){console.error("Upload error:",b.message);return}const{publicUrl:x}=sn.storage.from("devices-images").getPublicUrl(f);r.value.image_url=x};return dr(()=>{o()}),(h,p)=>(_e(),Me("div",null,[Ne("h3",null,Vt(n.title),1),Ne("form",{onSubmit:Js(u,["prevent"])},[(_e(!0),Me(pt,null,nr(n.fields,f=>(_e(),Me("div",{key:f},[Ne("label",null,Vt(n.fieldLabels[f]||f)+":",1),a[f]==="date"?(_e(),xt(ue(Ip),{key:0,class:"date-picker",modelValue:r.value[f],"onUpdate:modelValue":v=>r.value[f]=v,"value-type":"format",format:"yyyy-MM-dd"},null,8,["modelValue","onUpdate:modelValue"])):a[f]==="number"?rn((_e(),Me("input",{key:1,"onUpdate:modelValue":v=>r.value[f]=v,type:"number"},null,8,AD)),[[rs,r.value[f]]]):rn((_e(),Me("input",{key:2,"onUpdate:modelValue":v=>r.value[f]=v},null,8,TD)),[[rs,r.value[f]]])]))),128)),s.value?(_e(),Me("div",PD,[p[0]||(p[0]=Ne("label",{for:""},"Ladda upp en bild:",-1)),Ne("input",{type:"file",onChange:c,accept:"image/*"},null,32)])):Ge("",!0),ot(Qs,{label:"Lägg till",color:"green",type:"submit"})],32)]))}},Bp=xn(OD,[["__scopeId","data-v-3b618118"]]),LD={__name:"AddServicesView",setup(n){const e=["customer","address","contact","phone","email","month","desc"],t={customer:"Kund",address:"Adress",contact:"Kontakt",phone:"Telefon",email:"Mail",month:"Ska utföras i",desc:"Beskrivning/Info"};return(r,s)=>(_e(),xt(Bp,{tableName:"services",title:"Skapa ny service",fields:e,"field-labels":t}))}},DD="/assets/trashcan-DuYgmint.png",MD={class:"header"},ED=["src"],ND=["onUpdate:modelValue"],jD=["onUpdate:modelValue"],RD={__name:"BaseEditView",props:{tableName:String,title:String,fields:Array,fieldLabels:Object},setup(n){const e=n,t={lastdate:"date",interval:"number"},r=lv(),s=xs(),i=r.params.id,a=$e({}),o=async()=>{const{data:h,error:p}=await sn.from(e.tableName).select("*").eq("id",i).single();if(p){console.error("Error fetching item:",p);return}a.value=h},l=He(()=>{if(!a.value.lastdate||!a.value.interval)return"";const h=new Date(a.value.lastdate);return h.setMonth(h.getMonth()+Number(a.value.interval)),h.toISOString().split("T")[0]}),u=async()=>{e.tableName==="devices"&&(a.value.nextdate=l.value);const{error:h}=await sn.from(e.tableName).update(a.value).eq("id",i);if(h){console.error("Error updating item:",h);return}s.push(`/${e.tableName}`)},c=async()=>{if(!confirm("Är du säker på att du vill ta bort detta?"))return;const{error:p}=await sn.from(e.tableName).delete().eq("id",i);if(p){console.error("Error updating item:",p);return}s.push(`/${e.tableName}`)};return dr(()=>{o()}),(h,p)=>(_e(),Me("div",null,[Ne("div",MD,[Ne("h1",null,Vt(n.title),1),Ne("img",{src:ue(DD),alt:"",onClick:c},null,8,ED)]),Ne("form",{onSubmit:Js(u,["prevent"])},[(_e(!0),Me(pt,null,nr(n.fields,f=>(_e(),Me("div",{key:f},[Ne("label",null,Vt(n.fieldLabels[f]||f)+":",1),t[f]==="date"?(_e(),xt(ue(Ip),{key:0,class:"date-picker",modelValue:a.value[f],"onUpdate:modelValue":v=>a.value[f]=v,"value-type":"format",format:"yyyy-MM-dd"},null,8,["modelValue","onUpdate:modelValue"])):t[f]==="number"?rn((_e(),Me("input",{key:1,"onUpdate:modelValue":v=>a.value[f]=v,type:"number"},null,8,ND)),[[rs,a.value[f]]]):rn((_e(),Me("input",{key:2,"onUpdate:modelValue":v=>a.value[f]=v},null,8,jD)),[[rs,a.value[f]]])]))),128)),ot(Qs,{label:"Spara",color:"green",type:"submit"})],32)]))}},$p=xn(RD,[["__scopeId","data-v-066b8dd3"]]),FD={__name:"EditServicesView",setup(n){const e=["customer","address","contact","phone","email","month","desc"],t={customer:"Kund",address:"Adress",contact:"Kontakt",phone:"Telefon",email:"Mail",month:"Ska utföras i",desc:"Beskrivning/Info"};return(r,s)=>(_e(),xt($p,{tableName:"services",title:"Redigera service",fields:e,fieldLabels:t}))}},ID={key:0},BD=["src"],$D=["href"],qD=["href"],UD={key:2},VD={__name:"BaseDetailView",props:{tableName:String,fields:Array,fieldLabels:Object},setup(n){const e=n,t=lv(),r=$e({}),s=t.params.id,i=$e(!1),a={email:"email",address:"address"},o=async()=>{const{data:c,error:h}=await sn.from(e.tableName).select("*").eq("id",s).single();if(h){console.error("Error fetching item details:",h);return}r.value=c},l=()=>{e.tableName==="devices"&&(i.value=!0)},u=c=>c?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(c)}`:"#";return dr(()=>{o(),l()}),(c,h)=>(_e(),Me("div",null,[Ne("form",{onSubmit:h[0]||(h[0]=Js(()=>{},["prevent"]))},[i.value?(_e(),Me("div",ID,[Ne("img",{src:r.value.image_url,class:"device-image",alt:""},null,8,BD)])):Ge("",!0),(_e(!0),Me(pt,null,nr(n.fields,p=>(_e(),Me("div",{key:p,class:"field-container"},[Ne("label",null,Vt(n.fieldLabels[p]||p)+":",1),a[p]==="email"?(_e(),Me("a",{key:0,href:"mailto:"+r.value[p]},Vt(r.value[p]),9,$D)):a[p]==="address"?(_e(),Me("a",{key:1,href:u(r.value[p]),target:"_blank"},Vt(r.value[p]),9,qD)):(_e(),Me("p",UD,Vt(r.value[p]),1))]))),128))],32)]))}},qp=xn(VD,[["__scopeId","data-v-d61693dd"]]),zD={__name:"ServiceDetailsView",setup(n){const e=["customer","address","contact","phone","email","month","desc"],t={customer:"Kund",address:"Adress",contact:"Kontakt",phone:"Telefon",email:"Mail",month:"Ska utföras i",desc:"Beskrivning/Info"};return(r,s)=>(_e(),xt(qp,{tableName:"services",fields:e,fieldLabels:t}))}},HD={__name:"AddOrdersView",setup(n){const e=["ordername","customer","desc","address","contact","phone","email","ordernumber"],t={ordername:"Namn på order",customer:"Kund",desc:"Beskrivning/Info",address:"Adress",contact:"Kontakt",phone:"Telefon",email:"Mail",ordernumber:"Ordernummer"};return(r,s)=>(_e(),xt(Bp,{tableName:"orders",title:"Skapa ny arbetsorder",fields:e,"field-labels":t}))}},YD={__name:"EditOrdersView",setup(n){const e=["ordername","customer","desc","address","contact","phone","email","ordernumber"],t={ordername:"Namn på order",customer:"Kund",desc:"Beskrivning/Info",address:"Adress",contact:"Kontakt",phone:"Telefon",email:"Mail",ordernumber:"Ordernummer"};return(r,s)=>(_e(),xt($p,{tableName:"orders",title:"Redigera Arbetsorder",fields:e,"field-labels":t}))}},WD={__name:"OrdersDetailsView",setup(n){const e=["ordername","customer","desc","address","contact","phone","email","ordernumber"],t={ordername:"Namn på order",customer:"Kund",desc:"Beskrivning/Info",address:"Adress",contact:"Kontakt",phone:"Telefon",email:"Mail",ordernumber:"Ordernummer"};return(r,s)=>(_e(),xt(qp,{tableName:"orders",fields:e,"field-labels":t}))}},GD={__name:"NotAuthorizedView",setup(n){const e=xs(),t=()=>{e.go(-1)};return(r,s)=>(_e(),Me("div",null,[s[0]||(s[0]=Ne("h1",null,"Åtkomst nekad",-1)),s[1]||(s[1]=Ne("p",null,"Du har inte tillåtelse att besöka den här sidan",-1)),Ne("button",{onClick:t},"Tillbaka")]))}},XD=xn(GD,[["__scopeId","data-v-e7d10195"]]),KD={__name:"NotFoundView",setup(n){const e=xs(),t=()=>{e.go(-1)};return(r,s)=>(_e(),Me("div",null,[s[0]||(s[0]=Ne("h1",null,"Sidan finns inte",-1)),Ne("button",{onClick:t},"Tillbaka")]))}},JD=xn(KD,[["__scopeId","data-v-f6b98e16"]]),QD={__name:"ProjectsView",setup(n){const e=xs(),t=()=>{e.push("/projects/add")};return(r,s)=>(_e(),Me(pt,null,[Ne("div",null,[s[0]||(s[0]=Ne("h2",null,"Projekt",-1)),ot(Qs,{label:"Lägg till projekt",color:"green",onClick:t})]),ot(Ep,{tableName:"projects",fields:["projectname","address"]})],64))}},ZD={__name:"EditProjectsView",setup(n){const e=["projectname","address","customer","contact","phone","email","enddate","inspectiondate","desc"],t={projectname:"Projektnamn",address:"Adress",customer:"Kund",contact:"Kontakt",phone:"Telefon",email:"Mail",enddate:"Slutdatum",inspectiondate:"Besiktningsdatum",desc:"Beskrivning/Info"};return(r,s)=>(_e(),xt($p,{tableName:"projects",title:"Redigera projekt",fields:e,fieldLabels:t}))}},e8={__name:"ProjectsDetailsView",setup(n){const e=["projectname","address","customer","contact","phone","email","enddate","inspectiondate","desc"],t={projectname:"Projektnamn",address:"Adress",customer:"Kund",contact:"Kontakt",phone:"Telefon",email:"Mail",enddate:"Slutdatum",inspectiondate:"Besiktningsdatum",desc:"Beskrivning/Info"};return(r,s)=>(_e(),xt(qp,{tableName:"projects",fields:e,fieldLabels:t}))}},t8={__name:"AddProjectsView",setup(n){const e=["projectname","address","customer","contact","phone","email","enddate","inspectiondate","desc"],t={projectname:"Projektnamn",address:"Adress",customer:"Kund",contact:"Kontakt",phone:"Telefon",email:"Mail",enddate:"Slutdatum",inspectiondate:"Besiktningsdatum",desc:"Beskrivning/Info"};return(r,s)=>(_e(),xt(Bp,{tableName:"projects",title:"Skapa nytt projekt",fields:e,"field-labels":t}))}},r8={__name:"DevicesView",setup(n){const e=xs(),t=()=>{e.push("/devices/add")};return(r,s)=>(_e(),Me(pt,null,[s[0]||(s[0]=Ne("h2",null,"Mätinstrument",-1)),ot(Qs,{label:"Lägg till nytt mätinstrument",color:"green",onClick:t}),ot(Ep,{tableName:"devices",fields:["name","nextdate"]})],64))}},n8={__name:"EditDevicesView",setup(n){const e=["name","serienumber","lastdate","interval"],t={name:"Namn",serienumber:"Serienummer",lastdate:"Senaste kalibrering",interval:"Intervall"};return(r,s)=>(_e(),xt($p,{tableName:"devices",title:"Redigera mätinstrument",fields:e,fieldLabels:t}))}},s8={__name:"AddDevicesView",setup(n){const e=["name","serienumber","lastdate","interval"],t={name:"Namn",serienumber:"Serienummer",lastdate:"Senaste kalibrering",interval:"Intervall"};return(r,s)=>(_e(),xt(Bp,{tableName:"devices",title:"Skapa nytt mätinstrument",fields:e,"field-labels":t}))}},i8={},a8={class:"container"};function o8(n,e){return _e(),Me("div",a8,e[0]||(e[0]=[H5('<div class="department" data-v-f2abad0b><h3 data-v-f2abad0b><strong data-v-f2abad0b>Avdelningar</strong></h3><p data-v-f2abad0b>Service 30077</p><p data-v-f2abad0b>Entreprenad 30075</p></div><div class="divider" data-v-f2abad0b></div><div class="table-supply" data-v-f2abad0b><h3 data-v-f2abad0b><strong data-v-f2abad0b>Leverantörer</strong></h3><table id="supply" data-v-f2abad0b><th data-v-f2abad0b>Materialgrupp</th><th data-v-f2abad0b>Prio 1</th><th data-v-f2abad0b>Prio 2</th><tr data-v-f2abad0b><td data-v-f2abad0b>Material från icke avtalsleverantör</td><td data-v-f2abad0b>Ahlsell, Bevego</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Rektangulära kanaler och detaljer</td><td data-v-f2abad0b>(Crenna, Girovent), Altech (Bevego)</td><td data-v-f2abad0b>Nordiska Ventilationsprodukter, Vefast</td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Cirkulära kanaler och detaljer</td><td data-v-f2abad0b>Lindab</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Samlingslådor</td><td data-v-f2abad0b>Crenna, Bevego</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Rektangulära ljuddämpare</td><td data-v-f2abad0b>Crenna, Swegon, Altech (Bevego)</td><td data-v-f2abad0b>Bevent Rasch</td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Cirkulära ljuddämpare</td><td data-v-f2abad0b>Lindab, Swegon, Bevent Rasch</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Flexibla Ljuddämpare</td><td data-v-f2abad0b>Ahlsell, Systemair</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Brandskydd</td><td data-v-f2abad0b>Bevent Rasch, EKO Vent, Swegon, Systemair</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Spjäll Cirkulära</td><td data-v-f2abad0b>Swegon, Lindab, EKO Vent, Bevent Rasch, Systemair</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Spjäll Rektangulära</td><td data-v-f2abad0b>Swegon, Lindab, EKO Vent, Bevent Rasch, Systemair</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Luftburna rumsprodukter</td><td data-v-f2abad0b>Lindab, Swegon, Systemair</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Vattenburna rumsprodukter</td><td data-v-f2abad0b>Lindab, Swegon</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Textilsystem</td><td data-v-f2abad0b>KB Klimatbyrån</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Systemleverantör av don och styrning</td><td data-v-f2abad0b>Lindinvent, Swegon, Lindab, Systemair</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Takhuvar, Vägghuv samt Takgenomföringar</td><td data-v-f2abad0b>EKO Vent, Bevent Rasch</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Ytterväggsgaller</td><td data-v-f2abad0b>EKO Vent, Bevent Rasch</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Montagematerial, infästning och upphängning</td><td data-v-f2abad0b>Ahlsell, Lindab, Bevego, Hilti</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Spiskåpor</td><td data-v-f2abad0b>Ahlsell, Bevego, Swegon</td><td data-v-f2abad0b>LGG</td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Storkökskåpor</td><td data-v-f2abad0b>Halton, Elektro Termo (mindre kåpor), Vakant*</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Reningsystem av frånluft från storkök</td><td data-v-f2abad0b>Vakant*</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Luftbehandlingsaggregat</td><td data-v-f2abad0b>Swegon, IV Produkt, Systemair</td><td data-v-f2abad0b>Flexit, Komfovent</td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Luftbehandlingsaggregat special</td><td data-v-f2abad0b>Munters, Voltair</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Filter</td><td data-v-f2abad0b>Camfil</td><td data-v-f2abad0b>Mann + Hummel&amp;Vakant*</td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Fläktluftsvärmare/kylare</td><td data-v-f2abad0b>Eveco, Epecon, LGG</td><td data-v-f2abad0b>Altech</td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Avfuktare</td><td data-v-f2abad0b>Acetec</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Mätning, styrning reglering</td><td data-v-f2abad0b>Siemens</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Elmaterial (Inkluderat tele &amp; larm)</td><td data-v-f2abad0b>Rexel</td><td data-v-f2abad0b>Ahlsell&amp;Elektroskandia</td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Fläktar</td><td data-v-f2abad0b>Ebm-Papst, Systemair</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Specialfläktar</td><td data-v-f2abad0b>EMB-Papst, EKO Vent, Systemair</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Upphängning och infästning</td><td data-v-f2abad0b>Hilti, Rethermkruge</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Teknisk isolering</td><td data-v-f2abad0b>Bevego, Ahlsell</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Ställningar/Liftar/Bodar (Hyra)</td><td data-v-f2abad0b>Ramirent</td><td data-v-f2abad0b>Cramo</td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Verktyg (Hyra)</td><td data-v-f2abad0b>Ramirent</td><td data-v-f2abad0b>Cramo</td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Elhandverktyg</td><td data-v-f2abad0b>Hilti, Ahlsell</td><td data-v-f2abad0b></td></tr><tr data-v-f2abad0b><td data-v-f2abad0b>Handverktyg</td><td data-v-f2abad0b>Ahlsell</td><td data-v-f2abad0b></td></tr></table></div>',3)]))}const l8=xn(i8,[["render",o8],["__scopeId","data-v-f2abad0b"]]),c8={__name:"DeviceDetailsView",setup(n){const e=["name","serienumber","lastdate","nextdate","interval"],t={name:"Namn",serienumber:"Serienummer",lastdate:"Senaste kalibrering",nextdate:"Nästa kalibrering",interval:"Intervall"};return(r,s)=>(_e(),xt(qp,{tableName:"devices",fields:e,fieldLabels:t}))}},u8="/assets/skogsblomman-D9gZZjxr.png",h8={class:"container"},d8={class:"map"},f8=["src"],p8={__name:"SkogsblommanView",setup(n){return(e,t)=>(_e(),Me("div",h8,[t[1]||(t[1]=H5('<div class="adress" data-v-3c35230a><p data-v-3c35230a><strong data-v-3c35230a>Adress:</strong> Stenbrohultsvägen 107</p></div><div class="phones" data-v-3c35230a><h3 data-v-3c35230a><strong data-v-3c35230a>Kontaktuppgifter</strong></h3><p data-v-3c35230a>Ordförande -</p><p data-v-3c35230a>Annan person</p><p data-v-3c35230a>Annan person</p><p data-v-3c35230a>Annan person</p><p data-v-3c35230a>Tömning av container - <a href="tel:018 18 65 50" data-v-3c35230a>018 18 65 50</a></p></div><div class="keys" data-v-3c35230a><h3 data-v-3c35230a><strong data-v-3c35230a>Nycklar och koder</strong></h3><p data-v-3c35230a>Kök -</p><p data-v-3c35230a>Reception -</p><p data-v-3c35230a>Huvudnyckel till lägenheter finns i köket (deras kontor)</p></div><div class="schema" data-v-3c35230a><h3 data-v-3c35230a><strong data-v-3c35230a>Schema</strong></h3><p data-v-3c35230a> Kolla arbetsorder varje dag (postlåda utanför kontoret och utanför receptionen) </p><br data-v-3c35230a><strong data-v-3c35230a>Måndag</strong><p data-v-3c35230a>Rotera sopkärl i soprum (5st)</p><p data-v-3c35230a></p><br data-v-3c35230a><strong data-v-3c35230a>Torsdag</strong><p data-v-3c35230a>Hjälpa köket med att ta emot två matleveranser</p><p data-v-3c35230a></p><br data-v-3c35230a><strong data-v-3c35230a>Fredag</strong><p data-v-3c35230a>Byta soppåsar i soptunnar utomhus (4st, se karta)</p><p data-v-3c35230a>Rensa filter i torktummlare i hus 3 och 5</p><p data-v-3c35230a>Fyll på handsprit i automat utanför matsalen</p></div>',4)),Ne("div",d8,[t[0]||(t[0]=Ne("h3",null,[Ne("strong",null,"Karta")],-1)),Ne("img",{src:ue(u8),alt:""},null,8,f8)])]))}},g8=xn(p8,[["__scopeId","data-v-3c35230a"]]);function we(n,e,t){return(e=function(r){var s=function(i,a){if(typeof i!="object"||!i)return i;var o=i[Symbol.toPrimitive];if(o!==void 0){var l=o.call(i,a);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(i)}(r,"string");return typeof s=="symbol"?s:s+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xy(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Se(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xy(Object(t),!0).forEach(function(r){we(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xy(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function kr(n,e){if(n==null)return{};var t,r,s=function(a,o){if(a==null)return{};var l={};for(var u in a)if({}.hasOwnProperty.call(a,u)){if(o.indexOf(u)>=0)continue;l[u]=a[u]}return l}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}function Ro(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}let Sy=class{constructor(){we(this,"browserShadowBlurConstant",1),we(this,"DPI",96),we(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),we(this,"perfLimitSizeTotal",2097152),we(this,"maxCacheSideLimit",4096),we(this,"minCacheSideLimit",256),we(this,"disableStyleCopyPaste",!1),we(this,"enableGLFiltering",!0),we(this,"textureSize",4096),we(this,"forceGLPutImageData",!1),we(this,"cachesBoundsOfCurve",!1),we(this,"fontPaths",{}),we(this,"NUM_FRACTION_DIGITS",4)}};const Xt=new class extends Sy{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=Se(Se({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new Sy,t=(n==null?void 0:n.reduce((r,s)=>(r[s]=e[s],r),{}))||e;this.configure(t)}},Ao=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[n]("fabric",...t)};let Xi=class extends Error{constructor(e,t){super("fabric: ".concat(e),t)}},m8=class extends Xi{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}},v8=class{},y8=class extends v8{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,r),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),Ao("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}};const b8={};let ky;const ea=()=>ky||(ky={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new y8,dispose(){},copyPasteData:b8}),ru=()=>ea().document,Mv=()=>ea().window,x_=()=>{var n;return Math.max((n=Xt.devicePixelRatio)!==null&&n!==void 0?n:Mv().devicePixelRatio,1)},gh=new class{constructor(){we(this,"charWidthsCache",{}),we(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:r}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const s=this.charWidthsCache[e],i="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return s[i]||(s[i]={}),s[i]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=Xt,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},w0="6.6.2";function Rf(){}const Xh=Math.PI/2,sp=2*Math.PI,Ev=Math.PI/180,as=Object.freeze([1,0,0,1,0,0]),Nv=16,no=.4477152502,It="center",Zt="left",ys="top",_0="bottom",Br="right",bs="none",jv=/\r?\n/,S_="moving",Up="scaling",k_="rotating",Rv="rotate",C_="skewing",jh="resizing",w8="modifyPoly",_8="modifyPath",ip="changed",Vp="scale",_s="scaleX",Zs="scaleY",nu="skewX",su="skewY",an="fill",ws="stroke",ap="modified",hc="json",xm="svg",ht=new class{constructor(){this[hc]=new Map,this[xm]=new Map}has(n){return this[hc].has(n)}getClass(n){const e=this[hc].get(n);if(!e)throw new Xi("No class registered for ".concat(n));return e}setClass(n,e){e?this[hc].set(e,n):(this[hc].set(n.type,n),this[hc].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[xm].get(n)}setSVGClass(n,e){this[xm].set(e??n.type.toLowerCase(),n)}},op=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var r;return t.target===n||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};let x8=class{constructor(){we(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[s,i]=r;this.on(s,i)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(s=>{let[i,a]=s;r.push(this.once(i,a))}),()=>r.forEach(s=>s())}if(t){const r=this.on(e,function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];t.call(this,...i),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],s=r.indexOf(t);s>-1&&r.splice(s,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[s,i]=r;this._removeEventListener(s,i)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const s=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(s)for(let i=0;i<s.length;i++)s[i].call(this,t||{})}};const wc=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},La=n=>{if(n===0)return 1;switch(Math.abs(n)/Xh){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},Da=n=>{if(n===0)return 0;const e=n/Xh,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};let Re=class Xn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new Xn(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new Xn(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new Xn(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new Xn(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new Xn(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new Xn(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new Xn(this.x/e.x,this.y/e.y)}scalarDivide(e){return new Xn(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new Xn(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new Xn(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new Xn(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new Xn(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fv;const r=Da(e),s=La(e),i=this.subtract(t);return new Xn(i.x*s-i.y*r,i.x*r+i.y*s).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Xn(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}};const Fv=new Re(0,0),Ff=n=>!!n&&Array.isArray(n._objects);function A_(n){class e extends n{constructor(){super(...arguments),we(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];const a=this._objects.push(...s);return s.forEach(o=>this._onObjectAdded(o)),a}insertAt(r){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return this._objects.splice(r,0,...i),i.forEach(o=>this._onObjectAdded(o)),this._objects.length}remove(){const r=this._objects,s=[];for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return a.forEach(l=>{const u=r.indexOf(l);u!==-1&&(r.splice(u,1),s.push(l),this._onObjectRemoved(l))}),s}forEachObject(r){this.getObjects().forEach((s,i,a)=>r(s,i,a))}getObjects(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return s.length===0?[...this._objects]:this._objects.filter(a=>a.isType(...s))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,s){return!!this._objects.includes(r)||!!s&&this._objects.some(i=>i instanceof e&&i.contains(r,!0))}complexity(){return this._objects.reduce((r,s)=>r+=s.complexity?s.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(wc(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(wc(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,s){if(!r)return!1;const i=this._objects.indexOf(r);if(i!==0){const a=this.findNewLowerIndex(r,i,s);return wc(this._objects,r),this._objects.splice(a,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,s){if(!r)return!1;const i=this._objects.indexOf(r);if(i!==this._objects.length-1){const a=this.findNewUpperIndex(r,i,s);return wc(this._objects,r),this._objects.splice(a,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,s){return r!==this._objects[s]&&(wc(this._objects,r),this._objects.splice(s,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,s,i){let a;if(i){a=s;for(let o=s-1;o>=0;--o)if(r.isOverlapping(this._objects[o])){a=o;break}}else a=s-1;return a}findNewUpperIndex(r,s,i){let a;if(i){a=s;for(let o=s+1;o<this._objects.length;++o)if(r.isOverlapping(this._objects[o])){a=o;break}}else a=s+1;return a}collectObjects(r){let{left:s,top:i,width:a,height:o}=r,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=[],c=new Re(s,i),h=c.add(new Re(a,o));for(let p=this._objects.length-1;p>=0;p--){const f=this._objects[p];f.selectable&&f.visible&&(l&&f.intersectsWithRect(c,h)||f.isContainedWithinRect(c,h)||l&&f.containsPoint(c)||l&&f.containsPoint(h))&&u.push(f)}return u}}return e}let T_=class extends x8{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}};function If(n){return Mv().requestAnimationFrame(n)}function S8(n){return Mv().cancelAnimationFrame(n)}let k8=0;const To=()=>k8++,Oi=()=>{const n=ru().createElement("canvas");if(!n||n.getContext===void 0)throw new Xi("Failed to create `canvas` element");return n},C8=()=>ru().createElement("img"),ei=n=>{const e=Oi();return e.width=n.width,e.height=n.height,e},P_=(n,e,t)=>n.toDataURL("image/".concat(e),t),O_=(n,e,t)=>new Promise((r,s)=>{n.toBlob(r,"image/".concat(e),t)}),Hr=n=>n*Ev,Ma=n=>n/Ev,A8=n=>n.every((e,t)=>e===as[t]),gs=(n,e,t)=>new Re(n).transform(e,t),xi=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:s}=new Re(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-s,t},Tn=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],Iv=(n,e)=>n.reduceRight((t,r)=>r&&t?Tn(r,t,e):r||t,void 0)||as.concat(),L_=n=>{let[e,t]=n;return Math.atan2(t,e)},lp=n=>{const e=L_(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),s=(n[0]*n[3]-n[2]*n[1])/r,i=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:Ma(e),scaleX:r,scaleY:s,skewX:Ma(i),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},Kh=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function iu(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Hr(n),s=La(r),i=Da(r);return[s,i,-i,s,e?e-(s*e-i*t):0,t?t-(i*e+s*t):0]}const Bv=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},D_=n=>Math.tan(Hr(n)),M_=n=>[1,0,D_(n),1,0,0],E_=n=>[1,D_(n),0,1,0,0],zp=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:s=!1,skewX:i=0,skewY:a=0}=n,o=Bv(r?-e:e,s?-t:t);return i&&(o=Tn(o,M_(i),!0)),a&&(o=Tn(o,E_(a),!0)),o},T8=n=>{const{translateX:e=0,translateY:t=0,angle:r=0}=n;let s=Kh(e,t);r&&(s=Tn(s,iu({angle:r})));const i=zp(n);return A8(i)||(s=Tn(s,i)),s},Bf=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,s){if(e&&e.aborted)return s(new m8("loadImage"));const i=C8();let a;e&&(a=function(l){i.src="",s(l)},e.addEventListener("abort",a,{once:!0}));const o=function(){i.onload=i.onerror=null,a&&(e==null||e.removeEventListener("abort",a)),r(i)};n?(i.onload=o,i.onerror=function(){a&&(e==null||e.removeEventListener("abort",a)),s(new Xi("Error loading ".concat(i.src)))},t&&(i.crossOrigin=t),i.src=n):o()})},Rh=function(n){let{signal:e,reviver:t=Rf}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,s)=>{const i=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(n.map(a=>ht.getClass(a.type).fromObject(a,{signal:e}).then(o=>(t(a,o),i.push(o),o)))).then(r).catch(a=>{i.forEach(o=>{o.dispose&&o.dispose()}),s(a)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},Hp=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const s=[];e&&e.addEventListener("abort",r,{once:!0});const i=Object.values(n).map(o=>o&&o.type&&ht.has(o.type)?Rh([o],{signal:e}).then(l=>{let[u]=l;return s.push(u),u}):o),a=Object.keys(n);Promise.all(i).then(o=>o.reduce((l,u,c)=>(l[a[c]]=u,l),{})).then(t).catch(o=>{s.forEach(l=>{l.dispose&&l.dispose()}),r(o)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},au=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},$v=(n,e)=>Object.keys(n).reduce((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t),{}),xr=(n,e)=>parseFloat(Number(n).toFixed(e)),Fh=n=>"matrix("+n.map(e=>xr(e,Xt.NUM_FRACTION_DIGITS)).join(" ")+")",Gs=n=>!!n&&n.toLive!==void 0,Cy=n=>!!n&&typeof n.toObject=="function",Ay=n=>!!n&&n.offsetX!==void 0&&"source"in n,al=n=>!!n&&"multiSelectionStacking"in n;function N_(n){const e=n&&_i(n);let t=0,r=0;if(!n||!e)return{left:t,top:r};let s=n;const i=e.documentElement,a=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(t=a.scrollLeft||i.scrollLeft||0,r=a.scrollTop||i.scrollTop||0):(t+=s.scrollLeft||0,r+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:t,top:r}}const _i=n=>n.ownerDocument||null,j_=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},R_=function(n,e,t){let{width:r,height:s}=t,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=s,i>1&&(n.setAttribute("width",(r*i).toString()),n.setAttribute("height",(s*i).toString()),e.scale(i,i))},x0=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function Ty(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=bs,n}let F_=class{constructor(e){we(this,"_originalCanvasStyle",void 0),we(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&ru().getElementById(e)||Oi();var r;if(t.hasAttribute("data-fabric"))throw new Xi("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(t)),s.setAttribute("height","".concat(r)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:s}=this.lower;R_(r,s,e,t)}setCSSDimensions(e){x0(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&_i(e),s={left:0,top:0};if(!r)return s;const i=((t=j_(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};s.left+=parseInt(i.borderLeftWidth,10)||0,s.top+=parseInt(i.borderTopWidth,10)||0,s.left+=parseInt(i.paddingLeft,10)||0,s.top+=parseInt(i.paddingTop,10)||0;let a={left:0,top:0};const o=r.documentElement;e.getBoundingClientRect!==void 0&&(a=e.getBoundingClientRect());const l=N_(e);return{left:a.left+l.left-(o.clientLeft||0)+s.left,top:a.top+l.top-(o.clientTop||0)+s.top}}(this.lower.el)}dispose(){ea().dispose(this.lower.el),delete this.lower}};const P8={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...as]};let qv=class I_ extends A_(T_){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return I_.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new F_(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const i=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),i}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(Ao("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?x_():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const s=Se({width:this.width,height:this.height},e);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,s=[...this.viewportTransform],i=gs(e,xi(s));s[0]=t,s[3]=t;const a=gs(i,s);s[4]+=r.x-a.x,s[5]+=r.y-a.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new Re(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new Re(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=If(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=xi(this.viewportTransform),s=gs({x:0,y:0},r),i=gs({x:e,y:t},r),a=s.min(i),o=s.max(i);return this.vptCoords={tl:a,tr:new Re(o.x,a.y),bl:new Re(a.x,o.y),br:o}}cancelRequestedRender(){this.nextRenderHandle&&(S8(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,s=t.length;r<s;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],s=this["".concat(t,"Image")],i=this.viewportTransform,a=this["".concat(t,"Vpt")];if(!r&&!s)return;const o=Gs(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=o?r.toLive(e):r,a&&e.transform(...i),o){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const l=r.gradientTransform||r.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=a,a&&e.transform(...i),s.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new Re(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new Re(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new Re(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new Re(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new Re(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return gs(this.getCenterPoint(),xi(this.viewportTransform))}_centerObject(e,t){e.setXY(t,It,It),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,s=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return Se(Se(Se({version:w0},au(this,t)),{},{objects:this._objects.filter(i=>!i.excludeFromExport).map(i=>this._toObject(i,e,t))},this.__serializeBgOverlay(e,t)),s?{clipPath:s}:null)}_toObject(e,t,r){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const i=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!s),i}__serializeBgOverlay(e,t){const r={},s=this.backgroundImage,i=this.overlayImage,a=this.backgroundColor,o=this.overlayColor;return Gs(a)?a.excludeFromExport||(r.background=a.toObject(t)):a&&(r.background=a),Gs(o)?o.excludeFromExport||(r.overlay=o.toObject(t)):o&&(r.overlay=o),s&&!s.excludeFromExport&&(r.backgroundImage=this._toObject(s,e,t)),i&&!i.excludeFromExport&&(r.overlayImage=this._toObject(i,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),s=t.height||"".concat(this.height),i=Xt.NUM_FRACTION_DIGITS,a=t.viewBox;let o;if(a)o='viewBox="'.concat(a.x," ").concat(a.y," ").concat(a.width," ").concat(a.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;o='viewBox="'.concat(xr(-l[4]/l[0],i)," ").concat(xr(-l[5]/l[3],i)," ").concat(xr(this.width/l[0],i)," ").concat(xr(this.height/l[3],i),'" ')}else o='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',s,'" ',o,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",w0,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(To()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Gs(t)){const r=this["".concat(e,"Vpt")],s=this.viewportTransform,i={isType:()=>!1,width:this.width/(r?s[0]:1),height:this.height/(r?s[3]:1)};return t.toSVG(i,{additionalTransform:r?Fh(s):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=Xt.fontPaths;this._objects.forEach(function i(a){e.push(a),Ff(a)&&a._objects.forEach(i)}),e.forEach(i=>{if(!(a=i)||typeof a._renderText!="function")return;var a;const{styles:o,fontFamily:l}=i;!t[l]&&r[l]&&(t[l]=!0,o&&Object.values(o).forEach(u=>{Object.values(u).forEach(c=>{let{fontFamily:h=""}=c;!t[h]&&r[h]&&(t[h]=!0)})}))});const s=Object.keys(t).map(i=>`		@font-face {
			font-family: '`.concat(i,`';
			src: url('`).concat(r[i],`');
		}
`)).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const s=this[t];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(Gs(r)){const s=r.repeat||"",i=this.width,a=this.height,o=this["".concat(t,"Vpt")]?Fh(xi(this.viewportTransform)):"";e.push('<rect transform="'.concat(o," translate(").concat(i/2,",").concat(a/2,')" x="').concat(r.offsetX-i/2,'" y="').concat(r.offsetY-a/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!Ay(r)?i:r.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!Ay(r)?a:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Xi("`json` is undefined"));const s=typeof e=="string"?JSON.parse(e):e,{objects:i=[],backgroundImage:a,background:o,overlayImage:l,overlay:u,clipPath:c}=s,h=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Rh(i,{reviver:t,signal:r}),Hp({backgroundImage:a,backgroundColor:o,overlayImage:l,overlayColor:u,clipPath:c},{signal:r})]).then(p=>{let[f,v]=p;return this.clear(),this.add(...f),this.set(s),this.set(v),this.renderOnAddRemove=h,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=ei(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,a=s*(i?this.getRetinaScaling():1);return P_(this.toCanvasElement(a,e),t,r)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,a=s*(i?this.getRetinaScaling():1);return O_(this.toCanvasElement(a,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:s,top:i,filter:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=(t||this.width)*e,l=(r||this.height)*e,u=this.getZoom(),c=this.width,h=this.height,p=this.skipControlsDrawing,f=u*e,v=this.viewportTransform,b=[f,0,0,f,(v[4]-(s||0))*e,(v[5]-(i||0))*e],x=this.enableRetinaScaling,w=ei({width:o,height:l}),k=a?this._objects.filter(T=>a(T)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=b,this.width=o,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(w.getContext("2d"),k),this.viewportTransform=v,this.width=c,this.height=h,this.calcViewportBoundaries(),this.enableRetinaScaling=x,this.skipControlsDrawing=p,w}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),op.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}};we(qv,"ownDefaults",P8);const O8=["touchstart","touchmove","touchend"],L8=n=>{const e=N_(n.target),t=function(r){const s=r.changedTouches;return s&&s[0]?s[0]:r}(n);return new Re(t.clientX+e.left,t.clientY+e.top)},S0=n=>O8.includes(n.type)||n.pointerType==="touch",Py=n=>{n.preventDefault(),n.stopPropagation()},Aa=n=>{let e=0,t=0,r=0,s=0;for(let i=0,a=n.length;i<a;i++){const{x:o,y:l}=n[i];(o>r||!i)&&(r=o),(o<e||!i)&&(e=o),(l>s||!i)&&(s=l),(l<t||!i)&&(t=l)}return{left:e,top:t,width:r-e,height:s-t}},D8=["translateX","translateY","scaleX","scaleY"],M8=(n,e)=>cp(n,Tn(e,n.calcOwnMatrix())),cp=(n,e)=>{const t=lp(e),{translateX:r,translateY:s,scaleX:i,scaleY:a}=t,o=kr(t,D8),l=new Re(r,s);n.flipX=!1,n.flipY=!1,Object.assign(n,o),n.set({scaleX:i,scaleY:a}),n.setPositionByOrigin(l,It,It)},E8=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},B_=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),Uv=(n,e,t)=>{const r=n/2,s=e/2,i=[new Re(-r,-s),new Re(r,-s),new Re(-r,s),new Re(r,s)].map(o=>o.transform(t)),a=Aa(i);return new Re(a.width,a.height)},Yp=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:as;return Tn(xi(arguments.length>1&&arguments[1]!==void 0?arguments[1]:as),n)},Rc=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:as,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:as;return n.transform(Yp(e,t))},N8=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:as,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:as;return n.transform(Yp(e,t),!0)},j8=(n,e,t)=>{const r=Yp(e,t);return cp(n,Tn(r,n.calcOwnMatrix())),r},$_=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),Se(Se({},e),{},{target:r})),r.fire(n,e)},R8={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Kr=n=>typeof n=="string"?R8[n]:n-.5,up="not-allowed";function q_(n){return Kr(n.originX)===Kr(It)&&Kr(n.originY)===Kr(It)}function Oy(n){return .5-Kr(n)}const Ci=(n,e)=>n[e],U_=(n,e,t,r)=>({e:n,transform:e,pointer:new Re(t,r)});function V_(n,e){const t=n.getTotalAngle()+Ma(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function Vv(n,e,t,r,s){var i;let{target:a,corner:o}=n;const l=a.controls[o],u=((i=a.canvas)===null||i===void 0?void 0:i.getZoom())||1,c=a.padding/u,h=function(p,f,v,b){const x=p.getRelativeCenterPoint(),w=v!==void 0&&b!==void 0?p.translateToGivenOrigin(x,It,It,v,b):new Re(p.left,p.top);return(p.angle?f.rotate(-Hr(p.angle),x):f).subtract(w)}(a,new Re(r,s),e,t);return h.x>=c&&(h.x-=c),h.x<=-c&&(h.x+=c),h.y>=c&&(h.y-=c),h.y<=c&&(h.y+=c),h.x-=l.offsetX,h.y-=l.offsetY,h}const F8=(n,e,t,r)=>{const{target:s,offsetX:i,offsetY:a}=e,o=t-i,l=r-a,u=!Ci(s,"lockMovementX")&&s.left!==o,c=!Ci(s,"lockMovementY")&&s.top!==l;return u&&s.set(Zt,o),c&&s.set(ys,l),(u||c)&&$_(S_,U_(n,e,t,r)),u||c},Ly={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Sm=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),Dy=(n,e,t,r)=>{n/=255,e/=255,t/=255;const s=Math.max(n,e,t),i=Math.min(n,e,t);let a,o;const l=(s+i)/2;if(s===i)a=o=0;else{const u=s-i;switch(o=l>.5?u/(2-s-i):u/(s+i),s){case n:a=(e-t)/u+(e<t?6:0);break;case e:a=(t-n)/u+2;break;case t:a=(n-e)/u+4}a/=6}return[Math.round(360*a),Math.round(100*o),Math.round(100*l),r]},My=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},Zd=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),Ey=n=>{let[e,t,r,s=1]=n;const i=Math.round(.3*e+.59*t+.11*r);return[i,i,i,s]};let Ns=class jn{constructor(e){if(we(this,"isUnrecognised",!1),e)if(e instanceof jn)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,s,i=1]=e;this.setSource([t,r,s,i])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Ly&&(e=Ly[e]),e==="transparent"?[255,255,255,0]:jn.sourceFromHex(e)||jn.sourceFromRgb(e)||jn.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=Dy(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,s]=Dy(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,s]=this.getSource();return"".concat(Zd(e)).concat(Zd(t)).concat(Zd(r)).concat(Zd(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Ey(this.getSource())),this}toBlackWhite(e){const[t,,,r]=Ey(this.getSource()),s=t<(e||127)?0:255;return this.setSource([s,s,s,r]),this}overlayWith(e){e instanceof jn||(e=new jn(e));const t=this.getSource(),r=e.getSource(),[s,i,a]=t.map((o,l)=>Math.round(.5*o+.5*r[l]));return this.setSource([s,i,a,t[3]]),this}static fromRgb(e){return jn.fromRgba(e)}static fromRgba(e){return new jn(jn.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,s,i]=t.slice(1,4).map(a=>{const o=parseFloat(a);return a.endsWith("%")?Math.round(2.55*o):o});return[r,s,i,My(t[4])]}}static fromHsl(e){return jn.fromHsla(e)}static fromHsla(e){return new jn(jn.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(jn.parseAngletoDegrees(t[1])%360+360)%360/360,s=parseFloat(t[2])/100,i=parseFloat(t[3])/100;let a,o,l;if(s===0)a=o=l=i;else{const u=i<=.5?i*(s+1):i+s-i*s,c=2*i-u;a=Sm(c,u,r+1/3),o=Sm(c,u,r),l=Sm(c,u,r-1/3)}return[Math.round(255*a),Math.round(255*o),Math.round(255*l),My(t[4])]}static fromHex(e){return new jn(jn.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(l=>l+l):t.match(/.{2}/g);const[s,i,a,o=255]=r.map(l=>parseInt(l,16));return[s,i,a,o/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?Ma(r):t.includes("turn")?360*r:r}};const Fc=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nv;const t=/\D{0,2}$/.exec(n),r=parseFloat(n),s=Xt.DPI;switch(t==null?void 0:t[0]){case"mm":return r*s/25.4;case"cm":return r*s/2.54;case"in":return r*s;case"pt":return r*s/72;case"pc":return r*s/72*12;case"em":return r*e;default:return r}},I8=n=>{const[e,t]=n.trim().split(" "),[r,s]=(i=e)&&i!==bs?[i.slice(1,4),i.slice(5,8)]:i===bs?[i,i]:["Mid","Mid"];var i;return{meetOrSlice:t||"meet",alignX:r,alignY:s}},Ih=function(n,e){let t,r,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const i=new Ns(e),a=i.getAlpha();t=i.toRgb(),a!==1&&(r=a.toString())}else t="none";return s?"".concat(n,": ").concat(t,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(t,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")};class z_{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):bs,i=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",o=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",u=this.opacity!==void 0?this.opacity:"1",c=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),p=Ih(an,this.fill);return[Ih(ws,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",o,"; ","stroke-miterlimit: ",l,"; ",p,"fill-rule: ",t,"; ","opacity: ",u,";",h,c].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(Fh(r));return"".concat(s).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),i=e.indexOf("COMMON_PARTS");return e[i]=s,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:s,additionalTransform:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=t?"":'style="'.concat(this.getSvgStyles(),'" '),o=s?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,u=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",c=l&&l.absolutePositioned,h=this.stroke,p=this.fill,f=this.shadow,v=[],b=e.indexOf("COMMON_PARTS");let x;l&&(l.clipPathId="CLIPPATH_".concat(To()),x='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(r),`</clipPath>
`)),c&&v.push("<g ",o,this.getSvgCommons(),` >
`),v.push("<g ",this.getSvgTransform(!1),c?"":o+this.getSvgCommons(),` >
`);const w=[a,u,t?"":this.addPaintOrder()," ",i?'transform="'.concat(i,'" '):""].join("");return e[b]=w,Gs(p)&&v.push(p.toSVG(this)),Gs(h)&&v.push(h.toSVG(this)),f&&v.push(f.toSVG(this)),l&&v.push(x),v.push(e.join("")),v.push(`</g>
`),c&&v.push(`</g>
`),r?r(v.join("")):v.join("")}addPaintOrder(){return this.paintFirst!==an?' paint-order="'.concat(this.paintFirst,'" '):""}}function Wp(n){return new RegExp("^("+n.join("|")+")\\b","i")}var Ny;const bl=String.raw(Ny||(Ny=Ro(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),B8=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+bl+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+bl+"))?\\s+(.*)"),$8={cx:Zt,x:Zt,r:"radius",cy:ys,y:ys,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},km="font-size",Cm="clip-path";Wp(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Wp(["symbol","image","marker","pattern","view","svg"]);const jy=Wp(["symbol","g","a","svg","clipPath","defs"]),q8=new Re(1,0),H_=new Re,Y_=(n,e)=>n.rotate(e),k0=(n,e)=>new Re(e).subtract(n),C0=n=>n.distanceFrom(H_),A0=(n,e)=>Math.atan2(mh(n,e),V8(n,e)),U8=n=>A0(q8,n),zv=n=>n.eq(H_)?n:n.scalarDivide(C0(n)),W_=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return zv(new Re(-n.y,n.x).scalarMultiply(e?1:-1))},mh=(n,e)=>n.x*e.y-n.y*e.x,V8=(n,e)=>n.x*e.x+n.y*e.y,Ry=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const r=mh(e,t),s=mh(e,n),i=mh(t,n);return r>=0?s>=0&&i<=0:!(s<=0&&i>=0)},Fy="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Iy=new RegExp("(?:\\s|^)"+Fy+Fy+"("+bl+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Ta{constructor(e){const t=typeof e=="string"?Ta.parseShadow(e):e;Object.assign(this,Ta.ownDefaults,t),this.id=To()}static parseShadow(e){const t=e.trim(),[,r=0,s=0,i=0]=(Iy.exec(t)||[]).map(a=>parseFloat(a)||0);return{color:(t.replace(Iy,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:s,blur:i}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=Y_(new Re(this.offsetX,this.offsetY),Hr(-e.angle)),r=new Ns(this.color);let s=40,i=40;return e.width&&e.height&&(s=100*xr((Math.abs(t.x)+this.blur)/e.width,Xt.NUM_FRACTION_DIGITS)+20,i=100*xr((Math.abs(t.y)+this.blur)/e.height,Xt.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(i,'%" height="').concat(100+2*i,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(xr(this.blur?this.blur/2:0,Xt.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(xr(t.x,Xt.NUM_FRACTION_DIGITS),'" dy="').concat(xr(t.y,Xt.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=Ta.ownDefaults;return this.includeDefaultValues?e:$v(e,(r,s)=>r!==t[s])}static async fromObject(e){return new this(e)}}we(Ta,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),we(Ta,"type","shadow"),ht.setClass(Ta,"shadow");const Qc=(n,e,t)=>Math.max(n,Math.min(e,t)),z8=[ys,Zt,_s,Zs,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",nu,su],Fa=[an,ws,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],H8={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Zt,originY:ys,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:an,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},Y8=(n,e,t,r)=>-t*Math.cos(n/r*Xh)+t+e,W8=()=>!1;class Hv{constructor(e){let{startValue:t,byValue:r,duration:s=500,delay:i=0,easing:a=Y8,onStart:o=Rf,onChange:l=Rf,onComplete:u=Rf,abort:c=W8,target:h}=e;we(this,"_state","pending"),we(this,"durationProgress",0),we(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=i,this.easing=a,this._onStart=o,this._onChange=l,this._onComplete=u,this._abort=c,this.target=h,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>If(e),this.delay):If(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:s,valueProgress:i}=this.calculate(r);this.value=Object.freeze(s),this.valueProgress=i,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),If(this.tick)))}register(){op.push(this)}unregister(){op.remove(this)}abort(){this._state="aborted",this.unregister()}}const G8=["startValue","endValue"];class X8 extends Hv{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(Se(Se({},kr(e,G8)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const K8=["startValue","endValue"];class J8 extends Hv{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(Se(Se({},kr(e,K8)),{},{startValue:t,byValue:r.map((s,i)=>s-t[i])}))}calculate(e){const t=this.startValue.map((r,s)=>this.easing(e,r,this.byValue[s],this.duration,s));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const Q8=["startValue","endValue","easing","onChange","onComplete","abort"],Z8=(n,e,t,r)=>e+t*(1-Math.cos(n/r*Xh)),Am=n=>n&&((e,t,r)=>n(new Ns(e).toRgba(),t,r));class eM extends Hv{constructor(e){let{startValue:t,endValue:r,easing:s=Z8,onChange:i,onComplete:a,abort:o}=e,l=kr(e,Q8);const u=new Ns(t).getSource(),c=new Ns(r).getSource();super(Se(Se({},l),{},{startValue:u,byValue:c.map((h,p)=>h-u[p]),easing:s,onChange:Am(i),onComplete:Am(a),abort:Am(o)}))}calculate(e){const[t,r,s,i]=this.startValue.map((o,l)=>this.easing(e,o,this.byValue[l],this.duration,l)),a=[...[t,r,s].map(Math.round),Qc(0,i,1)];return{value:a,valueProgress:a.map((o,l)=>this.byValue[l]!==0?Math.abs((o-this.startValue[l])/this.byValue[l]):0).find(o=>o!==0)||0}}}function G_(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new J8(n):new X8(n);return e.start(),e}function tM(n){const e=new eM(n);return e.start(),e}class Tr{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(s=>!this.includes(s))),this}static isPointContained(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(s||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(s||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const i=k0(t,r),a=k0(t,e).divide(i);return s?Math.abs(a.x)===Math.abs(a.y):a.x===a.y&&a.x>=0&&a.x<=1}}static isPointInPolygon(e,t){const r=new Re(e).setX(Math.min(e.x-1,...t.map(i=>i.x)));let s=0;for(let i=0;i<t.length;i++){const a=this.intersectSegmentSegment(t[i],t[(i+1)%t.length],e,r);if(a.includes(e))return!0;s+=+(a.status==="Intersection")}return s%2==1}static intersectLineLine(e,t,r,s){let i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],a=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const o=t.x-e.x,l=t.y-e.y,u=s.x-r.x,c=s.y-r.y,h=e.x-r.x,p=e.y-r.y,f=u*p-c*h,v=o*p-l*h,b=c*o-u*l;if(b!==0){const x=f/b,w=v/b;return(i||0<=x&&x<=1)&&(a||0<=w&&w<=1)?new Tr("Intersection").append(new Re(e.x+x*o,e.y+x*l)):new Tr}if(f===0||v===0){const x=i||a||Tr.isPointContained(e,r,s)||Tr.isPointContained(t,r,s)||Tr.isPointContained(r,e,t)||Tr.isPointContained(s,e,t);return new Tr(x?"Coincident":void 0)}return new Tr("Parallel")}static intersectSegmentLine(e,t,r,s){return Tr.intersectLineLine(e,t,r,s,!1,!0)}static intersectSegmentSegment(e,t,r,s){return Tr.intersectLineLine(e,t,r,s,!1,!1)}static intersectLinePolygon(e,t,r){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const i=new Tr,a=r.length;for(let o,l,u,c=0;c<a;c++){if(o=r[c],l=r[(c+1)%a],u=Tr.intersectLineLine(e,t,o,l,s,!1),u.status==="Coincident")return u;i.append(...u.points)}return i.points.length>0&&(i.status="Intersection"),i}static intersectSegmentPolygon(e,t,r){return Tr.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new Tr,s=e.length,i=[];for(let a=0;a<s;a++){const o=e[a],l=e[(a+1)%s],u=Tr.intersectSegmentPolygon(o,l,t);u.status==="Coincident"?(i.push(u),r.append(o,l)):r.append(...u.points)}return i.length>0&&i.length===e.length?new Tr("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const s=t.min(r),i=t.max(r),a=new Re(i.x,s.y),o=new Re(s.x,i.y);return Tr.intersectPolygonPolygon(e,[s,a,i,o])}}class rM extends T_{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?gs(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=gs(e,xi(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new Re(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),i=[e,t,r,s];if(this.group){const a=this.group.calcTransformMatrix();return i.map(o=>gs(o,a))}return i}intersectsWithRect(e,t){return Tr.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Tr.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:s,width:i,height:a}=this.getBoundingRect();return r>=e.x&&r+i<=t.x&&s>=e.y&&s+a<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Tr.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return Aa(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(_s,e),this._set(Zs,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Ma(L_(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||as.concat()}calcACoords(){const e=iu({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),s=Kh(t,r),i=Tn(s,e),a=this._getTransformedDimensions(),o=a.x/2,l=a.y/2;return{tl:gs({x:-o,y:-l},i),tr:gs({x:o,y:-l},i),bl:gs({x:-o,y:l},i),br:gs({x:o,y:l},i)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Kr(this.originX),Kr(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every((i,a)=>i===r[a])?s.value:(this.group&&(t=Tn(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},i=T8(s);return this.ownMatrixCache={key:e,value:i},i}_getNonTransformedDimensions(){return new Re(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Se({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let s=r,i=0;this.strokeUniform&&(s=0,i=r);const a=t.width+s,o=t.height+s;let l;return l=t.skewX===0&&t.skewY===0?new Re(a*t.scaleX,o*t.scaleY):Uv(a,o,zp(t)),l.scalarAdd(i)}translateToGivenOrigin(e,t,r,s,i){let a=e.x,o=e.y;const l=Kr(s)-Kr(t),u=Kr(i)-Kr(r);if(l||u){const c=this._getTransformedDimensions();a+=l*c.x,o+=u*c.y}return new Re(a,o)}translateToCenterPoint(e,t,r){if(t===It&&r===It)return e;const s=this.translateToGivenOrigin(e,t,r,It,It);return this.angle?s.rotate(Hr(this.angle),e):s}translateToOriginPoint(e,t,r){const s=this.translateToGivenOrigin(e,It,It,t,r);return this.angle?s.rotate(Hr(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?gs(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new Re(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const s=this.translateToCenterPoint(e,t,r),i=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:i.x,top:i.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Zt,ys)}}const nM=["type"],sM=["extraParam"];let ma=class $f extends rM{static getDefaults(){return $f.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){Ao("warn","Setting type has no effect",e)}constructor(e){super(),we(this,"_cacheContext",null),Object.assign(this,$f.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Oi(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,s=Xt.maxCacheSideLimit,i=Xt.minCacheSideLimit;if(t<=s&&r<=s&&t*r<=Xt.perfLimitSizeTotal)return t<i&&(e.width=i),r<i&&(e.height=i),e;const a=t/r,[o,l]=gh.limitDimsByArea(a),u=Qc(i,o,s),c=Qc(i,l,s);return t>u&&(e.zoomX/=t/u,e.width=u,e.capped=!0),r>c&&(e.zoomY/=r/c,e.height=c,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,s=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(s+2),zoomX:e.x,zoomY:e.y,x:r,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:s,zoomX:i,zoomY:a,x:o,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),u=r!==e.width||s!==e.height,c=this.zoomX!==i||this.zoomY!==a;if(!e||!t)return!1;if(u||c){r!==e.width||s!==e.height?(e.width=r,e.height=s):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const h=o/2,p=l/2;return this.cacheTranslationX=Math.round(e.width/2-h)+h,this.cacheTranslationY=Math.round(e.height/2-p)+p,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(i,a),this.zoomX=i,this.zoomY=a,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new Re(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=lp(this.calcTransformMatrix());return new Re(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==_s&&e!==Zs||(t=this._constrainScale(t)),e===_s&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof Ta||(t=new Ta(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:i}=this,{width:a,height:o}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:i,width:a,height:o,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===ws&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const s=this.fill,i=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=s,this.stroke=i}createClipPathLayer(e,t){const r=ei(t),s=r.getContext("2d");if(s.translate(t.cacheTranslationX,t.cacheTranslationY),s.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(i=>{i.transform(s)}),t.parentClipPaths.push(e),e.absolutePositioned){const i=xi(this.calcTransformMatrix());s.transform(i[0],i[1],i[2],i[3],i[4],i[5])}return e.transform(s),e.drawObject(s,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const s=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,s)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Gs(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(Gs(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,s=this.getCanvasRetinaScaling(),[i,,,a]=(r==null?void 0:r.viewportTransform)||as,o=i*s,l=a*s,u=t.nonScaling?new Re(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*Xt.browserShadowBlurConstant*(o+l)*(u.x+u.y)/4,e.shadowOffsetX=t.offsetX*o*u.x,e.shadowOffsetY=t.offsetY*l*u.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Gs(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,s=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,i):e.transform(1,0,0,1,s,i),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:s,offsetY:i}}_renderPaintInOrder(e){this.paintFirst===ws?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),i=this.getCanvasRetinaScaling(),a=s.x/this.scaleX/i,o=s.y/this.scaleY/i,l=ei({width:Math.ceil(a),height:Math.ceil(o)}),u=l.getContext("2d");u&&(u.beginPath(),u.moveTo(0,0),u.lineTo(a,0),u.lineTo(a,o),u.lineTo(0,o),u.closePath(),u.translate(a/2,o/2),u.scale(s.zoomX/this.scaleX/i,s.zoomY/this.scaleY/i),this._applyPatternGradientTransform(u,t),u.fillStyle=t.toLive(e),u.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(i*this.scaleX/s.zoomX,i*this.scaleY/s.zoomY),e.strokeStyle=(r=u.createPattern(l,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new Re(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(ht.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=B_(this),r=this.group,s=this.shadow,i=Math.abs,a=e.enableRetinaScaling?x_():1,o=(e.multiplier||1)*a,l=e.canvasProvider||(k=>new qv(k,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&E8(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&j8(this,this.getViewportTransform()),this.setCoords();const u=Oi(),c=this.getBoundingRect(),h=this.shadow,p=new Re;if(h){const k=h.blur,T=h.nonScaling?new Re(1,1):this.getObjectScaling();p.x=2*Math.round(i(h.offsetX)+k)*i(T.x),p.y=2*Math.round(i(h.offsetY)+k)*i(T.y)}const f=c.width+p.x,v=c.height+p.y;u.width=Math.ceil(f),u.height=Math.ceil(v);const b=l(u);e.format==="jpeg"&&(b.backgroundColor="#fff"),this.setPositionByOrigin(new Re(b.width/2,b.height/2),It,It);const x=this.canvas;b._objects=[this],this.set("canvas",b),this.setCoords();const w=b.toCanvasElement(o||1,e);return this.set("canvas",x),this.shadow=s,r&&(this.group=r),this.set(t),this.setCoords(),b._objects=[],b.destroy(),w}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return P_(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return O_(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:s}=this;if(t){const{x:i,y:a}=this.getRelativeCenterPoint();this.originX=It,this.originY=It,this.left=i,this.top=a}if(this.set("angle",e),t){const{x:i,y:a}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,s);this.left=i,this.top=a,this.originX=r,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){op.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&ea().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,s)=>{let[i,a]=s;return r[i]=this._animate(i,a,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),i=this.constructor.colorProperties.includes(s[s.length-1]),{abort:a,startValue:o,onChange:l,onComplete:u}=r,c=Se(Se({},r),{},{target:this,startValue:o??s.reduce((h,p)=>h[p],this),endValue:t,abort:a==null?void 0:a.bind(this),onChange:(h,p,f)=>{s.reduce((v,b,x)=>(x===s.length-1&&(v[b]=h),v[b]),this),l&&l(h,p,f)},onComplete:(h,p,f)=>{this.setCoords(),u&&u(h,p,f)}});return i?tM(c):G_(c)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let s,i=0;i<t.length;i++){if(s=t[i],s===e)return{fork:[this,...t.slice(0,i)],otherFork:[],common:t.slice(i)};for(let a=0;a<r.length;a++){if(this===r[a])return{fork:[],otherFork:[e,...r.slice(0,a)],common:[this,...t]};if(s===r[a])return{fork:[this,...t.slice(0,i)],otherFork:[e,...r.slice(0,a)],common:t.slice(i)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const s=t.fork.pop(),i=t.otherFork.pop(),a=r._objects.indexOf(s),o=r._objects.indexOf(i);return a>-1&&a>o}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat($f.customProperties,this.constructor.customProperties||[]);let t;const r=Xt.NUM_FRACTION_DIGITS,{clipPath:s,fill:i,stroke:a,shadow:o,strokeDashArray:l,left:u,top:c,originX:h,originY:p,width:f,height:v,strokeWidth:b,strokeLineCap:x,strokeDashOffset:w,strokeLineJoin:k,strokeUniform:T,strokeMiterLimit:I,scaleX:Y,scaleY:Q,angle:H,flipX:j,flipY:U,opacity:K,visible:D,backgroundColor:O,fillRule:J,paintFirst:M,globalCompositeOperation:ee,skewX:W,skewY:ae}=this;s&&!s.excludeFromExport&&(t=s.toObject(e.concat("inverted","absolutePositioned")));const ne=de=>xr(de,r),oe=Se(Se({},au(this,e)),{},{type:this.constructor.type,version:w0,originX:h,originY:p,left:ne(u),top:ne(c),width:ne(f),height:ne(v),fill:Cy(i)?i.toObject():i,stroke:Cy(a)?a.toObject():a,strokeWidth:ne(b),strokeDashArray:l&&l.concat(),strokeLineCap:x,strokeDashOffset:w,strokeLineJoin:k,strokeUniform:T,strokeMiterLimit:ne(I),scaleX:ne(Y),scaleY:ne(Q),angle:ne(H),flipX:j,flipY:U,opacity:ne(K),shadow:o&&o.toObject(),visible:D,backgroundColor:O,fillRule:J,paintFirst:M,globalCompositeOperation:ee,skewX:ne(W),skewY:ne(ae)},t?{clipPath:t}:null);return this.includeDefaultValues?oe:this._removeDefaultValues(oe)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return $v(e,(s,i)=>{if(i===Zt||i===ys||i==="type")return!0;const a=r[i];return s!==a&&!(Array.isArray(s)&&Array.isArray(a)&&s.length===0&&a.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=kr(e,nM),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=r,i=kr(r,sM);return Hp(t,i).then(a=>s?(delete a[s],new this(t[s],a)):new this(a))}static fromObject(e,t){return this._fromObject(e,t)}};we(ma,"stateProperties",z8),we(ma,"cacheProperties",Fa),we(ma,"ownDefaults",H8),we(ma,"type","FabricObject"),we(ma,"colorProperties",[an,ws,"backgroundColor"]),we(ma,"customProperties",[]),ht.setClass(ma),ht.setClass(ma,"object");const ou=(n,e,t)=>(r,s,i,a)=>{const o=e(r,s,i,a);return o&&$_(n,Se(Se({},U_(r,s,i,a)),t)),o};function lu(n){return(e,t,r,s)=>{const{target:i,originX:a,originY:o}=t,l=i.getRelativeCenterPoint(),u=i.translateToOriginPoint(l,a,o),c=n(e,t,r,s);return i.setPositionByOrigin(u,t.originX,t.originY),c}}const By=ou(jh,lu((n,e,t,r)=>{const s=Vv(e,e.originX,e.originY,t,r);if(Kr(e.originX)===Kr(It)||Kr(e.originX)===Kr(Br)&&s.x<0||Kr(e.originX)===Kr(Zt)&&s.x>0){const{target:i}=e,a=i.strokeWidth/(i.strokeUniform?i.scaleX:1),o=q_(e)?2:1,l=i.width,u=Math.abs(s.x*o/i.scaleX)-a;return i.set("width",Math.max(u,1)),l!==i.width}return!1}));function iM(n,e,t,r,s){r=r||{};const i=this.sizeX||r.cornerSize||s.cornerSize,a=this.sizeY||r.cornerSize||s.cornerSize,o=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,l=o?ws:an,u=!o&&(r.cornerStrokeColor||s.cornerStrokeColor);let c,h=e,p=t;n.save(),n.fillStyle=r.cornerColor||s.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",i>a?(c=i,n.scale(1,a/i),p=t*i/a):a>i?(c=a,n.scale(i/a,1),h=e*a/i):c=i,n.beginPath(),n.arc(h,p,c/2,0,sp,!1),n[l](),u&&n.stroke(),n.restore()}function aM(n,e,t,r,s){r=r||{};const i=this.sizeX||r.cornerSize||s.cornerSize,a=this.sizeY||r.cornerSize||s.cornerSize,o=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,l=o?ws:an,u=!o&&(r.cornerStrokeColor||s.cornerStrokeColor),c=i/2,h=a/2;n.save(),n.fillStyle=r.cornerColor||s.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",n.translate(e,t);const p=s.getTotalAngle();n.rotate(Hr(p)),n["".concat(l,"Rect")](-c,-h,i,a),u&&n.strokeRect(-c,-h,i,a),n.restore()}class gi{constructor(e){we(this,"visible",!0),we(this,"actionName",Vp),we(this,"angle",0),we(this,"x",0),we(this,"y",0),we(this,"offsetX",0),we(this,"offsetY",0),we(this,"sizeX",0),we(this,"sizeY",0),we(this,"touchSizeX",0),we(this,"touchSizeY",0),we(this,"cursorStyle","crosshair"),we(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,s){var i;let{tl:a,tr:o,br:l,bl:u}=s;return((i=t.canvas)===null||i===void 0?void 0:i.getActiveObject())===t&&t.isControlVisible(e)&&Tr.isPointInPolygon(r,[a,o,l,u])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,s;return(r=(s=e._controlsVisibility)===null||s===void 0?void 0:s[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,s){return new Re(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,s,i,a){const o=Iv([Kh(r,s),iu({angle:e}),Bv((i?this.touchSizeX:this.sizeX)||t,(i?this.touchSizeY:this.sizeY)||t)]);return{tl:new Re(-.5,-.5).transform(o),tr:new Re(.5,-.5).transform(o),br:new Re(.5,.5).transform(o),bl:new Re(-.5,.5).transform(o)}}render(e,t,r,s,i){((s=s||{}).cornerStyle||i.cornerStyle)==="circle"?iM.call(this,e,t,r,s,i):aM.call(this,e,t,r,s,i)}}const oM=(n,e,t)=>t.lockRotation?up:e.cursorStyle,lM=ou(k_,lu((n,e,t,r)=>{let{target:s,ex:i,ey:a,theta:o,originX:l,originY:u}=e;const c=s.translateToOriginPoint(s.getRelativeCenterPoint(),l,u);if(Ci(s,"lockRotation"))return!1;const h=Math.atan2(a-c.y,i-c.x),p=Math.atan2(r-c.y,t-c.x);let f=Ma(p-h+o);if(s.snapAngle&&s.snapAngle>0){const b=s.snapAngle,x=s.snapThreshold||b,w=Math.ceil(f/b)*b,k=Math.floor(f/b)*b;Math.abs(f-k)<x?f=k:Math.abs(f-w)<x&&(f=w)}f<0&&(f=360+f),f%=360;const v=s.angle!==f;return s.angle=f,v}));function X_(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function K_(n,e,t){const r=Ci(n,"lockScalingX"),s=Ci(n,"lockScalingY");if(r&&s||!e&&(r||s)&&t||r&&e==="x"||s&&e==="y")return!0;const{width:i,height:a,strokeWidth:o}=n;return i===0&&o===0&&e!=="y"||a===0&&o===0&&e!=="x"}const cM=["e","se","s","sw","w","nw","n","ne","e"],eh=(n,e,t)=>{const r=X_(n,t);if(K_(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return up;const s=V_(t,e);return"".concat(cM[s],"-resize")};function Yv(n,e,t,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const i=e.target,a=s.by,o=X_(n,i);let l,u,c,h,p,f;if(K_(i,a,o))return!1;if(e.gestureScale)u=e.scaleX*e.gestureScale,c=e.scaleY*e.gestureScale;else{if(l=Vv(e,e.originX,e.originY,t,r),p=a!=="y"?Math.sign(l.x||e.signX||1):1,f=a!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=p),e.signY||(e.signY=f),Ci(i,"lockScalingFlip")&&(e.signX!==p||e.signY!==f))return!1;if(h=i._getTransformedDimensions(),o&&!a){const x=Math.abs(l.x)+Math.abs(l.y),{original:w}=e,k=x/(Math.abs(h.x*w.scaleX/i.scaleX)+Math.abs(h.y*w.scaleY/i.scaleY));u=w.scaleX*k,c=w.scaleY*k}else u=Math.abs(l.x*i.scaleX/h.x),c=Math.abs(l.y*i.scaleY/h.y);q_(e)&&(u*=2,c*=2),e.signX!==p&&a!=="y"&&(e.originX=Oy(e.originX),u*=-1,e.signX=p),e.signY!==f&&a!=="x"&&(e.originY=Oy(e.originY),c*=-1,e.signY=f)}const v=i.scaleX,b=i.scaleY;return a?(a==="x"&&i.set(_s,u),a==="y"&&i.set(Zs,c)):(!Ci(i,"lockScalingX")&&i.set(_s,u),!Ci(i,"lockScalingY")&&i.set(Zs,c)),v!==i.scaleX||b!==i.scaleY}const ef=ou(Up,lu((n,e,t,r)=>Yv(n,e,t,r))),uM=ou(Up,lu((n,e,t,r)=>Yv(n,e,t,r,{by:"x"}))),hM=ou(Up,lu((n,e,t,r)=>Yv(n,e,t,r,{by:"y"}))),dM=["target","ex","ey","skewingSide"],Tm={x:{counterAxis:"y",scale:_s,skew:nu,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Zs,skew:su,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},fM=["ns","nesw","ew","nwse"],pM=(n,e,t)=>{if(e.x!==0&&Ci(t,"lockSkewingY")||e.y!==0&&Ci(t,"lockSkewingX"))return up;const r=V_(t,e)%4;return"".concat(fM[r],"-resize")};function J_(n,e,t,r,s){const{target:i}=t,{counterAxis:a,origin:o,lockSkewing:l,skew:u,flip:c}=Tm[n];if(Ci(i,l))return!1;const{origin:h,flip:p}=Tm[a],f=Kr(t[h])*(i[p]?-1:1),v=-Math.sign(f)*(i[c]?-1:1),b=.5*-((i[u]===0&&Vv(t,It,It,r,s)[n]>0||i[u]>0?1:-1)*v)+.5;return ou(C_,lu((w,k,T,I)=>function(Y,Q,H){let{target:j,ex:U,ey:K,skewingSide:D}=Q,O=kr(Q,dM);const{skew:J}=Tm[Y],M=H.subtract(new Re(U,K)).divide(new Re(j.scaleX,j.scaleY))[Y],ee=j[J],W=O[J],ae=Math.tan(Hr(W)),ne=Y==="y"?j._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:j._getTransformedDimensions({scaleX:1,scaleY:1}).y,oe=2*M*D/Math.max(ne,1)+ae,de=Ma(Math.atan(oe));j.set(J,de);const fe=ee!==j[J];if(fe&&Y==="y"){const{skewX:P,scaleX:A}=j,F=j._getTransformedDimensions({skewY:ee}),G=j._getTransformedDimensions(),Z=P!==0?F.x/G.x:1;Z!==1&&j.set(_s,Z*A)}return fe}(n,k,new Re(T,I))))(e,Se(Se({},t),{},{[o]:b,skewingSide:v}),r,s)}const gM=(n,e,t,r)=>J_("x",n,e,t,r),mM=(n,e,t,r)=>J_("y",n,e,t,r);function Gp(n,e){return n[e.canvas.altActionKey]}const tf=(n,e,t)=>{const r=Gp(n,t);return e.x===0?r?nu:Zs:e.y===0?r?su:_s:""},kc=(n,e,t)=>Gp(n,t)?pM(0,e,t):eh(n,e,t),$y=(n,e,t,r)=>Gp(n,e.target)?mM(n,e,t,r):uM(n,e,t,r),qy=(n,e,t,r)=>Gp(n,e.target)?gM(n,e,t,r):hM(n,e,t,r),Q_=()=>({ml:new gi({x:-.5,y:0,cursorStyleHandler:kc,actionHandler:$y,getActionName:tf}),mr:new gi({x:.5,y:0,cursorStyleHandler:kc,actionHandler:$y,getActionName:tf}),mb:new gi({x:0,y:.5,cursorStyleHandler:kc,actionHandler:qy,getActionName:tf}),mt:new gi({x:0,y:-.5,cursorStyleHandler:kc,actionHandler:qy,getActionName:tf}),tl:new gi({x:-.5,y:-.5,cursorStyleHandler:eh,actionHandler:ef}),tr:new gi({x:.5,y:-.5,cursorStyleHandler:eh,actionHandler:ef}),bl:new gi({x:-.5,y:.5,cursorStyleHandler:eh,actionHandler:ef}),br:new gi({x:.5,y:.5,cursorStyleHandler:eh,actionHandler:ef}),mtr:new gi({x:0,y:-.5,actionHandler:lM,cursorStyleHandler:oM,offsetY:-40,withConnection:!0,actionName:Rv})}),vM=()=>({mr:new gi({x:.5,y:0,actionHandler:By,cursorStyleHandler:kc,actionName:jh}),ml:new gi({x:-.5,y:0,actionHandler:By,cursorStyleHandler:kc,actionName:jh})}),yM=()=>Se(Se({},Q_()),vM());class Bh extends ma{static getDefaults(){return Se(Se({},super.getDefaults()),Bh.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Bh.ownDefaults),this.setOptions(e)}static createControls(){return{controls:Q_()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,s=t.action;if(this===r&&s&&s.startsWith(Vp))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let s=r.length-1;s>=0;s--){const[i,a]=r[s],o=this.controls[i];if(o.shouldActivate(i,this,e,t?a.touchCorner:a.corner))return this.__corner=i,{key:i,control:o,coord:this.oCoords[i]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=Kh(t.x,t.y),s=iu({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),i=Tn(r,s),a=Tn(e,i),o=Tn(a,[1/e[0],0,0,1/e[3],0,0]),l=this.group?lp(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const u=this._calculateCurrentDimensions(l),c={};return this.forEachControl((h,p)=>{const f=h.positionHandler(u,o,this,h);c[p]=Object.assign(f,this._calcCornerCoords(h,f))}),c}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/s[0],1/s[3]),e.rotate(Hr(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=Se({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,t),s.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:s}=this,i=Se({hasBorders:r,hasControls:s},t),a=this.getViewportTransform(),o=i.hasBorders,l=i.hasControls,u=Tn(a,this.calcTransformMatrix()),c=lp(u);e.save(),e.translate(c.translateX,c.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(c.angle-=180),e.rotate(Hr(this.group?c.angle:this.angle)),o&&this.drawBorders(e,c,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let s;if(r&&r.forActiveSelection||this.group){const i=Uv(this.width,this.height,zp(t)),a=this.isStrokeAccountedForInDimensions()?Fv:(this.strokeUniform?new Re().scalarAdd(this.canvas?this.canvas.getZoom():1):new Re(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);s=i.add(a).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((s,i)=>{s.withConnection&&s.getVisibility(this,i)&&(r=!0,e.moveTo(s.x*t.x,s.y*t.y),e.lineTo(s.x*t.x+s.offsetX,s.y*t.y+s.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:i,cornerColor:a}=this,o=Se({cornerStrokeColor:s,cornerDashArray:i,cornerColor:a},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=o.cornerColor,this.transparentCorners||(e.strokeStyle=o.cornerStrokeColor),this._setLineDash(e,o.cornerDashArray),this.forEachControl((l,u)=>{if(l.getVisibility(this,u)){const c=this.oCoords[u];l.render(e,c.x,c.y,o,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,s]=t;return this.setControlVisible(r,s)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const s=this.width+4,i=this.height+4;return t.clearRect(-s/2,-i/2,s,i),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function Z_(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),n}we(Bh,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Vn extends Bh{}Z_(Vn,[z_]),ht.setClass(Vn),ht.setClass(Vn,"object");const bM=(n,e,t,r)=>{const s=2*(r=Math.round(r))+1,{data:i}=n.getImageData(e-r,t-r,s,s);for(let a=3;a<i.length;a+=4)if(i[a]>0)return!1;return!0};class ex{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new Re(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new Re(1/this.options.scaleX,1/this.options.scaleY):new Re(1,1)}createSideVector(e,t){const r=k0(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new Re(e);return t.y+=t.x*Math.tan(Hr(this.options.skewY)),t.x+=t.y*Math.tan(Hr(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const wM=new Re;class Ic extends ex{static getOrthogonalRotationFactor(e,t){const r=t?A0(e,t):U8(e);return Math.abs(r)<Xh?-1:1}constructor(e,t,r,s){super(s),we(this,"AB",void 0),we(this,"AC",void 0),we(this,"alpha",void 0),we(this,"bisector",void 0),this.A=new Re(e),this.B=new Re(t),this.C=new Re(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=A0(this.AB,this.AC),this.bisector=zv(Y_(this.AB.eq(wM)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t),i=W_(s),a=Ic.getOrthogonalRotationFactor(i,this.bisector);return this.scaleUnitVector(i,r*a)}projectBevel(){const e=[];return(this.alpha%sp==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),i=this.options.strokeUniform?C0(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return C0(s)/this.strokeProjectionMagnitude<=i&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],s=new Re(Ic.getOrthogonalRotationFactor(this.bisector),Ic.getOrthogonalRotationFactor(new Re(this.bisector.y,this.bisector.x)));return[new Re(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new Re(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(i=>{Ry(i,e,t)&&r.push(this.A.add(i))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:s,skewY:i,scaleX:a,scaleY:o,strokeUniform:l}=this.options,u=new Re(Math.tan(Hr(s)),Math.tan(Hr(i))),c=this.strokeProjectionMagnitude,h=l?c/o/Math.sqrt(1/o**2+1/a**2*u.y**2):c/Math.sqrt(1+u.y**2),p=new Re(Math.sqrt(Math.max(c**2-h**2,0)),h),f=l?c/Math.sqrt(1+u.x**2*(1/o)**2/(1/a+1/a*u.x*u.y)**2):c/Math.sqrt(1+u.x**2/(1+u.x*u.y)**2),v=new Re(f,Math.sqrt(Math.max(c**2-f**2,0)));return[v,v.scalarMultiply(-1),p,p.scalarMultiply(-1)].map(b=>this.applySkew(l?b.multiply(this.strokeUniformScalar):b)).forEach(b=>{Ry(b,e,t)&&r.push(this.applySkew(this.A).add(b))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%sp==0,r=this.applySkew(this.A),s=e[t?0:2].subtract(r),i=e[t?1:0].subtract(r),a=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),o=mh(s,a)>0,l=o?s:i,u=o?i:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,u)):e.push(...this.projectRoundNoSkew(l,u)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Uy extends ex{constructor(e,t,r){super(r),this.A=new Re(e),this.T=new Re(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t);return this.scaleUnitVector(W_(s),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new Re(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Ic(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new Re(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(zv(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(r);e.push(s.add(t),s.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const _M=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const s=n.reduce((i,a)=>(i[i.length-1].eq(a)||i.push(new Re(a)),i),[new Re(n[0])]);if(s.length===1)t=!0;else if(!t){const i=s[0],a=((o,l)=>{for(let u=o.length-1;u>=0;u--)if(l(o[u],u,o))return u;return-1})(s,o=>!o.eq(i));s.splice(a+1)}return s.forEach((i,a,o)=>{let l,u;a===0?(u=o[1],l=t?i:o[o.length-1]):a===o.length-1?(l=o[a-1],u=t?i:o[0]):(l=o[a-1],u=o[a+1]),t&&o.length===1?r.push(...new Uy(i,i,e).project()):!t||a!==0&&a!==o.length-1?r.push(...new Ic(i,l,u,e).project()):r.push(...new Uy(i,a===0?u:l,e).project())}),r},Wv=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(r=>{e[t][r]=Se({},n[t][r])})}),e},xM=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Gv=n=>{const e=[];for(let t,r=0;r<n.length;r++)(t=SM(n,r))!==!1&&e.push(t);return e},SM=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const s=n.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},Xv=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},kM=(n,e)=>{const t=e.split(`
`),r=[];let s=-1,i={};n=Wv(n);for(let a=0;a<t.length;a++){const o=Gv(t[a]);if(n[a])for(let l=0;l<o.length;l++){s++;const u=n[a][l];u&&Object.keys(u).length>0&&(Xv(i,u,!0)?r.push({start:s,end:s+1,style:u}):r[r.length-1].end++),i=u||{}}else s+=o.length,i={}}return r},CM=(n,e)=>{if(!Array.isArray(n))return Wv(n);const t=e.split(jv),r={};let s=-1,i=0;for(let a=0;a<t.length;a++){const o=Gv(t[a]);for(let l=0;l<o.length;l++)s++,n[i]&&n[i].start<=s&&s<n[i].end&&(r[a]=r[a]||{},r[a][l]=Se({},n[i].style),s===n[i].end-1&&i++)}return r},Fo=["display","transform",an,"fill-opacity","fill-rule","opacity",ws,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Vy(n,e){const t=n.nodeName,r=n.getAttribute("class"),s=n.getAttribute("id"),i="(?![a-zA-Z\\-]+)";let a;if(a=new RegExp("^"+t,"i"),e=e.replace(a,""),s&&e.length&&(a=new RegExp("#"+s+i,"i"),e=e.replace(a,"")),r&&e.length){const o=r.split(" ");for(let l=o.length;l--;)a=new RegExp("\\."+o[l]+i,"i"),e=e.replace(a,"")}return e.length===0}function AM(n,e){let t=!0;const r=Vy(n,e.pop());return r&&e.length&&(t=function(s,i){let a,o=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&i.length;)o&&(a=i.pop()),o=Vy(s=s.parentElement,a);return i.length===0}(n,e)),r&&t&&e.length===0}const TM=n=>{var e;return(e=$8[n])!==null&&e!==void 0?e:n},PM=new RegExp("(".concat(bl,")"),"gi"),OM=n=>n.replace(PM," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var zy,Hy,Yy,Wy,Gy,Xy,Ky;const es="(".concat(bl,")"),LM=String.raw(zy||(zy=Ro(["(skewX)(",")"],["(skewX)\\(","\\)"])),es),DM=String.raw(Hy||(Hy=Ro(["(skewY)(",")"],["(skewY)\\(","\\)"])),es),MM=String.raw(Yy||(Yy=Ro(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),es,es,es),EM=String.raw(Wy||(Wy=Ro(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),es,es),NM=String.raw(Gy||(Gy=Ro(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),es,es),jM=String.raw(Xy||(Xy=Ro(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),es,es,es,es,es,es),Kv="(?:".concat(jM,"|").concat(NM,"|").concat(MM,"|").concat(EM,"|").concat(LM,"|").concat(DM,")"),RM="(?:".concat(Kv,"*)"),FM=String.raw(Ky||(Ky=Ro(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),RM),IM=new RegExp(FM),BM=new RegExp(Kv),$M=new RegExp(Kv,"g");function T0(n){const e=[];if(!(n=OM(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!IM.test(n))return[...as];for(const t of n.matchAll($M)){const r=BM.exec(t[0]);if(!r)continue;let s=as;const i=r.filter(v=>!!v),[,a,...o]=i,[l,u,c,h,p,f]=o.map(v=>parseFloat(v));switch(a){case"translate":s=Kh(l,u);break;case Rv:s=iu({angle:l},{x:u,y:c});break;case Vp:s=Bv(l,u);break;case nu:s=M_(l);break;case su:s=E_(l);break;case"matrix":s=[l,u,c,h,p,f]}e.push(s)}return Iv(e)}function qM(n,e,t,r){const s=Array.isArray(e);let i,a=e;if(n!==an&&n!==ws||e!==bs){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")a=e===bs?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")a=t&&t.transformMatrix?Tn(t.transformMatrix,T0(e)):T0(e);else if(n==="visible")a=e!==bs&&e!=="hidden",t&&t.visible===!1&&(a=!1);else if(n==="opacity")a=parseFloat(e),t&&t.opacity!==void 0&&(a*=t.opacity);else if(n==="textAnchor")a=e==="start"?Zt:e==="end"?Br:It;else if(n==="charSpacing")i=Fc(e,r)/r*1e3;else if(n==="paintFirst"){const o=e.indexOf(an),l=e.indexOf(ws);a=an,(o>-1&&l>-1&&l<o||o===-1&&l>-1)&&(a=ws)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";i=s?e.map(Fc):Fc(e,r)}}else a="";return!s&&isNaN(i)?a:i}function UM(n,e){const t=n.match(B8);if(!t)return;const r=t[1],s=t[3],i=t[4],a=t[5],o=t[6];r&&(e.fontStyle=r),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),i&&(e.fontSize=Fc(i)),o&&(e.fontFamily=o),a&&(e.lineHeight=a==="normal"?1:a)}function VM(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,s]=t.split(":");e[r.trim().toLowerCase()]=s.trim()})}function zM(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?VM(t,e):function(r,s){Object.entries(r).forEach(i=>{let[a,o]=i;o!==void 0&&(s[a.toLowerCase()]=o)})}(t,e)),e}const HM={stroke:"strokeOpacity",fill:"fillOpacity"};function Ia(n,e,t){if(!n)return{};let r,s={},i=Nv;n.parentNode&&jy.test(n.parentNode.nodeName)&&(s=Ia(n.parentElement,e,t),s.fontSize&&(r=i=Fc(s.fontSize)));const a=Se(Se(Se({},e.reduce((u,c)=>{const h=n.getAttribute(c);return h&&(u[c]=h),u},{})),function(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h={};for(const p in c)AM(u,p.split(" "))&&(h=Se(Se({},h),c[p]));return h}(n,t)),zM(n));a[Cm]&&n.setAttribute(Cm,a[Cm]),a[km]&&(r=Fc(a[km],i),a[km]="".concat(r));const o={};for(const u in a){const c=TM(u),h=qM(c,a[u],s,r);o[c]=h}o&&o.font&&UM(o.font,o);const l=Se(Se({},s),o);return jy.test(n.nodeName)?l:function(u){const c=Vn.getDefaults();return Object.entries(HM).forEach(h=>{let[p,f]=h;if(u[f]===void 0||u[p]==="")return;if(u[p]===void 0){if(!c[p])return;u[p]=c[p]}if(u[p].indexOf("url(")===0)return;const v=new Ns(u[p]);u[p]=v.setAlpha(xr(v.getAlpha()*u[f],2)).toRgba()}),u}(l)}const YM=["left","top","width","height","visible"],tx=["rx","ry"];class Ys extends Vn{static getDefaults(){return Se(Se({},super.getDefaults()),Ys.ownDefaults)}constructor(e){super(),Object.assign(this,Ys.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,s=-t/2,i=-r/2,a=this.rx?Math.min(this.rx,t/2):0,o=this.ry?Math.min(this.ry,r/2):0,l=a!==0||o!==0;e.beginPath(),e.moveTo(s+a,i),e.lineTo(s+t-a,i),l&&e.bezierCurveTo(s+t-no*a,i,s+t,i+no*o,s+t,i+o),e.lineTo(s+t,i+r-o),l&&e.bezierCurveTo(s+t,i+r-no*o,s+t-no*a,i+r,s+t-a,i+r),e.lineTo(s+a,i+r),l&&e.bezierCurveTo(s+no*a,i+r,s,i+r-no*o,s,i+r-o),e.lineTo(s,i+o),l&&e.bezierCurveTo(s,i+no*o,s+no*a,i,s+a,i),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...tx,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(s,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const s=Ia(e,this.ATTRIBUTE_NAMES,r),{left:i=0,top:a=0,width:o=0,height:l=0,visible:u=!0}=s,c=kr(s,YM);return new this(Se(Se(Se({},t),c),{},{left:i,top:a,width:o,height:l,visible:!!(u&&o&&l)}))}}we(Ys,"type","Rect"),we(Ys,"cacheProperties",[...Fa,...tx]),we(Ys,"ownDefaults",{rx:0,ry:0}),we(Ys,"ATTRIBUTE_NAMES",[...Fo,"x","y","rx","ry","width","height"]),ht.setClass(Ys),ht.setSVGClass(Ys);const ka="initialization",hp="added",Jv="removed",dp="imperative",rx=(n,e)=>{const{strokeUniform:t,strokeWidth:r,width:s,height:i,group:a}=e,o=a&&a!==n?Yp(a.calcTransformMatrix(),n.calcTransformMatrix()):null,l=o?e.getRelativeCenterPoint().transform(o):e.getRelativeCenterPoint(),u=!e.isStrokeAccountedForInDimensions(),c=t&&u?N8(new Re(r,r),void 0,n.calcTransformMatrix()):Fv,h=!t&&u?r:0,p=Uv(s+h,i+h,Iv([o,e.calcOwnMatrix()],!0)).add(c).scalarDivide(2);return[l.subtract(p),l.add(p)]};class Xp{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:s}=e;return t===ka||t===dp||!!r&&s!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==ka&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:s}=t;if(r===dp&&t.overrides)return t.overrides;if(e.length===0)return;const{left:i,top:a,width:o,height:l}=Aa(e.map(h=>rx(s,h)).reduce((h,p)=>h.concat(p),[])),u=new Re(o,l),c=new Re(i,a).add(u.scalarDivide(2));if(r===ka){const h=this.getInitialSize(t,{size:u,center:c});return{center:c,relativeCorrection:new Re(0,0),size:h}}return{center:c.transform(s.calcOwnMatrix()),size:u}}}we(Xp,"type","strategy");class P0 extends Xp{shouldPerformLayout(e){return!0}}we(P0,"type","fit-content"),ht.setClass(P0);const WM=["strategy"],GM=["target","strategy","bubbles","prevStrategy"],nx="layoutManager";class $h{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new P0;we(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=Se(Se({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[ap,S_,jh,k_,Up,C_,ip,w8,_8].map(s=>e.on(s,i=>this.performLayout(s===ap?{type:"object_modified",trigger:s,e:i,target:r}:{type:"object_modifying",trigger:s,e:i,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:s}=t;if(r===ka||r===hp?this.subscribeTargets(e):r===Jv&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:t,context:e}),r===dp&&e.deep){const i=kr(e,WM);t.forEachObject(a=>a.layoutManager&&a.layoutManager.performLayout(Se(Se({},i),{},{bubbles:!1,target:a})))}}getLayoutResult(e){const{target:t,strategy:r,type:s}=e,i=r.calcLayoutResult(e,t.getObjects());if(!i)return;const a=s===ka?new Re:t.getRelativeCenterPoint(),{center:o,correction:l=new Re,relativeCorrection:u=new Re}=i,c=a.subtract(o).add(l).transform(s===ka?as:xi(t.calcOwnMatrix()),!0).add(u);return{result:i,prevCenter:a,nextCenter:o,offset:c}}commitLayout(e,t){const{target:r}=e,{result:{size:s},nextCenter:i}=t;var a,o;r.set({width:s.x,height:s.y}),this.layoutObjects(e,t),e.type===ka?r.set({left:(a=e.x)!==null&&a!==void 0?a:i.x+s.x*Kr(r.originX),top:(o=e.y)!==null&&o!==void 0?o:i.y+s.y*Kr(r.originY)}):(r.setPositionByOrigin(i,It,It),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(s=>{s.group===r&&this.layoutObject(e,t,s)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:s}=t;r.set({left:r.left+s.x,top:r.top+s.y})}onAfterLayout(e,t){const{target:r,strategy:s,bubbles:i,prevStrategy:a}=e,o=kr(e,GM),{canvas:l}=r;r.fire("layout:after",{context:e,result:t}),l&&l.fire("object:layout:after",{context:e,result:t,target:r});const u=r.parent;i&&u!=null&&u.layoutManager&&((o.path||(o.path=[])).push(r),u.layoutManager.performLayout(Se(Se({},o),{},{target:u}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:nx,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}ht.setClass($h,nx);const XM=["type","objects","layoutManager"];class KM extends $h{performLayout(){}}class pl extends A_(Vn){static getDefaults(){return Se(Se({},super.getDefaults()),pl.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),we(this,"_activeObjects",[]),we(this,"__objectSelectionTracker",void 0),we(this,"__objectSelectionDisposer",void 0),Object.assign(this,pl.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new $h,this.layoutManager.performLayout({type:ka,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(Ao("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(Ao("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,s)=>this.canEnterGroup(t)&&s.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const s=this._filterObjectsBeforeEnteringGroup(t),i=super.add(...s);return this._onAfterObjectsChange(hp,s),i}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const i=this._filterObjectsBeforeEnteringGroup(r),a=super.insertAt(e,...i);return this._onAfterObjectsChange(hp,i),a}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(Jv,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(s=>{s._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const s=this._activeObjects;if(e)s.push(r),this._set("dirty",!0);else if(s.length>0){const i=s.indexOf(r);i>-1&&(s.splice(i,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&cp(e,Tn(xi(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(cp(e,Tn(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=Vn.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let i=0;i<this._objects.length;i++){var s;const a=this._objects[i];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&a.group!==this?(e.save(),e.transform(...xi(this.calcTransformMatrix())),a.render(e),e.restore()):a.group===this&&a.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(Se({target:this,type:dp},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const i=s.includeDefaultValues;s.includeDefaultValues=r;const a=s[e||"toObject"](t);return s.includeDefaultValues=i,a})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return Se(Se(Se({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Ys.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const s=t.join("");return e?e(s):s}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let s=0;s<this._objects.length;s++)t.push("		",this._objects[s].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let s=0;s<this._objects.length;s++)t.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:s=[],layoutManager:i}=e,a=kr(e,XM);return Promise.all([Rh(s,t),Hp(a,t)]).then(o=>{let[l,u]=o;const c=new this(l,Se(Se(Se({},a),u),{},{layoutManager:new KM}));if(i){const h=ht.getClass(i.type),p=ht.getClass(i.strategy);c.layoutManager=new h(new p)}else c.layoutManager=new $h;return c.layoutManager.subscribeTargets({type:ka,target:c,targets:c.getObjects()}),c.setCoords(),c})}}we(pl,"type","Group"),we(pl,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),ht.setClass(pl);const JM=(n,e)=>Math.min(e.width/n.width,e.height/n.height),QM=(n,e)=>Math.max(e.width/n.width,e.height/n.height),O0="\\s*,?\\s*",Xu="".concat(O0,"(").concat(bl,")"),ZM="".concat(Xu).concat(Xu).concat(Xu).concat(O0,"([01])").concat(O0,"([01])").concat(Xu).concat(Xu),eE={m:"l",M:"L"},tE=(n,e,t,r,s,i,a,o,l,u,c)=>{const h=La(n),p=Da(n),f=La(e),v=Da(e),b=t*s*f-r*i*v+a,x=r*s*f+t*i*v+o;return["C",u+l*(-t*s*p-r*i*h),c+l*(-r*s*p+t*i*h),b+l*(t*s*v+r*i*f),x+l*(r*s*v-t*i*f),b,x]},Jy=(n,e,t,r)=>{const s=Math.atan2(e,n),i=Math.atan2(r,t);return i>=s?i-s:2*Math.PI-(s-i)};function Qy(n,e,t,r,s,i,a,o){let l;if(Xt.cachesBoundsOfCurve&&(l=[...arguments].join(),gh.boundsOfCurveCache[l]))return gh.boundsOfCurveCache[l];const u=Math.sqrt,c=Math.abs,h=[],p=[[0,0],[0,0]];let f=6*n-12*t+6*s,v=-3*n+9*t-9*s+3*a,b=3*t-3*n;for(let I=0;I<2;++I){if(I>0&&(f=6*e-12*r+6*i,v=-3*e+9*r-9*i+3*o,b=3*r-3*e),c(v)<1e-12){if(c(f)<1e-12)continue;const U=-b/f;0<U&&U<1&&h.push(U);continue}const Y=f*f-4*b*v;if(Y<0)continue;const Q=u(Y),H=(-f+Q)/(2*v);0<H&&H<1&&h.push(H);const j=(-f-Q)/(2*v);0<j&&j<1&&h.push(j)}let x=h.length;const w=x,k=sx(n,e,t,r,s,i,a,o);for(;x--;){const{x:I,y:Y}=k(h[x]);p[0][x]=I,p[1][x]=Y}p[0][w]=n,p[1][w]=e,p[0][w+1]=a,p[1][w+1]=o;const T=[new Re(Math.min(...p[0]),Math.min(...p[1])),new Re(Math.max(...p[0]),Math.max(...p[1]))];return Xt.cachesBoundsOfCurve&&(gh.boundsOfCurveCache[l]=T),T}const rE=(n,e,t)=>{let[r,s,i,a,o,l,u,c]=t;const h=((p,f,v,b,x,w,k)=>{if(v===0||b===0)return[];let T=0,I=0,Y=0;const Q=Math.PI,H=k*Ev,j=Da(H),U=La(H),K=.5*(-U*p-j*f),D=.5*(-U*f+j*p),O=v**2,J=b**2,M=D**2,ee=K**2,W=O*J-O*M-J*ee;let ae=Math.abs(v),ne=Math.abs(b);if(W<0){const Ae=Math.sqrt(1-W/(O*J));ae*=Ae,ne*=Ae}else Y=(x===w?-1:1)*Math.sqrt(W/(O*M+J*ee));const oe=Y*ae*D/ne,de=-Y*ne*K/ae,fe=U*oe-j*de+.5*p,P=j*oe+U*de+.5*f;let A=Jy(1,0,(K-oe)/ae,(D-de)/ne),F=Jy((K-oe)/ae,(D-de)/ne,(-K-oe)/ae,(-D-de)/ne);w===0&&F>0?F-=2*Q:w===1&&F<0&&(F+=2*Q);const G=Math.ceil(Math.abs(F/Q*2)),Z=[],_=F/G,q=8/3*Math.sin(_/4)*Math.sin(_/4)/Math.sin(_/2);let te=A+_;for(let Ae=0;Ae<G;Ae++)Z[Ae]=tE(A,te,U,j,ae,ne,fe,P,q,T,I),T=Z[Ae][5],I=Z[Ae][6],A=te,te+=_;return Z})(u-n,c-e,s,i,o,l,a);for(let p=0,f=h.length;p<f;p++)h[p][1]+=n,h[p][2]+=e,h[p][3]+=n,h[p][4]+=e,h[p][5]+=n,h[p][6]+=e;return h},nE=n=>{let e=0,t=0,r=0,s=0;const i=[];let a,o=0,l=0;for(const u of n){const c=[...u];let h;switch(c[0]){case"l":c[1]+=e,c[2]+=t;case"L":e=c[1],t=c[2],h=["L",e,t];break;case"h":c[1]+=e;case"H":e=c[1],h=["L",e,t];break;case"v":c[1]+=t;case"V":t=c[1],h=["L",e,t];break;case"m":c[1]+=e,c[2]+=t;case"M":e=c[1],t=c[2],r=c[1],s=c[2],h=["M",e,t];break;case"c":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t,c[5]+=e,c[6]+=t;case"C":o=c[3],l=c[4],e=c[5],t=c[6],h=["C",c[1],c[2],o,l,e,t];break;case"s":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t;case"S":a==="C"?(o=2*e-o,l=2*t-l):(o=e,l=t),e=c[3],t=c[4],h=["C",o,l,c[1],c[2],e,t],o=h[3],l=h[4];break;case"q":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t;case"Q":o=c[1],l=c[2],e=c[3],t=c[4],h=["Q",o,l,e,t];break;case"t":c[1]+=e,c[2]+=t;case"T":a==="Q"?(o=2*e-o,l=2*t-l):(o=e,l=t),e=c[1],t=c[2],h=["Q",o,l,e,t];break;case"a":c[6]+=e,c[7]+=t;case"A":rE(e,t,c).forEach(p=>i.push(p)),e=c[6],t=c[7];break;case"z":case"Z":e=r,t=s,h=["Z"]}h?(i.push(h),a=h[0]):a=""}return i},fp=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),sx=(n,e,t,r,s,i,a,o)=>l=>{const u=l**3,c=(f=>3*f**2*(1-f))(l),h=(f=>3*f*(1-f)**2)(l),p=(f=>(1-f)**3)(l);return new Re(a*u+s*c+t*h+n*p,o*u+i*c+r*h+e*p)},ix=n=>n**2,ax=n=>2*n*(1-n),ox=n=>(1-n)**2,sE=(n,e,t,r,s,i,a,o)=>l=>{const u=ix(l),c=ax(l),h=ox(l),p=3*(h*(t-n)+c*(s-t)+u*(a-s)),f=3*(h*(r-e)+c*(i-r)+u*(o-i));return Math.atan2(f,p)},iE=(n,e,t,r,s,i)=>a=>{const o=ix(a),l=ax(a),u=ox(a);return new Re(s*o+t*l+n*u,i*o+r*l+e*u)},aE=(n,e,t,r,s,i)=>a=>{const o=1-a,l=2*(o*(t-n)+a*(s-t)),u=2*(o*(r-e)+a*(i-r));return Math.atan2(u,l)},Zy=(n,e,t)=>{let r=new Re(e,t),s=0;for(let i=1;i<=100;i+=1){const a=n(i/100);s+=fp(r.x,r.y,a.x,a.y),r=a}return s},oE=(n,e)=>{let t,r=0,s=0,i={x:n.x,y:n.y},a=Se({},i),o=.01,l=0;const u=n.iterator,c=n.angleFinder;for(;s<e&&o>1e-4;)a=u(r),l=r,t=fp(i.x,i.y,a.x,a.y),t+s>e?(r-=o,o/=2):(i=a,r+=o,s+=t);return Se(Se({},a),{},{angle:c(l)})},lx=n=>{let e,t,r=0,s=0,i=0,a=0,o=0;const l=[];for(const u of n){const c={x:s,y:i,command:u[0],length:0};switch(u[0]){case"M":t=c,t.x=a=s=u[1],t.y=o=i=u[2];break;case"L":t=c,t.length=fp(s,i,u[1],u[2]),s=u[1],i=u[2];break;case"C":e=sx(s,i,u[1],u[2],u[3],u[4],u[5],u[6]),t=c,t.iterator=e,t.angleFinder=sE(s,i,u[1],u[2],u[3],u[4],u[5],u[6]),t.length=Zy(e,s,i),s=u[5],i=u[6];break;case"Q":e=iE(s,i,u[1],u[2],u[3],u[4]),t=c,t.iterator=e,t.angleFinder=aE(s,i,u[1],u[2],u[3],u[4]),t.length=Zy(e,s,i),s=u[3],i=u[4];break;case"Z":t=c,t.destX=a,t.destY=o,t.length=fp(s,i,a,o),s=a,i=o}r+=t.length,l.push(t)}return l.push({length:r,x:s,y:i}),l},lE=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:lx(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const s=t[r],i=e/s.length,a=n[r];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return Se(Se({},new Re(s.x,s.y).lerp(new Re(s.destX,s.destY),i)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return Se(Se({},new Re(s.x,s.y).lerp(new Re(a[1],a[2]),i)),{},{angle:Math.atan2(a[2]-s.y,a[1]-s.x)});case"C":case"Q":return oE(s,e)}},cE=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),eb=new RegExp(ZM,"g"),uE=new RegExp(bl,"gi"),hE={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},dE=n=>{var e;const t=[],r=(e=n.match(cE))!==null&&e!==void 0?e:[];for(const s of r){const i=s[0];if(i==="z"||i==="Z"){t.push([i]);continue}const a=hE[i.toLowerCase()];let o=[];if(i==="a"||i==="A"){eb.lastIndex=0;for(let l=null;l=eb.exec(s);)o.push(...l.slice(1))}else o=s.match(uE)||[];for(let l=0;l<o.length;l+=a){const u=new Array(a),c=eE[i];u[0]=l>0&&c?c:i;for(let h=0;h<a;h++)u[h+1]=parseFloat(o[l+h]);t.push(u)}}return t},fE=(n,e)=>n.map(t=>t.map((r,s)=>s===0||e===void 0?r:xr(r,e)).join(" ")).join(" ");function L0(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[s,i]=r;return t.setProperty(s,i)}))}class pE extends F_{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),we(this,"upper",void 0),we(this,"container",void 0);const{el:s}=this.lower,i=this.createUpperCanvas();this.upper={el:i,ctx:i.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:t}),this.applyCanvasStyle(i,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const a=this.createContainerElement();a.classList.add(r),s.parentNode&&s.parentNode.replaceChild(a,s),a.append(s,i),this.container=a}createUpperCanvas(){const{el:e}=this.lower,t=Oi();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=ru().createElement("div");return e.setAttribute("data-fabric","wrapper"),L0(e,{position:"relative"}),Ty(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:s}=t;L0(e,Se(Se({},r),{},{"touch-action":s?"manipulation":bs})),Ty(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:s}=this.upper;R_(r,s,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),x0(this.upper.el,e),x0(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),t.removeChild(s),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),ea().dispose(this.upper.el),delete this.upper,delete this.container}}class Kp extends qv{constructor(){super(...arguments),we(this,"targets",[]),we(this,"_hoveredTargets",[]),we(this,"_objectsToRender",void 0),we(this,"_currentTransform",null),we(this,"_groupSelector",null),we(this,"contextTopDirty",!1)}static getDefaults(){return Se(Se({},super.getDefaults()),Kp.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new pE(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const s=this.targetFindTolerance,i=this.pixelFindContext;this.clearContext(i),i.save(),i.translate(-t+s,-r+s),i.transform(...this.viewportTransform);const a=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(i),e.selectionBackgroundColor=a,i.restore();const o=Math.round(s*this.getRetinaScaling());return bM(i,o,o,o)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),s=this._activeObject;return!!(!t||t&&s&&r.length>1&&r.indexOf(t)===-1&&s!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&s&&s!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let s;return t===Vp||t===_s||t===Zs||t===jh?s=this.centeredScaling||e.centeredScaling:t===Rv&&(s=this.centeredRotation||e.centeredRotation),s?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=Br:["mr","tr","br"].includes(t)&&(r.x=Zt),["tl","mt","tr"].includes(t)?r.y=_0:["bl","mb","br"].includes(t)&&(r.y=ys)),r}_setupCurrentTransform(e,t,r){var s;const i=t.group?Rc(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:a="",control:o}=t.getActiveControl()||{},l=r&&o?(s=o.getActionHandler(e,t,o))===null||s===void 0?void 0:s.bind(o):F8,u=((f,v,b,x)=>{if(!v||!f)return"drag";const w=x.controls[v];return w.getActionName(b,w,x)})(r,a,e,t),c=e[this.centeredKey],h=this._shouldCenterTransform(t,u,c)?{x:It,y:It}:this._getOriginFromCorner(t,a),p={target:t,action:u,actionHandler:l,actionPerformed:!1,corner:a,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:i.x-t.left,offsetY:i.y-t.top,originX:h.x,originY:h.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:Hr(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:c,original:Se(Se({},B_(t)),{},{originX:h.x,originY:h.y})};this._currentTransform=p,this.fire("before:transform",{e,transform:p})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:s,deltaY:i}=this._groupSelector,a=new Re(t,r).transform(this.viewportTransform),o=new Re(t+s,r+i).transform(this.viewportTransform),l=this.selectionLineWidth/2;let u=Math.min(a.x,o.x),c=Math.min(a.y,o.y),h=Math.max(a.x,o.x),p=Math.max(a.y,o.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(u,c,h-u,p-c)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,u+=l,c+=l,h-=l,p-=l,Vn.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(u,c,h-u,p-c))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,s=this.getActiveObjects();if(this.targets=[],r&&s.length>=1){if(r.findControl(t,S0(e))||s.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const i=this.targets;this.targets=[];const a=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&a&&a!==r?(this.targets=i,r):a}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const s=this.getZoom(),i=e.padding/s;if(i){const[a,o,l,u]=r,c=Math.atan2(o.y-a.y,o.x-a.x),h=La(c)*i,p=Da(c)*i,f=h+p,v=h-p;r=[new Re(a.x-v,a.y-f),new Re(o.x+f,o.y-v),new Re(l.x+v,l.y+f),new Re(u.x-f,u.y+v)]}return Tr.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Rc(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const s=e[r];if(this._checkTarget(s,t)){if(Ff(s)&&s.subTargetCheck){const i=this._searchPossibleTargets(s._objects,t);i&&this.targets.push(i)}return s}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&Ff(r)&&r.interactive&&this.targets[0]){const s=this.targets;for(let i=s.length-1;i>0;i--){const a=s[i];if(!Ff(a)||!a.interactive)return a}return s[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,s=r.getBoundingClientRect();let i=L8(e),a=s.width||0,o=s.height||0;a&&o||(ys in s&&_0 in s&&(o=Math.abs(s.top-s.bottom)),Br in s&&Zt in s&&(a=Math.abs(s.right-s.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,t||(i=Rc(i,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(i.x/=l,i.y/=l);const u=a===0||o===0?new Re(1,1):new Re(r.width/a,r.height/o);return i.multiply(u)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Oi(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return al(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,s=!1;const i=this.getActiveObjects(),a=[],o=[];e.forEach(l=>{i.includes(l)||(r=!0,l.fire("deselected",{e:t,target:l}),o.push(l))}),i.forEach(l=>{e.includes(l)||(r=!0,l.fire("selected",{e:t,target:l}),a.push(l))}),e.length>0&&i.length>0?(s=!0,r&&this.fire("selection:updated",{e:t,selected:a,deselected:o})):i.length>0?(s=!0,this.fire("selection:created",{e:t,selected:a})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:t,deselected:o})),s&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),s=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),s}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,al(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),al(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),s}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,s={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",s),r.fire(ap,s))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;al(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const s=this._realizeGroupTransformOnObject(e),i=super._toObject(e,t,r);return e.set(s),i}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&al(t)&&this._activeObject===t){const r=au(e,["angle","flipX","flipY",Zt,_s,Zs,nu,su,ys]);return M8(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const s=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(s)}}we(Kp,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class gE{constructor(e){we(this,"targets",[]),we(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),wc(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const mE=["target","oldTarget","fireCanvas","e"],Os={passive:!1},dc=(n,e)=>{const t=n.getViewportPoint(e),r=n.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},so=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},zs=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},vE={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class D0 extends Kp{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),we(this,"_isClick",void 0),we(this,"textEditingManager",new gE(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(so,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,s=this._getEventPrefix();e(j_(r),"resize",this._onResize),e(r,s+"down",this._onMouseDown),e(r,"".concat(s,"move"),this._onMouseMove,Os),e(r,"".concat(s,"out"),this._onMouseOut),e(r,"".concat(s,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"click",this._onClick),e(r,"dblclick",this._onClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,Os)}removeListeners(){this.addOrRemove(zs,"remove");const e=this._getEventPrefix(),t=_i(this.upperCanvasEl);zs(t,"".concat(e,"up"),this._onMouseUp),zs(t,"touchend",this._onTouchEnd,Os),zs(t,"".concat(e,"move"),this._onMouseMove,Os),zs(t,"touchmove",this._onMouseMove,Os),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=Se({e},dc(this,e));this.fire("mouse:out",Se(Se({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",Se({},r)),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",Se(Se({},r),{},{target:s})),s&&s.fire("mouseout",Se({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",Se({e},dc(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void so(this.upperCanvasEl,"drag",this._onDragProgress)}Py(e)}_renderDragEffects(e,t,r){let s=!1;const i=this._dropTarget;i&&i!==t&&i!==r&&(i.clearContextTop(),s=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const a=this.contextTop;a.save(),a.transform(...this.viewportTransform),t&&(a.save(),t.transform(a),t.renderDragSourceEffect(e),a.restore(),s=!0),r&&(a.save(),r.transform(a),r.renderDropTargetEffect(e),a.restore(),s=!0),a.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==bs,r=t?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};zs(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:s}=this.findDragTargets(e),i=this._dragSource,a={e,target:r,subTargets:s,dragSource:i,canDrop:!1,dropTarget:void 0};let o;this.fire(t,a),this._fireEnterLeaveEvents(r,a),r&&(r.canDrop(e)&&(o=r),r.fire(t,a));for(let l=0;l<s.length;l++){const u=s[l];u.canDrop(e)&&(o=u),u.fire(t,a)}this._renderDragEffects(e,i,o),this._dropTarget=o}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),s={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(t,s)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),s=this._basicEventHandler("drop:before",Se({e,target:t,subTargets:r,dragSource:this._dragSource},dc(this,e)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&Py(e),this._basicEventHandler("contextmenu",s),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,i=this._getEventPrefix(),a=_i(s);so(a,"touchend",this._onTouchEnd,Os),t&&so(a,"touchmove",this._onMouseMove,Os),zs(s,"".concat(i,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();zs(t,"".concat(r,"move"),this._onMouseMove,Os);const s=_i(t);so(s,"".concat(r,"up"),this._onMouseUp),so(s,"".concat(r,"move"),this._onMouseMove,Os)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=_i(this.upperCanvasEl);zs(r,"touchend",this._onTouchEnd,Os),zs(r,"touchmove",this._onMouseMove,Os),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{so(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const s=_i(this.upperCanvasEl);zs(s,"".concat(r,"up"),this._onMouseUp),zs(s,"".concat(r,"move"),this._onMouseMove,Os),so(t,"".concat(r,"move"),this._onMouseMove,Os)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,s=this._isClick,i=this._target,{button:a}=e;if(a)return(this.fireMiddleClick&&a===1||this.fireRightClick&&a===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let o,l,u=!1;if(r&&(this._finalizeCurrentTransform(e),u=r.actionPerformed),!s){const c=i===this._activeObject;this.handleSelection(e),u||(u=this._shouldRender(i)||!c&&i===this._activeObject)}if(i){const c=i.findControl(this.getViewportPoint(e),S0(e)),{key:h,control:p}=c||{};if(l=h,i.selectable&&i!==this._activeObject&&i.activeOn==="up")this.setActiveObject(i,e),u=!0;else if(p){const f=p.getMouseUpHandler(e,i,p);f&&(o=this.getScenePoint(e),f.call(p,e,r,o.x,o.y))}i.isMoving=!1}if(r&&(r.target!==i||r.corner!==l)){const c=r.target&&r.target.controls[r.corner],h=c&&c.getMouseUpHandler(e,r.target,c);o=o||this.getScenePoint(e),h&&h.call(c,e,r,o.x,o.y)}this._setCursorFromEvent(e,i),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,i&&(i.__corner=void 0),u?this.requestRenderAll():s||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:s=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let i=0;i<s.length;i++)s[i]!==r&&s[i].fire(e,t);return t}_handleEvent(e,t,r){const s=this._target,i=this.targets||[],a=Se(Se(Se({e,target:s,subTargets:i},dc(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),t==="down:before"||t==="down"?r:{});this.fire("mouse:".concat(t),a),s&&s.fire("mouse".concat(t),a);for(let o=0;o<i.length;o++)i[o]!==s&&i[o].fire("mouse".concat(t),a)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,r=!!t&&t===this._activeObject;const{button:s}=e;if(s)return(this.fireMiddleClick&&s===1||this.fireRightClick&&s===2)&&this._handleEvent(e,"down",{alreadySelected:r}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let i=this._shouldRender(t),a=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,a=!0,i=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const o=this.getScenePoint(e);this._groupSelector={x:o.x,y:o.y,deltaY:0,deltaX:0}}if(r=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const o=t.findControl(this.getViewportPoint(e),S0(e));if(t===this._activeObject&&(o||!a)){this._setupCurrentTransform(e,t,r);const l=o?o.control:void 0,u=this.getScenePoint(e),c=l&&l.getMouseDownHandler(e,t,l);c&&c.call(l,e,this._currentTransform,u.x,u.y)}}i&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:r}),i&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Rc(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,s=this._hoveredTargets,i=this.targets,a=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let o=0;o<a;o++)this.fireSyntheticInOutEvents("mouse",{e,target:i[o],oldTarget:s[o]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,s=this._hoveredTargets,i=this.targets,a=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("drag",Se(Se({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let o=0;o<a;o++)this.fireSyntheticInOutEvents("drag",Se(Se({},t),{},{target:i[o],oldTarget:s[o]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:s,fireCanvas:i,e:a}=t,o=kr(t,mE);const{targetIn:l,targetOut:u,canvasIn:c,canvasOut:h}=vE[e],p=s!==r;if(s&&p){const f=Se(Se({},o),{},{e:a,target:s,nextTarget:r},dc(this,a));i&&this.fire(h,f),s.fire(u,f)}if(r&&p){const f=Se(Se({},o),{},{e:a,target:r,previousTarget:s},dc(this,a));i&&this.fire(c,f),r.fire(l,f)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,s=r.target,i=s.group?Rc(t,void 0,s.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,i),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:s,actionHandler:i,target:a}=t,o=!!i&&i(e,t,r.x,r.y);o&&a.setCoords(),s==="drag"&&o&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||o}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const s=al(this._activeObject)?this._activeObject:null,i=(!s||t.group!==s)&&t.findControl(this.getViewportPoint(e));if(i){const a=i.control;this.setCursor(a.cursorStyleHandler(e,a,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(a=>{r=a.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,s=al(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||s)&&(s||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(s){const i=r.getObjects();if(t===r){const a=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(i,a)||this.searchPossibleTargets(this._objects,a))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(i,e)}else{r.isEditing&&r.exitEditing();const i=new(ht.getClass("ActiveSelection"))([],{canvas:this});i.multiSelectAdd(r,t),this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:s,deltaY:i}=this._groupSelector,a=new Re(t,r),o=a.add(new Re(s,i)),l=a.min(o),u=a.max(o).subtract(l),c=this.collectObjects({left:l.x,top:l.y,width:u.x,height:u.y},{includeIntersecting:!this.selectionFullyContained}),h=a.eq(o)?c[0]?[c[0]]:[]:c.length>1?c.filter(p=>!p.onSelect({e})).reverse():c;if(h.length===1)this.setActiveObject(h[0],e);else if(h.length>1){const p=ht.getClass("ActiveSelection");this.setActiveObject(new p(h,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const cx={x1:0,y1:0,x2:0,y2:0},yE=Se(Se({},cx),{},{r1:0,r2:0}),Cc=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,bE=/^(\d+\.\d+)%|(\d+)%$/;function ux(n){return n&&bE.test(n)}function hx(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(ux(n)?100:1):NaN;return Qc(0,Cc(t,e),1)}const wE=/\s*;\s*/,_E=/\s*:\s*/;function xE(n,e){let t,r;const s=n.getAttribute("style");if(s){const a=s.split(wE);a[a.length-1]===""&&a.pop();for(let o=a.length;o--;){const[l,u]=a[o].split(_E).map(c=>c.trim());l==="stop-color"?t=u:l==="stop-opacity"&&(r=u)}}const i=new Ns(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:hx(n.getAttribute("offset"),0),color:i.toRgb(),opacity:Cc(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*i.getAlpha()*e}}function SE(n,e){const t=[],r=n.getElementsByTagName("stop"),s=hx(e,1);for(let i=r.length;i--;)t.push(xE(r[i],s));return t}function dx(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function fx(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function ui(n,e){return n.getAttribute(e)}function kE(n,e){return function(t,r){let s,{width:i,height:a,gradientUnits:o}=r;return Object.keys(t).reduce((l,u)=>{const c=t[u];return c==="Infinity"?s=1:c==="-Infinity"?s=0:(s=typeof c=="string"?parseFloat(c):c,typeof c=="string"&&ux(c)&&(s*=.01,o==="pixels"&&(u!=="x1"&&u!=="x2"&&u!=="r2"||(s*=i),u!=="y1"&&u!=="y2"||(s*=a)))),l[u]=s,l},{})}(dx(n)==="linear"?function(t){return{x1:ui(t,"x1")||0,y1:ui(t,"y1")||0,x2:ui(t,"x2")||"100%",y2:ui(t,"y2")||0}}(n):function(t){return{x1:ui(t,"fx")||ui(t,"cx")||"50%",y1:ui(t,"fy")||ui(t,"cy")||"50%",r1:0,x2:ui(t,"cx")||"50%",y2:ui(t,"cy")||"50%",r2:ui(t,"r")||"50%"}}(n),Se(Se({},e),{},{gradientUnits:fx(n)}))}class rf{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:s={},colorStops:i=[],offsetX:a=0,offsetY:o=0,gradientTransform:l,id:u}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:Se(Se({},t==="radial"?yE:cx),s),colorStops:i,offsetX:a,offsetY:o,gradientTransform:l,id:u?"".concat(u,"_").concat(To()):To()})}addColorStop(e){for(const t in e){const r=new Ns(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return Se(Se({},au(this,e)),{},{type:this.type,coords:Se({},this.coords),colorStops:this.colorStops.map(t=>Se({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],s=this.gradientTransform?this.gradientTransform.concat():as.concat(),i=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",a=this.colorStops.map(h=>Se({},h)).sort((h,p)=>h.offset-p.offset);let o=-this.offsetX,l=-this.offsetY;var u;i==="objectBoundingBox"?(o/=e.width,l/=e.height):(o+=e.width/2,l+=e.height/2),(u=e)&&typeof u._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(o-=e.pathOffset.x,l-=e.pathOffset.y),s[4]-=o,s[5]-=l;const c=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(i,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Fh(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:h,y1:p,x2:f,y2:v}=this.coords;r.push("<linearGradient ",c,' x1="',h,'" y1="',p,'" x2="',f,'" y2="',v,`">
`)}else if(this.type==="radial"){const{x1:h,y1:p,x2:f,y2:v,r1:b,r2:x}=this.coords,w=b>x;r.push("<radialGradient ",c,' cx="',w?h:f,'" cy="',w?p:v,'" r="',w?b:x,'" fx="',w?f:h,'" fy="',w?v:p,`">
`),w&&(a.reverse(),a.forEach(T=>{T.offset=1-T.offset}));const k=Math.min(b,x);if(k>0){const T=k/Math.max(b,x);a.forEach(I=>{I.offset+=T*(1-I.offset)})}}return a.forEach(h=>{let{color:p,offset:f,opacity:v}=h;r.push("<stop ",'offset="',100*f+"%",'" style="stop-color:',p,v!==void 0?";stop-opacity: "+v:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:s,y2:i,r1:a,r2:o}=this.coords,l=this.type==="linear"?e.createLinearGradient(t,r,s,i):e.createRadialGradient(t,r,a,s,i,o);return this.colorStops.forEach(u=>{let{color:c,opacity:h,offset:p}=u;l.addColorStop(p,h!==void 0?new Ns(c).setAlpha(h).toRgba():c)}),l}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(Se(Se({},e),{},{colorStops:t?t.map(s=>Se({},s)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const s=fx(e),i=t._findCenterFromElement();return new this(Se({id:e.getAttribute("id")||void 0,type:dx(e),coords:kE(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:SE(e,r.opacity),gradientUnits:s,gradientTransform:T0(e.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:t.width/2-i.x,offsetY:t.height/2-i.y}:{offsetX:0,offsetY:0}))}}we(rf,"type","Gradient"),ht.setClass(rf,"gradient"),ht.setClass(rf,"linear"),ht.setClass(rf,"radial");const CE=["type","source","patternTransform"];class Pm{get type(){return"pattern"}set type(e){Ao("warn","Setting type has no effect",e)}constructor(e){we(this,"repeat","repeat"),we(this,"offsetX",0),we(this,"offsetY",0),we(this,"crossOrigin",""),this.id=To(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return Se(Se({},au(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:xr(this.offsetX,Xt.NUM_FRACTION_DIGITS),offsetY:xr(this.offsetY,Xt.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:s,repeat:i,id:a}=this,o=Cc(this.offsetX/t,0),l=Cc(this.offsetY/r,0),u=i==="repeat-y"||i==="no-repeat"?1+Math.abs(o||0):Cc(s.width/t,0),c=i==="repeat-x"||i==="no-repeat"?1+Math.abs(l||0):Cc(s.height/r,0);return['<pattern id="SVGID_'.concat(a,'" x="').concat(o,'" y="').concat(l,'" width="').concat(u,'" height="').concat(c,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:s,patternTransform:i}=e,a=kr(e,CE);const o=await Bf(s,Se(Se({},t),{},{crossOrigin:a.crossOrigin}));return new this(Se(Se({},a),{},{patternTransform:i&&i.slice(0),source:o}))}}we(Pm,"type","Pattern"),ht.setClass(Pm),ht.setClass(Pm,"pattern");const AE=["path","left","top"],TE=["d"];class ol extends Vn{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:s,top:i}=t,a=kr(t,AE);super(),Object.assign(this,ol.ownDefaults),this.setOptions(a),this._setPath(e||[],!0),typeof s=="number"&&this.set(Zt,s),typeof i=="number"&&this.set(ys,i)}_setPath(e,t){this.path=nE(Array.isArray(e)?e:dE(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new Re(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+t,s[2]+r);break;case"M":e.moveTo(s[1]+t,s[2]+r);break;case"C":e.bezierCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r,s[5]+t,s[6]+r);break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Se(Se({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=fE(this.path,Xt.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=Xt.NUM_FRACTION_DIGITS;return" translate(".concat(xr(-this.pathOffset.x,e),", ").concat(xr(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:s}=this._calcDimensions();this.set({width:t,height:r,pathOffset:s}),e&&this.setPositionByOrigin(s,It,It)}_calcBoundsFromPath(){const e=[];let t=0,r=0,s=0,i=0;for(const a of this.path)switch(a[0]){case"L":s=a[1],i=a[2],e.push({x:t,y:r},{x:s,y:i});break;case"M":s=a[1],i=a[2],t=s,r=i;break;case"C":e.push(...Qy(s,i,a[1],a[2],a[3],a[4],a[5],a[6])),s=a[5],i=a[6];break;case"Q":e.push(...Qy(s,i,a[1],a[2],a[1],a[2],a[3],a[4])),s=a[3],i=a[4];break;case"Z":s=t,i=r}return Aa(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return Se(Se({},e),{},{pathOffset:new Re(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const s=Ia(e,this.ATTRIBUTE_NAMES,r),{d:i}=s;return new this(i,Se(Se(Se({},kr(s,TE)),t),{},{left:void 0,top:void 0}))}}we(ol,"type","Path"),we(ol,"cacheProperties",[...Fa,"path","fillRule"]),we(ol,"ATTRIBUTE_NAMES",[...Fo,"d"]),ht.setClass(ol),ht.setSVGClass(ol);const PE=["left","top","radius"],px=["radius","startAngle","endAngle","counterClockwise"];class bi extends Vn{static getDefaults(){return Se(Se({},super.getDefaults()),bi.ownDefaults)}constructor(e){super(),Object.assign(this,bi.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Hr(this.startAngle),Hr(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(_s)}getRadiusY(){return this.get("radius")*this.get(Zs)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...px,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=Hr(this.startAngle),s=Hr(this.endAngle),i=La(r)*t,a=Da(r)*t,o=La(s)*t,l=Da(s)*t,u=e>180?1:0,c=this.counterClockwise?0:1;return['<path d="M '.concat(i," ").concat(a," A ").concat(t," ").concat(t," 0 ").concat(u," ").concat(c," ").concat(o," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const s=Ia(e,this.ATTRIBUTE_NAMES,r),{left:i=0,top:a=0,radius:o=0}=s;return new this(Se(Se({},kr(s,PE)),{},{radius:o,left:i-o,top:a-o}))}static fromObject(e){return super._fromObject(e)}}we(bi,"type","Circle"),we(bi,"cacheProperties",[...Fa,...px]),we(bi,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),we(bi,"ATTRIBUTE_NAMES",["cx","cy","r",...Fo]),ht.setClass(bi),ht.setSVGClass(bi);const OE=["x1","y1","x2","y2"],LE=["x1","y1","x2","y2"],M0=["x1","x2","y1","y2"];class mo extends Vn{constructor(){let[e,t,r,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,mo.ownDefaults),this.setOptions(i),this.x1=e,this.x2=r,this.y1=t,this.y2=s,this._setWidthHeight();const{left:a,top:o}=i;typeof a=="number"&&this.set(Zt,a),typeof o=="number"&&this.set(ys,o)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:s}=this;this.width=Math.abs(r-e),this.height=Math.abs(s-t);const{left:i,top:a,width:o,height:l}=Aa([{x:e,y:t},{x:r,y:s}]),u=new Re(i+o/2,a+l/2);this.setPositionByOrigin(u,It,It)}_set(e,t){return super._set(e,t),M0.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var s;Gs(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new Re((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Se(Se({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:s,width:i,height:a}=this,o=e<=t?-1:1,l=r<=s?-1:1;return{x1:o*i/2,x2:o*-i/2,y1:l*a/2,y2:l*-a/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(s,`" />
`)]}static async fromElement(e,t,r){const s=Ia(e,this.ATTRIBUTE_NAMES,r),{x1:i=0,y1:a=0,x2:o=0,y2:l=0}=s;return new this([i,a,o,l],kr(s,OE))}static fromObject(e){let{x1:t,y1:r,x2:s,y2:i}=e,a=kr(e,LE);return this._fromObject(Se(Se({},a),{},{points:[t,r,s,i]}),{extraParam:"points"})}}we(mo,"type","Line"),we(mo,"cacheProperties",[...Fa,...M0]),we(mo,"ATTRIBUTE_NAMES",Fo.concat(M0)),ht.setClass(mo),ht.setSVGClass(mo);class ul extends Vn{static getDefaults(){return Se(Se({},super.getDefaults()),ul.ownDefaults)}constructor(e){super(),Object.assign(this,ul.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}we(ul,"type","Triangle"),we(ul,"ownDefaults",{width:100,height:100}),ht.setClass(ul),ht.setSVGClass(ul);const gx=["rx","ry"];class wa extends Vn{static getDefaults(){return Se(Se({},super.getDefaults()),wa.ownDefaults)}constructor(e){super(),Object.assign(this,wa.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(_s)}getRy(){return this.get("ry")*this.get(Zs)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...gx,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,sp,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const s=Ia(e,this.ATTRIBUTE_NAMES,r);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function DE(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}we(wa,"type","Ellipse"),we(wa,"cacheProperties",[...Fa,...gx]),we(wa,"ownDefaults",{rx:0,ry:0}),we(wa,"ATTRIBUTE_NAMES",[...Fo,"cx","cy","rx","ry"]),ht.setClass(wa),ht.setSVGClass(wa);const ME=["left","top"],mx={exactBoundingBox:!1};class yi extends Vn{static getDefaults(){return Se(Se({},super.getDefaults()),yi.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),we(this,"strokeDiff",void 0),Object.assign(this,yi.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:s}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(Zt,r),typeof s=="number"&&this.set(ys,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return _M(this.points,e,this.isOpen())}_calcDimensions(e){e=Se({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(u=>u.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new Re,strokeOffset:new Re,strokeDiff:new Re};const r=Aa(t),s=zp(Se(Se({},e),{},{scaleX:1,scaleY:1})),i=Aa(this.points.map(u=>gs(u,s,!0))),a=new Re(this.scaleX,this.scaleY);let o=r.left+r.width/2,l=r.top+r.height/2;return this.exactBoundingBox&&(o-=l*Math.tan(Hr(this.skewX)),l-=o*Math.tan(Hr(this.skewY))),Se(Se({},r),{},{pathOffset:new Re(o,l),strokeOffset:new Re(i.left,i.top).subtract(new Re(r.left,r.top)).multiply(a),strokeDiff:new Re(r.width,r.height).subtract(new Re(i.width,i.height)).multiply(a)})}_findCenterFromElement(){const e=Aa(this.points);return new Re(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:s,height:i,pathOffset:a,strokeOffset:o,strokeDiff:l}=this._calcDimensions();this.set({width:s,height:i,pathOffset:a,strokeOffset:o,strokeDiff:l}),e&&this.setPositionByOrigin(new Re(t+s/2,r+i/2),It,It)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new Re(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let a;if(Object.keys(e).some(o=>this.strokeUniform||this.constructor.layoutProperties.includes(o))){var t,r;const{width:o,height:l}=this._calcDimensions(e);a=new Re((t=e.width)!==null&&t!==void 0?t:o,(r=e.height)!==null&&r!==void 0?r:l)}else{var s,i;a=new Re((s=e.width)!==null&&s!==void 0?s:this.width,(i=e.height)!==null&&i!==void 0?i:this.height)}return a.multiply(new Re(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,s=super._set(e,t);return this.exactBoundingBox&&r&&((e===_s||e===Zs)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Se(Se({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:s}=t;return{x:r,y:s}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,s=Xt.NUM_FRACTION_DIGITS;for(let i=0,a=this.points.length;i<a;i++)e.push(xr(this.points[i].x-t,s),",",xr(this.points[i].y-r,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,s=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-s);for(let i=0;i<t;i++){const a=this.points[i];e.lineTo(a.x-r,a.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(DE(e.getAttribute("points")),Se(Se({},kr(Ia(e,this.ATTRIBUTE_NAMES,r),ME)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}we(yi,"ownDefaults",mx),we(yi,"type","Polyline"),we(yi,"layoutProperties",[nu,su,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),we(yi,"cacheProperties",[...Fa,"points"]),we(yi,"ATTRIBUTE_NAMES",[...Fo]),ht.setClass(yi),ht.setSVGClass(yi);class nf extends yi{isOpen(){return!1}}we(nf,"ownDefaults",mx),we(nf,"type","Polygon"),ht.setClass(nf),ht.setSVGClass(nf);const vx=["fontSize","fontWeight","fontFamily","fontStyle"],yx=["underline","overline","linethrough"],bx=[...vx,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],wx=[...bx,...yx,"textBackgroundColor","direction"],EE=[...vx,...yx,ws,"strokeWidth",an,"deltaY","textBackgroundColor"],NE={_reNewline:jv,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Zt,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Zt,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},Wi="justify",pp="justify-left",vh="justify-right",yh="justify-center";class _x extends Vn{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const s in t[r])for(const i in t[r][s])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const s in r)for(const i in r[s])if(r[s][i][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,s,i=0,a=!0,o=0;for(const l in t){r=0;for(const u in t[l]){const c=t[l][u]||{};i++,c[e]!==void 0?(s?c[e]!==s&&(a=!1):s=c[e],c[e]===this[e]&&delete c[e]):a=!1,Object.keys(c).length!==0?r++:delete t[l][u]}r===0&&delete t[l]}for(let l=0;l<this._textLines.length;l++)o+=this._textLines[l].length;a&&i===o&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,s,i;for(s in t){for(i in r=t[s],r)delete r[i][e],Object.keys(r[i]).length===0&&delete r[i];Object.keys(r).length===0&&delete t[s]}}_extendStyles(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const i=$v(Se(Se({},this._getStyleDeclaration(r,s)),t),a=>a!==void 0);this._setStyleDeclaration(r,s,i)}getSelectionStyles(e,t,r){const s=[];for(let i=e;i<(t||e);i++)s.push(this.getStyleAtPosition(i,r));return s}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,s):this._getStyleDeclaration(r,s)}setSelectionStyles(e,t,r){for(let s=t;s<(r||t);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const s=this.styles&&this.styles[e];return s&&(r=s[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return Se(Se({},au(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}we(_x,"_styleProperties",EE);const jE=/  +/g,RE=/"/g;function Om(n,e,t,r,s){return"		".concat(function(i,a){let{left:o,top:l,width:u,height:c}=a,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Xt.NUM_FRACTION_DIGITS;const p=Ih(an,i,!1),[f,v,b,x]=[o,l,u,c].map(w=>xr(w,h));return"<rect ".concat(p,' x="').concat(f,'" y="').concat(v,'" width="').concat(b,'" height="').concat(x,'"></rect>')}(n,{left:e,top:t,width:r,height:s}),`
`)}const FE=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Lm;class Qn extends _x{static getDefaults(){return Se(Se({},super.getDefaults()),Qn.ownDefaults)}constructor(e,t){super(),we(this,"__charBounds",[]),Object.assign(this,Qn.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=lx(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Wi)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,s,i,a,o;for(let l=0,u=this._textLines.length;l<u;l++)if((this.textAlign===Wi||l!==u-1&&!this.isEndOfWrapping(l))&&(s=0,i=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(o=this.textLines[l].match(this._reSpacesAndTabs)))){r=o.length,e=(this.width-t)/r;for(let c=0;c<=i.length;c++)a=this.__charBounds[l][c],this._reSpaceAndTab.test(i[c])?(a.width+=e,a.kernedWidth+=e,a.left+=s,s+=e):a.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<r.length;s++){if(e<=r[s].length)return{lineIndex:s,charIndex:e};e-=r[s].length+this.missingNewlineOffset(s,t)}return{lineIndex:s-1,charIndex:r[s-1].length<e?r[s-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===ws?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case It:e.textBaseline="middle";break;case"ascender":e.textBaseline=ys;break;case"descender":e.textBaseline=_0}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const s=this.getLineWidth(t);s>e&&(e=s)}return e}_renderTextLine(e,t,r,s,i,a){this._renderChars(e,t,r,s,i,a)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let s=this._getTopOffset();for(let i=0,a=this._textLines.length;i<a;i++){const o=this.getHeightOfLine(i);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",i)){s+=o;continue}const l=this._textLines[i].length,u=this._getLineLeftOffset(i);let c,h,p=0,f=0,v=this.getValueOfPropertyAt(i,0,"textBackgroundColor");for(let b=0;b<l;b++){const x=this.__charBounds[i][b];h=this.getValueOfPropertyAt(i,b,"textBackgroundColor"),this.path?(e.save(),e.translate(x.renderLeft,x.renderTop),e.rotate(x.angle),e.fillStyle=h,h&&e.fillRect(-x.width/2,-o/this.lineHeight*(1-this._fontSizeFraction),x.width,o/this.lineHeight),e.restore()):h!==v?(c=r+u+f,this.direction==="rtl"&&(c=this.width-c-p),e.fillStyle=v,v&&e.fillRect(c,s,p,o/this.lineHeight),f=x.left,p=x.width,v=h):p+=x.kernedWidth}h&&!this.path&&(c=r+u+f,this.direction==="rtl"&&(c=this.width-c-p),e.fillStyle=h,e.fillRect(c,s,p,o/this.lineHeight)),s+=o}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,s){const i=gh.getFontCache(t),a=this._getFontDeclaration(t),o=r+e,l=r&&a===this._getFontDeclaration(s),u=t.fontSize/this.CACHE_FONT_SIZE;let c,h,p,f;if(r&&i[r]!==void 0&&(p=i[r]),i[e]!==void 0&&(f=c=i[e]),l&&i[o]!==void 0&&(h=i[o],f=h-p),c===void 0||p===void 0||h===void 0){const v=function(){return Lm||(Lm=ei({width:0,height:0}).getContext("2d")),Lm}();this._setTextStyles(v,t,!0),c===void 0&&(f=c=v.measureText(e).width,i[e]=c),p===void 0&&l&&r&&(p=v.measureText(r).width,i[r]=p),l&&h===void 0&&(h=v.measureText(o).width,i[o]=h,f=h-p)}return{width:c*u,kernedWidth:f*u}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,s=0;const i=this.pathSide===Br,a=this.path,o=this._textLines[e],l=o.length,u=new Array(l);this.__charBounds[e]=u;for(let c=0;c<l;c++){const h=o[c];r=this._getGraphemeBox(h,e,c,t),u[c]=r,s+=r.kernedWidth,t=h}if(u[l]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},a&&a.segmentsInfo){let c=0;const h=a.segmentsInfo[a.segmentsInfo.length-1].length;switch(this.textAlign){case Zt:c=i?h-s:0;break;case It:c=(h-s)/2;break;case Br:c=i?0:h-s}c+=this.pathStartOffset*(i?-1:1);for(let p=i?l-1:0;i?p>=0:p<l;i?p--:p++)r=u[p],c>h?c%=h:c<0&&(c+=h),this._setGraphemeOnPath(c,r),c+=r.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,s=this.path,i=lE(s.path,r,s.segmentsInfo);t.renderLeft=i.x-s.pathOffset.x,t.renderTop=i.y-s.pathOffset.y,t.angle=i.angle+(this.pathSide===Br?Math.PI:0)}_getGraphemeBox(e,t,r,s,i){const a=this.getCompleteStyleDeclaration(t,r),o=s?this.getCompleteStyleDeclaration(t,r-1):{},l=this._measureChar(e,a,s,o);let u,c=l.kernedWidth,h=l.width;this.charSpacing!==0&&(u=this._getWidthOfCharSpacing(),h+=u,c+=u);const p={width:h,left:0,height:a.fontSize,kernedWidth:c,deltaY:a.deltaY};if(r>0&&!i){const f=this.__charBounds[t][r-1];p.left=f.left+f.width+l.kernedWidth-l.width}return p}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,s=this._textLines[e].length;r<s;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,s=this._textLines.length;r<s;r++)e=this.getHeightOfLine(r),t+=r===s-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const s=this._getLeftOffset(),i=this._getTopOffset();for(let a=0,o=this._textLines.length;a<o;a++){const l=this.getHeightOfLine(a),u=l/this.lineHeight,c=this._getLineLeftOffset(a);this._renderTextLine(t,e,this._textLines[a],s+c,i+r+u,a),r+=l}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(an))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,s,i,a){const o=this.getHeightOfLine(a),l=this.textAlign.includes(Wi),u=this.path,c=!l&&this.charSpacing===0&&this.isEmptyStyles(a)&&!u,h=this.direction==="ltr",p=this.direction==="ltr"?1:-1,f=t.direction;let v,b,x,w,k,T="",I=0;if(t.save(),f!==this.direction&&(t.canvas.setAttribute("dir",h?"ltr":"rtl"),t.direction=h?"ltr":"rtl",t.textAlign=h?Zt:Br),i-=o*this._fontSizeFraction/this.lineHeight,c)return this._renderChar(e,t,a,0,r.join(""),s,i),void t.restore();for(let Y=0,Q=r.length-1;Y<=Q;Y++)w=Y===Q||this.charSpacing||u,T+=r[Y],x=this.__charBounds[a][Y],I===0?(s+=p*(x.kernedWidth-x.width),I+=x.width):I+=x.kernedWidth,l&&!w&&this._reSpaceAndTab.test(r[Y])&&(w=!0),w||(v=v||this.getCompleteStyleDeclaration(a,Y),b=this.getCompleteStyleDeclaration(a,Y+1),w=Xv(v,b,!1)),w&&(u?(t.save(),t.translate(x.renderLeft,x.renderTop),t.rotate(x.angle),this._renderChar(e,t,a,Y,T,-I/2,0),t.restore()):(k=s,this._renderChar(e,t,a,Y,T,k,i)),T="",v=b,s+=p*I,I=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,s=ei({width:t,height:r}),i=s.getContext("2d");return s.width=t,s.height=r,i.beginPath(),i.moveTo(0,0),i.lineTo(t,0),i.lineTo(t,r),i.lineTo(0,r),i.closePath(),i.translate(t/2,r/2),i.fillStyle=e.toLive(i),this._applyPatternGradientTransform(i,e),i.fill(),i.createPattern(s,"no-repeat")}handleFiller(e,t,r){let s,i;return Gs(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(s=-this.width/2,i=-this.height/2,e.translate(s,i),e[t]=this._applyPatternGradientTransformText(r),{offsetX:s,offsetY:i}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:s}=t;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,s,i,a,o){const l=this._getStyleDeclaration(r,s),u=this.getCompleteStyleDeclaration(r,s),c=e==="fillText"&&u.fill,h=e==="strokeText"&&u.stroke&&u.strokeWidth;if(h||c){if(t.save(),t.font=this._getFontDeclaration(u),l.textBackgroundColor&&this._removeShadow(t),l.deltaY&&(o+=l.deltaY),c){const p=this._setFillStyles(t,u);t.fillText(i,a-p.offsetX,o-p.offsetY)}if(h){const p=this._setStrokeStyles(t,u);t.strokeText(i,a-p.offsetX,o-p.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const s=this.get2DCursorLocation(e,!0),i=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),a=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),o={fontSize:i*r.size,deltaY:a+i*r.baseline};this.setSelectionStyles(o,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,s=this.textAlign,i=this.direction,a=this.isEndOfWrapping(e);let o=0;return s===Wi||s===yh&&!a||s===vh&&!a||s===pp&&!a?0:(s===It&&(o=r/2),s===Br&&(o=r),s===yh&&(o=r/2),s===vh&&(o=r),i==="rtl"&&(s===Br||s===Wi||s===vh?o=0:s===Zt||s===pp?o=-r:s!==It&&s!==yh||(o=-r/2)),o)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var s;return(s=this._getStyleDeclaration(e,t)[r])!==null&&s!==void 0?s:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const s=this._getLeftOffset(),i=this.path,a=this._getWidthOfCharSpacing(),o=this.offsets[t];for(let l=0,u=this._textLines.length;l<u;l++){const c=this.getHeightOfLine(l);if(!this[t]&&!this.styleHas(t,l)){r+=c;continue}const h=this._textLines[l],p=c/this.lineHeight,f=this._getLineLeftOffset(l);let v,b,x=0,w=0,k=this.getValueOfPropertyAt(l,0,t),T=this.getValueOfPropertyAt(l,0,an);const I=r+p*(1-this._fontSizeFraction);let Y=this.getHeightOfChar(l,0),Q=this.getValueOfPropertyAt(l,0,"deltaY");for(let j=0,U=h.length;j<U;j++){const K=this.__charBounds[l][j];v=this.getValueOfPropertyAt(l,j,t),b=this.getValueOfPropertyAt(l,j,an);const D=this.getHeightOfChar(l,j),O=this.getValueOfPropertyAt(l,j,"deltaY");if(i&&v&&b)e.save(),e.fillStyle=T,e.translate(K.renderLeft,K.renderTop),e.rotate(K.angle),e.fillRect(-K.kernedWidth/2,o*D+O,K.kernedWidth,this.fontSize/15),e.restore();else if((v!==k||b!==T||D!==Y||O!==Q)&&w>0){let J=s+f+x;this.direction==="rtl"&&(J=this.width-J-w),k&&T&&(e.fillStyle=T,e.fillRect(J,I+o*Y+Q,w,this.fontSize/15)),x=K.left,w=K.width,k=v,T=b,Y=D,Q=O}else w+=K.kernedWidth}let H=s+f+x;this.direction==="rtl"&&(H=this.width-H-w),e.fillStyle=b,v&&b&&e.fillRect(H,I+o*Y+Q,w-a,this.fontSize/15),r+=c}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;const a=e.includes("'")||e.includes('"')||e.includes(",")||Qn.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(i?this.CACHE_FONT_SIZE:s,"px"),a].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return Gv(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),s=[`
`];let i=[];for(let a=0;a<t.length;a++)r[a]=this.graphemeSplit(t[a]),i=i.concat(r[a],s);return i.pop(),{_unwrappedLines:r,lines:t,graphemeText:i,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Se(Se({},super.toObject([...wx,...e])),{},{styles:kM(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let s=!1,i=!1;if(typeof e=="object")for(const a in e)a==="path"&&this.setPathInfo(),s=s||r.includes(a),i=i||a==="path";else s=r.includes(e),i=e==="path";return i&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const s=Ia(e,Qn.ATTRIBUTE_NAMES,r),i=Se(Se({},t),s),{textAnchor:a=Zt,textDecoration:o="",dx:l=0,dy:u=0,top:c=0,left:h=0,fontSize:p=Nv,strokeWidth:f=1}=i,v=kr(i,FE),b=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),Se({left:h+l,top:c+u,underline:o.includes("underline"),overline:o.includes("overline"),linethrough:o.includes("line-through"),strokeWidth:0,fontSize:p},v)),x=b.getScaledHeight()/b.height,w=((b.height+b.strokeWidth)*b.lineHeight-b.height)*x,k=b.getScaledHeight()+w;let T=0;return a===It&&(T=b.getScaledWidth()/2),a===Br&&(T=b.getScaledWidth()),b.set({left:b.left-T,top:b.top-(k-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:f}),b}static fromObject(e){return this._fromObject(Se(Se({},e),{},{styles:CM(e.styles||{},e.text)}),{extraParam:"text"})}}we(Qn,"textLayoutProperties",bx),we(Qn,"cacheProperties",[...Fa,...wx]),we(Qn,"ownDefaults",NE),we(Qn,"type","Text"),we(Qn,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),we(Qn,"ATTRIBUTE_NAMES",Fo.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),Z_(Qn,[class extends z_{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:n,withShadow:!0,additionalTransform:Fh(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(RE,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],r=[];let s,i=n;this.backgroundColor&&r.push(...Om(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let a=0,o=this._textLines.length;a<o;a++)s=this._getLineLeftOffset(a),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",a))&&this._setSVGTextLineBg(r,a,e+s,i),this._setSVGTextLineText(t,a,e+s,i),i+=this.getHeightOfLine(a);return{textSpans:t,textBgRects:r}}_createTextCharSpan(n,e,t,r,s){const i=Xt.NUM_FRACTION_DIGITS,a=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(jE)),o=a?'style="'.concat(a,'"'):"",l=e.deltaY,u=l?' dy="'.concat(xr(l,i),'" '):"",{angle:c,renderLeft:h,renderTop:p,width:f}=s;let v="";if(h!==void 0){const b=f/2;c&&(v=' rotate="'.concat(xr(Ma(c),i),'"'));const x=iu({angle:Ma(c)});x[4]=h,x[5]=p;const w=new Re(-b,0).transform(x);t=w.x,r=w.y}return'<tspan x="'.concat(xr(t,i),'" y="').concat(xr(r,i),'" ').concat(u).concat(v).concat(o,">").concat(xM(n),"</tspan>")}_setSVGTextLineText(n,e,t,r){const s=this.getHeightOfLine(e),i=this.textAlign.includes(Wi),a=this._textLines[e];let o,l,u,c,h,p="",f=0;r+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let v=0,b=a.length-1;v<=b;v++)h=v===b||this.charSpacing||this.path,p+=a[v],u=this.__charBounds[e][v],f===0?(t+=u.kernedWidth-u.width,f+=u.width):f+=u.kernedWidth,i&&!h&&this._reSpaceAndTab.test(a[v])&&(h=!0),h||(o=o||this.getCompleteStyleDeclaration(e,v),l=this.getCompleteStyleDeclaration(e,v+1),h=Xv(o,l,!0)),h&&(c=this._getStyleDeclaration(e,v),n.push(this._createTextCharSpan(p,c,t,r,u)),p="",o=l,this.direction==="rtl"?t-=f:t+=f,f=0)}_setSVGTextLineBg(n,e,t,r){const s=this._textLines[e],i=this.getHeightOfLine(e)/this.lineHeight;let a,o=0,l=0,u=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let c=0;c<s.length;c++){const{left:h,width:p,kernedWidth:f}=this.__charBounds[e][c];a=this.getValueOfPropertyAt(e,c,"textBackgroundColor"),a!==u?(u&&n.push(...Om(u,t+l,r,o,i)),l=h,o=p,u=a):o+=f}a&&n.push(...Om(u,t+l,r,o,i))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:r,stroke:s,fill:i,fontSize:a,fontStyle:o,fontWeight:l,deltaY:u}=n,c=this.getSvgTextDecoration(n);return[s?Ih(ws,s):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",a?"font-size: ".concat(a,"px; "):"",o?"font-style: ".concat(o,"; "):"",l?"font-weight: ".concat(l,"; "):"",c&&"text-decoration: ".concat(c,"; "),i?Ih(an,i):"",u?"baseline-shift: ".concat(-u,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),ht.setClass(Qn),ht.setSVGClass(Qn);class IE{constructor(e){we(this,"target",void 0),we(this,"__mouseDownInPlace",!1),we(this,"__dragStartFired",!1),we(this,"__isDraggingOver",!1),we(this,"__dragStartSelection",void 0),we(this,"__dragImageDisposer",void 0),we(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:s,selectionEnd:i}=t;const a=this.target,o=a.canvas,l=new Re(a.flipX?-1:1,a.flipY?-1:1),u=a._getCursorBoundaries(s),c=new Re(u.left+u.leftOffset,u.top+u.topOffset).multiply(l).transform(a.calcTransformMatrix()),h=o.getScenePoint(e).subtract(c),p=a.getCanvasRetinaScaling(),f=a.getBoundingRect(),v=c.subtract(new Re(f.left,f.top)),b=o.viewportTransform,x=v.add(h).transform(b,!0),w=a.backgroundColor,k=Wv(a.styles);a.backgroundColor="";const T={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};a.setSelectionStyles(T,0,s),a.setSelectionStyles(T,i,a.text.length),a.dirty=!0;const I=a.toCanvasElement({enableRetinaScaling:o.enableRetinaScaling,viewportTransform:!0});a.backgroundColor=w,a.styles=k,a.dirty=!0,L0(I,{position:"fixed",left:"".concat(-I.width,"px"),border:bs,width:"".concat(I.width/p,"px"),height:"".concat(I.height/p,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{I.remove()},_i(e.target||this.target.hiddenTextarea).body.appendChild(I),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(I,x.x,x.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},i=t._text.slice(s.selectionStart,s.selectionEnd).join(""),a=Se({text:t.text,value:i},s);e.dataTransfer.setData("text/plain",i),e.dataTransfer.setData("application/fabric",JSON.stringify({value:i,styles:t.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,a)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,s=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let i=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(i&&!s){const a=this.target,o=a.canvas;let l=a.getSelectionStartFromPointer(r);const{styles:u}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},c=i[Math.max(0,i.length-1)],h=0;if(this.__dragStartSelection){const p=this.__dragStartSelection.selectionStart,f=this.__dragStartSelection.selectionEnd;l>p&&l<=f?l=p:l>f&&(l-=f-p),a.removeChars(p,f),delete this.__dragStartSelection}a._reNewline.test(c)&&(a._reNewline.test(a._text[l])||l===a._text.length)&&(i=i.trimEnd()),e.didDrop=!0,e.dropTarget=a,a.insertChars(i,u,l),o.setActiveObject(a),a.enterEditing(r),a.selectionStart=Math.min(l+h,a._text.length),a.selectionEnd=Math.min(a.selectionStart+i.length,a._text.length),a.hiddenTextarea.value=a.text,a._updateTextarea(),a.hiddenTextarea.focus(),a.fire(ip,{index:l+h,action:"drop"}),o.fire("text:changed",{target:a}),o.contextTopDirty=!0,o.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const s=this.target,i=this.target.canvas,{selectionStart:a,selectionEnd:o}=this.__dragStartSelection,l=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||bs;l===bs?(s.selectionStart=a,s.selectionEnd=o,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),l==="move"&&(s.removeChars(a,o),s.selectionStart=s.selectionEnd=a,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(ip,{index:a,action:"dragend"}),i.fire("text:changed",{target:s}),i.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const tb=/[ \n\.,;!\?\-]/;class BE extends Qn{constructor(){super(...arguments),we(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:s,onComplete:i}=e;return G_({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:s,onComplete:i,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:a=>{this._currentCursorOpacity=a,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let s=e>0&&this._reSpace.test(r[e])&&(t===-1||!jv.test(r[e-1]))?e-1:e,i=r[s];for(;s>0&&s<r.length&&!tb.test(i);)s+=t,i=r[s];return t===-1&&tb.test(i)&&s++,s}selectWord(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const r=this.searchWordBoundary(e,-1),s=Math.max(r,this.searchWordBoundary(e,1));this.selectionStart=r,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const r=this.findLineBoundaryLeft(e),s=this.findLineBoundaryRight(e);this.selectionStart=r,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;_i(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),s=this.selectionStart,i=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&s!==i||s!==r&&i!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===i||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const s=r.slice(0,e),i=this.graphemeSplit(s).length;if(e===t)return{selectionStart:i,selectionEnd:i};const a=r.slice(e,t);return{selectionStart:i,selectionEnd:i+this.graphemeSplit(a).length}}fromGraphemeToStringSelection(e,t,r){const s=r.slice(0,e).join("").length;return e===t?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),s=r.lineIndex,i=r.charIndex,a=this.getValueOfPropertyAt(s,i,"fontSize")*this.lineHeight,o=t.leftOffset,l=this.getCanvasRetinaScaling(),u=this.canvas.upperCanvasEl,c=u.width/l,h=u.height/l,p=c-a,f=h-a,v=new Re(t.left+o,t.top+t.topOffset+a).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new Re(u.clientWidth/c,u.clientHeight/h));return v.x<0&&(v.x=0),v.x>p&&(v.x=p),v.y<0&&(v.y=0),v.y>f&&(v.y=f),v.x+=this.canvas._offset.left,v.y+=this.canvas._offset.top,{left:"".concat(v.x,"px"),top:"".concat(v.y,"px"),fontSize:"".concat(a,"px"),charHeight:a}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(ap),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:i,charIndex:a}=this.get2DCursorLocation(t,!0);if(r!==i){if(this.styles[r])for(let o=s;o<this._unwrappedTextLines[r].length;o++)delete this.styles[r][o];if(this.styles[i])for(let o=a;o<this._unwrappedTextLines[i].length;o++){const l=this.styles[i][o];l&&(this.styles[r]||(this.styles[r]={}),this.styles[r][s+o-a]=l)}for(let o=r+1;o<=i;o++)delete this.styles[o];this.shiftLineStyles(i,r-i)}else if(this.styles[r]){const o=this.styles[r],l=a-s;for(let u=s;u<a;u++)delete o[u];for(const u in this.styles[r]){const c=parseInt(u,10);c>=a&&(o[c-l]=o[u],delete o[u])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const s in this.styles){const i=parseInt(s,10);i>e&&(this.styles[i+t]=r[i],r[i-t]||delete this.styles[i])}}insertNewlineStyleObject(e,t,r,s){const i={},a=this._unwrappedTextLines[e].length,o=a===t;let l=!1;r||(r=1),this.shiftLineStyles(e,r);const u=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const h in this.styles[e]){const p=parseInt(h,10);p>=t&&(l=!0,i[p-t]=this.styles[e][h],o&&t===0||delete this.styles[e][h])}let c=!1;for(l&&!o&&(this.styles[e+r]=i,c=!0),(c||a>t)&&r--;r>0;)s&&s[r-1]?this.styles[e+r]={0:Se({},s[r-1])}:u?this.styles[e+r]={0:Se({},u)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,s){this.styles||(this.styles={});const i=this.styles[e],a=i?Se({},i):{};r||(r=1);for(const l in a){const u=parseInt(l,10);u>=t&&(i[u+r]=a[u],a[u-r]||delete i[u])}if(this._forceClearCache=!0,s){for(;r--;)Object.keys(s[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=Se({},s[r]));return}if(!i)return;const o=i[t?t-1:1];for(;o&&r--;)this.styles[e][t+r]=Se({},o)}insertNewStyleBlock(e,t,r){const s=this.get2DCursorLocation(t,!0),i=[0];let a,o=0;for(let l=0;l<e.length;l++)e[l]===`
`?(o++,i[o]=0):i[o]++;for(i[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,i[0],r),r=r&&r.slice(i[0]+1)),o&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+i[0],o),a=1;a<o;a++)i[a]>0?this.insertCharStyleObject(s.lineIndex+a,0,i[a],r):r&&this.styles[s.lineIndex+a]&&r[0]&&(this.styles[s.lineIndex+a][0]=r[0]),r=r&&r.slice(i[a]+1);i[a]>0&&this.insertCharStyleObject(s.lineIndex+a,0,i[a],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;s>r&&this.removeStyleFromTo(r,s);const i=this.graphemeSplit(e);this.insertNewStyleBlock(i,r,t),this._text=[...this._text.slice(0,r),...i,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=Zt:this._selectionDirection===Br&&(this._selectionDirection=Zt,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===Br?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=Br:this._selectionDirection===Zt&&(this._selectionDirection=Br,this.selectionStart=t),this.selectionEnd=r)}}class $E extends BE{initHiddenTextarea(){const e=this.canvas&&_i(this.canvas.getElement())||ru(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(a=>{let[o,l]=a;return t.setAttribute(o,l)});const{top:r,left:s,fontSize:i}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(i,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(a=>{let[o,l]=a;return t.addEventListener(o,this[l].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:r,selectionStart:s,selectionEnd:i}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const a=()=>{this.updateFromTextArea(),this.fire(ip),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void a();const o=this._splitTextIntoLines(r).graphemeText,l=this._text.length,u=o.length,c=this.selectionStart,h=this.selectionEnd,p=c!==h;let f,v,b,x,w=u-l;const k=this.fromStringToGraphemeSelection(s,i,r),T=c>k.selectionStart;p?(v=this._text.slice(c,h),w+=h-c):u<l&&(v=T?this._text.slice(h+w,h):this._text.slice(c,c-w));const I=o.slice(k.selectionEnd-w,k.selectionEnd);if(v&&v.length&&(I.length&&(f=this.getSelectionStyles(c,c+1,!1),f=I.map(()=>f[0])),p?(b=c,x=h):T?(b=h-v.length,x=h):(b=h,x=h+v.length),this.removeStyleFromTo(b,x)),I.length){const{copyPasteData:Y}=ea();t&&I.join("")===Y.copiedText&&!Xt.disableStyleCopyPaste&&(f=Y.copiedTextStyle),this.insertNewStyleBlock(I,c,f)}a()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:s}=t;this.compositionStart=r,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=ea();e.copiedText=this.getSelectedText(),Xt.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,s=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],s+=r.left+r.width),s}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),i=s.lineIndex;if(i===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const a=s.charIndex,o=this._getWidthBeforeCursor(i,a),l=this._getIndexOnLine(i+1,o);return this._textLines[i].slice(a).length+l+1+this.missingNewlineOffset(i)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),i=s.lineIndex;if(i===0||e.metaKey||e.keyCode===33)return-r;const a=s.charIndex,o=this._getWidthBeforeCursor(i,a),l=this._getIndexOnLine(i-1,o),u=this._textLines[i].slice(0,a),c=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+l-u.length+(1-c)}_getIndexOnLine(e,t){const r=this._textLines[e];let s,i,a=this._getLineLeftOffset(e),o=0;for(let l=0,u=r.length;l<u;l++)if(s=this.__charBounds[e][l].width,a+=s,a>t){i=!0;const c=a-s,h=a,p=Math.abs(c-t);o=Math.abs(h-t)<p?l:l-1;break}return i||(o=r.length-1),o}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Br);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const s=this.text.length;this.selectionStart=Qc(0,this.selectionStart,s),this.selectionEnd=Qc(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===Zt?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let s;if(e.altKey)s=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;s=this["findLineBoundary".concat(r)](this[t])}return s!==void 0&&this[t]!==s&&(this[t]=s,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=Zt,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Br&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=Zt,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===Zt&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Br,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Br,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const rb=n=>!!n.button;class qE extends $E{constructor(){super(...arguments),we(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new IE(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:r}=e;this.canvas&&this.editable&&!rb(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),r&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=r||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:r}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const i=this.canvas._activeObject;if(i&&i!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||rb(t)||s||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,s,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(xi(this.calcTransformMatrix())).add(new Re(-this._getLeftOffset(),-this._getTopOffset()));let r=0,s=0,i=0;for(let u=0;u<this._textLines.length&&r<=t.y;u++)r+=this.getHeightOfLine(u),i=u,u>0&&(s+=this._textLines[u-1].length+this.missingNewlineOffset(u-1));let a=Math.abs(this._getLineLeftOffset(i));const o=this._textLines[i].length,l=this.__charBounds[i];for(let u=0;u<o;u++){const c=a+l[u].kernedWidth;if(t.x<=c){Math.abs(t.x-c)<=Math.abs(t.x-a)&&s++;break}a=c,s++}return Math.min(this.flipX?o-s:s,this._text.length)}}const sf="moveCursorUp",af="moveCursorDown",of="moveCursorLeft",lf="moveCursorRight",cf="exitEditing",nb=(n,e)=>{const t=e.getRetinaScaling();n.setTransform(t,0,0,t,0,0);const r=e.viewportTransform;n.transform(r[0],r[1],r[2],r[3],r[4],r[5])},UE=Se({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:cf,27:cf,33:sf,34:af,35:lf,36:of,37:of,38:sf,39:lf,40:af},keysMapRtl:{9:cf,27:cf,33:sf,34:af,35:of,36:lf,37:lf,38:sf,39:of,40:af},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Ca extends qE{static getDefaults(){return Se(Se({},super.getDefaults()),Ca.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,Se(Se({},Ca.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof D0&&this.canvas.textEditingManager.remove(this),t instanceof D0&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),r=this.findAncestorsWithClipPath(),s=r.length>0;let i,a=e;if(s){i=ei(e.canvas),a=i.getContext("2d"),nb(a,this.canvas);const o=this.calcTransformMatrix();a.transform(o[0],o[1],o[2],o[3],o[4],o[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(a,t):this.renderCursor(a,t),s)for(const o of r){const l=o.clipPath,u=ei(e.canvas),c=u.getContext("2d");if(nb(c,this.canvas),!l.absolutePositioned){const h=o.calcTransformMatrix();c.transform(h[0],h[1],h[2],h[3],h[4],h[5])}l.transform(c),l.drawObject(c,!0,{}),this.drawClipPathOnCache(a,l,u)}s&&(e.setTransform(1,0,0,1,0,0),e.drawImage(i,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),s=this._getTopOffset(),i=this._getCursorBoundariesOffsets(e,t);return{left:r,top:s,leftOffset:i.left,topOffset:i.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:s,lineIndex:i}=this.get2DCursorLocation(e);for(let u=0;u<i;u++)t+=this.getHeightOfLine(u);const a=this._getLineLeftOffset(i),o=this.__charBounds[i][s];o&&(r=o.left),this.charSpacing!==0&&s===this._textLines[i].length&&(r-=this._getWidthOfCharSpacing());const l={top:t,left:a+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===Br||this.textAlign===Wi||this.textAlign===vh?l.left*=-1:this.textAlign===Zt||this.textAlign===pp?l.left=a-(r>0?r:0):this.textAlign!==It&&this.textAlign!==yh||(l.left=a-(r>0?r:0))),l}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),s=r.lineIndex,i=r.charIndex>0?r.charIndex-1:0,a=this.getValueOfPropertyAt(s,i,"fontSize"),o=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/o,u=this.getValueOfPropertyAt(s,i,"deltaY"),c=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-a*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,i,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-l/2,top:c+t.top+u,width:l,height:a}}_renderCursor(e,t,r){const{color:s,opacity:i,left:a,top:o,width:l,height:u}=this.getCursorRenderingData(r,t);e.fillStyle=s,e.globalAlpha=i,e.fillRect(a,o,l,u)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const s=t.selectionStart,i=t.selectionEnd,a=this.textAlign.includes(Wi),o=this.get2DCursorLocation(s),l=this.get2DCursorLocation(i),u=o.lineIndex,c=l.lineIndex,h=o.charIndex<0?0:o.charIndex,p=l.charIndex<0?0:l.charIndex;for(let f=u;f<=c;f++){const v=this._getLineLeftOffset(f)||0;let b=this.getHeightOfLine(f),x=0,w=0,k=0;if(f===u&&(w=this.__charBounds[u][h].left),f>=u&&f<c)k=a&&!this.isEndOfWrapping(f)?this.width:this.getLineWidth(f)||5;else if(f===c)if(p===0)k=this.__charBounds[c][p].left;else{const H=this._getWidthOfCharSpacing();k=this.__charBounds[c][p-1].left+this.__charBounds[c][p-1].width-H}x=b,(this.lineHeight<1||f===c&&this.lineHeight>1)&&(b/=this.lineHeight);let T=r.left+v+w,I=b,Y=0;const Q=k-w;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",I=1,Y=b):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Br||this.textAlign===Wi||this.textAlign===vh?T=this.width-T-Q:this.textAlign===Zt||this.textAlign===pp?T=r.left+v-k:this.textAlign!==It&&this.textAlign!==yh||(T=r.left+v-k)),e.fillRect(T,r.top+r.topOffset+Y,Q,I),r.topOffset+=x}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,an)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}we(Ca,"ownDefaults",UE),we(Ca,"type","IText"),ht.setClass(Ca),ht.setClass(Ca,"i-text");class yo extends Ca{static getDefaults(){return Se(Se({},super.getDefaults()),yo.ownDefaults)}constructor(e,t){super(e,Se(Se({},yo.ownDefaults),t))}static createControls(){return{controls:yM()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Wi)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,s=0;const i={};for(let a=0;a<e.graphemeLines.length;a++)e.graphemeText[s]===`
`&&a>0?(r=0,s++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&a>0&&(r++,s++),i[a]={line:t,offset:r},s+=e.graphemeLines[a].length,r+=e.graphemeLines[a].length;return i}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,s=e+1,i=!1;const a=this._styleMap[e],o=this._styleMap[e+1];a&&(e=a.line,r=a.offset),o&&(s=o.line,i=s===e,t=o.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const u in l)for(const c in l[u]){const h=parseInt(c,10);if(h>=r&&(!i||h<t))for(const p in l[u][c])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),s=[];for(let i=0;i<r.wordsData.length;i++)s.push(...this._wrapLine(i,t,r));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let s=0;return{wordsData:e.map((i,a)=>{let o=0;const l=t?this.graphemeSplit(i):this.wordSplit(i);return l.length===0?[{word:[],width:0}]:l.map(u=>{const c=t?[u]:this.graphemeSplit(u),h=this._measureWord(c,a,o);return s=Math.max(h,s),o+=c.length+r.length,{word:c,width:h}})}),largestWordWidth:s}}_measureWord(e,t){let r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=0;for(let a=0,o=e.length;a<o;a++)i+=this._getGraphemeBox(e[a],t,a+s,r,!0).kernedWidth,r=e[a];return i}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:s,wordsData:i}=r,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const o=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,u=[],c=l?"":" ";let h=0,p=[],f=0,v=0,b=!0;t-=a;const x=Math.max(t,s,this.dynamicMinWidth),w=i[e];let k;for(f=0,k=0;k<w.length;k++){const{word:T,width:I}=w[k];f+=T.length,h+=v+I-o,h>x&&!b?(u.push(p),p=[],h=I,b=!0):h+=o,b||l||p.push(c),p=p.concat(T),v=l?0:this._measureWord([c],e,f),f++,b=!1}return k&&u.push(p),s+a>this.dynamicMinWidth&&(this.dynamicMinWidth=s-o+a),u}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),s=new Array(r.length);for(let i=0;i<r.length;i++)s[i]=r[i].join("");return t.lines=s,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const s=this._styleMap[t].line;e.set("".concat(s),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}we(yo,"type","Textbox"),we(yo,"textLayoutProperties",[...Ca.textLayoutProperties,"width"]),we(yo,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),ht.setClass(yo);class sb extends Xp{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:s,group:i}=r;if(!s||!this.shouldPerformLayout(e))return;const{width:a,height:o}=Aa(rx(r,s)),l=new Re(a,o);if(s.absolutePositioned)return{center:Rc(s.getRelativeCenterPoint(),void 0,i?i.calcTransformMatrix():void 0),size:l};{const u=s.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:c=new Re,correction:h=new Re}=this.calcBoundingBox(t,e)||{};return{center:c.add(u),correction:h.subtract(u),size:l}}return{center:r.getRelativeCenterPoint().add(u),size:l}}}}we(sb,"type","clip-path"),ht.setClass(sb);class ib extends Xp{getInitialSize(e,t){let{target:r}=e,{size:s}=t;return new Re(r.width||s.x,r.height||s.y)}}we(ib,"type","fixed"),ht.setClass(ib);class VE extends $h{subscribeTargets(e){const t=e.target;e.targets.reduce((r,s)=>(s.parent&&r.add(s.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((s,i)=>(i.parent&&s.add(i.parent),s),new Set).forEach(s=>{!r.some(i=>i.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[t]})})}}class bo extends pl{static getDefaults(){return Se(Se({},super.getDefaults()),bo.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,bo.ownDefaults),this.setOptions(t);const{left:r,top:s,layoutManager:i}=t;this.groupInit(e,{left:r,top:s,layoutManager:i??new VE})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(s=>{const i=this._objects.findIndex(o=>o.isInFrontOf(s)),a=i===-1?this.size():i;this.insertAt(a,s)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(Ao("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(s=>{const{parent:i}=s;i&&r.add(i)}),e===Jv?r.forEach(s=>{s._onAfterObjectsChange(hp,t)}):r.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=Se(Se({hasControls:!1},r),{},{forActiveSelection:!0});for(let i=0;i<this._objects.length;i++)this._objects[i]._renderControls(e,s);super._renderControls(e,t),e.restore()}}we(bo,"type","ActiveSelection"),we(bo,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),ht.setClass(bo),ht.setClass(bo,"activeSelection");class zE{constructor(){we(this,"resources",{})}applyFilters(e,t,r,s,i){const a=i.getContext("2d");if(!a)return;a.drawImage(t,0,0,r,s);const o={sourceWidth:r,sourceHeight:s,imageData:a.getImageData(0,0,r,s),originalEl:t,originalImageData:a.getImageData(0,0,r,s),canvasEl:i,ctx:a,filterBackend:this};e.forEach(u=>{u.applyTo(o)});const{imageData:l}=o;return l.width===r&&l.height===s||(i.width=l.width,i.height=l.height),a.putImageData(l,0,0),o}}class xx{constructor(){let{tileSize:e=Xt.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};we(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),we(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=ei({width:e,height:t}),s=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=r,this.gl=s)}applyFilters(e,t,r,s,i,a){const o=this.gl,l=i.getContext("2d");if(!o||!l)return;let u;a&&(u=this.getCachedTexture(a,t));const c={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:s,destinationWidth:r,destinationHeight:s,context:o,sourceTexture:this.createTexture(o,r,s,u?void 0:t),targetTexture:this.createTexture(o,r,s),originalTexture:u||this.createTexture(o,r,s,u?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},h=o.createFramebuffer();return o.bindFramebuffer(o.FRAMEBUFFER,h),e.forEach(p=>{p&&p.applyTo(c)}),function(p){const f=p.targetCanvas,v=f.width,b=f.height,x=p.destinationWidth,w=p.destinationHeight;v===x&&b===w||(f.width=x,f.height=w)}(c),this.copyGLTo2D(o,c),o.bindTexture(o.TEXTURE_2D,null),o.deleteTexture(c.sourceTexture),o.deleteTexture(c.targetTexture),o.deleteFramebuffer(h),l.setTransform(1,0,0,1,0,0),c}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,s,i){const{NEAREST:a,TEXTURE_2D:o,RGBA:l,UNSIGNED_BYTE:u,CLAMP_TO_EDGE:c,TEXTURE_MAG_FILTER:h,TEXTURE_MIN_FILTER:p,TEXTURE_WRAP_S:f,TEXTURE_WRAP_T:v}=e,b=e.createTexture();return e.bindTexture(o,b),e.texParameteri(o,h,i||a),e.texParameteri(o,p,i||a),e.texParameteri(o,f,c),e.texParameteri(o,v,c),s?e.texImage2D(o,0,l,l,u,s):e.texImage2D(o,0,l,t,r,0,l,u,null),b}getCachedTexture(e,t,r){const{textureCache:s}=this;if(s[e])return s[e];{const i=this.createTexture(this.gl,t.width,t.height,t,r);return i&&(s[e]=i),i}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,s=t.targetCanvas,i=s.getContext("2d");if(!i)return;i.translate(0,s.height),i.scale(1,-1);const a=r.height-s.height;i.drawImage(r,0,a,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),s=t.destinationWidth,i=t.destinationHeight,a=s*i*4;if(!r)return;const o=new Uint8Array(this.imageBuffer,0,a),l=new Uint8ClampedArray(this.imageBuffer,0,a);e.readPixels(0,0,s,i,e.RGBA,e.UNSIGNED_BYTE,o);const u=new ImageData(l,s,i);r.putImageData(u,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const s=e.getParameter(r.UNMASKED_RENDERER_WEBGL),i=e.getParameter(r.UNMASKED_VENDOR_WEBGL);s&&(t.renderer=s.toLowerCase()),i&&(t.vendor=i.toLowerCase())}return this.gpuInfo=t,t}}let Dm;function HE(){const{WebGLProbe:n}=ea();return n.queryWebGL(Oi()),Xt.enableGLFiltering&&n.isSupported(Xt.textureSize)?new xx({tileSize:Xt.textureSize}):new zE}function Mm(){return!Dm&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Dm=HE()),Dm}const YE=["filters","resizeFilter","src","crossOrigin","type"],Sx=["cropX","cropY"];class Hs extends Vn{static getDefaults(){return Se(Se({},super.getDefaults()),Hs.ownDefaults)}constructor(e,t){super(),we(this,"_lastScaleX",1),we(this,"_lastScaleY",1),we(this,"_filterScalingX",1),we(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Hs.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(To()),this.setElement(typeof e=="string"?(this.canvas&&_i(this.canvas.getElement())||ru()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(r),(t=e.classList)===null||t===void 0||t.add(Hs.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Mm(!1);t instanceof xx&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&ea().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),Se(Se({},super.toObject([...Sx,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,s=-this.height/2;let i=[],a=[],o="",l="";if(!t)return[];if(this.hasCrop()){const u=To();i.push('<clipPath id="imageCrop_'+u+`">
`,'	<rect x="'+r+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),o=' clip-path="url(#imageCrop_'+u+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(l).concat(o,`></image>
`)),this.stroke||this.strokeDashArray){const u=this.fill;this.fill=null,a=['	<rect x="'.concat(r,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=u}return i=this.paintFirst!==an?i.concat(a,e):i.concat(e,a),i}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Bf(e,{crossOrigin:t,signal:r}).then(s=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(s)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),s=r.x,i=r.y,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>t&&i>t)return this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=i);const o=ei(a),{width:l,height:u}=a;this._element=o,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=i,Mm().applyFilters([e],a,l,u,this._element),this._filterScalingX=o.width/this._originalElement.width,this._filterScalingY=o.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(i=>i&&!i.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,s=t.naturalHeight||t.height;if(this._element===this._originalElement){const i=ei({width:r,height:s});this._element=i,this._filteredEl=i}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,s),this._lastScaleX=1,this._lastScaleY=1);Mm().applyFilters(e,this._originalElement,r,s,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,s=this._filterScalingY,i=this.width,a=this.height,o=Math.max(this.cropX,0),l=Math.max(this.cropY,0),u=t.naturalWidth||t.width,c=t.naturalHeight||t.height,h=o*r,p=l*s,f=Math.min(i*r,u-h),v=Math.min(a*s,c-p),b=-i/2,x=-a/2,w=Math.min(i,u/r-o),k=Math.min(a,c/s-l);t&&e.drawImage(t,h,p,f,v,b,x,w,k)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=I8(this.preserveAspectRatio||""),t=this.width,r=this.height,s={width:t,height:r};let i,a=this._element.width,o=this._element.height,l=1,u=1,c=0,h=0,p=0,f=0;return!e||e.alignX===bs&&e.alignY===bs?(l=t/a,u=r/o):(e.meetOrSlice==="meet"&&(l=u=JM(this._element,s),i=(t-a*l)/2,e.alignX==="Min"&&(c=-i),e.alignX==="Max"&&(c=i),i=(r-o*u)/2,e.alignY==="Min"&&(h=-i),e.alignY==="Max"&&(h=i)),e.meetOrSlice==="slice"&&(l=u=QM(this._element,s),i=a-t/l,e.alignX==="Mid"&&(p=i/2),e.alignX==="Max"&&(p=i),i=o-r/u,e.alignY==="Mid"&&(f=i/2),e.alignY==="Max"&&(f=i),a=t/l,o=r/u)),{width:a,height:o,scaleX:l,scaleY:u,offsetLeft:c,offsetTop:h,cropX:p,cropY:f}}static fromObject(e,t){let{filters:r,resizeFilter:s,src:i,crossOrigin:a,type:o}=e,l=kr(e,YE);return Promise.all([Bf(i,Se(Se({},t),{},{crossOrigin:a})),r&&Rh(r,t),s&&Rh([s],t),Hp(l,t)]).then(u=>{let[c,h=[],[p]=[],f={}]=u;return new this(c,Se(Se({},l),{},{src:i,filters:h,resizeFilter:p},f))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return Bf(e,{crossOrigin:t,signal:r}).then(i=>new this(i,s))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const s=Ia(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(s["xlink:href"]||s.href,t,s).catch(i=>(Ao("log","Unable to parse Image",i),null))}}we(Hs,"type","Image"),we(Hs,"cacheProperties",[...Fa,...Sx]),we(Hs,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),we(Hs,"CSS_CANVAS","canvas-img"),we(Hs,"ATTRIBUTE_NAMES",[...Fo,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),ht.setClass(Hs),ht.setSVGClass(Hs);Wp(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Jp=n=>n.webgl!==void 0,Qv="precision highp float",WE=`
    `.concat(Qv,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),GE=["type"],XE=["type"],KE=new RegExp(Qv,"g");class on{get type(){return this.constructor.type}constructor(){let e=kr(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},GE);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return WE}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=ea();s!=="highp"&&(t=t.replace(KE,Qv.replace("highp",s)));const i=e.createShader(e.VERTEX_SHADER),a=e.createShader(e.FRAGMENT_SHADER),o=e.createProgram();if(!i||!a||!o)throw new Xi("Vertex, fragment shader or program creation error");if(e.shaderSource(i,r),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Xi("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.shaderSource(a,t),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Xi("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(a)));if(e.attachShader(o,i),e.attachShader(o,a),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw new Xi('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(o)));const l=this.getUniformLocations(e,o)||{};return l.uStepW=e.getUniformLocation(o,"uStepW"),l.uStepH=e.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:this.getAttributeLocations(e,o),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,s={};for(let i=0;i<r.length;i++)s[r[i]]=e.getUniformLocation(t,r[i]);return s}sendAttributeData(e,t,r){const s=t.aPosition,i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===s||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,s)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){Jp(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,s=ei({width:t,height:r});e.helpLayer=s}}toObject(){const e=Object.keys(this.constructor.defaults||{});return Se({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(kr(e,XE))}}we(on,"type","BaseFilter"),we(on,"uniformLocations",[]);const JE={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class uf extends on{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(JE[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new Ns(this.color).getSource(),s=this.alpha,i=r[0]*s,a=r[1]*s,o=r[2]*s,l=1-s;for(let u=0;u<t.length;u+=4){const c=t[u],h=t[u+1],p=t[u+2];let f,v,b;switch(this.mode){case"multiply":f=c*i/255,v=h*a/255,b=p*o/255;break;case"screen":f=255-(255-c)*(255-i)/255,v=255-(255-h)*(255-a)/255,b=255-(255-p)*(255-o)/255;break;case"add":f=c+i,v=h+a,b=p+o;break;case"difference":f=Math.abs(c-i),v=Math.abs(h-a),b=Math.abs(p-o);break;case"subtract":f=c-i,v=h-a,b=p-o;break;case"darken":f=Math.min(c,i),v=Math.min(h,a),b=Math.min(p,o);break;case"lighten":f=Math.max(c,i),v=Math.max(h,a),b=Math.max(p,o);break;case"overlay":f=i<128?2*c*i/255:255-2*(255-c)*(255-i)/255,v=a<128?2*h*a/255:255-2*(255-h)*(255-a)/255,b=o<128?2*p*o/255:255-2*(255-p)*(255-o)/255;break;case"exclusion":f=i+c-2*i*c/255,v=a+h-2*a*h/255,b=o+p-2*o*p/255;break;case"tint":f=i+c*l,v=a+h*l,b=o+p*l}t[u]=f,t[u+1]=v,t[u+2]=b}}sendUniformData(e,t){const r=new Ns(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}we(uf,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),we(uf,"type","BlendColor"),we(uf,"uniformLocations",["uColor"]),ht.setClass(uf);const QE={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},ZE=["type","image"];class hf extends on{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return QE[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:s},filterBackend:{resources:i}}=e;const a=this.image;i.blendImage||(i.blendImage=Oi());const o=i.blendImage,l=o.getContext("2d");o.width!==r||o.height!==s?(o.width=r,o.height=s):l.clearRect(0,0,r,s),l.setTransform(a.scaleX,0,0,a.scaleY,a.left,a.top),l.drawImage(a.getElement(),0,0,r,s);const u=l.getImageData(0,0,r,s).data;for(let c=0;c<t.length;c+=4){const h=t[c],p=t[c+1],f=t[c+2],v=t[c+3],b=u[c],x=u[c+1],w=u[c+2],k=u[c+3];switch(this.mode){case"multiply":t[c]=h*b/255,t[c+1]=p*x/255,t[c+2]=f*w/255,t[c+3]=v*k/255;break;case"mask":t[c+3]=k}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return Se(Se({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:s}=e,i=kr(e,ZE);return Hs.fromObject(s,t).then(a=>new this(Se(Se({},i),{},{image:a})))}}we(hf,"type","BlendImage"),we(hf,"defaults",{mode:"multiply",alpha:1}),we(hf,"uniformLocations",["uTransformMatrix","uImage"]),ht.setClass(hf);class df extends on{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){Jp(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:r,filterBackend:{resources:s}}=e;const{width:i,height:a}=r;s.blurLayer1||(s.blurLayer1=Oi(),s.blurLayer2=Oi());const o=s.blurLayer1,l=s.blurLayer2;o.width===i&&o.height===a||(l.width=o.width=i,l.height=o.height=a);const u=o.getContext("2d"),c=l.getContext("2d"),h=15,p=.06*this.blur*.5;let f,v,b,x;for(u.putImageData(r,0,0),c.clearRect(0,0,i,a),x=-15;x<=h;x++)f=(Math.random()-.5)/4,v=x/h,b=p*v*i+f,c.globalAlpha=1-Math.abs(v),c.drawImage(o,b,f),u.drawImage(l,0,0),c.globalAlpha=1,c.clearRect(0,0,l.width,l.height);for(x=-15;x<=h;x++)f=(Math.random()-.5)/4,v=x/h,b=p*v*a+f,c.globalAlpha=1-Math.abs(v),c.drawImage(o,f,b),u.drawImage(l,0,0),c.globalAlpha=1,c.clearRect(0,0,l.width,l.height);t.drawImage(o,0,0);const w=t.getImageData(0,0,o.width,o.height);return u.globalAlpha=1,u.clearRect(0,0,o.width,o.height),w}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const r=e*this.blur*.12;return this.horizontal?t[0]=r:t[1]=r,t}}we(df,"type","Blur"),we(df,"defaults",{blur:0}),we(df,"uniformLocations",["uDelta"]),ht.setClass(df);class ff extends on{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let s=0;s<t.length;s+=4)t[s]+=r,t[s+1]+=r,t[s+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}we(ff,"type","Brightness"),we(ff,"defaults",{brightness:0}),we(ff,"uniformLocations",["uBrightness"]),ht.setClass(ff);const kx={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Ac extends on{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,s=this.colorsOnly;for(let i=0;i<t.length;i+=4){const a=t[i],o=t[i+1],l=t[i+2];if(t[i]=a*r[0]+o*r[1]+l*r[2]+255*r[4],t[i+1]=a*r[5]+o*r[6]+l*r[7]+255*r[9],t[i+2]=a*r[10]+o*r[11]+l*r[12]+255*r[14],!s){const u=t[i+3];t[i]+=u*r[3],t[i+1]+=u*r[8],t[i+2]+=u*r[13],t[i+3]=a*r[15]+o*r[16]+l*r[17]+u*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,s=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],i=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,s),e.uniform4fv(t.uConstants,i)}toObject(){return Se(Se({},super.toObject()),{},{matrix:[...this.matrix]})}}function Sl(n,e){var t;const r=(we(t=class extends Ac{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),we(t,"defaults",{colorsOnly:!1,matrix:e}),t);return ht.setClass(r,n),r}we(Ac,"type","ColorMatrix"),we(Ac,"defaults",kx),we(Ac,"uniformLocations",["uColorMatrix","uConstants"]),ht.setClass(Ac);Sl("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Sl("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Sl("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Sl("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Sl("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Sl("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Sl("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class ab extends on{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Jp(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>ht.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}we(ab,"type","Composed"),ht.setClass(ab);class pf extends on{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),s=259*(r+255)/(255*(259-r));for(let i=0;i<t.length;i+=4)t[i]=s*(t[i]-128)+128,t[i+1]=s*(t[i+1]-128)+128,t[i+2]=s*(t[i+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}we(pf,"type","Contrast"),we(pf,"defaults",{contrast:0}),we(pf,"uniformLocations",["uContrast"]),ht.setClass(pf);const eN={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class gf extends on{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return eN[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,s=this.matrix,i=Math.round(Math.sqrt(s.length)),a=Math.floor(i/2),o=t.width,l=t.height,u=e.ctx.createImageData(o,l),c=u.data,h=this.opaque?1:0;let p,f,v,b,x,w,k,T,I,Y,Q,H,j;for(Q=0;Q<l;Q++)for(Y=0;Y<o;Y++){for(x=4*(Q*o+Y),p=0,f=0,v=0,b=0,j=0;j<i;j++)for(H=0;H<i;H++)k=Q+j-a,w=Y+H-a,k<0||k>=l||w<0||w>=o||(T=4*(k*o+w),I=s[j*i+H],p+=r[T]*I,f+=r[T+1]*I,v+=r[T+2]*I,h||(b+=r[T+3]*I));c[x]=p,c[x+1]=f,c[x+2]=v,c[x+3]=h?r[x+3]:b}e.imageData=u}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return Se(Se({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}we(gf,"type","Convolute"),we(gf,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),we(gf,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),ht.setClass(gf);const Cx="Gamma";class mf extends on{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,s=1/r[0],i=1/r[1],a=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const o=this.rgbValues;for(let l=0;l<256;l++)o.r[l]=255*Math.pow(l/255,s),o.g[l]=255*Math.pow(l/255,i),o.b[l]=255*Math.pow(l/255,a);for(let l=0;l<t.length;l+=4)t[l]=o.r[t[l]],t[l+1]=o.g[t[l+1]],t[l+2]=o.b[t[l+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:Cx,gamma:this.gamma.concat()}}}we(mf,"type",Cx),we(mf,"defaults",{gamma:[1,1,1]}),we(mf,"uniformLocations",["uGamma"]),ht.setClass(mf);const tN={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class vf extends on{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,s=0;s<t.length;s+=4){const i=t[s],a=t[s+1],o=t[s+2];switch(this.mode){case"average":r=(i+a+o)/3;break;case"lightness":r=(Math.min(i,a,o)+Math.max(i,a,o))/2;break;case"luminosity":r=.21*i+.72*a+.07*o}t[s+2]=t[s+1]=t[s]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return tN[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}we(vf,"type","Grayscale"),we(vf,"defaults",{mode:"average"}),we(vf,"uniformLocations",["uMode"]),ht.setClass(vf);const rN=Se(Se({},kx),{},{rotation:0});class Em extends Ac{calculateMatrix(){const e=this.rotation*Math.PI,t=La(e),r=Da(e),s=1/3,i=Math.sqrt(s)*r,a=1-t;this.matrix=[t+a/3,s*a-i,s*a+i,0,0,s*a+i,t+s*a,s*a-i,0,0,s*a-i,s*a+i,t+s*a,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}we(Em,"type","HueRotation"),we(Em,"defaults",rN),ht.setClass(Em);class yf extends on{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}we(yf,"type","Invert"),we(yf,"defaults",{alpha:!1,invert:!0}),we(yf,"uniformLocations",["uInvert","uAlpha"]),ht.setClass(yf);class bf extends on{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let s=0;s<t.length;s+=4){const i=(.5-Math.random())*r;t[s]+=i,t[s+1]+=i,t[s+2]+=i}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}we(bf,"type","Noise"),we(bf,"defaults",{noise:0}),we(bf,"uniformLocations",["uNoise","uSeed"]),ht.setClass(bf);class wf extends on{applyTo2d(e){let{imageData:{data:t,width:r,height:s}}=e;for(let i=0;i<s;i+=this.blocksize)for(let a=0;a<r;a+=this.blocksize){const o=4*i*r+4*a,l=t[o],u=t[o+1],c=t[o+2],h=t[o+3];for(let p=i;p<Math.min(i+this.blocksize,s);p++)for(let f=a;f<Math.min(a+this.blocksize,r);f++){const v=4*p*r+4*f;t[v]=l,t[v+1]=u,t[v+2]=c,t[v+3]=h}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}we(wf,"type","Pixelate"),we(wf,"defaults",{blocksize:4}),we(wf,"uniformLocations",["uBlocksize"]),ht.setClass(wf);class _f extends on{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,s=new Ns(this.color).getSource(),i=[s[0]-r,s[1]-r,s[2]-r],a=[s[0]+r,s[1]+r,s[2]+r];for(let o=0;o<t.length;o+=4){const l=t[o],u=t[o+1],c=t[o+2];l>i[0]&&u>i[1]&&c>i[2]&&l<a[0]&&u<a[1]&&c<a[2]&&(t[o+3]=0)}}sendUniformData(e,t){const r=new Ns(this.color).getSource(),s=this.distance,i=[0+r[0]/255-s,0+r[1]/255-s,0+r[2]/255-s,1],a=[r[0]/255+s,r[1]/255+s,r[2]/255+s,1];e.uniform4fv(t.uLow,i),e.uniform4fv(t.uHigh,a)}}we(_f,"type","RemoveColor"),we(_f,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),we(_f,"uniformLocations",["uLow","uHigh"]),ht.setClass(_f);class xf extends on{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),s=new Array(r);for(let i=1;i<=r;i++)s[i-1]=e(i*t);return s}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Jp(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,s=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/s;const i=t.width,a=t.height,o=Math.round(i*r),l=Math.round(a*s);let u;u=this.resizeType==="sliceHack"?this.sliceByTwo(e,i,a,o,l):this.resizeType==="hermite"?this.hermiteFastResize(e,i,a,o,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,i,a,o,l):this.resizeType==="lanczos"?this.lanczosResize(e,i,a,o,l):new ImageData(o,l),e.imageData=u}sliceByTwo(e,t,r,s,i){const a=e.imageData,o=.5;let l=!1,u=!1,c=t*o,h=r*o;const p=e.filterBackend.resources;let f=0,v=0;const b=t;let x=0;p.sliceByTwo||(p.sliceByTwo=Oi());const w=p.sliceByTwo;(w.width<1.5*t||w.height<r)&&(w.width=1.5*t,w.height=r);const k=w.getContext("2d");for(k.clearRect(0,0,1.5*t,r),k.putImageData(a,0,0),s=Math.floor(s),i=Math.floor(i);!l||!u;)t=c,r=h,s<Math.floor(c*o)?c=Math.floor(c*o):(c=s,l=!0),i<Math.floor(h*o)?h=Math.floor(h*o):(h=i,u=!0),k.drawImage(w,f,v,t,r,b,x,c,h),f=b,v=x,x+=h;return k.getImageData(f,v,s,i)}lanczosResize(e,t,r,s,i){const a=e.imageData.data,o=e.ctx.createImageData(s,i),l=o.data,u=this.lanczosCreate(this.lanczosLobes),c=this.rcpScaleX,h=this.rcpScaleY,p=2/this.rcpScaleX,f=2/this.rcpScaleY,v=Math.ceil(c*this.lanczosLobes/2),b=Math.ceil(h*this.lanczosLobes/2),x={},w={x:0,y:0},k={x:0,y:0};return function T(I){let Y,Q,H,j,U,K,D,O,J,M,ee;for(w.x=(I+.5)*c,k.x=Math.floor(w.x),Y=0;Y<i;Y++){for(w.y=(Y+.5)*h,k.y=Math.floor(w.y),U=0,K=0,D=0,O=0,J=0,Q=k.x-v;Q<=k.x+v;Q++)if(!(Q<0||Q>=t)){M=Math.floor(1e3*Math.abs(Q-w.x)),x[M]||(x[M]={});for(let W=k.y-b;W<=k.y+b;W++)W<0||W>=r||(ee=Math.floor(1e3*Math.abs(W-w.y)),x[M][ee]||(x[M][ee]=u(Math.sqrt(Math.pow(M*p,2)+Math.pow(ee*f,2))/1e3)),H=x[M][ee],H>0&&(j=4*(W*t+Q),U+=H,K+=H*a[j],D+=H*a[j+1],O+=H*a[j+2],J+=H*a[j+3]))}j=4*(Y*s+I),l[j]=K/U,l[j+1]=D/U,l[j+2]=O/U,l[j+3]=J/U}return++I<s?T(I):o}(0)}bilinearFiltering(e,t,r,s,i){let a,o,l,u,c,h,p,f,v,b,x,w,k,T=0;const I=this.rcpScaleX,Y=this.rcpScaleY,Q=4*(t-1),H=e.imageData.data,j=e.ctx.createImageData(s,i),U=j.data;for(p=0;p<i;p++)for(f=0;f<s;f++)for(c=Math.floor(I*f),h=Math.floor(Y*p),v=I*f-c,b=Y*p-h,k=4*(h*t+c),x=0;x<4;x++)a=H[k+x],o=H[k+4+x],l=H[k+Q+x],u=H[k+Q+4+x],w=a*(1-v)*(1-b)+o*v*(1-b)+l*b*(1-v)+u*v*b,U[T++]=w;return j}hermiteFastResize(e,t,r,s,i){const a=this.rcpScaleX,o=this.rcpScaleY,l=Math.ceil(a/2),u=Math.ceil(o/2),c=e.imageData.data,h=e.ctx.createImageData(s,i),p=h.data;for(let f=0;f<i;f++)for(let v=0;v<s;v++){const b=4*(v+f*s);let x=0,w=0,k=0,T=0,I=0,Y=0,Q=0;const H=(f+.5)*o;for(let j=Math.floor(f*o);j<(f+1)*o;j++){const U=Math.abs(H-(j+.5))/u,K=(v+.5)*a,D=U*U;for(let O=Math.floor(v*a);O<(v+1)*a;O++){let J=Math.abs(K-(O+.5))/l;const M=Math.sqrt(D+J*J);M>1&&M<-1||(x=2*M*M*M-3*M*M+1,x>0&&(J=4*(O+j*t),Q+=x*c[J+3],k+=x,c[J+3]<255&&(x=x*c[J+3]/250),T+=x*c[J],I+=x*c[J+1],Y+=x*c[J+2],w+=x))}}p[b]=T/w,p[b+1]=I/w,p[b+2]=Y/w,p[b+3]=Q/k}return h}}we(xf,"type","Resize"),we(xf,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),we(xf,"uniformLocations",["uDelta","uTaps"]),ht.setClass(xf);class Sf extends on{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let s=0;s<t.length;s+=4){const i=t[s],a=t[s+1],o=t[s+2],l=Math.max(i,a,o);t[s]+=l!==i?(l-i)*r:0,t[s+1]+=l!==a?(l-a)*r:0,t[s+2]+=l!==o?(l-o)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}we(Sf,"type","Saturation"),we(Sf,"defaults",{saturation:0}),we(Sf,"uniformLocations",["uSaturation"]),ht.setClass(Sf);class kf extends on{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let s=0;s<t.length;s+=4){const i=t[s],a=t[s+1],o=t[s+2],l=Math.max(i,a,o),u=(i+a+o)/3,c=2*Math.abs(l-u)/255*r;t[s]+=l!==i?(l-i)*c:0,t[s+1]+=l!==a?(l-a)*c:0,t[s+2]+=l!==o?(l-o)*c:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}we(kf,"type","Vibrance"),we(kf,"defaults",{vibrance:0}),we(kf,"uniformLocations",["uVibrance"]),ht.setClass(kf);function sr(n){"@babel/helpers - typeof";return sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sr(n)}var Bn=Uint8Array,Es=Uint16Array,Zv=Int32Array,Qp=new Bn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Zp=new Bn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),E0=new Bn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ax=function(n,e){for(var t=new Es(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var s=new Zv(t[30]),r=1;r<30;++r)for(var i=t[r];i<t[r+1];++i)s[i]=i-t[r]<<5|r;return{b:t,r:s}},Tx=Ax(Qp,2),Px=Tx.b,N0=Tx.r;Px[28]=258,N0[258]=28;var Ox=Ax(Zp,0),nN=Ox.b,ob=Ox.r,j0=new Es(32768);for(var _r=0;_r<32768;++_r){var io=(_r&43690)>>1|(_r&21845)<<1;io=(io&52428)>>2|(io&13107)<<2,io=(io&61680)>>4|(io&3855)<<4,j0[_r]=((io&65280)>>8|(io&255)<<8)>>1}var Zi=function(n,e,t){for(var r=n.length,s=0,i=new Es(e);s<r;++s)n[s]&&++i[n[s]-1];var a=new Es(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(t){o=new Es(1<<e);var l=15-e;for(s=0;s<r;++s)if(n[s])for(var u=s<<4|n[s],c=e-n[s],h=a[n[s]-1]++<<c,p=h|(1<<c)-1;h<=p;++h)o[j0[h]>>l]=u}else for(o=new Es(r),s=0;s<r;++s)n[s]&&(o[s]=j0[a[n[s]-1]++]>>15-n[s]);return o},Po=new Bn(288);for(var _r=0;_r<144;++_r)Po[_r]=8;for(var _r=144;_r<256;++_r)Po[_r]=9;for(var _r=256;_r<280;++_r)Po[_r]=7;for(var _r=280;_r<288;++_r)Po[_r]=8;var qh=new Bn(32);for(var _r=0;_r<32;++_r)qh[_r]=5;var sN=Zi(Po,9,0),iN=Zi(Po,9,1),aN=Zi(qh,5,0),oN=Zi(qh,5,1),Nm=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},hi=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},jm=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},e1=function(n){return(n+7)/8|0},Lx=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Bn(n.subarray(e,t))},lN=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],mi=function(n,e,t){var r=new Error(e||lN[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,mi),!t)throw r;return r},cN=function(n,e,t,r){var s=n.length,i=0;if(!s||e.f&&!e.l)return t||new Bn(0);var a=!t,o=a||e.i!=2,l=e.i;a&&(t=new Bn(s*3));var u=function(ce){var V=t.length;if(ce>V){var R=new Bn(Math.max(V*2,ce));R.set(t),t=R}},c=e.f||0,h=e.p||0,p=e.b||0,f=e.l,v=e.d,b=e.m,x=e.n,w=s*8;do{if(!f){c=hi(n,h,1);var k=hi(n,h+1,3);if(h+=3,k)if(k==1)f=iN,v=oN,b=9,x=5;else if(k==2){var Q=hi(n,h,31)+257,H=hi(n,h+10,15)+4,j=Q+hi(n,h+5,31)+1;h+=14;for(var U=new Bn(j),K=new Bn(19),D=0;D<H;++D)K[E0[D]]=hi(n,h+D*3,7);h+=H*3;for(var O=Nm(K),J=(1<<O)-1,M=Zi(K,O,1),D=0;D<j;){var ee=M[hi(n,h,J)];h+=ee&15;var T=ee>>4;if(T<16)U[D++]=T;else{var W=0,ae=0;for(T==16?(ae=3+hi(n,h,3),h+=2,W=U[D-1]):T==17?(ae=3+hi(n,h,7),h+=3):T==18&&(ae=11+hi(n,h,127),h+=7);ae--;)U[D++]=W}}var ne=U.subarray(0,Q),oe=U.subarray(Q);b=Nm(ne),x=Nm(oe),f=Zi(ne,b,1),v=Zi(oe,x,1)}else mi(1);else{var T=e1(h)+4,I=n[T-4]|n[T-3]<<8,Y=T+I;if(Y>s){l&&mi(0);break}o&&u(p+I),t.set(n.subarray(T,Y),p),e.b=p+=I,e.p=h=Y*8,e.f=c;continue}if(h>w){l&&mi(0);break}}o&&u(p+131072);for(var de=(1<<b)-1,fe=(1<<x)-1,P=h;;P=h){var W=f[jm(n,h)&de],A=W>>4;if(h+=W&15,h>w){l&&mi(0);break}if(W||mi(2),A<256)t[p++]=A;else if(A==256){P=h,f=null;break}else{var F=A-254;if(A>264){var D=A-257,G=Qp[D];F=hi(n,h,(1<<G)-1)+Px[D],h+=G}var Z=v[jm(n,h)&fe],_=Z>>4;Z||mi(3),h+=Z&15;var oe=nN[_];if(_>3){var G=Zp[_];oe+=jm(n,h)&(1<<G)-1,h+=G}if(h>w){l&&mi(0);break}o&&u(p+131072);var q=p+F;if(p<oe){var te=i-oe,Ae=Math.min(oe,q);for(te+p<0&&mi(3);p<Ae;++p)t[p]=r[te+p]}for(;p<q;++p)t[p]=t[p-oe]}}e.l=f,e.p=P,e.b=p,e.f=c,f&&(c=1,e.m=b,e.d=v,e.n=x)}while(!c);return p!=t.length&&a?Lx(t,0,p):t.subarray(0,p)},ga=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Ku=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Rm=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var s=t.length,i=t.slice();if(!s)return{t:Mx,l:0};if(s==1){var a=new Bn(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(Y,Q){return Y.f-Q.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],u=0,c=1,h=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};c!=s-1;)o=t[t[u].f<t[h].f?u++:h++],l=t[u!=c&&t[u].f<t[h].f?u++:h++],t[c++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=i[0].s,r=1;r<s;++r)i[r].s>p&&(p=i[r].s);var f=new Es(p+1),v=R0(t[c-1],f,0);if(v>e){var r=0,b=0,x=v-e,w=1<<x;for(i.sort(function(Q,H){return f[H.s]-f[Q.s]||Q.f-H.f});r<s;++r){var k=i[r].s;if(f[k]>e)b+=w-(1<<v-f[k]),f[k]=e;else break}for(b>>=x;b>0;){var T=i[r].s;f[T]<e?b-=1<<e-f[T]++-1:++r}for(;r>=0&&b;--r){var I=i[r].s;f[I]==e&&(--f[I],++b)}v=e}return{t:new Bn(f),l:v}},R0=function(n,e,t){return n.s==-1?Math.max(R0(n.l,e,t+1),R0(n.r,e,t+1)):e[n.s]=t},lb=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Es(++e),r=0,s=n[0],i=1,a=function(l){t[r++]=l},o=1;o<=e;++o)if(n[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=n[o]}return{c:t.subarray(0,r),n:e}},Ju=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Dx=function(n,e,t){var r=t.length,s=e1(e+2);n[s]=r&255,n[s+1]=r>>8,n[s+2]=n[s]^255,n[s+3]=n[s+1]^255;for(var i=0;i<r;++i)n[s+i+4]=t[i];return(s+4+r)*8},cb=function(n,e,t,r,s,i,a,o,l,u,c){ga(e,c++,t),++s[256];for(var h=Rm(s,15),p=h.t,f=h.l,v=Rm(i,15),b=v.t,x=v.l,w=lb(p),k=w.c,T=w.n,I=lb(b),Y=I.c,Q=I.n,H=new Es(19),j=0;j<k.length;++j)++H[k[j]&31];for(var j=0;j<Y.length;++j)++H[Y[j]&31];for(var U=Rm(H,7),K=U.t,D=U.l,O=19;O>4&&!K[E0[O-1]];--O);var J=u+5<<3,M=Ju(s,Po)+Ju(i,qh)+a,ee=Ju(s,p)+Ju(i,b)+a+14+3*O+Ju(H,K)+2*H[16]+3*H[17]+7*H[18];if(l>=0&&J<=M&&J<=ee)return Dx(e,c,n.subarray(l,l+u));var W,ae,ne,oe;if(ga(e,c,1+(ee<M)),c+=2,ee<M){W=Zi(p,f,0),ae=p,ne=Zi(b,x,0),oe=b;var de=Zi(K,D,0);ga(e,c,T-257),ga(e,c+5,Q-1),ga(e,c+10,O-4),c+=14;for(var j=0;j<O;++j)ga(e,c+3*j,K[E0[j]]);c+=3*O;for(var fe=[k,Y],P=0;P<2;++P)for(var A=fe[P],j=0;j<A.length;++j){var F=A[j]&31;ga(e,c,de[F]),c+=K[F],F>15&&(ga(e,c,A[j]>>5&127),c+=A[j]>>12)}}else W=sN,ae=Po,ne=aN,oe=qh;for(var j=0;j<o;++j){var G=r[j];if(G>255){var F=G>>18&31;Ku(e,c,W[F+257]),c+=ae[F+257],F>7&&(ga(e,c,G>>23&31),c+=Qp[F]);var Z=G&31;Ku(e,c,ne[Z]),c+=oe[Z],Z>3&&(Ku(e,c,G>>5&8191),c+=Zp[Z])}else Ku(e,c,W[G]),c+=ae[G]}return Ku(e,c,W[256]),c+ae[256]},uN=new Zv([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Mx=new Bn(0),hN=function(n,e,t,r,s,i){var a=i.z||n.length,o=new Bn(r+a+5*(1+Math.ceil(a/7e3))+s),l=o.subarray(r,o.length-s),u=i.l,c=(i.r||0)&7;if(e){c&&(l[0]=i.r>>3);for(var h=uN[e-1],p=h>>13,f=h&8191,v=(1<<t)-1,b=i.p||new Es(32768),x=i.h||new Es(v+1),w=Math.ceil(t/3),k=2*w,T=function(re){return(n[re]^n[re+1]<<w^n[re+2]<<k)&v},I=new Zv(25e3),Y=new Es(288),Q=new Es(32),H=0,j=0,U=i.i||0,K=0,D=i.w||0,O=0;U+2<a;++U){var J=T(U),M=U&32767,ee=x[J];if(b[M]=ee,x[J]=M,D<=U){var W=a-U;if((H>7e3||K>24576)&&(W>423||!u)){c=cb(n,l,0,I,Y,Q,j,K,O,U-O,c),K=H=j=0,O=U;for(var ae=0;ae<286;++ae)Y[ae]=0;for(var ae=0;ae<30;++ae)Q[ae]=0}var ne=2,oe=0,de=f,fe=M-ee&32767;if(W>2&&J==T(U-fe))for(var P=Math.min(p,W)-1,A=Math.min(32767,U),F=Math.min(258,W);fe<=A&&--de&&M!=ee;){if(n[U+ne]==n[U+ne-fe]){for(var G=0;G<F&&n[U+G]==n[U+G-fe];++G);if(G>ne){if(ne=G,oe=fe,G>P)break;for(var Z=Math.min(fe,G-2),_=0,ae=0;ae<Z;++ae){var q=U-fe+ae&32767,te=b[q],Ae=q-te&32767;Ae>_&&(_=Ae,ee=q)}}}M=ee,ee=b[M],fe+=M-ee&32767}if(oe){I[K++]=268435456|N0[ne]<<18|ob[oe];var ce=N0[ne]&31,V=ob[oe]&31;j+=Qp[ce]+Zp[V],++Y[257+ce],++Q[V],D=U+ne,++H}else I[K++]=n[U],++Y[n[U]]}}for(U=Math.max(U,D);U<a;++U)I[K++]=n[U],++Y[n[U]];c=cb(n,l,u,I,Y,Q,j,K,O,U-O,c),u||(i.r=c&7|l[c/8|0]<<3,c-=7,i.h=x,i.p=b,i.i=U,i.w=D)}else{for(var U=i.w||0;U<a+u;U+=65535){var R=U+65535;R>=a&&(l[c/8|0]=u,R=a),c=Dx(l,c+1,n.subarray(U,R))}i.i=a}return Lx(o,0,r+e1(c)+s)},Ex=function(){var n=1,e=0;return{p:function(t){for(var r=n,s=e,i=t.length|0,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=r+=t[a];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}n=r,e=s},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},dN=function(n,e,t,r,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new Bn(i.length+n.length);a.set(i),a.set(n,i.length),n=a,s.w=i.length}return hN(n,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,s)},Nx=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},fN=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var s=Ex();s.p(e.dictionary),Nx(n,2,s.d())}},pN=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&mi(6,"invalid zlib data"),(n[1]>>5&1)==1&&mi(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function F0(n,e){e||(e={});var t=Ex();t.p(n);var r=dN(n,e,e.dictionary?6:2,4);return fN(r,e),Nx(r,r.length-4,t.d()),r}function gN(n,e){return cN(n.subarray(pN(n),-4),{i:2},e,e)}var mN=typeof TextDecoder<"u"&&new TextDecoder,vN=0;try{mN.decode(Mx,{stream:!0}),vN=1}catch{}var St=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Fm(){St.console&&typeof St.console.log=="function"&&St.console.log.apply(St.console,arguments)}var ur={log:Fm,warn:function(n){St.console&&(typeof St.console.warn=="function"?St.console.warn.apply(St.console,arguments):Fm.call(null,arguments))},error:function(n){St.console&&(typeof St.console.error=="function"?St.console.error.apply(St.console,arguments):Fm(n))}};function Im(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){nl(r.response,e,t)},r.onerror=function(){ur.error("could not download file")},r.send()}function ub(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Cf(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var bh,I0,nl=St.saveAs||((typeof window>"u"?"undefined":sr(window))!=="object"||window!==St?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=St.URL||St.webkitURL,s=document.createElement("a");e=e||n.name||"download",s.download=e,s.rel="noopener",typeof n=="string"?(s.href=n,s.origin!==location.origin?ub(s.href)?Im(n,e,t):Cf(s,s.target="_blank"):Cf(s)):(s.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){Cf(s)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(ub(n))Im(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Cf(r)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:sr(i)!=="object"&&(ur.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Im(n,e,t);var s=n.type==="application/octet-stream",i=/constructor/i.test(St.HTMLElement)||St.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":sr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var c=o.result;c=a?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},o.readAsDataURL(n)}else{var l=St.URL||St.webkitURL,u=l.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function jx(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<t.length;r++){var s=t[r].re,i=t[r].process,a=s.exec(n);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Bm(n,e){var t=n[0],r=n[1],s=n[2],i=n[3];t=Dn(t,r,s,i,e[0],7,-680876936),i=Dn(i,t,r,s,e[1],12,-389564586),s=Dn(s,i,t,r,e[2],17,606105819),r=Dn(r,s,i,t,e[3],22,-1044525330),t=Dn(t,r,s,i,e[4],7,-176418897),i=Dn(i,t,r,s,e[5],12,1200080426),s=Dn(s,i,t,r,e[6],17,-1473231341),r=Dn(r,s,i,t,e[7],22,-45705983),t=Dn(t,r,s,i,e[8],7,1770035416),i=Dn(i,t,r,s,e[9],12,-1958414417),s=Dn(s,i,t,r,e[10],17,-42063),r=Dn(r,s,i,t,e[11],22,-1990404162),t=Dn(t,r,s,i,e[12],7,1804603682),i=Dn(i,t,r,s,e[13],12,-40341101),s=Dn(s,i,t,r,e[14],17,-1502002290),t=Mn(t,r=Dn(r,s,i,t,e[15],22,1236535329),s,i,e[1],5,-165796510),i=Mn(i,t,r,s,e[6],9,-1069501632),s=Mn(s,i,t,r,e[11],14,643717713),r=Mn(r,s,i,t,e[0],20,-373897302),t=Mn(t,r,s,i,e[5],5,-701558691),i=Mn(i,t,r,s,e[10],9,38016083),s=Mn(s,i,t,r,e[15],14,-660478335),r=Mn(r,s,i,t,e[4],20,-405537848),t=Mn(t,r,s,i,e[9],5,568446438),i=Mn(i,t,r,s,e[14],9,-1019803690),s=Mn(s,i,t,r,e[3],14,-187363961),r=Mn(r,s,i,t,e[8],20,1163531501),t=Mn(t,r,s,i,e[13],5,-1444681467),i=Mn(i,t,r,s,e[2],9,-51403784),s=Mn(s,i,t,r,e[7],14,1735328473),t=En(t,r=Mn(r,s,i,t,e[12],20,-1926607734),s,i,e[5],4,-378558),i=En(i,t,r,s,e[8],11,-2022574463),s=En(s,i,t,r,e[11],16,1839030562),r=En(r,s,i,t,e[14],23,-35309556),t=En(t,r,s,i,e[1],4,-1530992060),i=En(i,t,r,s,e[4],11,1272893353),s=En(s,i,t,r,e[7],16,-155497632),r=En(r,s,i,t,e[10],23,-1094730640),t=En(t,r,s,i,e[13],4,681279174),i=En(i,t,r,s,e[0],11,-358537222),s=En(s,i,t,r,e[3],16,-722521979),r=En(r,s,i,t,e[6],23,76029189),t=En(t,r,s,i,e[9],4,-640364487),i=En(i,t,r,s,e[12],11,-421815835),s=En(s,i,t,r,e[15],16,530742520),t=Nn(t,r=En(r,s,i,t,e[2],23,-995338651),s,i,e[0],6,-198630844),i=Nn(i,t,r,s,e[7],10,1126891415),s=Nn(s,i,t,r,e[14],15,-1416354905),r=Nn(r,s,i,t,e[5],21,-57434055),t=Nn(t,r,s,i,e[12],6,1700485571),i=Nn(i,t,r,s,e[3],10,-1894986606),s=Nn(s,i,t,r,e[10],15,-1051523),r=Nn(r,s,i,t,e[1],21,-2054922799),t=Nn(t,r,s,i,e[8],6,1873313359),i=Nn(i,t,r,s,e[15],10,-30611744),s=Nn(s,i,t,r,e[6],15,-1560198380),r=Nn(r,s,i,t,e[13],21,1309151649),t=Nn(t,r,s,i,e[4],6,-145523070),i=Nn(i,t,r,s,e[11],10,-1120210379),s=Nn(s,i,t,r,e[2],15,718787259),r=Nn(r,s,i,t,e[9],21,-343485551),n[0]=wo(t,n[0]),n[1]=wo(r,n[1]),n[2]=wo(s,n[2]),n[3]=wo(i,n[3])}function eg(n,e,t,r,s,i){return e=wo(wo(e,n),wo(r,i)),wo(e<<s|e>>>32-s,t)}function Dn(n,e,t,r,s,i,a){return eg(e&t|~e&r,n,e,s,i,a)}function Mn(n,e,t,r,s,i,a){return eg(e&r|t&~r,n,e,s,i,a)}function En(n,e,t,r,s,i,a){return eg(e^t^r,n,e,s,i,a)}function Nn(n,e,t,r,s,i,a){return eg(t^(e|~r),n,e,s,i,a)}function Rx(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Bm(r,yN(n.substring(e-64,e)));n=n.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)s[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(Bm(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*t,Bm(r,s),r}function yN(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}bh=St.atob.bind(St),I0=St.btoa.bind(St);var hb="0123456789abcdef".split("");function bN(n){for(var e="",t=0;t<4;t++)e+=hb[n>>8*t+4&15]+hb[n>>8*t&15];return e}function wN(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function B0(n){return Rx(n).map(wN).join("")}var _N=function(n){for(var e=0;e<n.length;e++)n[e]=bN(n[e]);return n.join("")}(Rx("hello"))!="5d41402abc4b2a76b9719d911017c592";function wo(n,e){if(_N){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function $0(n,e){var t,r,s,i;if(n!==t){for(var a=(s=n,i=1+(256/n.length>>0),new Array(i+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var c=o[l];u=(u+c+a.charCodeAt(l))%256,o[l]=o[u],o[u]=c}t=n,r=o}else o=r;var h=e.length,p=0,f=0,v="";for(l=0;l<h;l++)f=(f+(c=o[p=(p+1)%256]))%256,o[p]=o[f],o[f]=c,a=o[(o[p]+o[f])%256],v+=String.fromCharCode(e.charCodeAt(l)^a);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var db={print:4,modify:8,copy:16,"annot-forms":32};function _c(n,e,t,r){this.v=1,this.r=2;var s=192;n.forEach(function(o){if(db.perm!==void 0)throw new Error("Invalid permission: "+o);s+=db[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=B0(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=$0(this.encryptionKey,this.padding)}function xc(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var s=n.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=n[r]}return e}function fb(n){if(sr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,s){if(s=s||!1,typeof t!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[r,!!s],i},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[t]){var a=e[t][i];try{a[0].apply(n,r)}catch(o){St.console&&ur.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function gp(n){if(!(this instanceof gp))return new gp(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function Fx(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function ll(n,e,t,r,s){if(!(this instanceof ll))return new ll(n,e,t,r,s);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,Fx.call(this,r,s)}function Tc(n,e,t,r,s){if(!(this instanceof Tc))return new Tc(n,e,t,r,s);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Fx.call(this,r,s)}function _t(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],i=arguments[3],a=[],o=1,l=16,u="S",c=null;sr(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,s=n.format||s,i=n.compress||n.compressPdf||i,(c=n.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),u=n.defaultPathOperation||"S"),a=n.filters||(i===!0?["FlateEncode"]:a),r=r||"mm",t=(""+(t||"P")).toLowerCase();var h=n.putOnlyUsedFonts||!1,p={},f={internal:{},__private__:{}};f.__private__.PubSub=fb;var v="1.3",b=f.__private__.getPdfVersion=function(){return v};f.__private__.setPdfVersion=function(m){v=m};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return x};var w=f.__private__.getPageFormat=function(m){return x[m]};s=s||"a4";var k={COMPAT:"compat",ADVANCED:"advanced"},T=k.COMPAT;function I(){this.saveGraphicsState(),L(new vt(et,0,0,-et,0,qa()*et).toString()+" cm"),this.setFontSize(this.getFontSize()/et),u="n",T=k.ADVANCED}function Y(){this.restoreGraphicsState(),u="S",T=k.COMPAT}var Q=f.__private__.combineFontStyleAndFontWeight=function(m,N){if(m=="bold"&&N=="normal"||m=="bold"&&N==400||m=="normal"&&N=="italic"||m=="bold"&&N=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return N&&(m=N==400||N==="normal"?m==="italic"?"italic":"normal":N!=700&&N!=="bold"||m!=="normal"?(N==700?"bold":N)+""+m:"bold"),m};f.advancedAPI=function(m){var N=T===k.COMPAT;return N&&I.call(this),typeof m!="function"||(m(this),N&&Y.call(this)),this},f.compatAPI=function(m){var N=T===k.ADVANCED;return N&&Y.call(this),typeof m!="function"||(m(this),N&&I.call(this)),this},f.isAdvancedAPI=function(){return T===k.ADVANCED};var H,j=function(m){if(T!==k.ADVANCED)throw new Error(m+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},U=f.roundToPrecision=f.__private__.roundToPrecision=function(m,N){var le=e||N;if(isNaN(m)||isNaN(le))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return m.toFixed(le).replace(/0+$/,"")};H=f.hpf=f.__private__.hpf=typeof l=="number"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return U(m,l)}:l==="smart"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return U(m,m>-1&&m<1?16:5)}:function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return U(m,16)};var K=f.f2=f.__private__.f2=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f2");return U(m,2)},D=f.__private__.f3=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f3");return U(m,3)},O=f.scale=f.__private__.scale=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.scale");return T===k.COMPAT?m*et:T===k.ADVANCED?m:void 0},J=function(m){return T===k.COMPAT?qa()-m:T===k.ADVANCED?m:void 0},M=function(m){return O(J(m))};f.__private__.setPrecision=f.setPrecision=function(m){typeof parseInt(m,10)=="number"&&(e=parseInt(m,10))};var ee,W="00000000000000000000000000000000",ae=f.__private__.getFileId=function(){return W},ne=f.__private__.setFileId=function(m){return W=m!==void 0&&/^[a-fA-F0-9]{32}$/.test(m)?m.toUpperCase():W.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(Pn=new _c(c.userPermissions,c.userPassword,c.ownerPassword,W)),W};f.setFileId=function(m){return ne(m),this},f.getFileId=function(){return ae()};var oe=f.__private__.convertDateToPDFDate=function(m){var N=m.getTimezoneOffset(),le=N<0?"+":"-",me=Math.floor(Math.abs(N/60)),Oe=Math.abs(N%60),Fe=[le,F(me),"'",F(Oe),"'"].join("");return["D:",m.getFullYear(),F(m.getMonth()+1),F(m.getDate()),F(m.getHours()),F(m.getMinutes()),F(m.getSeconds()),Fe].join("")},de=f.__private__.convertPDFDateToDate=function(m){var N=parseInt(m.substr(2,4),10),le=parseInt(m.substr(6,2),10)-1,me=parseInt(m.substr(8,2),10),Oe=parseInt(m.substr(10,2),10),Fe=parseInt(m.substr(12,2),10),Xe=parseInt(m.substr(14,2),10);return new Date(N,le,me,Oe,Fe,Xe,0)},fe=f.__private__.setCreationDate=function(m){var N;if(m===void 0&&(m=new Date),m instanceof Date)N=oe(m);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m))throw new Error("Invalid argument passed to jsPDF.setCreationDate");N=m}return ee=N},P=f.__private__.getCreationDate=function(m){var N=ee;return m==="jsDate"&&(N=de(ee)),N};f.setCreationDate=function(m){return fe(m),this},f.getCreationDate=function(m){return P(m)};var A,F=f.__private__.padd2=function(m){return("0"+parseInt(m)).slice(-2)},G=f.__private__.padd2Hex=function(m){return("00"+(m=m.toString())).substr(m.length)},Z=0,_=[],q=[],te=0,Ae=[],ce=[],V=!1,R=q,re=function(){Z=0,te=0,q=[],_=[],Ae=[],ra=Yr(),ri=Yr()};f.__private__.setCustomOutputDestination=function(m){V=!0,R=m};var C=function(m){V||(R=m)};f.__private__.resetCustomOutputDestination=function(){V=!1,R=q};var L=f.__private__.out=function(m){return m=m.toString(),te+=m.length+1,R.push(m),R},he=f.__private__.write=function(m){return L(arguments.length===1?m.toString():Array.prototype.join.call(arguments," "))},pe=f.__private__.getArrayBuffer=function(m){for(var N=m.length,le=new ArrayBuffer(N),me=new Uint8Array(le);N--;)me[N]=m.charCodeAt(N);return le},ge=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return ge};var be=n.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(m){return be=T===k.ADVANCED?m/et:m,this};var xe,Ee=f.__private__.getFontSize=f.getFontSize=function(){return T===k.COMPAT?be:be*et},ie=n.R2L||!1;f.__private__.setR2L=f.setR2L=function(m){return ie=m,this},f.__private__.getR2L=f.getR2L=function(){return ie};var Pe,Be=f.__private__.setZoomMode=function(m){var N=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m))xe=m;else if(isNaN(m)){if(N.indexOf(m)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+m+'" is not recognized.');xe=m}else xe=parseInt(m,10)};f.__private__.getZoomMode=function(){return xe};var Ze,it=f.__private__.setPageMode=function(m){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(m)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+m+'" is not recognized.');Pe=m};f.__private__.getPageMode=function(){return Pe};var qe=f.__private__.setLayoutMode=function(m){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(m)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+m+'" is not recognized.');Ze=m};f.__private__.getLayoutMode=function(){return Ze},f.__private__.setDisplayMode=f.setDisplayMode=function(m,N,le){return Be(m),qe(N),it(le),this};var tt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(m){if(Object.keys(tt).indexOf(m)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return tt[m]},f.__private__.getDocumentProperties=function(){return tt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(m){for(var N in tt)tt.hasOwnProperty(N)&&m[N]&&(tt[N]=m[N]);return this},f.__private__.setDocumentProperty=function(m,N){if(Object.keys(tt).indexOf(m)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return tt[m]=N};var ft,et,Yt,Et,cn,Pt={},Ft={},Sn=[],Ce={},Je={},st={},bt={},Ie=null,Qe=0,We=[],Rt=new fb(f),un=n.hotfixes||[],yr={},Zr={},os=[],vt=function m(N,le,me,Oe,Fe,Xe){if(!(this instanceof m))return new m(N,le,me,Oe,Fe,Xe);isNaN(N)&&(N=1),isNaN(le)&&(le=0),isNaN(me)&&(me=0),isNaN(Oe)&&(Oe=1),isNaN(Fe)&&(Fe=0),isNaN(Xe)&&(Xe=0),this._matrix=[N,le,me,Oe,Fe,Xe]};Object.defineProperty(vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vt.prototype.join=function(m){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(H).join(m)},vt.prototype.multiply=function(m){var N=m.sx*this.sx+m.shy*this.shx,le=m.sx*this.shy+m.shy*this.sy,me=m.shx*this.sx+m.sy*this.shx,Oe=m.shx*this.shy+m.sy*this.sy,Fe=m.tx*this.sx+m.ty*this.shx+this.tx,Xe=m.tx*this.shy+m.ty*this.sy+this.ty;return new vt(N,le,me,Oe,Fe,Xe)},vt.prototype.decompose=function(){var m=this.sx,N=this.shy,le=this.shx,me=this.sy,Oe=this.tx,Fe=this.ty,Xe=Math.sqrt(m*m+N*N),at=(m/=Xe)*le+(N/=Xe)*me;le-=m*at,me-=N*at;var gt=Math.sqrt(le*le+me*me);return at/=gt,m*(me/=gt)<N*(le/=gt)&&(m=-m,N=-N,at=-at,Xe=-Xe),{scale:new vt(Xe,0,0,gt,0,0),translate:new vt(1,0,0,1,Oe,Fe),rotate:new vt(m,N,-N,m,0,0),skew:new vt(1,0,at,1,0,0)}},vt.prototype.toString=function(m){return this.join(" ")},vt.prototype.inversed=function(){var m=this.sx,N=this.shy,le=this.shx,me=this.sy,Oe=this.tx,Fe=this.ty,Xe=1/(m*me-N*le),at=me*Xe,gt=-N*Xe,Mt=-le*Xe,Lt=m*Xe;return new vt(at,gt,Mt,Lt,-at*Oe-Mt*Fe,-gt*Oe-Lt*Fe)},vt.prototype.applyToPoint=function(m){var N=m.x*this.sx+m.y*this.shx+this.tx,le=m.x*this.shy+m.y*this.sy+this.ty;return new Il(N,le)},vt.prototype.applyToRectangle=function(m){var N=this.applyToPoint(m),le=this.applyToPoint(new Il(m.x+m.w,m.y+m.h));return new wu(N.x,N.y,le.x-N.x,le.y-N.y)},vt.prototype.clone=function(){var m=this.sx,N=this.shy,le=this.shx,me=this.sy,Oe=this.tx,Fe=this.ty;return new vt(m,N,le,me,Oe,Fe)},f.Matrix=vt;var ti=f.matrixMult=function(m,N){return N.multiply(m)},Ei=new vt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Ei;var ls=function(m,N){if(!Je[m]){var le=(N instanceof ll?"Sh":"P")+(Object.keys(Ce).length+1).toString(10);N.id=le,Je[m]=le,Ce[le]=N,Rt.publish("addPattern",N)}};f.ShadingPattern=ll,f.TilingPattern=Tc,f.addShadingPattern=function(m,N){return j("addShadingPattern()"),ls(m,N),this},f.beginTilingPattern=function(m){j("beginTilingPattern()"),gd(m.boundingBox[0],m.boundingBox[1],m.boundingBox[2]-m.boundingBox[0],m.boundingBox[3]-m.boundingBox[1],m.matrix)},f.endTilingPattern=function(m,N){j("endTilingPattern()"),N.stream=ce[A].join(`
`),ls(m,N),Rt.publish("endTilingPattern",N),os.pop().restore()};var en=f.__private__.newObject=function(){var m=Yr();return ks(m,!0),m},Yr=f.__private__.newObjectDeferred=function(){return Z++,_[Z]=function(){return te},Z},ks=function(m,N){return N=typeof N=="boolean"&&N,_[m]=te,N&&L(m+" 0 obj"),m},Cl=f.__private__.newAdditionalObject=function(){var m={objId:Yr(),content:""};return Ae.push(m),m},ra=Yr(),ri=Yr(),ni=f.__private__.decodeColorString=function(m){var N=m.split(" ");if(N.length!==2||N[1]!=="g"&&N[1]!=="G")N.length===5&&(N[4]==="k"||N[4]==="K")&&(N=[(1-N[0])*(1-N[3]),(1-N[1])*(1-N[3]),(1-N[2])*(1-N[3]),"r"]);else{var le=parseFloat(N[0]);N=[le,le,le,"r"]}for(var me="#",Oe=0;Oe<3;Oe++)me+=("0"+Math.floor(255*parseFloat(N[Oe])).toString(16)).slice(-2);return me},si=f.__private__.encodeColorString=function(m){var N;typeof m=="string"&&(m={ch1:m});var le=m.ch1,me=m.ch2,Oe=m.ch3,Fe=m.ch4,Xe=m.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof le=="string"&&le.charAt(0)!=="#"){var at=new jx(le);if(at.ok)le=at.toHex();else if(!/^\d*\.?\d*$/.test(le))throw new Error('Invalid color "'+le+'" passed to jsPDF.encodeColorString.')}if(typeof le=="string"&&/^#[0-9A-Fa-f]{3}$/.test(le)&&(le="#"+le[1]+le[1]+le[2]+le[2]+le[3]+le[3]),typeof le=="string"&&/^#[0-9A-Fa-f]{6}$/.test(le)){var gt=parseInt(le.substr(1),16);le=gt>>16&255,me=gt>>8&255,Oe=255&gt}if(me===void 0||Fe===void 0&&le===me&&me===Oe)if(typeof le=="string")N=le+" "+Xe[0];else switch(m.precision){case 2:N=K(le/255)+" "+Xe[0];break;case 3:default:N=D(le/255)+" "+Xe[0]}else if(Fe===void 0||sr(Fe)==="object"){if(Fe&&!isNaN(Fe.a)&&Fe.a===0)return N=["1.","1.","1.",Xe[1]].join(" ");if(typeof le=="string")N=[le,me,Oe,Xe[1]].join(" ");else switch(m.precision){case 2:N=[K(le/255),K(me/255),K(Oe/255),Xe[1]].join(" ");break;default:case 3:N=[D(le/255),D(me/255),D(Oe/255),Xe[1]].join(" ")}}else if(typeof le=="string")N=[le,me,Oe,Fe,Xe[2]].join(" ");else switch(m.precision){case 2:N=[K(le),K(me),K(Oe),K(Fe),Xe[2]].join(" ");break;case 3:default:N=[D(le),D(me),D(Oe),D(Fe),Xe[2]].join(" ")}return N},Ni=f.__private__.getFilters=function(){return a},js=f.__private__.putStream=function(m){var N=(m=m||{}).data||"",le=m.filters||Ni(),me=m.alreadyAppliedFilters||[],Oe=m.addLength1||!1,Fe=N.length,Xe=m.objectId,at=function(On){return On};if(c!==null&&Xe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(at=Pn.encryptor(Xe,0));var gt={};le===!0&&(le=["FlateEncode"]);var Mt=m.additionalKeyValues||[],Lt=(gt=_t.API.processDataByFilters!==void 0?_t.API.processDataByFilters(N,le):{data:N,reverseChain:[]}).reverseChain+(Array.isArray(me)?me.join(" "):me.toString());if(gt.data.length!==0&&(Mt.push({key:"Length",value:gt.data.length}),Oe===!0&&Mt.push({key:"Length1",value:Fe})),Lt.length!=0)if(Lt.split("/").length-1==1)Mt.push({key:"Filter",value:Lt});else{Mt.push({key:"Filter",value:"["+Lt+"]"});for(var zt=0;zt<Mt.length;zt+=1)if(Mt[zt].key==="DecodeParms"){for(var Ar=[],Or=0;Or<gt.reverseChain.split("/").length-1;Or+=1)Ar.push("null");Ar.push(Mt[zt].value),Mt[zt].value="["+Ar.join(" ")+"]"}}L("<<");for(var Wr=0;Wr<Mt.length;Wr++)L("/"+Mt[Wr].key+" "+Mt[Wr].value);L(">>"),gt.data.length!==0&&(L("stream"),L(at(gt.data)),L("endstream"))},ji=f.__private__.putPage=function(m){var N=m.number,le=m.data,me=m.objId,Oe=m.contentsObjId;ks(me,!0),L("<</Type /Page"),L("/Parent "+m.rootDictionaryObjId+" 0 R"),L("/Resources "+m.resourceDictionaryObjId+" 0 R"),L("/MediaBox ["+parseFloat(H(m.mediaBox.bottomLeftX))+" "+parseFloat(H(m.mediaBox.bottomLeftY))+" "+H(m.mediaBox.topRightX)+" "+H(m.mediaBox.topRightY)+"]"),m.cropBox!==null&&L("/CropBox ["+H(m.cropBox.bottomLeftX)+" "+H(m.cropBox.bottomLeftY)+" "+H(m.cropBox.topRightX)+" "+H(m.cropBox.topRightY)+"]"),m.bleedBox!==null&&L("/BleedBox ["+H(m.bleedBox.bottomLeftX)+" "+H(m.bleedBox.bottomLeftY)+" "+H(m.bleedBox.topRightX)+" "+H(m.bleedBox.topRightY)+"]"),m.trimBox!==null&&L("/TrimBox ["+H(m.trimBox.bottomLeftX)+" "+H(m.trimBox.bottomLeftY)+" "+H(m.trimBox.topRightX)+" "+H(m.trimBox.topRightY)+"]"),m.artBox!==null&&L("/ArtBox ["+H(m.artBox.bottomLeftX)+" "+H(m.artBox.bottomLeftY)+" "+H(m.artBox.topRightX)+" "+H(m.artBox.topRightY)+"]"),typeof m.userUnit=="number"&&m.userUnit!==1&&L("/UserUnit "+m.userUnit),Rt.publish("putPage",{objId:me,pageContext:We[N],pageNumber:N,page:le}),L("/Contents "+Oe+" 0 R"),L(">>"),L("endobj");var Fe=le.join(`
`);return T===k.ADVANCED&&(Fe+=`
Q`),ks(Oe,!0),js({data:Fe,filters:Ni(),objectId:Oe}),L("endobj"),me},Io=f.__private__.putPages=function(){var m,N,le=[];for(m=1;m<=Qe;m++)We[m].objId=Yr(),We[m].contentsObjId=Yr();for(m=1;m<=Qe;m++)le.push(ji({number:m,data:ce[m],objId:We[m].objId,contentsObjId:We[m].contentsObjId,mediaBox:We[m].mediaBox,cropBox:We[m].cropBox,bleedBox:We[m].bleedBox,trimBox:We[m].trimBox,artBox:We[m].artBox,userUnit:We[m].userUnit,rootDictionaryObjId:ra,resourceDictionaryObjId:ri}));ks(ra,!0),L("<</Type /Pages");var me="/Kids [";for(N=0;N<Qe;N++)me+=le[N]+" 0 R ";L(me+"]"),L("/Count "+Qe),L(">>"),L("endobj"),Rt.publish("postPutPages")},Al=function(m){Rt.publish("putFont",{font:m,out:L,newObject:en,putStream:js}),m.isAlreadyPutted!==!0&&(m.objectNumber=en(),L("<<"),L("/Type /Font"),L("/BaseFont /"+xc(m.postScriptName)),L("/Subtype /Type1"),typeof m.encoding=="string"&&L("/Encoding /"+m.encoding),L("/FirstChar 32"),L("/LastChar 255"),L(">>"),L("endobj"))},Tl=function(){for(var m in Pt)Pt.hasOwnProperty(m)&&(h===!1||h===!0&&p.hasOwnProperty(m))&&Al(Pt[m])},Pl=function(m){m.objectNumber=en();var N=[];N.push({key:"Type",value:"/XObject"}),N.push({key:"Subtype",value:"/Form"}),N.push({key:"BBox",value:"["+[H(m.x),H(m.y),H(m.x+m.width),H(m.y+m.height)].join(" ")+"]"}),N.push({key:"Matrix",value:"["+m.matrix.toString()+"]"});var le=m.pages[1].join(`
`);js({data:le,additionalKeyValues:N,objectId:m.objectNumber}),L("endobj")},Ol=function(){for(var m in yr)yr.hasOwnProperty(m)&&Pl(yr[m])},Jh=function(m,N){var le,me=[],Oe=1/(N-1);for(le=0;le<1;le+=Oe)me.push(le);if(me.push(1),m[0].offset!=0){var Fe={offset:0,color:m[0].color};m.unshift(Fe)}if(m[m.length-1].offset!=1){var Xe={offset:1,color:m[m.length-1].color};m.push(Xe)}for(var at="",gt=0,Mt=0;Mt<me.length;Mt++){for(le=me[Mt];le>m[gt+1].offset;)gt++;var Lt=m[gt].offset,zt=(le-Lt)/(m[gt+1].offset-Lt),Ar=m[gt].color,Or=m[gt+1].color;at+=G(Math.round((1-zt)*Ar[0]+zt*Or[0]).toString(16))+G(Math.round((1-zt)*Ar[1]+zt*Or[1]).toString(16))+G(Math.round((1-zt)*Ar[2]+zt*Or[2]).toString(16))}return at.trim()},tg=function(m,N){N||(N=21);var le=en(),me=Jh(m.colors,N),Oe=[];Oe.push({key:"FunctionType",value:"0"}),Oe.push({key:"Domain",value:"[0.0 1.0]"}),Oe.push({key:"Size",value:"["+N+"]"}),Oe.push({key:"BitsPerSample",value:"8"}),Oe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Oe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),js({data:me,additionalKeyValues:Oe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:le}),L("endobj"),m.objectNumber=en(),L("<< /ShadingType "+m.type),L("/ColorSpace /DeviceRGB");var Fe="/Coords ["+H(parseFloat(m.coords[0]))+" "+H(parseFloat(m.coords[1]))+" ";m.type===2?Fe+=H(parseFloat(m.coords[2]))+" "+H(parseFloat(m.coords[3])):Fe+=H(parseFloat(m.coords[2]))+" "+H(parseFloat(m.coords[3]))+" "+H(parseFloat(m.coords[4]))+" "+H(parseFloat(m.coords[5])),L(Fe+="]"),m.matrix&&L("/Matrix ["+m.matrix.toString()+"]"),L("/Function "+le+" 0 R"),L("/Extend [true true]"),L(">>"),L("endobj")},rg=function(m,N){var le=Yr(),me=en();N.push({resourcesOid:le,objectOid:me}),m.objectNumber=me;var Oe=[];Oe.push({key:"Type",value:"/Pattern"}),Oe.push({key:"PatternType",value:"1"}),Oe.push({key:"PaintType",value:"1"}),Oe.push({key:"TilingType",value:"1"}),Oe.push({key:"BBox",value:"["+m.boundingBox.map(H).join(" ")+"]"}),Oe.push({key:"XStep",value:H(m.xStep)}),Oe.push({key:"YStep",value:H(m.yStep)}),Oe.push({key:"Resources",value:le+" 0 R"}),m.matrix&&Oe.push({key:"Matrix",value:"["+m.matrix.toString()+"]"}),js({data:m.stream,additionalKeyValues:Oe,objectId:m.objectNumber}),L("endobj")},Ll=function(m){var N;for(N in Ce)Ce.hasOwnProperty(N)&&(Ce[N]instanceof ll?tg(Ce[N]):Ce[N]instanceof Tc&&rg(Ce[N],m))},Qh=function(m){for(var N in m.objectNumber=en(),L("<<"),m)switch(N){case"opacity":L("/ca "+K(m[N]));break;case"stroke-opacity":L("/CA "+K(m[N]))}L(">>"),L("endobj")},ng=function(){var m;for(m in st)st.hasOwnProperty(m)&&Qh(st[m])},uu=function(){for(var m in L("/XObject <<"),yr)yr.hasOwnProperty(m)&&yr[m].objectNumber>=0&&L("/"+m+" "+yr[m].objectNumber+" 0 R");Rt.publish("putXobjectDict"),L(">>")},sg=function(){Pn.oid=en(),L("<<"),L("/Filter /Standard"),L("/V "+Pn.v),L("/R "+Pn.r),L("/U <"+Pn.toHexString(Pn.U)+">"),L("/O <"+Pn.toHexString(Pn.O)+">"),L("/P "+Pn.P),L(">>"),L("endobj")},Zh=function(){for(var m in L("/Font <<"),Pt)Pt.hasOwnProperty(m)&&(h===!1||h===!0&&p.hasOwnProperty(m))&&L("/"+m+" "+Pt[m].objectNumber+" 0 R");L(">>")},ig=function(){if(Object.keys(Ce).length>0){for(var m in L("/Shading <<"),Ce)Ce.hasOwnProperty(m)&&Ce[m]instanceof ll&&Ce[m].objectNumber>=0&&L("/"+m+" "+Ce[m].objectNumber+" 0 R");Rt.publish("putShadingPatternDict"),L(">>")}},Dl=function(m){if(Object.keys(Ce).length>0){for(var N in L("/Pattern <<"),Ce)Ce.hasOwnProperty(N)&&Ce[N]instanceof f.TilingPattern&&Ce[N].objectNumber>=0&&Ce[N].objectNumber<m&&L("/"+N+" "+Ce[N].objectNumber+" 0 R");Rt.publish("putTilingPatternDict"),L(">>")}},ag=function(){if(Object.keys(st).length>0){var m;for(m in L("/ExtGState <<"),st)st.hasOwnProperty(m)&&st[m].objectNumber>=0&&L("/"+m+" "+st[m].objectNumber+" 0 R");Rt.publish("putGStateDict"),L(">>")}},Nr=function(m){ks(m.resourcesOid,!0),L("<<"),L("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Zh(),ig(),Dl(m.objectOid),ag(),uu(),L(">>"),L("endobj")},ed=function(){var m=[];Tl(),ng(),Ol(),Ll(m),Rt.publish("putResources"),m.forEach(Nr),Nr({resourcesOid:ri,objectOid:Number.MAX_SAFE_INTEGER}),Rt.publish("postPutResources")},td=function(){Rt.publish("putAdditionalObjects");for(var m=0;m<Ae.length;m++){var N=Ae[m];ks(N.objId,!0),L(N.content),L("endobj")}Rt.publish("postPutAdditionalObjects")},rd=function(m){Ft[m.fontName]=Ft[m.fontName]||{},Ft[m.fontName][m.fontStyle]=m.id},hu=function(m,N,le,me,Oe){var Fe={id:"F"+(Object.keys(Pt).length+1).toString(10),postScriptName:m,fontName:N,fontStyle:le,encoding:me,isStandardFont:Oe||!1,metadata:{}};return Rt.publish("addFont",{font:Fe,instance:this}),Pt[Fe.id]=Fe,rd(Fe),Fe.id},og=function(m){for(var N=0,le=ge.length;N<le;N++){var me=hu.call(this,m[N][0],m[N][1],m[N][2],ge[N][3],!0);h===!1&&(p[me]=!0);var Oe=m[N][0].split("-");rd({id:me,fontName:Oe[0],fontStyle:Oe[1]||""})}Rt.publish("addFonts",{fonts:Pt,dictionary:Ft})},ii=function(m){return m.foo=function(){try{return m.apply(this,arguments)}catch(me){var N=me.stack||"";~N.indexOf(" at ")&&(N=N.split(" at ")[1]);var le="Error in function "+N.split(`
`)[0].split("<")[0]+": "+me.message;if(!St.console)throw new Error(le);St.console.error(le,me),St.alert&&alert(le)}},m.foo.bar=m,m.foo},Ml=function(m,N){var le,me,Oe,Fe,Xe,at,gt,Mt,Lt;if(Oe=(N=N||{}).sourceEncoding||"Unicode",Xe=N.outputEncoding,(N.autoencode||Xe)&&Pt[ft].metadata&&Pt[ft].metadata[Oe]&&Pt[ft].metadata[Oe].encoding&&(Fe=Pt[ft].metadata[Oe].encoding,!Xe&&Pt[ft].encoding&&(Xe=Pt[ft].encoding),!Xe&&Fe.codePages&&(Xe=Fe.codePages[0]),typeof Xe=="string"&&(Xe=Fe[Xe]),Xe)){for(gt=!1,at=[],le=0,me=m.length;le<me;le++)(Mt=Xe[m.charCodeAt(le)])?at.push(String.fromCharCode(Mt)):at.push(m[le]),at[le].charCodeAt(0)>>8&&(gt=!0);m=at.join("")}for(le=m.length;gt===void 0&&le!==0;)m.charCodeAt(le-1)>>8&&(gt=!0),le--;if(!gt)return m;for(at=N.noBOM?[]:[254,255],le=0,me=m.length;le<me;le++){if((Lt=(Mt=m.charCodeAt(le))>>8)>>8)throw new Error("Character at position "+le+" of string '"+m+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");at.push(Lt),at.push(Mt-(Lt<<8))}return String.fromCharCode.apply(void 0,at)},cs=f.__private__.pdfEscape=f.pdfEscape=function(m,N){return Ml(m,N).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},du=f.__private__.beginPage=function(m){ce[++Qe]=[],We[Qe]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(m[0]),topRightY:Number(m[1])}},sd(Qe),C(ce[A])},nd=function(m,N){var le,me,Oe;switch(t=N||t,typeof m=="string"&&(le=w(m.toLowerCase()),Array.isArray(le)&&(me=le[0],Oe=le[1])),Array.isArray(m)&&(me=m[0]*et,Oe=m[1]*et),isNaN(me)&&(me=s[0],Oe=s[1]),(me>14400||Oe>14400)&&(ur.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),me=Math.min(14400,me),Oe=Math.min(14400,Oe)),s=[me,Oe],t.substr(0,1)){case"l":Oe>me&&(s=[Oe,me]);break;case"p":me>Oe&&(s=[Oe,me])}du(s),ud(mu),L(ai),yu!==0&&L(yu+" J"),bu!==0&&L(bu+" j"),Rt.publish("addPage",{pageNumber:Qe})},lg=function(m){m>0&&m<=Qe&&(ce.splice(m,1),We.splice(m,1),Qe--,A>Qe&&(A=Qe),this.setPage(A))},sd=function(m){m>0&&m<=Qe&&(A=m)},cg=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return ce.length-1},id=function(m,N,le){var me,Oe=void 0;return le=le||{},m=m!==void 0?m:Pt[ft].fontName,N=N!==void 0?N:Pt[ft].fontStyle,me=m.toLowerCase(),Ft[me]!==void 0&&Ft[me][N]!==void 0?Oe=Ft[me][N]:Ft[m]!==void 0&&Ft[m][N]!==void 0?Oe=Ft[m][N]:le.disableWarning===!1&&ur.warn("Unable to look up font label for font '"+m+"', '"+N+"'. Refer to getFontList() for available fonts."),Oe||le.noFallback||(Oe=Ft.times[N])==null&&(Oe=Ft.times.normal),Oe},ug=f.__private__.putInfo=function(){var m=en(),N=function(me){return me};for(var le in c!==null&&(N=Pn.encryptor(m,0)),L("<<"),L("/Producer ("+cs(N("jsPDF "+_t.version))+")"),tt)tt.hasOwnProperty(le)&&tt[le]&&L("/"+le.substr(0,1).toUpperCase()+le.substr(1)+" ("+cs(N(tt[le]))+")");L("/CreationDate ("+cs(N(ee))+")"),L(">>"),L("endobj")},fu=f.__private__.putCatalog=function(m){var N=(m=m||{}).rootDictionaryObjId||ra;switch(en(),L("<<"),L("/Type /Catalog"),L("/Pages "+N+" 0 R"),xe||(xe="fullwidth"),xe){case"fullwidth":L("/OpenAction [3 0 R /FitH null]");break;case"fullheight":L("/OpenAction [3 0 R /FitV null]");break;case"fullpage":L("/OpenAction [3 0 R /Fit]");break;case"original":L("/OpenAction [3 0 R /XYZ null null 1]");break;default:var le=""+xe;le.substr(le.length-1)==="%"&&(xe=parseInt(xe)/100),typeof xe=="number"&&L("/OpenAction [3 0 R /XYZ null null "+K(xe)+"]")}switch(Ze||(Ze="continuous"),Ze){case"continuous":L("/PageLayout /OneColumn");break;case"single":L("/PageLayout /SinglePage");break;case"two":case"twoleft":L("/PageLayout /TwoColumnLeft");break;case"tworight":L("/PageLayout /TwoColumnRight")}Pe&&L("/PageMode /"+Pe),Rt.publish("putCatalog"),L(">>"),L("endobj")},hg=f.__private__.putTrailer=function(){L("trailer"),L("<<"),L("/Size "+(Z+1)),L("/Root "+Z+" 0 R"),L("/Info "+(Z-1)+" 0 R"),c!==null&&L("/Encrypt "+Pn.oid+" 0 R"),L("/ID [ <"+W+"> <"+W+"> ]"),L(">>")},dg=f.__private__.putHeader=function(){L("%PDF-"+v),L("%ºß¬à")},fg=f.__private__.putXRef=function(){var m="0000000000";L("xref"),L("0 "+(Z+1)),L("0000000000 65535 f ");for(var N=1;N<=Z;N++)typeof _[N]=="function"?L((m+_[N]()).slice(-10)+" 00000 n "):_[N]!==void 0?L((m+_[N]).slice(-10)+" 00000 n "):L("0000000000 00000 n ")},na=f.__private__.buildDocument=function(){re(),C(q),Rt.publish("buildDocument"),dg(),Io(),td(),ed(),c!==null&&sg(),ug(),fu();var m=te;return fg(),hg(),L("startxref"),L(""+m),L("%%EOF"),C(ce[A]),q.join(`
`)},El=f.__private__.getBlob=function(m){return new Blob([pe(m)],{type:"application/pdf"})},Nl=f.output=f.__private__.output=ii(function(m,N){switch(typeof(N=N||{})=="string"?N={filename:N}:N.filename=N.filename||"generated.pdf",m){case void 0:return na();case"save":f.save(N.filename);break;case"arraybuffer":return pe(na());case"blob":return El(na());case"bloburi":case"bloburl":if(St.URL!==void 0&&typeof St.URL.createObjectURL=="function")return St.URL&&St.URL.createObjectURL(El(na()))||void 0;ur.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var le="",me=na();try{le=I0(me)}catch{le=I0(unescape(encodeURIComponent(me)))}return"data:application/pdf;filename="+N.filename+";base64,"+le;case"pdfobjectnewwindow":if(Object.prototype.toString.call(St)==="[object Window]"){var Oe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Fe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';N.pdfObjectUrl&&(Oe=N.pdfObjectUrl,Fe="");var Xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Oe+'"'+Fe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(N)+");<\/script></body></html>",at=St.open();return at!==null&&at.document.write(Xe),at}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(St)==="[object Window]"){var gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(N.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+N.filename+'" width="500px" height="400px" /></body></html>',Mt=St.open();if(Mt!==null){Mt.document.write(gt);var Lt=this;Mt.document.documentElement.querySelector("#pdfViewer").onload=function(){Mt.document.title=N.filename,Mt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Lt.output("bloburl"))}}return Mt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(St)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",N)+'"></iframe></body></html>',Ar=St.open();if(Ar!==null&&(Ar.document.write(zt),Ar.document.title=N.filename),Ar||typeof safari>"u")return Ar;break;case"datauri":case"dataurl":return St.document.location.href=this.output("datauristring",N);default:return null}}),ad=function(m){return Array.isArray(un)===!0&&un.indexOf(m)>-1};switch(r){case"pt":et=1;break;case"mm":et=72/25.4;break;case"cm":et=72/2.54;break;case"in":et=72;break;case"px":et=ad("px_scaling")==1?.75:96/72;break;case"pc":case"em":et=12;break;case"ex":et=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);et=r}var Pn=null;fe(),ne();var pg=function(m){return c!==null?Pn.encryptor(m,0):function(N){return N}},od=f.__private__.getPageInfo=f.getPageInfo=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:We[m].objId,pageNumber:m,pageContext:We[m]}},Ot=f.__private__.getPageInfoByObjId=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var N in We)if(We[N].objId===m)break;return od(N)},gg=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:We[A].objId,pageNumber:A,pageContext:We[A]}};f.addPage=function(){return nd.apply(this,arguments),this},f.setPage=function(){return sd.apply(this,arguments),C.call(this,ce[A]),this},f.insertPage=function(m){return this.addPage(),this.movePage(A,m),this},f.movePage=function(m,N){var le,me;if(m>N){le=ce[m],me=We[m];for(var Oe=m;Oe>N;Oe--)ce[Oe]=ce[Oe-1],We[Oe]=We[Oe-1];ce[N]=le,We[N]=me,this.setPage(N)}else if(m<N){le=ce[m],me=We[m];for(var Fe=m;Fe<N;Fe++)ce[Fe]=ce[Fe+1],We[Fe]=We[Fe+1];ce[N]=le,We[N]=me,this.setPage(N)}return this},f.deletePage=function(){return lg.apply(this,arguments),this},f.__private__.text=f.text=function(m,N,le,me,Oe){var Fe,Xe,at,gt,Mt,Lt,zt,Ar,Or,Wr=(me=me||{}).scope||this;if(typeof m=="number"&&typeof N=="number"&&(typeof le=="string"||Array.isArray(le))){var On=le;le=N,N=m,m=On}if(arguments[3]instanceof vt?(j("The transform parameter of text() with a Matrix value"),Or=Oe):(at=arguments[4],gt=arguments[5],sr(zt=arguments[3])==="object"&&zt!==null||(typeof at=="string"&&(gt=at,at=null),typeof zt=="string"&&(gt=zt,zt=null),typeof zt=="number"&&(at=zt,zt=null),me={flags:zt,angle:at,align:gt})),isNaN(N)||isNaN(le)||m==null)throw new Error("Invalid arguments passed to jsPDF.text");if(m.length===0)return Wr;var hn="",oi=!1,Cs=typeof me.lineHeightFactor=="number"?me.lineHeightFactor:$o,Ii=Wr.internal.scaleFactor;function md(fr){return fr=fr.split("	").join(Array(me.TabLen||9).join(" ")),cs(fr,zt)}function ku(fr){for(var pr,Rr=fr.concat(),tn=[],la=Rr.length;la--;)typeof(pr=Rr.shift())=="string"?tn.push(pr):Array.isArray(fr)&&(pr.length===1||pr[1]===void 0&&pr[2]===void 0)?tn.push(pr[0]):tn.push([pr[0],pr[1],pr[2]]);return tn}function Cu(fr,pr){var Rr;if(typeof fr=="string")Rr=pr(fr)[0];else if(Array.isArray(fr)){for(var tn,la,Eu=fr.concat(),Xl=[],_d=Eu.length;_d--;)typeof(tn=Eu.shift())=="string"?Xl.push(pr(tn)[0]):Array.isArray(tn)&&typeof tn[0]=="string"&&(la=pr(tn[0],tn[1],tn[2]),Xl.push([la[0],la[1],la[2]]));Rr=Xl}return Rr}var $l=!1,Au=!0;if(typeof m=="string")$l=!0;else if(Array.isArray(m)){var Tu=m.concat();Xe=[];for(var ql,kn=Tu.length;kn--;)(typeof(ql=Tu.shift())!="string"||Array.isArray(ql)&&typeof ql[0]!="string")&&(Au=!1);$l=Au}if($l===!1)throw new Error('Type of text must be string or Array. "'+m+'" is not recognized.');typeof m=="string"&&(m=m.match(/[\r?\n]/)?m.split(/\r\n|\r|\n/g):[m]);var Ul=be/Wr.internal.scaleFactor,Vl=Ul*(Cs-1);switch(me.baseline){case"bottom":le-=Vl;break;case"top":le+=Ul-Vl;break;case"hanging":le+=Ul-2*Vl;break;case"middle":le+=Ul/2-Vl}if((Lt=me.maxWidth||0)>0&&(typeof m=="string"?m=Wr.splitTextToSize(m,Lt):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(fr,pr){return fr.concat(Wr.splitTextToSize(pr,Lt))},[]))),Fe={text:m,x:N,y:le,options:me,mutex:{pdfEscape:cs,activeFontKey:ft,fonts:Pt,activeFontSize:be}},Rt.publish("preProcessText",Fe),m=Fe.text,at=(me=Fe.options).angle,!(Or instanceof vt)&&at&&typeof at=="number"){at*=Math.PI/180,me.rotationDirection===0&&(at=-at),T===k.ADVANCED&&(at=-at);var zl=Math.cos(at),Pu=Math.sin(at);Or=new vt(zl,Pu,-Pu,zl,0,0)}else at&&at instanceof vt&&(Or=at);T!==k.ADVANCED||Or||(Or=Ei),(Mt=me.charSpace||Fl)!==void 0&&(hn+=H(O(Mt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ar=me.horizontalScale)!==void 0&&(hn+=H(100*Ar)+` Tz
`),me.lang;var us=-1,Cg=me.renderingMode!==void 0?me.renderingMode:me.stroke,Ou=Wr.internal.getCurrentPageInfo().pageContext;switch(Cg){case 0:case!1:case"fill":us=0;break;case 1:case!0:case"stroke":us=1;break;case 2:case"fillThenStroke":us=2;break;case 3:case"invisible":us=3;break;case 4:case"fillAndAddForClipping":us=4;break;case 5:case"strokeAndAddPathForClipping":us=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":us=6;break;case 7:case"addToPathForClipping":us=7}var vd=Ou.usedRenderingMode!==void 0?Ou.usedRenderingMode:-1;us!==-1?hn+=us+` Tr
`:vd!==-1&&(hn+=`0 Tr
`),us!==-1&&(Ou.usedRenderingMode=us),gt=me.align||"left";var Rs,Hl=be*Cs,yd=Wr.internal.pageSize.getWidth(),bd=Pt[ft];Mt=me.charSpace||Fl,Lt=me.maxWidth||0,zt=Object.assign({autoencode:!0,noBOM:!0},me.flags);var Ua=[],Vo=function(fr){return Wr.getStringUnitWidth(fr,{font:bd,charSpace:Mt,fontSize:be,doKerning:!1})*be/Ii};if(Object.prototype.toString.call(m)==="[object Array]"){var hs;Xe=ku(m),gt!=="left"&&(Rs=Xe.map(Vo));var zn,Va=0;if(gt==="right"){N-=Rs[0],m=[],kn=Xe.length;for(var ia=0;ia<kn;ia++)ia===0?(zn=Fi(N),hs=sa(le)):(zn=O(Va-Rs[ia]),hs=-Hl),m.push([Xe[ia],zn,hs]),Va=Rs[ia]}else if(gt==="center"){N-=Rs[0]/2,m=[],kn=Xe.length;for(var aa=0;aa<kn;aa++)aa===0?(zn=Fi(N),hs=sa(le)):(zn=O((Va-Rs[aa])/2),hs=-Hl),m.push([Xe[aa],zn,hs]),Va=Rs[aa]}else if(gt==="left"){m=[],kn=Xe.length;for(var Yl=0;Yl<kn;Yl++)m.push(Xe[Yl])}else if(gt==="justify"&&bd.encoding==="Identity-H"){m=[],kn=Xe.length,Lt=Lt!==0?Lt:yd;for(var oa=0,jr=0;jr<kn;jr++)if(hs=jr===0?sa(le):-Hl,zn=jr===0?Fi(N):oa,jr<kn-1){var Lu=O((Lt-Rs[jr])/(Xe[jr].split(" ").length-1)),Hn=Xe[jr].split(" ");m.push([Hn[0]+" ",zn,hs]),oa=0;for(var Fs=1;Fs<Hn.length;Fs++){var Wl=(Vo(Hn[Fs-1]+" "+Hn[Fs])-Vo(Hn[Fs]))*Ii+Lu;Fs==Hn.length-1?m.push([Hn[Fs],Wl,0]):m.push([Hn[Fs]+" ",Wl,0]),oa-=Wl}}else m.push([Xe[jr],zn,hs]);m.push(["",oa,0])}else{if(gt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(m=[],kn=Xe.length,Lt=Lt!==0?Lt:yd,jr=0;jr<kn;jr++)hs=jr===0?sa(le):-Hl,zn=jr===0?Fi(N):0,jr<kn-1?Ua.push(H(O((Lt-Rs[jr])/(Xe[jr].split(" ").length-1)))):Ua.push(0),m.push([Xe[jr],zn,hs])}}var wd=typeof me.R2L=="boolean"?me.R2L:ie;wd===!0&&(m=Cu(m,function(fr,pr,Rr){return[fr.split("").reverse().join(""),pr,Rr]})),Fe={text:m,x:N,y:le,options:me,mutex:{pdfEscape:cs,activeFontKey:ft,fonts:Pt,activeFontSize:be}},Rt.publish("postProcessText",Fe),m=Fe.text,oi=Fe.mutex.isHex||!1;var Du=Pt[ft].encoding;Du!=="WinAnsiEncoding"&&Du!=="StandardEncoding"||(m=Cu(m,function(fr,pr,Rr){return[md(fr),pr,Rr]})),Xe=ku(m),m=[];for(var zo,Ho,za,Yo=0,Gl=1,Wo=Array.isArray(Xe[0])?Gl:Yo,Ha="",Mu=function(fr,pr,Rr){var tn="";return Rr instanceof vt?(Rr=typeof me.angle=="number"?ti(Rr,new vt(1,0,0,1,fr,pr)):ti(new vt(1,0,0,1,fr,pr),Rr),T===k.ADVANCED&&(Rr=ti(new vt(1,0,0,-1,0,0),Rr)),tn=Rr.join(" ")+` Tm
`):tn=H(fr)+" "+H(pr)+` Td
`,tn},Is=0;Is<Xe.length;Is++){switch(Ha="",Wo){case Gl:za=(oi?"<":"(")+Xe[Is][0]+(oi?">":")"),zo=parseFloat(Xe[Is][1]),Ho=parseFloat(Xe[Is][2]);break;case Yo:za=(oi?"<":"(")+Xe[Is]+(oi?">":")"),zo=Fi(N),Ho=sa(le)}Ua!==void 0&&Ua[Is]!==void 0&&(Ha=Ua[Is]+` Tw
`),Is===0?m.push(Ha+Mu(zo,Ho,Or)+za):Wo===Yo?m.push(Ha+za):Wo===Gl&&m.push(Ha+Mu(zo,Ho,Or)+za)}m=Wo===Yo?m.join(` Tj
T* `):m.join(` Tj
`),m+=` Tj
`;var Bs=`BT
/`;return Bs+=ft+" "+be+` Tf
`,Bs+=H(be*Cs)+` TL
`,Bs+=qo+`
`,Bs+=hn,Bs+=m,L(Bs+="ET"),p[ft]=!0,Wr};var mg=f.__private__.clip=f.clip=function(m){return L(m==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return mg("evenodd")},f.__private__.discardPath=f.discardPath=function(){return L("n"),this};var Ri=f.__private__.isValidStyle=function(m){var N=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(m)!==-1&&(N=!0),N};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(m){return Ri(m)&&(u=m),this};var ld=f.__private__.getStyle=f.getStyle=function(m){var N=u;switch(m){case"D":case"S":N="S";break;case"F":N="f";break;case"FD":case"DF":N="B";break;case"f":case"f*":case"B":case"B*":N=m}return N},cd=f.close=function(){return L("h"),this};f.stroke=function(){return L("S"),this},f.fill=function(m){return jl("f",m),this},f.fillEvenOdd=function(m){return jl("f*",m),this},f.fillStroke=function(m){return jl("B",m),this},f.fillStrokeEvenOdd=function(m){return jl("B*",m),this};var jl=function(m,N){sr(N)==="object"?yg(N,m):L(m)},pu=function(m){m===null||T===k.ADVANCED&&m===void 0||(m=ld(m),L(m))};function vg(m,N,le,me,Oe){var Fe=new Tc(N||this.boundingBox,le||this.xStep,me||this.yStep,this.gState,Oe||this.matrix);Fe.stream=this.stream;var Xe=m+"$$"+this.cloneIndex+++"$$";return ls(Xe,Fe),Fe}var yg=function(m,N){var le=Je[m.key],me=Ce[le];if(me instanceof ll)L("q"),L(bg(N)),me.gState&&f.setGState(me.gState),L(m.matrix.toString()+" cm"),L("/"+le+" sh"),L("Q");else if(me instanceof Tc){var Oe=new vt(1,0,0,-1,0,qa());m.matrix&&(Oe=Oe.multiply(m.matrix||Ei),le=vg.call(me,m.key,m.boundingBox,m.xStep,m.yStep,Oe).id),L("q"),L("/Pattern cs"),L("/"+le+" scn"),me.gState&&f.setGState(me.gState),L(N),L("Q")}},bg=function(m){switch(m){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},gu=f.moveTo=function(m,N){return L(H(O(m))+" "+H(M(N))+" m"),this},Bo=f.lineTo=function(m,N){return L(H(O(m))+" "+H(M(N))+" l"),this},Ba=f.curveTo=function(m,N,le,me,Oe,Fe){return L([H(O(m)),H(M(N)),H(O(le)),H(M(me)),H(O(Oe)),H(M(Fe)),"c"].join(" ")),this};f.__private__.line=f.line=function(m,N,le,me,Oe){if(isNaN(m)||isNaN(N)||isNaN(le)||isNaN(me)||!Ri(Oe))throw new Error("Invalid arguments passed to jsPDF.line");return T===k.COMPAT?this.lines([[le-m,me-N]],m,N,[1,1],Oe||"S"):this.lines([[le-m,me-N]],m,N,[1,1]).stroke()},f.__private__.lines=f.lines=function(m,N,le,me,Oe,Fe){var Xe,at,gt,Mt,Lt,zt,Ar,Or,Wr,On,hn,oi;if(typeof m=="number"&&(oi=le,le=N,N=m,m=oi),me=me||[1,1],Fe=Fe||!1,isNaN(N)||isNaN(le)||!Array.isArray(m)||!Array.isArray(me)||!Ri(Oe)||typeof Fe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(gu(N,le),Xe=me[0],at=me[1],Mt=m.length,On=N,hn=le,gt=0;gt<Mt;gt++)(Lt=m[gt]).length===2?(On=Lt[0]*Xe+On,hn=Lt[1]*at+hn,Bo(On,hn)):(zt=Lt[0]*Xe+On,Ar=Lt[1]*at+hn,Or=Lt[2]*Xe+On,Wr=Lt[3]*at+hn,On=Lt[4]*Xe+On,hn=Lt[5]*at+hn,Ba(zt,Ar,Or,Wr,On,hn));return Fe&&cd(),pu(Oe),this},f.path=function(m){for(var N=0;N<m.length;N++){var le=m[N],me=le.c;switch(le.op){case"m":gu(me[0],me[1]);break;case"l":Bo(me[0],me[1]);break;case"c":Ba.apply(this,me);break;case"h":cd()}}return this},f.__private__.rect=f.rect=function(m,N,le,me,Oe){if(isNaN(m)||isNaN(N)||isNaN(le)||isNaN(me)||!Ri(Oe))throw new Error("Invalid arguments passed to jsPDF.rect");return T===k.COMPAT&&(me=-me),L([H(O(m)),H(M(N)),H(O(le)),H(O(me)),"re"].join(" ")),pu(Oe),this},f.__private__.triangle=f.triangle=function(m,N,le,me,Oe,Fe,Xe){if(isNaN(m)||isNaN(N)||isNaN(le)||isNaN(me)||isNaN(Oe)||isNaN(Fe)||!Ri(Xe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[le-m,me-N],[Oe-le,Fe-me],[m-Oe,N-Fe]],m,N,[1,1],Xe,!0),this},f.__private__.roundedRect=f.roundedRect=function(m,N,le,me,Oe,Fe,Xe){if(isNaN(m)||isNaN(N)||isNaN(le)||isNaN(me)||isNaN(Oe)||isNaN(Fe)||!Ri(Xe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var at=4/3*(Math.SQRT2-1);return Oe=Math.min(Oe,.5*le),Fe=Math.min(Fe,.5*me),this.lines([[le-2*Oe,0],[Oe*at,0,Oe,Fe-Fe*at,Oe,Fe],[0,me-2*Fe],[0,Fe*at,-Oe*at,Fe,-Oe,Fe],[2*Oe-le,0],[-Oe*at,0,-Oe,-Fe*at,-Oe,-Fe],[0,2*Fe-me],[0,-Fe*at,Oe*at,-Fe,Oe,-Fe]],m+Oe,N,[1,1],Xe,!0),this},f.__private__.ellipse=f.ellipse=function(m,N,le,me,Oe){if(isNaN(m)||isNaN(N)||isNaN(le)||isNaN(me)||!Ri(Oe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Fe=4/3*(Math.SQRT2-1)*le,Xe=4/3*(Math.SQRT2-1)*me;return gu(m+le,N),Ba(m+le,N-Xe,m+Fe,N-me,m,N-me),Ba(m-Fe,N-me,m-le,N-Xe,m-le,N),Ba(m-le,N+Xe,m-Fe,N+me,m,N+me),Ba(m+Fe,N+me,m+le,N+Xe,m+le,N),pu(Oe),this},f.__private__.circle=f.circle=function(m,N,le,me){if(isNaN(m)||isNaN(N)||isNaN(le)||!Ri(me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(m,N,le,le,me)},f.setFont=function(m,N,le){return le&&(N=Q(N,le)),ft=id(m,N,{disableWarning:!1}),this};var wg=f.__private__.getFont=f.getFont=function(){return Pt[id.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var m,N,le={};for(m in Ft)if(Ft.hasOwnProperty(m))for(N in le[m]=[],Ft[m])Ft[m].hasOwnProperty(N)&&le[m].push(N);return le},f.addFont=function(m,N,le,me,Oe){var Fe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Fe.indexOf(arguments[3])!==-1?Oe=arguments[3]:arguments[3]&&Fe.indexOf(arguments[3])==-1&&(le=Q(le,me)),Oe=Oe||"Identity-H",hu.call(this,m,N,le,Oe)};var $o,mu=n.lineWidth||.200025,Rl=f.__private__.getLineWidth=f.getLineWidth=function(){return mu},ud=f.__private__.setLineWidth=f.setLineWidth=function(m){return mu=m,L(H(O(m))+" w"),this};f.__private__.setLineDash=_t.API.setLineDash=_t.API.setLineDashPattern=function(m,N){if(m=m||[],N=N||0,isNaN(N)||!Array.isArray(m))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return m=m.map(function(le){return H(O(le))}).join(" "),N=H(O(N)),L("["+m+"] "+N+" d"),this};var hd=f.__private__.getLineHeight=f.getLineHeight=function(){return be*$o};f.__private__.getLineHeight=f.getLineHeight=function(){return be*$o};var dd=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(m){return typeof(m=m||1.15)=="number"&&($o=m),this},fd=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return $o};dd(n.lineHeight);var Fi=f.__private__.getHorizontalCoordinate=function(m){return O(m)},sa=f.__private__.getVerticalCoordinate=function(m){return T===k.ADVANCED?m:We[A].mediaBox.topRightY-We[A].mediaBox.bottomLeftY-O(m)},_g=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(m){return H(Fi(m))},$a=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(m){return H(sa(m))},ai=n.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return ni(ai)},f.__private__.setStrokeColor=f.setDrawColor=function(m,N,le,me){return ai=si({ch1:m,ch2:N,ch3:le,ch4:me,pdfColorType:"draw",precision:2}),L(ai),this};var vu=n.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return ni(vu)},f.__private__.setFillColor=f.setFillColor=function(m,N,le,me){return vu=si({ch1:m,ch2:N,ch3:le,ch4:me,pdfColorType:"fill",precision:2}),L(vu),this};var qo=n.textColor||"0 g",xg=f.__private__.getTextColor=f.getTextColor=function(){return ni(qo)};f.__private__.setTextColor=f.setTextColor=function(m,N,le,me){return qo=si({ch1:m,ch2:N,ch3:le,ch4:me,pdfColorType:"text",precision:3}),this};var Fl=n.charSpace,Sg=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Fl||0)};f.__private__.setCharSpace=f.setCharSpace=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Fl=m,this};var yu=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(m){var N=f.CapJoinStyles[m];if(N===void 0)throw new Error("Line cap style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yu=N,L(N+" J"),this};var bu=0;f.__private__.setLineJoin=f.setLineJoin=function(m){var N=f.CapJoinStyles[m];if(N===void 0)throw new Error("Line join style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bu=N,L(N+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(m){if(m=m||0,isNaN(m))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return L(H(O(m))+" M"),this},f.GState=gp,f.setGState=function(m){(m=typeof m=="string"?st[bt[m]]:pd(null,m)).equals(Ie)||(L("/"+m.id+" gs"),Ie=m)};var pd=function(m,N){if(!m||!bt[m]){var le=!1;for(var me in st)if(st.hasOwnProperty(me)&&st[me].equals(N)){le=!0;break}if(le)N=st[me];else{var Oe="GS"+(Object.keys(st).length+1).toString(10);st[Oe]=N,N.id=Oe}return m&&(bt[m]=N.id),Rt.publish("addGState",N),N}};f.addGState=function(m,N){return pd(m,N),this},f.saveGraphicsState=function(){return L("q"),Sn.push({key:ft,size:be,color:qo}),this},f.restoreGraphicsState=function(){L("Q");var m=Sn.pop();return ft=m.key,be=m.size,qo=m.color,Ie=null,this},f.setCurrentTransformationMatrix=function(m){return L(m.toString()+" cm"),this},f.comment=function(m){return L("#"+m),this};var Il=function(m,N){var le=m||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return le},set:function(Fe){isNaN(Fe)||(le=parseFloat(Fe))}});var me=N||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return me},set:function(Fe){isNaN(Fe)||(me=parseFloat(Fe))}});var Oe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Oe},set:function(Fe){Oe=Fe.toString()}}),this},wu=function(m,N,le,me){Il.call(this,m,N),this.type="rect";var Oe=le||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Oe},set:function(Xe){isNaN(Xe)||(Oe=parseFloat(Xe))}});var Fe=me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Fe},set:function(Xe){isNaN(Xe)||(Fe=parseFloat(Xe))}}),this},_u=function(){this.page=Qe,this.currentPage=A,this.pages=ce.slice(0),this.pagesContext=We.slice(0),this.x=Yt,this.y=Et,this.matrix=cn,this.width=Uo(A),this.height=qa(A),this.outputDestination=R,this.id="",this.objectNumber=-1};_u.prototype.restore=function(){Qe=this.page,A=this.currentPage,We=this.pagesContext,ce=this.pages,Yt=this.x,Et=this.y,cn=this.matrix,xu(A,this.width),Su(A,this.height),R=this.outputDestination};var gd=function(m,N,le,me,Oe){os.push(new _u),Qe=A=0,ce=[],Yt=m,Et=N,cn=Oe,du([le,me])},kg=function(m){if(Zr[m])os.pop().restore();else{var N=new _u,le="Xo"+(Object.keys(yr).length+1).toString(10);N.id=le,Zr[m]=le,yr[le]=N,Rt.publish("addFormObject",N),os.pop().restore()}};for(var Bl in f.beginFormObject=function(m,N,le,me,Oe){return gd(m,N,le,me,Oe),this},f.endFormObject=function(m){return kg(m),this},f.doFormObject=function(m,N){var le=yr[Zr[m]];return L("q"),L(N.toString()+" cm"),L("/"+le.id+" Do"),L("Q"),this},f.getFormObject=function(m){var N=yr[Zr[m]];return{x:N.x,y:N.y,width:N.width,height:N.height,matrix:N.matrix}},f.save=function(m,N){return m=m||"generated.pdf",(N=N||{}).returnPromise=N.returnPromise||!1,N.returnPromise===!1?(nl(El(na()),m),typeof nl.unload=="function"&&St.setTimeout&&setTimeout(nl.unload,911),this):new Promise(function(le,me){try{var Oe=nl(El(na()),m);typeof nl.unload=="function"&&St.setTimeout&&setTimeout(nl.unload,911),le(Oe)}catch(Fe){me(Fe.message)}})},_t.API)_t.API.hasOwnProperty(Bl)&&(Bl==="events"&&_t.API.events.length?function(m,N){var le,me,Oe;for(Oe=N.length-1;Oe!==-1;Oe--)le=N[Oe][0],me=N[Oe][1],m.subscribe.apply(m,[le].concat(typeof me=="function"?[me]:me))}(Rt,_t.API.events):f[Bl]=_t.API[Bl]);var Uo=f.getPageWidth=function(m){return(We[m=m||A].mediaBox.topRightX-We[m].mediaBox.bottomLeftX)/et},xu=f.setPageWidth=function(m,N){We[m].mediaBox.topRightX=N*et+We[m].mediaBox.bottomLeftX},qa=f.getPageHeight=function(m){return(We[m=m||A].mediaBox.topRightY-We[m].mediaBox.bottomLeftY)/et},Su=f.setPageHeight=function(m,N){We[m].mediaBox.topRightY=N*et+We[m].mediaBox.bottomLeftY};return f.internal={pdfEscape:cs,getStyle:ld,getFont:wg,getFontSize:Ee,getCharSpace:Sg,getTextColor:xg,getLineHeight:hd,getLineHeightFactor:fd,getLineWidth:Rl,write:he,getHorizontalCoordinate:Fi,getVerticalCoordinate:sa,getCoordinateString:_g,getVerticalCoordinateString:$a,collections:{},newObject:en,newAdditionalObject:Cl,newObjectDeferred:Yr,newObjectDeferredBegin:ks,getFilters:Ni,putStream:js,events:Rt,scaleFactor:et,pageSize:{getWidth:function(){return Uo(A)},setWidth:function(m){xu(A,m)},getHeight:function(){return qa(A)},setHeight:function(m){Su(A,m)}},encryptionOptions:c,encryption:Pn,getEncryptor:pg,output:Nl,getNumberOfPages:cg,pages:ce,out:L,f2:K,f3:D,getPageInfo:od,getPageInfoByObjId:Ot,getCurrentPageInfo:gg,getPDFVersion:b,Point:Il,Rectangle:wu,Matrix:vt,hasHotfix:ad},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Uo(A)},set:function(m){xu(A,m)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return qa(A)},set:function(m){Su(A,m)},enumerable:!0,configurable:!0}),og.call(f,ge),ft="F1",nd(s,t),Rt.publish("initialized"),f}_c.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},_c.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},_c.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},_c.prototype.processOwnerPassword=function(n,e){return $0(B0(e).substr(0,5),n)},_c.prototype.encryptor=function(n,e){var t=B0(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return $0(t,r)}},gp.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||sr(n)!==sr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},_t.API={events:[]},_t.version="3.0.1";var Dr=_t.API,t1=1,kl=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},fc=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Dt=function(n){return n.toFixed(2)},ao=function(n){return n.toFixed(5)};Dr.__acroform__={};var Ss=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},pb=function(n){return n*t1},Ui=function(n){var e=new Bx,t=dt.internal.getHeight(n)||0,r=dt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Dt(r)),Number(Dt(t))],e},xN=Dr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},SN=Dr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},kN=Dr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},$r=Dr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return kN(n,e-1)},qr=Dr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return xN(n,e-1)},Ur=Dr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return SN(n,e-1)},CN=Dr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=n[0],i=n[1],a=n[2],o=n[3],l={};return l.lowerLeft_X=t(s)||0,l.lowerLeft_Y=r(i+o)||0,l.upperRight_X=t(s+a)||0,l.upperRight_Y=r(i)||0,[Number(Dt(l.lowerLeft_X)),Number(Dt(l.lowerLeft_Y)),Number(Dt(l.upperRight_X)),Number(Dt(l.upperRight_Y))]},AN=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=q0(n,t),s=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+s+" "+Dt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Ui(n);return i.scope=n.scope,i.stream=e.join(`
`),i}},q0=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=n.multiline?s.map(function(D){return D.split(`
`)}):s.map(function(D){return[D]});var i=t,a=dt.internal.getHeight(n)||0;a=a<0?-a:a;var o=dt.internal.getWidth(n)||0;o=o<0?-o:o;var l=function(D,O,J){if(D+1<s.length){var M=O+" "+s[D+1][0];return Af(M,n,J).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var u,c,h=Af("3",n,i).height,p=n.multiline?a-i:(a-h)/2,f=p+=2,v=0,b=0,x=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+Af(e,n,i=12).width+", FieldWidth:"+o+`
`;break}for(var w="",k=0,T=0;T<s.length;T++)if(s.hasOwnProperty(T)){var I=!1;if(s[T].length!==1&&x!==s[T].length-1){if((h+2)*(k+2)+2>a)continue e;w+=s[T][x],I=!0,b=T,T--}else{w=(w+=s[T][x]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var Y=parseInt(T),Q=l(Y,w,i),H=T>=s.length-1;if(Q&&!H){w+=" ",x=0;continue}if(Q||H){if(H)b=Y;else if(n.multiline&&(h+2)*(k+2)+2>a)continue e}else{if(!n.multiline||(h+2)*(k+2)+2>a)continue e;b=Y}}for(var j="",U=v;U<=b;U++){var K=s[U];if(n.multiline){if(U===b){j+=K[x]+" ",x=(x+1)%K.length;continue}if(U===v){j+=K[K.length-1]+" ";continue}}j+=K[0]+" "}switch(j=j.substr(j.length-1)==" "?j.substr(0,j.length-1):j,c=Af(j,n,i).width,n.textAlign){case"right":u=o-c-2;break;case"center":u=(o-c)/2;break;case"left":default:u=2}e+=Dt(u)+" "+Dt(f)+` Td
`,e+="("+kl(j)+`) Tj
`,e+=-Dt(u)+` 0 Td
`,f=-(i+2),c=0,v=I?b:b+1,k++,w=""}break}return r.text=e,r.fontSize=i,r},Af=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:s}},TN={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},PN=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},ON=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,s=n[t];e.internal.newObjectDeferredBegin(s.objId,!0),sr(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete n[r]}},LN=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Di.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(TN)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");t1=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new $x,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var i=r[s];i.objId=void 0,i.hasAnnotation&&PN(i,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,s){var i=!r;for(var a in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],l=[],u=o.Rect;if(o.Rect&&(o.Rect=CN(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=dt.createDefaultAppearanceStream(o),sr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var c=AN(o);l.push({key:"AP",value:"<</N "+c+">>"}),s.internal.acroformPlugin.xForms.push(c)}if(o.appearanceStreamContent){var h="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var f=o.appearanceStreamContent[p];if(h+="/"+p+" ",h+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var a in f)if(f.hasOwnProperty(a)){var v=f[a];typeof v=="function"&&(v=v.call(s,o)),h+="/"+a+" "+v+" ",s.internal.acroformPlugin.xForms.indexOf(v)>=0||s.internal.acroformPlugin.xForms.push(v)}}else typeof(v=f)=="function"&&(v=v.call(s,o)),h+="/"+a+" "+v,s.internal.acroformPlugin.xForms.indexOf(v)>=0||s.internal.acroformPlugin.xForms.push(v);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}i&&ON(s.internal.acroformPlugin.xForms,s)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},Ix=Dr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(a){return a};if(Array.isArray(n)){for(var s="[",i=0;i<n.length;i++)switch(i!==0&&(s+=" "),sr(n[i])){case"boolean":case"number":case"object":s+=n[i].toString();break;case"string":n[i].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),s+="("+kl(r(n[i].toString()))+")"):s+=n[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},$m=function(n,e,t){var r=function(s){return s};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+kl(r(n))+")"},Ki=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ki.prototype.toString=function(){return this.objId+" 0 R"},Ki.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Ki.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],s=this[r];s&&(Array.isArray(s)?n.push({key:r,value:Ix(s,this.objId,this.scope)}):s instanceof Ki?(s.scope=this.scope,n.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&n.push({key:r,value:s}))}return n};var Bx=function(){Ki.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Ss(Bx,Ki);var $x=function(){Ki.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+kl(t(n))+")"}},set:function(t){n=t}})};Ss($x,Ki);var Di=function n(){Ki.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!$r(e,3)},set:function(w){w?this.F=qr(e,3):this.F=Ur(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');t=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof mp)return;i="FieldObject"+n.FieldNum++}var w=function(k){return k};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+kl(w(i))+")"},set:function(w){i=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(w){i=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/t1:u},set:function(w){u=w}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(w){c=w}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof mp||this instanceof gl))return $m(h,this.objId,this.scope)},set:function(w){w=w.toString(),h=w}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof vn?p:$m(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=this instanceof vn?w:w.substr(0,1)==="("?fc(w.substr(1,w.length-2)):fc(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof vn?fc(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof vn?"/"+w:w}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof vn?f:$m(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=this instanceof vn?w:w.substr(0,1)==="("?fc(w.substr(1,w.length-2)):fc(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof vn?fc(f.substr(1,f.length-1)):f},set:function(w){w=w.toString(),f=this instanceof vn?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(w){w=!!w,b=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(w){v=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,1)},set:function(w){w?this.Ff=qr(this.Ff,1):this.Ff=Ur(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,2)},set:function(w){w?this.Ff=qr(this.Ff,2):this.Ff=Ur(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,3)},set:function(w){w?this.Ff=qr(this.Ff,3):this.Ff=Ur(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');x=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(x){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:x=2;break;case"center":case 1:x=1;break;case"left":case 0:default:x=0}}})};Ss(Di,Ki);var Bc=function(){Di.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Ix(e,this.objId,this.scope)},set:function(t){var r,s;s=[],typeof(r=t)=="string"&&(s=function(i,a,o){o||(o=1);for(var l,u=[];l=a.exec(i);)u.push(l[o]);return u}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,18)},set:function(t){t?this.Ff=qr(this.Ff,18):this.Ff=Ur(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=qr(this.Ff,19):this.Ff=Ur(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,20)},set:function(t){t?(this.Ff=qr(this.Ff,20),e.sort()):this.Ff=Ur(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,22)},set:function(t){t?this.Ff=qr(this.Ff,22):this.Ff=Ur(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,23)},set:function(t){t?this.Ff=qr(this.Ff,23):this.Ff=Ur(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,27)},set:function(t){t?this.Ff=qr(this.Ff,27):this.Ff=Ur(this.Ff,27)}}),this.hasAppearanceStream=!1};Ss(Bc,Di);var $c=function(){Bc.call(this),this.fontName="helvetica",this.combo=!1};Ss($c,Bc);var qc=function(){$c.call(this),this.combo=!0};Ss(qc,$c);var qf=function(){qc.call(this),this.edit=!0};Ss(qf,qc);var vn=function(){Di.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,15)},set:function(t){t?this.Ff=qr(this.Ff,15):this.Ff=Ur(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,16)},set:function(t){t?this.Ff=qr(this.Ff,16):this.Ff=Ur(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,17)},set:function(t){t?this.Ff=qr(this.Ff,17):this.Ff=Ur(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,26)},set:function(t){t?this.Ff=qr(this.Ff,26):this.Ff=Ur(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(i){return i};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+kl(t(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(t){sr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Ss(vn,Di);var Uf=function(){vn.call(this),this.pushButton=!0};Ss(Uf,vn);var Uc=function(){vn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Ss(Uc,vn);var mp=function(){var n,e;Di.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),r)a.push("/"+i+" ("+kl(s(r[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){sr(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(s){t="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=dt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ss(mp,Di),Uc.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Uc.prototype.createOption=function(n){var e=new mp;return e.Parent=this,e.optionName=n,this.Kids.push(e),DN.call(this.scope,e),e};var Vf=function(){vn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=dt.CheckBox.createAppearanceStream()};Ss(Vf,vn);var gl=function(){Di.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,13)},set:function(e){e?this.Ff=qr(this.Ff,13):this.Ff=Ur(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,21)},set:function(e){e?this.Ff=qr(this.Ff,21):this.Ff=Ur(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,23)},set:function(e){e?this.Ff=qr(this.Ff,23):this.Ff=Ur(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,24)},set:function(e){e?this.Ff=qr(this.Ff,24):this.Ff=Ur(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,25)},set:function(e){e?this.Ff=qr(this.Ff,25):this.Ff=Ur(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,26)},set:function(e){e?this.Ff=qr(this.Ff,26):this.Ff=Ur(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ss(gl,Di);var zf=function(){gl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!$r(this.Ff,14)},set:function(n){n?this.Ff=qr(this.Ff,14):this.Ff=Ur(this.Ff,14)}}),this.password=!0};Ss(zf,gl);var dt={CheckBox:{createAppearanceStream:function(){return{N:{On:dt.CheckBox.YesNormal},D:{On:dt.CheckBox.YesPushDown,Off:dt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Ui(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),i=q0(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Dt(dt.internal.getWidth(n))+" "+Dt(dt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Dt(i.fontSize)+" Tf "+s),t.push("BT"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Ui(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),s=[],i=dt.internal.getHeight(n),a=dt.internal.getWidth(n),o=q0(n,n.caption);return s.push("1 g"),s.push("0 0 "+Dt(a)+" "+Dt(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Dt(a-1)+" "+Dt(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+t+" "+Dt(o.fontSize)+" Tf "+r),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=Ui(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Dt(dt.internal.getWidth(n))+" "+Dt(dt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:dt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=dt.RadioButton.Circle.YesNormal,e.D[n]=dt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Ui(n);e.scope=n.scope;var t=[],r=dt.internal.getWidth(n)<=dt.internal.getHeight(n)?dt.internal.getWidth(n)/4:dt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=dt.internal.Bezier_C,i=Number((r*s).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+ao(dt.internal.getWidth(n)/2)+" "+ao(dt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),t.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),t.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),t.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ui(n);e.scope=n.scope;var t=[],r=dt.internal.getWidth(n)<=dt.internal.getHeight(n)?dt.internal.getWidth(n)/4:dt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*dt.internal.Bezier_C).toFixed(5)),a=Number((r*dt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ao(dt.internal.getWidth(n)/2)+" "+ao(dt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),t.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),t.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),t.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+ao(dt.internal.getWidth(n)/2)+" "+ao(dt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Ui(n);e.scope=n.scope;var t=[],r=dt.internal.getWidth(n)<=dt.internal.getHeight(n)?dt.internal.getWidth(n)/4:dt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*dt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ao(dt.internal.getWidth(n)/2)+" "+ao(dt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),t.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),t.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),t.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:dt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=dt.RadioButton.Cross.YesNormal,e.D[n]=dt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Ui(n);e.scope=n.scope;var t=[],r=dt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Dt(dt.internal.getWidth(n)-2)+" "+Dt(dt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Dt(r.x1.x)+" "+Dt(r.x1.y)+" m"),t.push(Dt(r.x2.x)+" "+Dt(r.x2.y)+" l"),t.push(Dt(r.x4.x)+" "+Dt(r.x4.y)+" m"),t.push(Dt(r.x3.x)+" "+Dt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ui(n);e.scope=n.scope;var t=dt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Dt(dt.internal.getWidth(n))+" "+Dt(dt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Dt(dt.internal.getWidth(n)-2)+" "+Dt(dt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Dt(t.x1.x)+" "+Dt(t.x1.y)+" m"),r.push(Dt(t.x2.x)+" "+Dt(t.x2.y)+" l"),r.push(Dt(t.x4.x)+" "+Dt(t.x4.y)+" m"),r.push(Dt(t.x3.x)+" "+Dt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Ui(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Dt(dt.internal.getWidth(n))+" "+Dt(dt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};dt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=dt.internal.getWidth(n),t=dt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},dt.internal.getWidth=function(n){var e=0;return sr(n)==="object"&&(e=pb(n.Rect[2])),e},dt.internal.getHeight=function(n){var e=0;return sr(n)==="object"&&(e=pb(n.Rect[3])),e};var DN=Dr.addField=function(n){if(LN(this,n),!(n instanceof Di))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Dr.AcroFormChoiceField=Bc,Dr.AcroFormListBox=$c,Dr.AcroFormComboBox=qc,Dr.AcroFormEditBox=qf,Dr.AcroFormButton=vn,Dr.AcroFormPushButton=Uf,Dr.AcroFormRadioButton=Uc,Dr.AcroFormCheckBox=Vf,Dr.AcroFormTextField=gl,Dr.AcroFormPasswordField=zf,Dr.AcroFormAppearance=dt,Dr.AcroForm={ChoiceField:Bc,ListBox:$c,ComboBox:qc,EditBox:qf,Button:vn,PushButton:Uf,RadioButton:Uc,CheckBox:Vf,TextField:gl,PasswordField:zf,Appearance:dt},_t.AcroForm={ChoiceField:Bc,ListBox:$c,ComboBox:qc,EditBox:qf,Button:vn,PushButton:Uf,RadioButton:Uc,CheckBox:Vf,TextField:gl,PasswordField:zf,Appearance:dt};_t.AcroForm;function qx(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(D,O){var J,M,ee,W,ae,ne=e;if((O=O||e)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(Q(D))for(ae in t)for(ee=t[ae],J=0;J<ee.length;J+=1){for(W=!0,M=0;M<ee[J].length;M+=1)if(ee[J][M]!==void 0&&ee[J][M]!==D[M]){W=!1;break}if(W===!0){ne=ae;break}}else for(ae in t)for(ee=t[ae],J=0;J<ee.length;J+=1){for(W=!0,M=0;M<ee[J].length;M+=1)if(ee[J][M]!==void 0&&ee[J][M]!==D.charCodeAt(M)){W=!1;break}if(W===!0){ne=ae;break}}return ne===e&&O!==e&&(ne=O),ne},s=function D(O){for(var J=this.internal.write,M=this.internal.putStream,ee=(0,this.internal.getFilters)();ee.indexOf("FlateEncode")!==-1;)ee.splice(ee.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var W=[];if(W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Image"}),W.push({key:"Width",value:O.width}),W.push({key:"Height",value:O.height}),O.colorSpace===x.INDEXED?W.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(W.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===x.DEVICE_CMYK&&W.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),W.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&W.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var ae="",ne=0,oe=O.transparency.length;ne<oe;ne++)ae+=O.transparency[ne]+" "+O.transparency[ne]+" ";W.push({key:"Mask",value:"["+ae+"]"})}O.sMask!==void 0&&W.push({key:"SMask",value:O.objectId+1+" 0 R"});var de=O.filter!==void 0?["/"+O.filter]:void 0;if(M({data:O.data,additionalKeyValues:W,alreadyAppliedFilters:de,objectId:O.objectId}),J("endobj"),"sMask"in O&&O.sMask!==void 0){var fe="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,P={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:fe,data:O.sMask};"filter"in O&&(P.filter=O.filter),D.call(this,P)}if(O.colorSpace===x.INDEXED){var A=this.internal.newObject();M({data:j(new Uint8Array(O.palette)),objectId:A}),J("endobj")}},i=function(){var D=this.internal.collections.addImage_images;for(var O in D)s.call(this,D[O])},a=function(){var D,O=this.internal.collections.addImage_images,J=this.internal.write;for(var M in O)J("/I"+(D=O[M]).index,D.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var D=this.internal.collections.addImage_images;return o.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(D){return typeof n["process"+D.toUpperCase()]=="function"},h=function(D){return sr(D)==="object"&&D.nodeType===1},p=function(D,O){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var J=""+D.getAttribute("src");if(J.indexOf("data:image/")===0)return bh(unescape(J).split("base64,").pop());var M=n.loadFile(J,!0);if(M!==void 0)return M}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var ee;switch(O){case"PNG":ee="image/png";break;case"WEBP":ee="image/webp";break;case"JPEG":case"JPG":default:ee="image/jpeg"}return bh(D.toDataURL(ee,1).split("base64,").pop())}},f=function(D){var O=this.internal.collections.addImage_images;if(O){for(var J in O)if(D===O[J].alias)return O[J]}},v=function(D,O,J){return D||O||(D=-96,O=-96),D<0&&(D=-1*J.width*72/D/this.internal.scaleFactor),O<0&&(O=-1*J.height*72/O/this.internal.scaleFactor),D===0&&(D=O*J.width/J.height),O===0&&(O=D*J.height/J.width),[D,O]},b=function(D,O,J,M,ee,W){var ae=v.call(this,J,M,ee),ne=this.internal.getCoordinateString,oe=this.internal.getVerticalCoordinateString,de=l.call(this);if(J=ae[0],M=ae[1],de[ee.index]=ee,W){W*=Math.PI/180;var fe=Math.cos(W),P=Math.sin(W),A=function(G){return G.toFixed(4)},F=[A(fe),A(P),A(-1*P),A(fe),0,0,"cm"]}this.internal.write("q"),W?(this.internal.write([1,"0","0",1,ne(D),oe(O+M),"cm"].join(" ")),this.internal.write(F.join(" ")),this.internal.write([ne(J),"0","0",ne(M),"0","0","cm"].join(" "))):this.internal.write([ne(J),"0","0",ne(M),ne(D),oe(O+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ee.index+" Do"),this.internal.write("Q")},x=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=n.__addimage__.sHashCode=function(D){var O,J,M=0;if(typeof D=="string")for(J=D.length,O=0;O<J;O++)M=(M<<5)-M+D.charCodeAt(O),M|=0;else if(Q(D))for(J=D.byteLength/2,O=0;O<J;O++)M=(M<<5)-M+D[O],M|=0;return M},T=n.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var O=!0;return D.length===0&&(O=!1),D.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(O=!1),O},I=n.__addimage__.extractImageFromDataUrl=function(D){if(D==null||!(D=D.trim()).startsWith("data:"))return null;var O=D.indexOf(",");return O<0?null:D.substring(0,O).trim().endsWith("base64")?D.substring(O+1):null},Y=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(D){return Y()&&D instanceof ArrayBuffer};var Q=n.__addimage__.isArrayBufferView=function(D){return Y()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},H=n.__addimage__.binaryStringToUint8Array=function(D){for(var O=D.length,J=new Uint8Array(O),M=0;M<O;M++)J[M]=D.charCodeAt(M);return J},j=n.__addimage__.arrayBufferToBinaryString=function(D){for(var O="",J=Q(D)?D:new Uint8Array(D),M=0;M<J.length;M+=8192)O+=String.fromCharCode.apply(null,J.subarray(M,M+8192));return O};n.addImage=function(){var D,O,J,M,ee,W,ae,ne,oe;if(typeof arguments[1]=="number"?(O=e,J=arguments[1],M=arguments[2],ee=arguments[3],W=arguments[4],ae=arguments[5],ne=arguments[6],oe=arguments[7]):(O=arguments[1],J=arguments[2],M=arguments[3],ee=arguments[4],W=arguments[5],ae=arguments[6],ne=arguments[7],oe=arguments[8]),sr(D=arguments[0])==="object"&&!h(D)&&"imageData"in D){var de=D;D=de.imageData,O=de.format||O||e,J=de.x||J||0,M=de.y||M||0,ee=de.w||de.width||ee,W=de.h||de.height||W,ae=de.alias||ae,ne=de.compression||ne,oe=de.rotation||de.angle||oe}var fe=this.internal.getFilters();if(ne===void 0&&fe.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(J)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var P=U.call(this,D,O,ae,ne);return b.call(this,J,M,ee,W,P,oe),this};var U=function(D,O,J,M){var ee,W,ae;if(typeof D=="string"&&r(D)===e){D=unescape(D);var ne=K(D,!1);(ne!==""||(ne=n.loadFile(D,!0))!==void 0)&&(D=ne)}if(h(D)&&(D=p(D,O)),O=r(D,O),!c(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((ae=J)==null||ae.length===0)&&(J=function(oe){return typeof oe=="string"||Q(oe)?k(oe):Q(oe.data)?k(oe.data):null}(D)),(ee=f.call(this,J))||(Y()&&(D instanceof Uint8Array||O==="RGBA"||(W=D,D=H(D))),ee=this["process"+O.toUpperCase()](D,u.call(this),J,function(oe){return oe&&typeof oe=="string"&&(oe=oe.toUpperCase()),oe in n.image_compression?oe:w.NONE}(M),W)),!ee)throw new Error("An unknown error occurred whilst processing the image.");return ee},K=n.__addimage__.convertBase64ToBinaryString=function(D,O){O=typeof O!="boolean"||O;var J,M="";if(typeof D=="string"){var ee;J=(ee=I(D))!==null&&ee!==void 0?ee:D;try{M=bh(J)}catch(W){if(O)throw T(J)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+W.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};n.getImageProperties=function(D){var O,J,M="";if(h(D)&&(D=p(D)),typeof D=="string"&&r(D)===e&&((M=K(D,!1))===""&&(M=n.loadFile(D)||""),D=M),J=r(D),!c(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(!Y()||D instanceof Uint8Array||(D=H(D)),!(O=this["process"+J.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=J,O}})(_t.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};_t.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,s,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,c=!1,h=0;h<u.length&&!c;h++)switch((r=u[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){r=u[p];var f=this.internal.pdfEscape,v=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(b.objId),k=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+f(w(r.contents))+")",i+=" /Popup "+x.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+f(w(k))+") >>",b.content=i;var T=b.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+T,r.open&&(i+=" /Open true"),i+=" >>",x.content=i,this.internal.write(b.objId,"0 R",x.objId,"0 R");break;case"freetext":s="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var I=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+f(v(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+I+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var Y=this.annotations._nameMap[r.options.name];r.options.pageNumber=Y.page,r.options.top=Y.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+f(v(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var Q=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+Q+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,s,i,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(t),y:u(r),w:l(t+s),h:u(r+i)},options:a,type:"link"})},n.textWithLink=function(t,r,s,i){var a,o,l=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var c=this.splitTextToSize(t,o).length;a=Math.ceil(u*c)}else o=l,a=u;return this.text(t,r,s,i),s+=.2*u,i.align==="center"&&(r-=l/2),i.align==="right"&&(r-=l),this.link(r,s-u,o,a,i),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(_t.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];n.__arabicParser__={};var i=n.__arabicParser__.isInArabicSubstitutionA=function(b){return e[b.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},o=n.__arabicParser__.isArabicEndLetter=function(b){return a(b)&&i(b)&&e[b.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(b){return a(b)&&s.indexOf(b.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return a(b)&&i(b)&&e[b.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(b){return a(b)&&i(b)&&e[b.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(b){return a(b)&&i(b)&&e[b.charCodeAt(0)].length>=3};var c=n.__arabicParser__.arabicLetterHasMedialForm=function(b){return a(b)&&i(b)&&e[b.charCodeAt(0)].length==4},h=n.__arabicParser__.resolveLigatures=function(b){var x=0,w=t,k="",T=0;for(x=0;x<b.length;x+=1)w[b.charCodeAt(x)]!==void 0?(T++,typeof(w=w[b.charCodeAt(x)])=="number"&&(k+=String.fromCharCode(w),w=t,T=0),x===b.length-1&&(w=t,k+=b.charAt(x-(T-1)),x-=T-1,T=0)):(w=t,k+=b.charAt(x-T),x-=T,T=0);return k};n.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&r[b.charCodeAt(0)]!==void 0};var p=n.__arabicParser__.getCorrectForm=function(b,x,w){return a(b)?i(b)===!1?-1:!u(b)||!a(x)&&!a(w)||!a(w)&&o(x)||o(b)&&!a(x)||o(b)&&l(x)||o(b)&&o(x)?0:c(b)&&a(x)&&!o(x)&&a(w)&&u(w)?3:o(b)||!a(w)?1:2:-1},f=function(b){var x=0,w=0,k=0,T="",I="",Y="",Q=(b=b||"").split("\\s+"),H=[];for(x=0;x<Q.length;x+=1){for(H.push(""),w=0;w<Q[x].length;w+=1)T=Q[x][w],I=Q[x][w-1],Y=Q[x][w+1],a(T)?(k=p(T,I,Y),H[x]+=k!==-1?String.fromCharCode(e[T.charCodeAt(0)][k]):T):H[x]+=T;H[x]=h(H[x])}return H.join(" ")},v=n.__arabicParser__.processArabic=n.processArabic=function(){var b,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(x)){var k=0;for(w=[],k=0;k<x.length;k+=1)Array.isArray(x[k])?w.push([f(x[k][0]),x[k][1],x[k][2]]):w.push([f(x[k])]);b=w}else b=f(x);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};n.events.push(["preProcessText",v])}(_t.API),_t.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var s;if((t=t||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(_t.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(b){l=b}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(b){u=b}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(b){c=b}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(b){h=b}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(b){f=b}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(b){v=b}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,u){r.call(this);var c=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,f=0,v=0,b=0,x=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=u.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(T,I){return T.concat(x.splitTextToSize(I,w))},[])):l=Array.isArray(l)?l:[l];for(var k=0;k<l.length;k++)f<(b=this.getStringUnitWidth(l[k],{font:h})*c)&&(f=b);return f!==0&&(v=l.length),{w:f/=p,h:Math.max((v*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/p,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,f&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-c,l.y+c,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+c,{align:"center",baseline:"top",maxWidth:l.width-c-c}):this.text(l.text,l.x+c,l.y+c,{align:"left",baseline:"top",maxWidth:l.width-c-c})),this.internal.__cell__.lastCell=l,this};n.table=function(l,u,c,h,p){if(r.call(this),!c)throw new Error("No data for PDF table.");var f,v,b,x,w=[],k=[],T=[],I={},Y={},Q=[],H=[],j=(p=p||{}).autoSize||!1,U=p.printHeaders!==!1,K=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,D=p.margins||Object.assign({width:this.getPageWidth()},e),O=typeof p.padding=="number"?p.padding:3,J=p.headerBackgroundColor||"#c8c8c8",M=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=U,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=K,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=J,this.internal.__cell__.headerTextColor=M,this.setFontSize(K),h==null)k=w=Object.keys(c[0]),T=w.map(function(){return"left"});else if(Array.isArray(h)&&sr(h[0])==="object")for(w=h.map(function(de){return de.name}),k=h.map(function(de){return de.prompt||de.name||""}),T=h.map(function(de){return de.align||"left"}),f=0;f<h.length;f+=1)Y[h[f].name]=h[f].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(k=w=h,T=w.map(function(){return"left"}));if(j||Array.isArray(h)&&typeof h[0]=="string")for(f=0;f<w.length;f+=1){for(I[x=w[f]]=c.map(function(de){return de[x]}),this.setFont(void 0,"bold"),Q.push(this.getTextDimensions(k[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=I[x],this.setFont(void 0,"normal"),b=0;b<v.length;b+=1)Q.push(this.getTextDimensions(v[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Y[x]=Math.max.apply(null,Q)+O+O,Q=[]}if(U){var ee={};for(f=0;f<w.length;f+=1)ee[w[f]]={},ee[w[f]].text=k[f],ee[w[f]].align=T[f];var W=o.call(this,ee,Y);H=w.map(function(de){return new i(l,u,Y[de],W,ee[de].text,void 0,ee[de].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var ae=h.reduce(function(de,fe){return de[fe.name]=fe.align,de},{});for(f=0;f<c.length;f+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:f,data:c[f]},this);var ne=o.call(this,c[f],Y);for(b=0;b<w.length;b+=1){var oe=c[f][w[b]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:f,col:b,data:oe},this),a.call(this,new i(l,u,Y[w[b]],ne,oe,f+2,ae[w[b]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var c=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(f){var v=l[f];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[f]-c-c)},this).map(function(f){return this.getLineHeightFactor()*f.length*h/p+c+c},this).reduce(function(f,v){return Math.max(f,v)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){c=this.internal.__cell__.tableHeaderRow[f].clone(),u&&(c.y=this.internal.__cell__.margins.top||0,p.push(c)),c.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,c),this.setTextColor(v)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),t=!1}}(_t.API);var Ux={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Vx=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],U0=qx(Vx),zx=[100,200,300,400,500,600,700,800,900],MN=qx(zx);function V0(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(i){return Ux[i=i||"normal"]?i:"normal"}(n.style),r=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(n.weight),s=function(i){return typeof U0[i=i||"normal"]=="number"?i:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:s,src:n.src||[],ref:n.ref||{name:e,style:[s,t,r].join(" ")}}}function gb(n,e,t,r){var s;for(s=t;s>=0&&s<e.length;s+=r)if(n[e[s]])return n[e[s]];for(s=t;s>=0&&s<e.length;s-=r)if(n[e[s]])return n[e[s]]}var EN={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},mb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function vb(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function NN(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",s=Object.assign({},EN,t.genericFontFamilies||{}),i=null,a=null,o=0;o<e.length;++o)if(s[(i=V0(e[o])).family]&&(i.family=s[i.family]),n.hasOwnProperty(i.family)){a=n[i.family];break}if(!(a=a||n[r]))throw new Error("Could not find a font-family for the rule '"+vb(i)+"' and default family '"+r+"'.");if(a=function(l,u){if(u[l])return u[l];var c=U0[l],h=c<=U0.normal?-1:1,p=gb(u,Vx,c,h);if(!p)throw new Error("Could not find a matching font-stretch value for "+l);return p}(i.stretch,a),a=function(l,u){if(u[l])return u[l];for(var c=Ux[l],h=0;h<c.length;++h)if(u[c[h]])return u[c[h]];throw new Error("Could not find a matching font-style for "+l)}(i.style,a),!(a=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var c=MN[l],h=gb(u,zx,c,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(i.weight,a)))throw new Error("Failed to resolve a font for the rule '"+vb(i)+"'.");return a}function yb(n){return n.trimLeft()}function jN(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function RN(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Tf,bb,wb,qm=["times"];(function(n){var e,t,r,s,i,a,o,l,u,c=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new l,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var h=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var A=P;Object.defineProperty(this,"pdf",{get:function(){return A}});var F=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return F},set:function(C){F=!!C}});var G=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return G},set:function(C){G=!!C}});var Z=0;Object.defineProperty(this,"posX",{get:function(){return Z},set:function(C){isNaN(C)||(Z=C)}});var _=0;Object.defineProperty(this,"posY",{get:function(){return _},set:function(C){isNaN(C)||(_=C)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(C){var L;typeof C=="number"?L=[C,C,C,C]:((L=new Array(4))[0]=C[0],L[1]=C.length>=2?C[1]:L[0],L[2]=C.length>=3?C[2]:L[0],L[3]=C.length>=4?C[3]:L[1]),u.margin=L}});var q=!1;Object.defineProperty(this,"autoPaging",{get:function(){return q},set:function(C){q=C}});var te=0;Object.defineProperty(this,"lastBreak",{get:function(){return te},set:function(C){te=C}});var Ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ae},set:function(C){Ae=C}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(C){C instanceof c&&(u=C)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(C){u.path=C}});var ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return ce},set:function(C){ce=C}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(C){var L;L=p(C),this.ctx.fillStyle=L.style,this.ctx.isFillTransparent=L.a===0,this.ctx.fillOpacity=L.a,this.pdf.setFillColor(L.r,L.g,L.b,{a:L.a}),this.pdf.setTextColor(L.r,L.g,L.b,{a:L.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(C){var L=p(C);this.ctx.strokeStyle=L.style,this.ctx.isStrokeTransparent=L.a===0,this.ctx.strokeOpacity=L.a,L.a===0?this.pdf.setDrawColor(255,255,255):(L.a,this.pdf.setDrawColor(L.r,L.g,L.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(C){["butt","round","square"].indexOf(C)!==-1&&(this.ctx.lineCap=C,this.pdf.setLineCap(C))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(C){isNaN(C)||(this.ctx.lineWidth=C,this.pdf.setLineWidth(C))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(C){["bevel","round","miter"].indexOf(C)!==-1&&(this.ctx.lineJoin=C,this.pdf.setLineJoin(C))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(C){isNaN(C)||(this.ctx.miterLimit=C,this.pdf.setMiterLimit(C))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(C){this.ctx.textBaseline=C}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(C){["right","end","center","left","start"].indexOf(C)!==-1&&(this.ctx.textAlign=C)}});var V=null;function R(C,L){if(V===null){var he=function(pe){var ge=[];return Object.keys(pe).forEach(function(be){pe[be].forEach(function(xe){var Ee=null;switch(xe){case"bold":Ee={family:be,weight:"bold"};break;case"italic":Ee={family:be,style:"italic"};break;case"bolditalic":Ee={family:be,weight:"bold",style:"italic"};break;case"":case"normal":Ee={family:be}}Ee!==null&&(Ee.ref={name:be,style:xe},ge.push(Ee))})}),ge}(C.getFontList());V=function(pe){for(var ge={},be=0;be<pe.length;++be){var xe=V0(pe[be]),Ee=xe.family,ie=xe.stretch,Pe=xe.style,Be=xe.weight;ge[Ee]=ge[Ee]||{},ge[Ee][ie]=ge[Ee][ie]||{},ge[Ee][ie][Pe]=ge[Ee][ie][Pe]||{},ge[Ee][ie][Pe][Be]=xe}return ge}(he.concat(L))}return V}var re=null;Object.defineProperty(this,"fontFaces",{get:function(){return re},set:function(C){V=null,re=C}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(C){var L;if(this.ctx.font=C,(L=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(C))!==null){var he=L[1];L[2];var pe=L[3],ge=L[4];L[5];var be=L[6],xe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ge)[2];ge=Math.floor(xe==="px"?parseFloat(ge)*this.pdf.internal.scaleFactor:xe==="em"?parseFloat(ge)*this.pdf.getFontSize():parseFloat(ge)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ge);var Ee=function(tt){var ft,et,Yt=[],Et=tt.trim();if(Et==="")return qm;if(Et in mb)return[mb[Et]];for(;Et!=="";){switch(et=null,ft=(Et=yb(Et)).charAt(0)){case'"':case"'":et=jN(Et.substring(1),ft);break;default:et=RN(Et)}if(et===null||(Yt.push(et[0]),(Et=yb(et[1]))!==""&&Et.charAt(0)!==","))return qm;Et=Et.replace(/^,/,"")}return Yt}(be);if(this.fontFaces){var ie=NN(R(this.pdf,this.fontFaces),Ee.map(function(tt){return{family:tt,stretch:"normal",weight:pe,style:he}}));this.pdf.setFont(ie.ref.name,ie.ref.style)}else{var Pe="";(pe==="bold"||parseInt(pe,10)>=700||he==="bold")&&(Pe="bold"),he==="italic"&&(Pe+="italic"),Pe.length===0&&(Pe="normal");for(var Be="",Ze={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},it=0;it<Ee.length;it++){if(this.pdf.internal.getFont(Ee[it],Pe,{noFallback:!0,disableWarning:!0})!==void 0){Be=Ee[it];break}if(Pe==="bolditalic"&&this.pdf.internal.getFont(Ee[it],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Be=Ee[it],Pe="bold";else if(this.pdf.internal.getFont(Ee[it],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Be=Ee[it],Pe="normal";break}}if(Be===""){for(var qe=0;qe<Ee.length;qe++)if(Ze[Ee[qe]]){Be=Ze[Ee[qe]];break}}Be=Be===""?"Times":Be,this.pdf.setFont(Be,Pe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(C){this.ctx.globalCompositeOperation=C}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(C){this.ctx.globalAlpha=C}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(C){this.ctx.lineDashOffset=C,fe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(C){this.ctx.lineDash=C,fe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(C){this.ctx.ignoreClearRect=!!C}})};h.prototype.setLineDash=function(P){this.lineDash=P},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){I.call(this,"fill",!1)},h.prototype.stroke=function(){I.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(P,A){if(isNaN(P)||isNaN(A))throw ur.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var F=this.ctx.transform.applyToPoint(new a(P,A));this.path.push({type:"mt",x:F.x,y:F.y}),this.ctx.lastPoint=new a(P,A)},h.prototype.closePath=function(){var P=new a(0,0),A=0;for(A=this.path.length-1;A!==-1;A--)if(this.path[A].type==="begin"&&sr(this.path[A+1])==="object"&&typeof this.path[A+1].x=="number"){P=new a(this.path[A+1].x,this.path[A+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},h.prototype.lineTo=function(P,A){if(isNaN(P)||isNaN(A))throw ur.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var F=this.ctx.transform.applyToPoint(new a(P,A));this.path.push({type:"lt",x:F.x,y:F.y}),this.ctx.lastPoint=new a(F.x,F.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),I.call(this,null,!0)},h.prototype.quadraticCurveTo=function(P,A,F,G){if(isNaN(F)||isNaN(G)||isNaN(P)||isNaN(A))throw ur.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Z=this.ctx.transform.applyToPoint(new a(F,G)),_=this.ctx.transform.applyToPoint(new a(P,A));this.path.push({type:"qct",x1:_.x,y1:_.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(Z.x,Z.y)},h.prototype.bezierCurveTo=function(P,A,F,G,Z,_){if(isNaN(Z)||isNaN(_)||isNaN(P)||isNaN(A)||isNaN(F)||isNaN(G))throw ur.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var q=this.ctx.transform.applyToPoint(new a(Z,_)),te=this.ctx.transform.applyToPoint(new a(P,A)),Ae=this.ctx.transform.applyToPoint(new a(F,G));this.path.push({type:"bct",x1:te.x,y1:te.y,x2:Ae.x,y2:Ae.y,x:q.x,y:q.y}),this.ctx.lastPoint=new a(q.x,q.y)},h.prototype.arc=function(P,A,F,G,Z,_){if(isNaN(P)||isNaN(A)||isNaN(F)||isNaN(G)||isNaN(Z))throw ur.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(_=!!_,!this.ctx.transform.isIdentity){var q=this.ctx.transform.applyToPoint(new a(P,A));P=q.x,A=q.y;var te=this.ctx.transform.applyToPoint(new a(0,F)),Ae=this.ctx.transform.applyToPoint(new a(0,0));F=Math.sqrt(Math.pow(te.x-Ae.x,2)+Math.pow(te.y-Ae.y,2))}Math.abs(Z-G)>=2*Math.PI&&(G=0,Z=2*Math.PI),this.path.push({type:"arc",x:P,y:A,radius:F,startAngle:G,endAngle:Z,counterclockwise:_})},h.prototype.arcTo=function(P,A,F,G,Z){throw new Error("arcTo not implemented.")},h.prototype.rect=function(P,A,F,G){if(isNaN(P)||isNaN(A)||isNaN(F)||isNaN(G))throw ur.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,A),this.lineTo(P+F,A),this.lineTo(P+F,A+G),this.lineTo(P,A+G),this.lineTo(P,A),this.lineTo(P+F,A),this.lineTo(P,A)},h.prototype.fillRect=function(P,A,F,G){if(isNaN(P)||isNaN(A)||isNaN(F)||isNaN(G))throw ur.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var Z={};this.lineCap!=="butt"&&(Z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,A,F,G),this.fill(),Z.hasOwnProperty("lineCap")&&(this.lineCap=Z.lineCap),Z.hasOwnProperty("lineJoin")&&(this.lineJoin=Z.lineJoin)}},h.prototype.strokeRect=function(P,A,F,G){if(isNaN(P)||isNaN(A)||isNaN(F)||isNaN(G))throw ur.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(P,A,F,G),this.stroke())},h.prototype.clearRect=function(P,A,F,G){if(isNaN(P)||isNaN(A)||isNaN(F)||isNaN(G))throw ur.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,A,F,G))},h.prototype.save=function(P){P=typeof P!="boolean"||P;for(var A=this.pdf.internal.getCurrentPageInfo().pageNumber,F=0;F<this.pdf.internal.getNumberOfPages();F++)this.pdf.setPage(F+1),this.pdf.internal.out("q");if(this.pdf.setPage(A),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var G=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=G}},h.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var A=this.pdf.internal.getCurrentPageInfo().pageNumber,F=0;F<this.pdf.internal.getNumberOfPages();F++)this.pdf.setPage(F+1),this.pdf.internal.out("Q");this.pdf.setPage(A),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(P){var A,F,G,Z;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))A=0,F=0,G=0,Z=0;else{var _=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(_!==null)A=parseInt(_[1]),F=parseInt(_[2]),G=parseInt(_[3]),Z=1;else if((_=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)A=parseInt(_[1]),F=parseInt(_[2]),G=parseInt(_[3]),Z=parseFloat(_[4]);else{if(Z=1,typeof P=="string"&&P.charAt(0)!=="#"){var q=new jx(P);P=q.ok?q.toHex():"#000000"}P.length===4?(A=P.substring(1,2),A+=A,F=P.substring(2,3),F+=F,G=P.substring(3,4),G+=G):(A=P.substring(1,3),F=P.substring(3,5),G=P.substring(5,7)),A=parseInt(A,16),F=parseInt(F,16),G=parseInt(G,16)}}return{r:A,g:F,b:G,a:Z,style:P}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(P,A,F,G){if(isNaN(A)||isNaN(F)||typeof P!="string")throw ur.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(G=isNaN(G)?void 0:G,!f.call(this)){var Z=ne(this.ctx.transform.rotation),_=this.ctx.transform.scaleX;O.call(this,{text:P,x:A,y:F,scale:_,angle:Z,align:this.textAlign,maxWidth:G})}},h.prototype.strokeText=function(P,A,F,G){if(isNaN(A)||isNaN(F)||typeof P!="string")throw ur.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){G=isNaN(G)?void 0:G;var Z=ne(this.ctx.transform.rotation),_=this.ctx.transform.scaleX;O.call(this,{text:P,x:A,y:F,scale:_,renderingMode:"stroke",angle:Z,align:this.textAlign,maxWidth:G})}},h.prototype.measureText=function(P){if(typeof P!="string")throw ur.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var A=this.pdf,F=this.pdf.internal.scaleFactor,G=A.internal.getFontSize(),Z=A.getStringUnitWidth(P)*G/A.internal.scaleFactor,_=function(q){var te=(q=q||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return te}}),this};return new _({width:Z*=Math.round(96*F/72*1e4)/1e4})},h.prototype.scale=function(P,A){if(isNaN(P)||isNaN(A))throw ur.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var F=new l(P,0,0,A,0,0);this.ctx.transform=this.ctx.transform.multiply(F)},h.prototype.rotate=function(P){if(isNaN(P))throw ur.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var A=new l(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(A)},h.prototype.translate=function(P,A){if(isNaN(P)||isNaN(A))throw ur.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var F=new l(1,0,0,1,P,A);this.ctx.transform=this.ctx.transform.multiply(F)},h.prototype.transform=function(P,A,F,G,Z,_){if(isNaN(P)||isNaN(A)||isNaN(F)||isNaN(G)||isNaN(Z)||isNaN(_))throw ur.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var q=new l(P,A,F,G,Z,_);this.ctx.transform=this.ctx.transform.multiply(q)},h.prototype.setTransform=function(P,A,F,G,Z,_){P=isNaN(P)?1:P,A=isNaN(A)?0:A,F=isNaN(F)?0:F,G=isNaN(G)?1:G,Z=isNaN(Z)?0:Z,_=isNaN(_)?0:_,this.ctx.transform=new l(P,A,F,G,Z,_)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(P,A,F,G,Z,_,q,te,Ae){var ce=this.pdf.getImageProperties(P),V=1,R=1,re=1,C=1;G!==void 0&&te!==void 0&&(re=te/G,C=Ae/Z,V=ce.width/G*te/G,R=ce.height/Z*Ae/Z),_===void 0&&(_=A,q=F,A=0,F=0),G!==void 0&&te===void 0&&(te=G,Ae=Z),G===void 0&&te===void 0&&(te=ce.width,Ae=ce.height);for(var L,he=this.ctx.transform.decompose(),pe=ne(he.rotate.shx),ge=new l,be=(ge=(ge=(ge=ge.multiply(he.translate)).multiply(he.skew)).multiply(he.scale)).applyToRectangle(new o(_-A*re,q-F*C,G*V,Z*R)),xe=x.call(this,be),Ee=[],ie=0;ie<xe.length;ie+=1)Ee.indexOf(xe[ie])===-1&&Ee.push(xe[ie]);if(T(Ee),this.autoPaging)for(var Pe=Ee[0],Be=Ee[Ee.length-1],Ze=Pe;Ze<Be+1;Ze++){this.pdf.setPage(Ze);var it=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qe=Ze===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=Ze===1?0:tt+(Ze-2)*ft;if(this.ctx.clip_path.length!==0){var Yt=this.path;L=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(L,this.posX+this.margin[3],-et+qe+this.ctx.prevPageLastElemOffset),Y.call(this,"fill",!0),this.path=Yt}var Et=JSON.parse(JSON.stringify(be));Et=k([Et],this.posX+this.margin[3],-et+qe+this.ctx.prevPageLastElemOffset)[0];var cn=(Ze>Pe||Ze<Be)&&b.call(this);cn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],it,ft,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",Et.x,Et.y,Et.w,Et.h,null,null,pe),cn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",be.x,be.y,be.w,be.h,null,null,pe)};var x=function(P,A,F){var G=[];A=A||this.pdf.internal.pageSize.width,F=F||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Z=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":G.push(Math.floor((P.y+Z)/F)+1);break;case"arc":G.push(Math.floor((P.y+Z-P.radius)/F)+1),G.push(Math.floor((P.y+Z+P.radius)/F)+1);break;case"qct":var _=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);G.push(Math.floor((_.y+Z)/F)+1),G.push(Math.floor((_.y+_.h+Z)/F)+1);break;case"bct":var q=de(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);G.push(Math.floor((q.y+Z)/F)+1),G.push(Math.floor((q.y+q.h+Z)/F)+1);break;case"rect":G.push(Math.floor((P.y+Z)/F)+1),G.push(Math.floor((P.y+P.h+Z)/F)+1)}for(var te=0;te<G.length;te+=1)for(;this.pdf.internal.getNumberOfPages()<G[te];)w.call(this);return G},w=function(){var P=this.fillStyle,A=this.strokeStyle,F=this.font,G=this.lineCap,Z=this.lineWidth,_=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=A,this.font=F,this.lineCap=G,this.lineWidth=Z,this.lineJoin=_},k=function(P,A,F){for(var G=0;G<P.length;G++)switch(P[G].type){case"bct":P[G].x2+=A,P[G].y2+=F;case"qct":P[G].x1+=A,P[G].y1+=F;case"mt":case"lt":case"arc":default:P[G].x+=A,P[G].y+=F}return P},T=function(P){return P.sort(function(A,F){return A-F})},I=function(P,A){for(var F,G,Z=this.fillStyle,_=this.strokeStyle,q=this.lineCap,te=this.lineWidth,Ae=Math.abs(te*this.ctx.transform.scaleX),ce=this.lineJoin,V=JSON.parse(JSON.stringify(this.path)),R=JSON.parse(JSON.stringify(this.path)),re=[],C=0;C<R.length;C++)if(R[C].x!==void 0)for(var L=x.call(this,R[C]),he=0;he<L.length;he+=1)re.indexOf(L[he])===-1&&re.push(L[he]);for(var pe=0;pe<re.length;pe++)for(;this.pdf.internal.getNumberOfPages()<re[pe];)w.call(this);if(T(re),this.autoPaging)for(var ge=re[0],be=re[re.length-1],xe=ge;xe<be+1;xe++){this.pdf.setPage(xe),this.fillStyle=Z,this.strokeStyle=_,this.lineCap=q,this.lineWidth=Ae,this.lineJoin=ce;var Ee=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ie=xe===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=xe===1?0:Pe+(xe-2)*Be;if(this.ctx.clip_path.length!==0){var it=this.path;F=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(F,this.posX+this.margin[3],-Ze+ie+this.ctx.prevPageLastElemOffset),Y.call(this,P,!0),this.path=it}if(G=JSON.parse(JSON.stringify(V)),this.path=k(G,this.posX+this.margin[3],-Ze+ie+this.ctx.prevPageLastElemOffset),A===!1||xe===0){var qe=(xe>ge||xe<be)&&b.call(this);qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ee,Be,null).clip().discardPath()),Y.call(this,P,A),qe&&this.pdf.restoreGraphicsState()}this.lineWidth=te}else this.lineWidth=Ae,Y.call(this,P,A),this.lineWidth=te;this.path=V},Y=function(P,A){if((P!=="stroke"||A||!v.call(this))&&(P==="stroke"||A||!f.call(this))){for(var F,G,Z=[],_=this.path,q=0;q<_.length;q++){var te=_[q];switch(te.type){case"begin":Z.push({begin:!0});break;case"close":Z.push({close:!0});break;case"mt":Z.push({start:te,deltas:[],abs:[]});break;case"lt":var Ae=Z.length;if(_[q-1]&&!isNaN(_[q-1].x)&&(F=[te.x-_[q-1].x,te.y-_[q-1].y],Ae>0)){for(;Ae>=0;Ae--)if(Z[Ae-1].close!==!0&&Z[Ae-1].begin!==!0){Z[Ae-1].deltas.push(F),Z[Ae-1].abs.push(te);break}}break;case"bct":F=[te.x1-_[q-1].x,te.y1-_[q-1].y,te.x2-_[q-1].x,te.y2-_[q-1].y,te.x-_[q-1].x,te.y-_[q-1].y],Z[Z.length-1].deltas.push(F);break;case"qct":var ce=_[q-1].x+2/3*(te.x1-_[q-1].x),V=_[q-1].y+2/3*(te.y1-_[q-1].y),R=te.x+2/3*(te.x1-te.x),re=te.y+2/3*(te.y1-te.y),C=te.x,L=te.y;F=[ce-_[q-1].x,V-_[q-1].y,R-_[q-1].x,re-_[q-1].y,C-_[q-1].x,L-_[q-1].y],Z[Z.length-1].deltas.push(F);break;case"arc":Z.push({deltas:[],abs:[],arc:!0}),Array.isArray(Z[Z.length-1].abs)&&Z[Z.length-1].abs.push(te)}}G=A?null:P==="stroke"?"stroke":"fill";for(var he=!1,pe=0;pe<Z.length;pe++)if(Z[pe].arc)for(var ge=Z[pe].abs,be=0;be<ge.length;be++){var xe=ge[be];xe.type==="arc"?j.call(this,xe.x,xe.y,xe.radius,xe.startAngle,xe.endAngle,xe.counterclockwise,void 0,A,!he):J.call(this,xe.x,xe.y),he=!0}else if(Z[pe].close===!0)this.pdf.internal.out("h"),he=!1;else if(Z[pe].begin!==!0){var Ee=Z[pe].start.x,ie=Z[pe].start.y;M.call(this,Z[pe].deltas,Ee,ie),he=!0}G&&U.call(this,G),A&&K.call(this)}},Q=function(P){var A=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,F=A*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-F;case"top":return P+A-F;case"hanging":return P+A-2*F;case"middle":return P+A/2-F;case"ideographic":return P;case"alphabetic":default:return P}},H=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(A,F){this.colorStops.push([A,F])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var j=function(P,A,F,G,Z,_,q,te,Ae){for(var ce=W.call(this,F,G,Z,_),V=0;V<ce.length;V++){var R=ce[V];V===0&&(Ae?D.call(this,R.x1+P,R.y1+A):J.call(this,R.x1+P,R.y1+A)),ee.call(this,P,A,R.x2,R.y2,R.x3,R.y3,R.x4,R.y4)}te?K.call(this):U.call(this,q)},U=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},K=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(P,A){this.pdf.internal.out(t(P)+" "+r(A)+" m")},O=function(P){var A;switch(P.align){case"right":case"end":A="right";break;case"center":A="center";break;case"left":case"start":default:A="left"}var F=this.pdf.getTextDimensions(P.text),G=Q.call(this,P.y),Z=H.call(this,G)-F.h,_=this.ctx.transform.applyToPoint(new a(P.x,G)),q=this.ctx.transform.decompose(),te=new l;te=(te=(te=te.multiply(q.translate)).multiply(q.skew)).multiply(q.scale);for(var Ae,ce,V,R=this.ctx.transform.applyToRectangle(new o(P.x,G,F.w,F.h)),re=te.applyToRectangle(new o(P.x,Z,F.w,F.h)),C=x.call(this,re),L=[],he=0;he<C.length;he+=1)L.indexOf(C[he])===-1&&L.push(C[he]);if(T(L),this.autoPaging)for(var pe=L[0],ge=L[L.length-1],be=pe;be<ge+1;be++){this.pdf.setPage(be);var xe=be===1?this.posY+this.margin[0]:this.margin[0],Ee=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ie=this.pdf.internal.pageSize.height-this.margin[2],Pe=ie-this.margin[0],Be=this.pdf.internal.pageSize.width-this.margin[1],Ze=Be-this.margin[3],it=be===1?0:Ee+(be-2)*Pe;if(this.ctx.clip_path.length!==0){var qe=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Ae,this.posX+this.margin[3],-1*it+xe),Y.call(this,"fill",!0),this.path=qe}var tt=k([JSON.parse(JSON.stringify(re))],this.posX+this.margin[3],-it+xe+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ce*P.scale),V=this.lineWidth,this.lineWidth=V*P.scale);var ft=this.autoPaging!=="text";if(ft||tt.y+tt.h<=ie){if(ft||tt.y>=xe&&tt.x<=Be){var et=ft?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||Be-tt.x)[0],Yt=k([JSON.parse(JSON.stringify(R))],this.posX+this.margin[3],-it+xe+this.ctx.prevPageLastElemOffset)[0],Et=ft&&(be>pe||be<ge)&&b.call(this);Et&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,Pe,null).clip().discardPath()),this.pdf.text(et,Yt.x,Yt.y,{angle:P.angle,align:A,renderingMode:P.renderingMode}),Et&&this.pdf.restoreGraphicsState()}}else tt.y<ie&&(this.ctx.prevPageLastElemOffset+=ie-tt.y);P.scale>=.01&&(this.pdf.setFontSize(ce),this.lineWidth=V)}else P.scale>=.01&&(ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ce*P.scale),V=this.lineWidth,this.lineWidth=V*P.scale),this.pdf.text(P.text,_.x+this.posX,_.y+this.posY,{angle:P.angle,align:A,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(ce),this.lineWidth=V)},J=function(P,A,F,G){F=F||0,G=G||0,this.pdf.internal.out(t(P+F)+" "+r(A+G)+" l")},M=function(P,A,F){return this.pdf.lines(P,A,F,null,null)},ee=function(P,A,F,G,Z,_,q,te){this.pdf.internal.out([e(s(F+P)),e(i(G+A)),e(s(Z+P)),e(i(_+A)),e(s(q+P)),e(i(te+A)),"c"].join(" "))},W=function(P,A,F,G){for(var Z=2*Math.PI,_=Math.PI/2;A>F;)A-=Z;var q=Math.abs(F-A);q<Z&&G&&(q=Z-q);for(var te=[],Ae=G?-1:1,ce=A;q>1e-5;){var V=ce+Ae*Math.min(q,_);te.push(ae.call(this,P,ce,V)),q-=Math.abs(V-ce),ce=V}return te},ae=function(P,A,F){var G=(F-A)/2,Z=P*Math.cos(G),_=P*Math.sin(G),q=Z,te=-_,Ae=q*q+te*te,ce=Ae+q*Z+te*_,V=4/3*(Math.sqrt(2*Ae*ce)-ce)/(q*_-te*Z),R=q-V*te,re=te+V*q,C=R,L=-re,he=G+A,pe=Math.cos(he),ge=Math.sin(he);return{x1:P*Math.cos(A),y1:P*Math.sin(A),x2:R*pe-re*ge,y2:R*ge+re*pe,x3:C*pe-L*ge,y3:C*ge+L*pe,x4:P*Math.cos(F),y4:P*Math.sin(F)}},ne=function(P){return 180*P/Math.PI},oe=function(P,A,F,G,Z,_){var q=P+.5*(F-P),te=A+.5*(G-A),Ae=Z+.5*(F-Z),ce=_+.5*(G-_),V=Math.min(P,Z,q,Ae),R=Math.max(P,Z,q,Ae),re=Math.min(A,_,te,ce),C=Math.max(A,_,te,ce);return new o(V,re,R-V,C-re)},de=function(P,A,F,G,Z,_,q,te){var Ae,ce,V,R,re,C,L,he,pe,ge,be,xe,Ee,ie,Pe=F-P,Be=G-A,Ze=Z-F,it=_-G,qe=q-Z,tt=te-_;for(ce=0;ce<41;ce++)pe=(L=(V=P+(Ae=ce/40)*Pe)+Ae*((re=F+Ae*Ze)-V))+Ae*(re+Ae*(Z+Ae*qe-re)-L),ge=(he=(R=A+Ae*Be)+Ae*((C=G+Ae*it)-R))+Ae*(C+Ae*(_+Ae*tt-C)-he),ce==0?(be=pe,xe=ge,Ee=pe,ie=ge):(be=Math.min(be,pe),xe=Math.min(xe,ge),Ee=Math.max(Ee,pe),ie=Math.max(ie,ge));return new o(Math.round(be),Math.round(xe),Math.round(Ee-be),Math.round(ie-xe))},fe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,A,F=(P=this.ctx.lineDash,A=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:A}));this.prevLineDash!==F&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=F)}}})(_t.API),function(n){var e=function(i){var a,o,l,u,c,h,p,f,v,b;for(o=[],l=0,u=(i+=a="\0\0\0\0".slice(i.length%4||4)).length;u>l;l+=4)(c=(i.charCodeAt(l)<<24)+(i.charCodeAt(l+1)<<16)+(i.charCodeAt(l+2)<<8)+i.charCodeAt(l+3))!==0?(h=(c=((c=((c=((c=(c-(b=c%85))/85)-(v=c%85))/85)-(f=c%85))/85)-(p=c%85))/85)%85,o.push(h+33,p+33,f+33,v+33,b+33)):o.push(122);return function(x,w){for(var k=w;k>0;k--)x.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},t=function(i){var a,o,l,u,c,h=String,p="length",f=255,v="charCodeAt",b="slice",x="replace";for(i[b](-2),i=i[b](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),l=[],u=0,c=(i+=a="uuuuu"[b](i[p]%5||5))[p];c>u;u+=5)o=52200625*(i[v](u)-33)+614125*(i[v](u+1)-33)+7225*(i[v](u+2)-33)+85*(i[v](u+3)-33)+(i[v](u+4)-33),l.push(f&o>>24,f&o>>16,f&o>>8,f&o);return function(w,k){for(var T=k;T>0;T--)w.pop()}(l,a[p]),h.fromCharCode.apply(h,l)},r=function(i){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),a.test(i)===!1)return"";for(var o="",l=0;l<i.length;l+=2)o+=String.fromCharCode("0x"+(i[l]+i[l+1]));return o},s=function(i){for(var a=new Uint8Array(i.length),o=i.length;o--;)a[o]=i.charCodeAt(o);return i=(a=F0(a)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(i,a){var o=0,l=i||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(_t.API),function(n){n.loadFile=function(e,t,r){return function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,u,c){var h=new XMLHttpRequest,p=0,f=function(v){var b=v.length,x=[],w=String.fromCharCode;for(p=0;p<b;p+=1)x.push(w(255&v.charCodeAt(p)));return x.join("")};if(h.open("GET",l,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?c(f(this.responseText)):c(void 0)}),h.send(null),u&&h.status===200)return f(h.responseText)}(s,i,a)}catch{}return o}(e,t,r)},n.loadImageFile=n.loadFile}(_t.API),function(n){function e(){return(St.html2canvas?Promise.resolve(St.html2canvas):Pa(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(St.DOMPurify?Promise.resolve(St.DOMPurify):Pa(()=>import("./purify.es-Ci5xwkH_.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var o=sr(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(a,o){var l=document.createElement(a);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},i=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,a,1,[a])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(a,o){return a.__proto__=o||i.prototype,a},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(l){return this.set({src:s("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},i.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,c){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),p=u.firstChild;p;p=p.nextSibling)c!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(l(p,c));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var p=0;p<u.length;++p){var f=u[p],v=f.src.find(function(b){return b.format==="truetype"});v&&l.addFont(v.url,f.ref.name,f.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},i.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},i.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},i.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(a){if(r(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in i.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},i.prototype.get=function(a,o){return this.then(function(){var l=a in i.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},i.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},i.prototype.setPageSize=function(a){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(a=a||_t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},i.prototype.setProgress=function(a,o,l,u){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(a,o,l,u){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},i.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(u,c){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,u),h}).then(u,c).then(function(h){return l.updateProgress(1),h})})},i.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),c=l.call(u,a,o);return i.convert(c,this.__proto__)},i.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},i.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},i.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return i.convert(o,this)},i.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},i.prototype.error=function(a){return this.then(function(){throw new Error(a)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,_t.getPageSize=function(a,o,l){if(sr(a)==="object"){var u=a;a=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var c,h=(""+l).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+o}var f,v=0,b=0;if(p.hasOwnProperty(h))v=p[h][1]/c,b=p[h][0]/c;else try{v=l[1],b=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",b>v&&(f=b,b=v,v=f);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",v>b&&(f=b,b=v,v=f)}return{width:b,height:v,unit:o,k:c,orientation:a}},n.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(V0):null;var l=new i(o);return o.worker?l:l.from(a).doCallback()}}(_t.API),_t.API.addJS=function(n){return wb=n,this.internal.events.subscribe("postPutResources",function(){Tf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Tf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),bb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+wb+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Tf!==void 0&&bb!==void 0&&this.internal.out("/Names <</JavaScript "+Tf+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=t.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],o=r.exec(a);if(o!=null){var l=o[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,c=[];for(i=0;i<u;i++){var h=t.internal.newObject();c.push(h);var p=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<c.length;i++)t.internal.write("(page_"+(i+1)+")"+c[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,s,i){var a={title:s,options:i,children:[]};return r==null&&(r=this.root),r.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var a=r.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,s){for(var i=0;i<s.children.length;i++)r.count++,this.count_r(r,s.children[i]);return r.count}}])}(_t.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,s,i,a,o){var l,u=this.decode.DCT_DECODE,c=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(h){for(var p,f=256*h.charCodeAt(4)+h.charCodeAt(5),v=h.length,b={width:0,height:0,numcomponents:1},x=4;x<v;x+=2){if(x+=f,e.indexOf(h.charCodeAt(x+1))!==-1){p=256*h.charCodeAt(x+5)+h.charCodeAt(x+6),b={width:256*h.charCodeAt(x+7)+h.charCodeAt(x+8),height:p,numcomponents:h.charCodeAt(x+9)};break}f=256*h.charCodeAt(x+2)+h.charCodeAt(x+3)}return b}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}c={data:t,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:s}}return c}}(_t.API);var pc,Pf,_b,xb,Sb,FN=function(){var n,e,t;function r(i){var a,o,l,u,c,h,p,f,v,b,x,w,k,T;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(a=this.readUInt32(),v=(function(){var I,Y;for(Y=[],I=0;I<4;++I)Y.push(String.fromCharCode(this.data[this.pos++]));return Y}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*c/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,a-=4),i=(h!=null?h.data:void 0)||this.imgData,w=0;0<=a?w<a:w>a;0<=a?++w:--w)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((b=l-this.transparency.indexed.length)>0)for(k=0;0<=b?k<b:k>b;0<=b?++k:--k)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":p=(x=this.read(a)).indexOf(0),f=String.fromCharCode.apply(String,x.slice(0,p)),this.text[f]=String.fromCharCode.apply(String,x.slice(p+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(T=this.colorType)===4||T===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(i){var a,o;for(o=[],a=0;0<=i?a<i:a>i;0<=i?++a:--a)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(i){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,u=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function c(h,p,f,v){var b,x,w,k,T,I,Y,Q,H,j,U,K,D,O,J,M,ee,W,ae,ne,oe,de=Math.ceil((u.width-h)/f),fe=Math.ceil((u.height-p)/v),P=u.width==de&&u.height==fe;for(O=a*de,K=P?o:new Uint8Array(O*fe),I=i.length,D=0,x=0;D<fe&&l<I;){switch(i[l++]){case 0:for(k=ee=0;ee<O;k=ee+=1)K[x++]=i[l++];break;case 1:for(k=W=0;W<O;k=W+=1)b=i[l++],T=k<a?0:K[x-a],K[x++]=(b+T)%256;break;case 2:for(k=ae=0;ae<O;k=ae+=1)b=i[l++],w=(k-k%a)/a,J=D&&K[(D-1)*O+w*a+k%a],K[x++]=(J+b)%256;break;case 3:for(k=ne=0;ne<O;k=ne+=1)b=i[l++],w=(k-k%a)/a,T=k<a?0:K[x-a],J=D&&K[(D-1)*O+w*a+k%a],K[x++]=(b+Math.floor((T+J)/2))%256;break;case 4:for(k=oe=0;oe<O;k=oe+=1)b=i[l++],w=(k-k%a)/a,T=k<a?0:K[x-a],D===0?J=M=0:(J=K[(D-1)*O+w*a+k%a],M=w&&K[(D-1)*O+(w-1)*a+k%a]),Y=T+J-M,Q=Math.abs(Y-T),j=Math.abs(Y-J),U=Math.abs(Y-M),H=Q<=j&&Q<=U?T:j<=U?J:M,K[x++]=(b+H)%256;break;default:throw new Error("Invalid filter algorithm: "+i[l-1])}if(!P){var A=((p+D*v)*u.width+h)*a,F=D*O;for(k=0;k<de;k+=1){for(var G=0;G<a;G+=1)o[A++]=K[F++];A+=(f-1)*a}}D++}}return i=gN(i),u.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),o},r.prototype.decodePalette=function(){var i,a,o,l,u,c,h,p,f;for(o=this.palette,c=this.transparency.indexed||[],u=new Uint8Array((c.length||0)+o.length),l=0,i=0,a=h=0,p=o.length;h<p;a=h+=3)u[l++]=o[a],u[l++]=o[a+1],u[l++]=o[a+2],u[l++]=(f=c[i++])!=null?f:255;return u},r.prototype.copyToImageData=function(i,a){var o,l,u,c,h,p,f,v,b,x,w;if(l=this.colors,b=null,o=this.hasAlphaChannel,this.palette.length&&(b=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,o=!0),v=(u=i.data||i).length,h=b||a,c=p=0,l===1)for(;c<v;)f=b?4*a[c/4]:p,x=h[f++],u[c++]=x,u[c++]=x,u[c++]=x,u[c++]=o?h[f++]:255,p=f;else for(;c<v;)f=b?4*a[c/4]:p,u[c++]=h[f++],u[c++]=h[f++],u[c++]=h[f++],u[c++]=o?h[f++]:255,p=f},r.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(St)==="[object Window]"){try{e=St.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),n=function(i){var a;if(s()===!0)return t.width=i.width,t.height=i.height,t.clearRect(0,0,i.width,i.height),t.putImageData(i,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(i){var a,o,l,u,c,h,p,f;if(this.animation){for(f=[],o=c=0,h=(p=this.animation.frames).length;c<h;o=++c)a=p[o],l=i.createImageData(a.width,a.height),u=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,u),a.imageData=l,f.push(a.image=n(l));return f}},r.prototype.renderFrame=function(i,a){var o,l,u;return o=(l=this.animation.frames)[a],u=l[a-1],a===0&&i.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?i.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&i.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(i){var a,o,l,u,c,h,p=this;return o=0,h=this.animation,u=h.numFrames,l=h.frames,c=h.numPlays,(a=function(){var f,v;if(f=o++%u,v=l[f],p.renderFrame(i,f),u>1&&o/u<c)return p.animation._timeout=setTimeout(a,v.delay)})()},r.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},r.prototype.render=function(i){var a,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,a=i.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function IN(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,s=n[e++],i=s>>7,a=1<<(7&s)+1;n[e++],n[e++];var o=null,l=null;i&&(o=e,l=a,e+=3*a);var u=!0,c=[],h=0,p=null,f=0,v=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,v=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((D=n[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=n[e++];h=n[e++]|n[e++]<<8,p=n[e++],(1&b)==0&&(p=null),f=b>>2&7,e++;break;case 254:for(;;){if(!((D=n[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var x=n[e++]|n[e++]<<8,w=n[e++]|n[e++]<<8,k=n[e++]|n[e++]<<8,T=n[e++]|n[e++]<<8,I=n[e++],Y=I>>6&1,Q=1<<(7&I)+1,H=o,j=l,U=!1;I>>7&&(U=!0,H=e,j=Q,e+=3*Q);var K=e;for(e++;;){var D;if(!((D=n[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}c.push({x,y:w,width:k,height:T,has_local_palette:U,palette_offset:H,palette_size:j,data_offset:K,data_length:e-K,transparent_index:p,interlaced:!!Y,delay:h,disposal:f});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return v},this.frameInfo=function(O){if(O<0||O>=c.length)throw new Error("Frame index out of range.");return c[O]},this.decodeAndBlitFrameBGRA=function(O,J){var M=this.frameInfo(O),ee=M.width*M.height,W=new Uint8Array(ee);kb(n,M.data_offset,W,ee);var ae=M.palette_offset,ne=M.transparent_index;ne===null&&(ne=256);var oe=M.width,de=t-oe,fe=oe,P=4*(M.y*t+M.x),A=4*((M.y+M.height)*t+M.x),F=P,G=4*de;M.interlaced===!0&&(G+=4*t*7);for(var Z=8,_=0,q=W.length;_<q;++_){var te=W[_];if(fe===0&&(fe=oe,(F+=G)>=A&&(G=4*de+4*t*(Z-1),F=P+(oe+de)*(Z<<1),Z>>=1)),te===ne)F+=4;else{var Ae=n[ae+3*te],ce=n[ae+3*te+1],V=n[ae+3*te+2];J[F++]=V,J[F++]=ce,J[F++]=Ae,J[F++]=255}--fe}},this.decodeAndBlitFrameRGBA=function(O,J){var M=this.frameInfo(O),ee=M.width*M.height,W=new Uint8Array(ee);kb(n,M.data_offset,W,ee);var ae=M.palette_offset,ne=M.transparent_index;ne===null&&(ne=256);var oe=M.width,de=t-oe,fe=oe,P=4*(M.y*t+M.x),A=4*((M.y+M.height)*t+M.x),F=P,G=4*de;M.interlaced===!0&&(G+=4*t*7);for(var Z=8,_=0,q=W.length;_<q;++_){var te=W[_];if(fe===0&&(fe=oe,(F+=G)>=A&&(G=4*de+4*t*(Z-1),F=P+(oe+de)*(Z<<1),Z>>=1)),te===ne)F+=4;else{var Ae=n[ae+3*te],ce=n[ae+3*te+1],V=n[ae+3*te+2];J[F++]=Ae,J[F++]=ce,J[F++]=V,J[F++]=255}--fe}}}function kb(n,e,t,r){for(var s=n[e++],i=1<<s,a=i+1,o=a+1,l=s+1,u=(1<<l)-1,c=0,h=0,p=0,f=n[e++],v=new Int32Array(4096),b=null;;){for(;c<16&&f!==0;)h|=n[e++]<<c,c+=8,f===1?f=n[e++]:--f;if(c<l)break;var x=h&u;if(h>>=l,c-=l,x!==i){if(x===a)break;for(var w=x<o?x:b,k=0,T=w;T>i;)T=v[T]>>8,++k;var I=T;if(p+k+(w!==x?1:0)>r)return void ur.log("Warning, gif stream longer than expected.");t[p++]=I;var Y=p+=k;for(w!==x&&(t[p++]=I),T=w;k--;)T=v[T],t[--Y]=255&T,T>>=8;b!==null&&o<4096&&(v[o++]=b<<8|I,o>=u+1&&l<12&&(++l,u=u<<1|1)),b=x}else o=a+1,u=(1<<(l=s+1))-1,b=null}return p!==r&&ur.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Um(n){var e,t,r,s,i,a=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),h=new Array(65535),p=new Array(65535),f=new Array(64),v=new Array(64),b=[],x=0,w=7,k=new Array(64),T=new Array(64),I=new Array(64),Y=new Array(256),Q=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ee=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function W(P,A){for(var F=0,G=0,Z=new Array,_=1;_<=16;_++){for(var q=1;q<=P[_];q++)Z[A[G]]=[],Z[A[G]][0]=F,Z[A[G]][1]=_,G++,F++;F*=2}return Z}function ae(P){for(var A=P[0],F=P[1]-1;F>=0;)A&1<<F&&(x|=1<<w),F--,--w<0&&(x==255?(ne(255),ne(0)):ne(x),w=7,x=0)}function ne(P){b.push(P)}function oe(P){ne(P>>8&255),ne(255&P)}function de(P,A,F,G,Z){for(var _,q=Z[0],te=Z[240],Ae=function(ge,be){var xe,Ee,ie,Pe,Be,Ze,it,qe,tt,ft,et=0;for(tt=0;tt<8;++tt){xe=ge[et],Ee=ge[et+1],ie=ge[et+2],Pe=ge[et+3],Be=ge[et+4],Ze=ge[et+5],it=ge[et+6];var Yt=xe+(qe=ge[et+7]),Et=xe-qe,cn=Ee+it,Pt=Ee-it,Ft=ie+Ze,Sn=ie-Ze,Ce=Pe+Be,Je=Pe-Be,st=Yt+Ce,bt=Yt-Ce,Ie=cn+Ft,Qe=cn-Ft;ge[et]=st+Ie,ge[et+4]=st-Ie;var We=.707106781*(Qe+bt);ge[et+2]=bt+We,ge[et+6]=bt-We;var Rt=.382683433*((st=Je+Sn)-(Qe=Pt+Et)),un=.5411961*st+Rt,yr=1.306562965*Qe+Rt,Zr=.707106781*(Ie=Sn+Pt),os=Et+Zr,vt=Et-Zr;ge[et+5]=vt+un,ge[et+3]=vt-un,ge[et+1]=os+yr,ge[et+7]=os-yr,et+=8}for(et=0,tt=0;tt<8;++tt){xe=ge[et],Ee=ge[et+8],ie=ge[et+16],Pe=ge[et+24],Be=ge[et+32],Ze=ge[et+40],it=ge[et+48];var ti=xe+(qe=ge[et+56]),Ei=xe-qe,ls=Ee+it,en=Ee-it,Yr=ie+Ze,ks=ie-Ze,Cl=Pe+Be,ra=Pe-Be,ri=ti+Cl,ni=ti-Cl,si=ls+Yr,Ni=ls-Yr;ge[et]=ri+si,ge[et+32]=ri-si;var js=.707106781*(Ni+ni);ge[et+16]=ni+js,ge[et+48]=ni-js;var ji=.382683433*((ri=ra+ks)-(Ni=en+Ei)),Io=.5411961*ri+ji,Al=1.306562965*Ni+ji,Tl=.707106781*(si=ks+en),Pl=Ei+Tl,Ol=Ei-Tl;ge[et+40]=Ol+Io,ge[et+24]=Ol-Io,ge[et+8]=Pl+Al,ge[et+56]=Pl-Al,et++}for(tt=0;tt<64;++tt)ft=ge[tt]*be[tt],f[tt]=ft>0?ft+.5|0:ft-.5|0;return f}(P,A),ce=0;ce<64;++ce)v[H[ce]]=Ae[ce];var V=v[0]-F;F=v[0],V==0?ae(G[0]):(ae(G[p[_=32767+V]]),ae(h[_]));for(var R=63;R>0&&v[R]==0;)R--;if(R==0)return ae(q),F;for(var re,C=1;C<=R;){for(var L=C;v[C]==0&&C<=R;)++C;var he=C-L;if(he>=16){re=he>>4;for(var pe=1;pe<=re;++pe)ae(te);he&=15}_=32767+v[C],ae(Z[(he<<4)+p[_]]),ae(h[_]),C++}return R!=63&&ae(q),F}function fe(P){P=Math.min(Math.max(P,1),100),i!=P&&(function(A){for(var F=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],G=0;G<64;G++){var Z=a((F[G]*A+50)/100);Z=Math.min(Math.max(Z,1),255),o[H[G]]=Z}for(var _=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],q=0;q<64;q++){var te=a((_[q]*A+50)/100);te=Math.min(Math.max(te,1),255),l[H[q]]=te}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ce=0,V=0;V<8;V++)for(var R=0;R<8;R++)u[ce]=1/(o[H[ce]]*Ae[V]*Ae[R]*8),c[ce]=1/(l[H[ce]]*Ae[V]*Ae[R]*8),ce++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),i=P)}this.encode=function(P,A){A&&fe(A),b=new Array,x=0,w=7,oe(65496),oe(65504),oe(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),oe(1),oe(1),ne(0),ne(0),function(){oe(65499),oe(132),ne(0);for(var Ee=0;Ee<64;Ee++)ne(o[Ee]);ne(1);for(var ie=0;ie<64;ie++)ne(l[ie])}(),function(Ee,ie){oe(65472),oe(17),ne(8),oe(ie),oe(Ee),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(P.width,P.height),function(){oe(65476),oe(418),ne(0);for(var Ee=0;Ee<16;Ee++)ne(j[Ee+1]);for(var ie=0;ie<=11;ie++)ne(U[ie]);ne(16);for(var Pe=0;Pe<16;Pe++)ne(K[Pe+1]);for(var Be=0;Be<=161;Be++)ne(D[Be]);ne(1);for(var Ze=0;Ze<16;Ze++)ne(O[Ze+1]);for(var it=0;it<=11;it++)ne(J[it]);ne(17);for(var qe=0;qe<16;qe++)ne(M[qe+1]);for(var tt=0;tt<=161;tt++)ne(ee[tt])}(),oe(65498),oe(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var F=0,G=0,Z=0;x=0,w=7,this.encode.displayName="_encode_";for(var _,q,te,Ae,ce,V,R,re,C,L=P.data,he=P.width,pe=P.height,ge=4*he,be=0;be<pe;){for(_=0;_<ge;){for(ce=ge*be+_,R=-1,re=0,C=0;C<64;C++)V=ce+(re=C>>3)*ge+(R=4*(7&C)),be+re>=pe&&(V-=ge*(be+1+re-pe)),_+R>=ge&&(V-=_+R-ge+4),q=L[V++],te=L[V++],Ae=L[V++],k[C]=(Q[q]+Q[te+256>>0]+Q[Ae+512>>0]>>16)-128,T[C]=(Q[q+768>>0]+Q[te+1024>>0]+Q[Ae+1280>>0]>>16)-128,I[C]=(Q[q+1280>>0]+Q[te+1536>>0]+Q[Ae+1792>>0]>>16)-128;F=de(k,u,F,e,r),G=de(T,c,G,t,s),Z=de(I,c,Z,t,s),_+=32}be+=8}if(w>=0){var xe=[];xe[1]=w+1,xe[0]=(1<<w+1)-1,ae(xe)}return oe(65497),new Uint8Array(b)},n=n||50,function(){for(var P=String.fromCharCode,A=0;A<256;A++)Y[A]=P(A)}(),e=W(j,U),t=W(O,J),r=W(K,D),s=W(M,ee),function(){for(var P=1,A=2,F=1;F<=15;F++){for(var G=P;G<A;G++)p[32767+G]=F,h[32767+G]=[],h[32767+G][1]=F,h[32767+G][0]=G;for(var Z=-(A-1);Z<=-P;Z++)p[32767+Z]=F,h[32767+Z]=[],h[32767+Z][1]=F,h[32767+Z][0]=A-1+Z;P<<=1,A<<=1}}(),function(){for(var P=0;P<256;P++)Q[P]=19595*P,Q[P+256>>0]=38470*P,Q[P+512>>0]=7471*P+32768,Q[P+768>>0]=-11059*P,Q[P+1024>>0]=-21709*P,Q[P+1280>>0]=32768*P+8421375,Q[P+1536>>0]=-27439*P,Q[P+1792>>0]=-5329*P}(),fe(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function di(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Cb(n){function e(j){if(!j)throw Error("assert :P")}function t(j,U,K){for(var D=0;4>D;D++)if(j[U+D]!=K.charCodeAt(D))return!0;return!1}function r(j,U,K,D,O){for(var J=0;J<O;J++)j[U+J]=K[D+J]}function s(j,U,K,D){for(var O=0;O<D;O++)j[U+O]=K}function i(j){return new Int32Array(j)}function a(j,U){for(var K=[],D=0;D<j;D++)K.push(new U);return K}function o(j,U){var K=[];return function D(O,J,M){for(var ee=M[J],W=0;W<ee&&(O.push(M.length>J+1?[]:new U),!(M.length<J+1));W++)D(O[W],J+1,M)}(K,0,j),K}var l=function(){var j=this;function U(d,g){for(var y=1<<g-1>>>0;d&y;)y>>>=1;return y?(d&y-1)+y:d}function K(d,g,y,S,E){e(!(S%y));do d[g+(S-=y)]=E;while(0<S)}function D(d,g,y,S,E){if(e(2328>=E),512>=E)var B=i(512);else if((B=i(E))==null)return 0;return function($,z,X,se,ve,Le){var De,Te,ze=z,je=1<<X,ye=i(16),ke=i(16);for(e(ve!=0),e(se!=null),e($!=null),e(0<X),Te=0;Te<ve;++Te){if(15<se[Te])return 0;++ye[se[Te]]}if(ye[0]==ve)return 0;for(ke[1]=0,De=1;15>De;++De){if(ye[De]>1<<De)return 0;ke[De+1]=ke[De]+ye[De]}for(Te=0;Te<ve;++Te)De=se[Te],0<se[Te]&&(Le[ke[De]++]=Te);if(ke[15]==1)return(se=new O).g=0,se.value=Le[0],K($,ze,1,je,se),je;var Ue,Ye=-1,Ve=je-1,lt=0,rt=1,yt=1,nt=1<<X;for(Te=0,De=1,ve=2;De<=X;++De,ve<<=1){if(rt+=yt<<=1,0>(yt-=ye[De]))return 0;for(;0<ye[De];--ye[De])(se=new O).g=De,se.value=Le[Te++],K($,ze+lt,ve,nt,se),lt=U(lt,De)}for(De=X+1,ve=2;15>=De;++De,ve<<=1){if(rt+=yt<<=1,0>(yt-=ye[De]))return 0;for(;0<ye[De];--ye[De]){if(se=new O,(lt&Ve)!=Ye){for(ze+=nt,Ue=1<<(Ye=De)-X;15>Ye&&!(0>=(Ue-=ye[Ye]));)++Ye,Ue<<=1;je+=nt=1<<(Ue=Ye-X),$[z+(Ye=lt&Ve)].g=Ue+X,$[z+Ye].value=ze-z-Ye}se.g=De-X,se.value=Le[Te++],K($,ze+(lt>>X),ve,nt,se),lt=U(lt,De)}}return rt!=2*ke[15]-1?0:je}(d,g,y,S,E,B)}function O(){this.value=this.g=0}function J(){this.value=this.g=0}function M(){this.G=a(5,O),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(kn,J)}function ee(d,g,y,S){e(d!=null),e(g!=null),e(2147483648>S),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=g,d.pa=y,d.Jd=g,d.Yc=y+S,d.Zc=4<=S?y+S-4+1:y,_(d)}function W(d,g){for(var y=0;0<g--;)y|=te(d,128)<<g;return y}function ae(d,g){var y=W(d,g);return q(d)?-y:y}function ne(d,g,y,S){var E,B=0;for(e(d!=null),e(g!=null),e(4294967288>S),d.Sb=S,d.Ra=0,d.u=0,d.h=0,4<S&&(S=4),E=0;E<S;++E)B+=g[y+E]<<8*E;d.Ra=B,d.bb=S,d.oa=g,d.pa=y}function oe(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<zl-8>>>0,++d.bb,d.u-=8;F(d)&&(d.h=1,d.u=0)}function de(d,g){if(e(0<=g),!d.h&&g<=Vl){var y=A(d)&Ul[g];return d.u+=g,oe(d),y}return d.h=1,d.u=0}function fe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function A(d){return d.Ra>>>(d.u&zl-1)>>>0}function F(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>zl}function G(d,g){d.u=g,d.h=F(d)}function Z(d){d.u>=Pu&&(e(d.u>=Pu),oe(d))}function _(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function q(d){return W(d,1)}function te(d,g){var y=d.Ca;0>d.b&&_(d);var S=d.b,E=y*g>>>8,B=(d.I>>>S>E)+0;for(B?(y-=E,d.I-=E+1<<S>>>0):y=E+1,S=y,E=0;256<=S;)E+=8,S>>=8;return S=7^E+us[S],d.b-=S,d.Ca=(y<<S)-1,B}function Ae(d,g,y){d[g+0]=y>>24&255,d[g+1]=y>>16&255,d[g+2]=y>>8&255,d[g+3]=y>>0&255}function ce(d,g){return d[g+0]<<0|d[g+1]<<8}function V(d,g){return ce(d,g)|d[g+2]<<16}function R(d,g){return ce(d,g)|ce(d,g+2)<<16}function re(d,g){var y=1<<g;return e(d!=null),e(0<g),d.X=i(y),d.X==null?0:(d.Mb=32-g,d.Xa=g,1)}function C(d,g){e(d!=null),e(g!=null),e(d.Xa==g.Xa),r(g.X,0,d.X,0,1<<g.Xa)}function L(){this.X=[],this.Xa=this.Mb=0}function he(d,g,y,S){e(y!=null),e(S!=null);var E=y[0],B=S[0];return E==0&&(E=(d*B+g/2)/g),B==0&&(B=(g*E+d/2)/d),0>=E||0>=B?0:(y[0]=E,S[0]=B,1)}function pe(d,g){return d+(1<<g)-1>>>g}function ge(d,g){return((4278255360&d)+(4278255360&g)>>>0&4278255360)+((16711935&d)+(16711935&g)>>>0&16711935)>>>0}function be(d,g){j[g]=function(y,S,E,B,$,z,X){var se;for(se=0;se<$;++se){var ve=j[d](z[X+se-1],E,B+se);z[X+se]=ge(y[S+se],ve)}}}function xe(){this.ud=this.hd=this.jd=0}function Ee(d,g){return((4278124286&(d^g))>>>1)+(d&g)>>>0}function ie(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Pe(d,g){return ie(d+(d-g+.5>>1))}function Be(d,g,y){return Math.abs(g-y)-Math.abs(d-y)}function Ze(d,g,y,S,E,B,$){for(S=B[$-1],y=0;y<E;++y)B[$+y]=S=ge(d[g+y],S)}function it(d,g,y,S,E){var B;for(B=0;B<y;++B){var $=d[g+B],z=$>>8&255,X=16711935&(X=(X=16711935&$)+((z<<16)+z));S[E+B]=(4278255360&$)+X>>>0}}function qe(d,g){g.jd=d>>0&255,g.hd=d>>8&255,g.ud=d>>16&255}function tt(d,g,y,S,E,B){var $;for($=0;$<S;++$){var z=g[y+$],X=z>>>8,se=z,ve=255&(ve=(ve=z>>>16)+((d.jd<<24>>24)*(X<<24>>24)>>>5));se=255&(se=(se=se+((d.hd<<24>>24)*(X<<24>>24)>>>5))+((d.ud<<24>>24)*(ve<<24>>24)>>>5)),E[B+$]=(4278255360&z)+(ve<<16)+se}}function ft(d,g,y,S,E){j[g]=function(B,$,z,X,se,ve,Le,De,Te){for(X=Le;X<De;++X)for(Le=0;Le<Te;++Le)se[ve++]=E(z[S(B[$++])])},j[d]=function(B,$,z,X,se,ve,Le){var De=8>>B.b,Te=B.Ea,ze=B.K[0],je=B.w;if(8>De)for(B=(1<<B.b)-1,je=(1<<De)-1;$<z;++$){var ye,ke=0;for(ye=0;ye<Te;++ye)ye&B||(ke=S(X[se++])),ve[Le++]=E(ze[ke&je]),ke>>=De}else j["VP8LMapColor"+y](X,se,ze,je,ve,Le,$,z,Te)}}function et(d,g,y,S,E){for(y=g+y;g<y;){var B=d[g++];S[E++]=B>>16&255,S[E++]=B>>8&255,S[E++]=B>>0&255}}function Yt(d,g,y,S,E){for(y=g+y;g<y;){var B=d[g++];S[E++]=B>>16&255,S[E++]=B>>8&255,S[E++]=B>>0&255,S[E++]=B>>24&255}}function Et(d,g,y,S,E){for(y=g+y;g<y;){var B=($=d[g++])>>16&240|$>>12&15,$=$>>0&240|$>>28&15;S[E++]=B,S[E++]=$}}function cn(d,g,y,S,E){for(y=g+y;g<y;){var B=($=d[g++])>>16&248|$>>13&7,$=$>>5&224|$>>3&31;S[E++]=B,S[E++]=$}}function Pt(d,g,y,S,E){for(y=g+y;g<y;){var B=d[g++];S[E++]=B>>0&255,S[E++]=B>>8&255,S[E++]=B>>16&255}}function Ft(d,g,y,S,E,B){if(B==0)for(y=g+y;g<y;)Ae(S,((B=d[g++])[0]>>24|B[1]>>8&65280|B[2]<<8&16711680|B[3]<<24)>>>0),E+=32;else r(S,E,d,g,y)}function Sn(d,g){j[g][0]=j[d+"0"],j[g][1]=j[d+"1"],j[g][2]=j[d+"2"],j[g][3]=j[d+"3"],j[g][4]=j[d+"4"],j[g][5]=j[d+"5"],j[g][6]=j[d+"6"],j[g][7]=j[d+"7"],j[g][8]=j[d+"8"],j[g][9]=j[d+"9"],j[g][10]=j[d+"10"],j[g][11]=j[d+"11"],j[g][12]=j[d+"12"],j[g][13]=j[d+"13"],j[g][14]=j[d+"0"],j[g][15]=j[d+"0"]}function Ce(d){return d==Pg||d==Og||d==Td||d==Lg}function Je(){this.eb=[],this.size=this.A=this.fb=0}function st(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function bt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Je,this.f.kb=new st,this.sd=null}function Ie(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Qe(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function We(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Rt(d,g){var y=d.T,S=g.ba.f.RGBA,E=S.eb,B=S.fb+d.ka*S.A,$=qs[g.ba.S],z=d.y,X=d.O,se=d.f,ve=d.N,Le=d.ea,De=d.W,Te=g.cc,ze=g.dc,je=g.Mc,ye=g.Nc,ke=d.ka,Ue=d.ka+d.T,Ye=d.U,Ve=Ye+1>>1;for(ke==0?$(z,X,null,null,se,ve,Le,De,se,ve,Le,De,E,B,null,null,Ye):($(g.ec,g.fc,z,X,Te,ze,je,ye,se,ve,Le,De,E,B-S.A,E,B,Ye),++y);ke+2<Ue;ke+=2)Te=se,ze=ve,je=Le,ye=De,ve+=d.Rc,De+=d.Rc,B+=2*S.A,$(z,(X+=2*d.fa)-d.fa,z,X,Te,ze,je,ye,se,ve,Le,De,E,B-S.A,E,B,Ye);return X+=d.fa,d.j+Ue<d.o?(r(g.ec,g.fc,z,X,Ye),r(g.cc,g.dc,se,ve,Ve),r(g.Mc,g.Nc,Le,De,Ve),y--):1&Ue||$(z,X,null,null,se,ve,Le,De,se,ve,Le,De,E,B+S.A,null,null,Ye),y}function un(d,g,y){var S=d.F,E=[d.J];if(S!=null){var B=d.U,$=g.ba.S,z=$==Ad||$==Td;g=g.ba.f.RGBA;var X=[0],se=d.ka;X[0]=d.T,d.Kb&&(se==0?--X[0]:(--se,E[0]-=d.width),d.j+d.ka+d.T==d.o&&(X[0]=d.o-d.j-se));var ve=g.eb;se=g.fb+se*g.A,d=pr(S,E[0],d.width,B,X,ve,se+(z?0:3),g.A),e(y==X),d&&Ce($)&&Bs(ve,se,z,B,X,g.A)}return 0}function yr(d){var g=d.ma,y=g.ba.S,S=11>y,E=y==kd||y==Cd||y==Ad||y==Tg||y==12||Ce(y);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Au(g.Oa,d,E?11:12))return 0;if(E&&Ce(y)&&Xe(),d.da)alert("todo:use_scaling");else{if(S){if(g.Ib=We,d.Kb){if(y=d.U+1>>1,g.memory=i(d.U+2*y),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+d.U,g.Mc=g.cc,g.Nc=g.dc+y,g.Ib=Rt,Xe()}}else alert("todo:EmitYUV");E&&(g.Jb=un,S&&Oe())}if(S&&!h1){for(d=0;256>d;++d)f3[d]=89858*(d-128)+Od>>Pd,m3[d]=-22014*(d-128)+Od,g3[d]=-45773*(d-128),p3[d]=113618*(d-128)+Od>>Pd;for(d=ju;d<Eg;++d)g=76283*(d-16)+Od>>Pd,v3[d-ju]=Cs(g,255),y3[d-ju]=Cs(g+8>>4,15);h1=1}return 1}function Zr(d){var g=d.ma,y=d.U,S=d.T;return e(!(1&d.ka)),0>=y||0>=S?0:(y=g.Ib(d,g),g.Jb!=null&&g.Jb(d,g,y),g.Dc+=y,1)}function os(d){d.ma.memory=null}function vt(d,g,y,S){return de(d,8)!=47?0:(g[0]=de(d,14)+1,y[0]=de(d,14)+1,S[0]=de(d,1),de(d,3)!=0?0:!d.h)}function ti(d,g){if(4>d)return d+1;var y=d-2>>1;return(2+(1&d)<<y)+de(g,y)+1}function Ei(d,g){return 120<g?g-120:1<=(y=((y=Zx[g-1])>>4)*d+(8-(15&y)))?y:1;var y}function ls(d,g,y){var S=A(y),E=d[g+=255&S].g-8;return 0<E&&(G(y,y.u+8),S=A(y),g+=d[g].value,g+=S&(1<<E)-1),G(y,y.u+d[g].g),d[g].value}function en(d,g,y){return y.g+=d.g,y.value+=d.value<<g>>>0,e(8>=y.g),d.g}function Yr(d,g,y){var S=d.xc;return e((g=S==0?0:d.vc[d.md*(y>>S)+(g>>S)])<d.Wb),d.Ya[g]}function ks(d,g,y,S){var E=d.ab,B=d.c*g,$=d.C;g=$+g;var z=y,X=S;for(S=d.Ta,y=d.Ua;0<E--;){var se=d.gc[E],ve=$,Le=g,De=z,Te=X,ze=(X=S,z=y,se.Ea);switch(e(ve<Le),e(Le<=se.nc),se.hc){case 2:vd(De,Te,(Le-ve)*ze,X,z);break;case 0:var je=ve,ye=Le,ke=X,Ue=z,Ye=(nt=se).Ea;je==0&&(Cg(De,Te,null,null,1,ke,Ue),Ze(De,Te+1,0,0,Ye-1,ke,Ue+1),Te+=Ye,Ue+=Ye,++je);for(var Ve=1<<nt.b,lt=Ve-1,rt=pe(Ye,nt.b),yt=nt.K,nt=nt.w+(je>>nt.b)*rt;je<ye;){var Gt=yt,er=nt,Ht=1;for(Ou(De,Te,ke,Ue-Ye,1,ke,Ue);Ht<Ye;){var Bt=(Ht&~lt)+Ve;Bt>Ye&&(Bt=Ye),(0,Ua[Gt[er++]>>8&15])(De,Te+ +Ht,ke,Ue+Ht-Ye,Bt-Ht,ke,Ue+Ht),Ht=Bt}Te+=Ye,Ue+=Ye,++je&lt||(nt+=rt)}Le!=se.nc&&r(X,z-ze,X,z+(Le-ve-1)*ze,ze);break;case 1:for(ze=De,ye=Te,Ye=(De=se.Ea)-(Ue=De&~(ke=(Te=1<<se.b)-1)),je=pe(De,se.b),Ve=se.K,se=se.w+(ve>>se.b)*je;ve<Le;){for(lt=Ve,rt=se,yt=new xe,nt=ye+Ue,Gt=ye+De;ye<nt;)qe(lt[rt++],yt),Vo(yt,ze,ye,Te,X,z),ye+=Te,z+=Te;ye<Gt&&(qe(lt[rt++],yt),Vo(yt,ze,ye,Ye,X,z),ye+=Ye,z+=Ye),++ve&ke||(se+=je)}break;case 3:if(De==X&&Te==z&&0<se.b){for(ye=X,De=ze=z+(Le-ve)*ze-(Ue=(Le-ve)*pe(se.Ea,se.b)),Te=X,ke=z,je=[],Ue=(Ye=Ue)-1;0<=Ue;--Ue)je[Ue]=Te[ke+Ue];for(Ue=Ye-1;0<=Ue;--Ue)ye[De+Ue]=je[Ue];Rs(se,ve,Le,X,ze,X,z)}else Rs(se,ve,Le,De,Te,X,z)}z=S,X=y}X!=y&&r(S,y,z,X,B)}function Cl(d,g){var y=d.V,S=d.Ba+d.c*d.C,E=g-d.C;if(e(g<=d.l.o),e(16>=E),0<E){var B=d.l,$=d.Ta,z=d.Ua,X=B.width;if(ks(d,E,y,S),E=z=[z],e((y=d.C)<(S=g)),e(B.v<B.va),S>B.o&&(S=B.o),y<B.j){var se=B.j-y;y=B.j,E[0]+=se*X}if(y>=S?y=0:(E[0]+=4*B.v,B.ka=y-B.j,B.U=B.va-B.v,B.T=S-y,y=1),y){if(z=z[0],11>(y=d.ca).S){var ve=y.f.RGBA,Le=(S=y.S,E=B.U,B=B.T,se=ve.eb,ve.A),De=B;for(ve=ve.fb+d.Ma*ve.A;0<De--;){var Te=$,ze=z,je=E,ye=se,ke=ve;switch(S){case Sd:hs(Te,ze,je,ye,ke);break;case kd:zn(Te,ze,je,ye,ke);break;case Pg:zn(Te,ze,je,ye,ke),Bs(ye,ke,0,je,1,0);break;case r1:aa(Te,ze,je,ye,ke);break;case Cd:Ft(Te,ze,je,ye,ke,1);break;case Og:Ft(Te,ze,je,ye,ke,1),Bs(ye,ke,0,je,1,0);break;case Ad:Ft(Te,ze,je,ye,ke,0);break;case Td:Ft(Te,ze,je,ye,ke,0),Bs(ye,ke,1,je,1,0);break;case Tg:Va(Te,ze,je,ye,ke);break;case Lg:Va(Te,ze,je,ye,ke),fr(ye,ke,je,1,0);break;case n1:ia(Te,ze,je,ye,ke);break;default:e(0)}z+=X,ve+=Le}d.Ma+=B}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=y.height)}}d.C=g,e(d.C<=d.i)}function ra(d){var g;if(0<d.ua)return 0;for(g=0;g<d.Wb;++g){var y=d.Ya[g].G,S=d.Ya[g].H;if(0<y[1][S[1]+0].g||0<y[2][S[2]+0].g||0<y[3][S[3]+0].g)return 0}return 1}function ri(d,g,y,S,E,B){if(d.Z!=0){var $=d.qd,z=d.rd;for(e(Wa[d.Z]!=null);g<y;++g)Wa[d.Z]($,z,S,E,S,E,B),$=S,z=E,E+=B;d.qd=$,d.rd=z}}function ni(d,g){var y=d.l.ma,S=y.Z==0||y.Z==1?d.l.j:d.C;if(S=d.C<S?S:d.C,e(g<=d.l.o),g>S){var E=d.l.width,B=y.ca,$=y.tb+E*S,z=d.V,X=d.Ba+d.c*S,se=d.gc;e(d.ab==1),e(se[0].hc==3),yd(se[0],S,g,z,X,B,$),ri(y,S,g,B,$,E)}d.C=d.Ma=g}function si(d,g,y,S,E,B,$){var z=d.$/S,X=d.$%S,se=d.m,ve=d.s,Le=y+d.$,De=Le;E=y+S*E;var Te=y+S*B,ze=280+ve.ua,je=d.Pb?z:16777216,ye=0<ve.ua?ve.Wa:null,ke=ve.wc,Ue=Le<Te?Yr(ve,X,z):null;e(d.C<B),e(Te<=E);var Ye=!1;e:for(;;){for(;Ye||Le<Te;){var Ve=0;if(z>=je){var lt=Le-y;e((je=d).Pb),je.wd=je.m,je.xd=lt,0<je.s.ua&&C(je.s.Wa,je.s.vb),je=z+t3}if(X&ke||(Ue=Yr(ve,X,z)),e(Ue!=null),Ue.Qb&&(g[Le]=Ue.qb,Ye=!0),!Ye)if(Z(se),Ue.jc){Ve=se,lt=g;var rt=Le,yt=Ue.pd[A(Ve)&kn-1];e(Ue.jc),256>yt.g?(G(Ve,Ve.u+yt.g),lt[rt]=yt.value,Ve=0):(G(Ve,Ve.u+yt.g-256),e(256<=yt.value),Ve=yt.value),Ve==0&&(Ye=!0)}else Ve=ls(Ue.G[0],Ue.H[0],se);if(se.h)break;if(Ye||256>Ve){if(!Ye)if(Ue.nd)g[Le]=(Ue.qb|Ve<<8)>>>0;else{if(Z(se),Ye=ls(Ue.G[1],Ue.H[1],se),Z(se),lt=ls(Ue.G[2],Ue.H[2],se),rt=ls(Ue.G[3],Ue.H[3],se),se.h)break;g[Le]=(rt<<24|Ye<<16|Ve<<8|lt)>>>0}if(Ye=!1,++Le,++X>=S&&(X=0,++z,$!=null&&z<=B&&!(z%16)&&$(d,z),ye!=null))for(;De<Le;)Ve=g[De++],ye.X[(506832829*Ve&4294967295)>>>ye.Mb]=Ve}else if(280>Ve){if(Ve=ti(Ve-256,se),lt=ls(Ue.G[4],Ue.H[4],se),Z(se),lt=Ei(S,lt=ti(lt,se)),se.h)break;if(Le-y<lt||E-Le<Ve)break e;for(rt=0;rt<Ve;++rt)g[Le+rt]=g[Le+rt-lt];for(Le+=Ve,X+=Ve;X>=S;)X-=S,++z,$!=null&&z<=B&&!(z%16)&&$(d,z);if(e(Le<=E),X&ke&&(Ue=Yr(ve,X,z)),ye!=null)for(;De<Le;)Ve=g[De++],ye.X[(506832829*Ve&4294967295)>>>ye.Mb]=Ve}else{if(!(Ve<ze))break e;for(Ye=Ve-280,e(ye!=null);De<Le;)Ve=g[De++],ye.X[(506832829*Ve&4294967295)>>>ye.Mb]=Ve;Ve=Le,e(!(Ye>>>(lt=ye).Xa)),g[Ve]=lt.X[Ye],Ye=!0}Ye||e(se.h==F(se))}if(d.Pb&&se.h&&Le<E)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&C(d.s.vb,d.s.Wa);else{if(se.h)break e;$!=null&&$(d,z>B?B:z),d.a=0,d.$=Le-y}return 1}return d.a=3,0}function Ni(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var g=d.Wa;g!=null&&(g.X=null),d.vb=null,e(d!=null)}function js(){var d=new kg;return d==null?null:(d.a=0,d.xb=a1,Sn("Predictor","VP8LPredictors"),Sn("Predictor","VP8LPredictors_C"),Sn("PredictorAdd","VP8LPredictorsAdd"),Sn("PredictorAdd","VP8LPredictorsAdd_C"),vd=it,Vo=tt,hs=et,zn=Yt,Va=Et,ia=cn,aa=Pt,j.VP8LMapColor32b=Hl,j.VP8LMapColor8b=bd,d)}function ji(d,g,y,S,E){var B=1,$=[d],z=[g],X=S.m,se=S.s,ve=null,Le=0;e:for(;;){if(y)for(;B&&de(X,1);){var De=$,Te=z,ze=S,je=1,ye=ze.m,ke=ze.gc[ze.ab],Ue=de(ye,2);if(ze.Oc&1<<Ue)B=0;else{switch(ze.Oc|=1<<Ue,ke.hc=Ue,ke.Ea=De[0],ke.nc=Te[0],ke.K=[null],++ze.ab,e(4>=ze.ab),Ue){case 0:case 1:ke.b=de(ye,3)+2,je=ji(pe(ke.Ea,ke.b),pe(ke.nc,ke.b),0,ze,ke.K),ke.K=ke.K[0];break;case 3:var Ye,Ve=de(ye,8)+1,lt=16<Ve?0:4<Ve?1:2<Ve?2:3;if(De[0]=pe(ke.Ea,lt),ke.b=lt,Ye=je=ji(Ve,1,0,ze,ke.K)){var rt,yt=Ve,nt=ke,Gt=1<<(8>>nt.b),er=i(Gt);if(er==null)Ye=0;else{var Ht=nt.K[0],Bt=nt.w;for(er[0]=nt.K[0][0],rt=1;rt<1*yt;++rt)er[rt]=ge(Ht[Bt+rt],er[rt-1]);for(;rt<4*Gt;++rt)er[rt]=0;nt.K[0]=null,nt.K[0]=er,Ye=1}}je=Ye;break;case 2:break;default:e(0)}B=je}}if($=$[0],z=z[0],B&&de(X,1)&&!(B=1<=(Le=de(X,4))&&11>=Le)){S.a=3;break e}var cr;if(cr=B)t:{var ar,Nt,Gr,ds=S,Xr=$,fs=z,tr=Le,Ts=y,Ps=ds.m,dn=ds.s,Cn=[null],Yn=1,Us=0,Bi=e3[tr];r:for(;;){if(Ts&&de(Ps,1)){var fn=de(Ps,3)+2,ua=pe(Xr,fn),Go=pe(fs,fn),Kl=ua*Go;if(!ji(ua,Go,0,ds,Cn))break r;for(Cn=Cn[0],dn.xc=fn,ar=0;ar<Kl;++ar){var Ga=Cn[ar]>>8&65535;Cn[ar]=Ga,Ga>=Yn&&(Yn=Ga+1)}}if(Ps.h)break r;for(Nt=0;5>Nt;++Nt){var Lr=s1[Nt];!Nt&&0<tr&&(Lr+=1<<tr),Us<Lr&&(Us=Lr)}var Ng=a(Yn*Bi,O),p1=Yn,g1=a(p1,M);if(g1==null)var Dd=null;else e(65536>=p1),Dd=g1;var Ru=i(Us);if(Dd==null||Ru==null||Ng==null){ds.a=1;break r}var Md=Ng;for(ar=Gr=0;ar<Yn;++ar){var ci=Dd[ar],Jl=ci.G,Ql=ci.H,m1=0,Ed=1,v1=0;for(Nt=0;5>Nt;++Nt){Lr=s1[Nt],Jl[Nt]=Md,Ql[Nt]=Gr,!Nt&&0<tr&&(Lr+=1<<tr);s:{var Nd,jg=Lr,jd=ds,Fu=Ru,_3=Md,x3=Gr,Rg=0,Xa=jd.m,S3=de(Xa,1);if(s(Fu,0,0,jg),S3){var k3=de(Xa,1)+1,C3=de(Xa,1),y1=de(Xa,C3==0?1:8);Fu[y1]=1,k3==2&&(Fu[y1=de(Xa,8)]=1);var Rd=1}else{var b1=i(19),w1=de(Xa,4)+4;if(19<w1){jd.a=3;var Fd=0;break s}for(Nd=0;Nd<w1;++Nd)b1[Qx[Nd]]=de(Xa,3);var Fg=void 0,Iu=void 0,_1=jd,A3=b1,Id=jg,x1=Fu,Ig=0,Ka=_1.m,S1=8,k1=a(128,O);n:for(;D(k1,0,7,A3,19);){if(de(Ka,1)){var T3=2+2*de(Ka,3);if((Fg=2+de(Ka,T3))>Id)break n}else Fg=Id;for(Iu=0;Iu<Id&&Fg--;){Z(Ka);var C1=k1[0+(127&A(Ka))];G(Ka,Ka.u+C1.g);var Zl=C1.value;if(16>Zl)x1[Iu++]=Zl,Zl!=0&&(S1=Zl);else{var P3=Zl==16,A1=Zl-16,O3=Kx[A1],T1=de(Ka,Xx[A1])+O3;if(Iu+T1>Id)break n;for(var L3=P3?S1:0;0<T1--;)x1[Iu++]=L3}}Ig=1;break n}Ig||(_1.a=3),Rd=Ig}(Rd=Rd&&!Xa.h)&&(Rg=D(_3,x3,8,Fu,jg)),Rd&&Rg!=0?Fd=Rg:(jd.a=3,Fd=0)}if(Fd==0)break r;if(Ed&&Jx[Nt]==1&&(Ed=Md[Gr].g==0),m1+=Md[Gr].g,Gr+=Fd,3>=Nt){var Bu,Bg=Ru[0];for(Bu=1;Bu<Lr;++Bu)Ru[Bu]>Bg&&(Bg=Ru[Bu]);v1+=Bg}}if(ci.nd=Ed,ci.Qb=0,Ed&&(ci.qb=(Jl[3][Ql[3]+0].value<<24|Jl[1][Ql[1]+0].value<<16|Jl[2][Ql[2]+0].value)>>>0,m1==0&&256>Jl[0][Ql[0]+0].value&&(ci.Qb=1,ci.qb+=Jl[0][Ql[0]+0].value<<8)),ci.jc=!ci.Qb&&6>v1,ci.jc){var Bd,ha=ci;for(Bd=0;Bd<kn;++Bd){var Ja=Bd,Qa=ha.pd[Ja],$d=ha.G[0][ha.H[0]+Ja];256<=$d.value?(Qa.g=$d.g+256,Qa.value=$d.value):(Qa.g=0,Qa.value=0,Ja>>=en($d,8,Qa),Ja>>=en(ha.G[1][ha.H[1]+Ja],16,Qa),Ja>>=en(ha.G[2][ha.H[2]+Ja],0,Qa),en(ha.G[3][ha.H[3]+Ja],24,Qa))}}}dn.vc=Cn,dn.Wb=Yn,dn.Ya=Dd,dn.yc=Ng,cr=1;break t}cr=0}if(!(B=cr)){S.a=3;break e}if(0<Le){if(se.ua=1<<Le,!re(se.Wa,Le)){S.a=1,B=0;break e}}else se.ua=0;var $g=S,P1=$,D3=z,qg=$g.s,Ug=qg.xc;if($g.c=P1,$g.i=D3,qg.md=pe(P1,Ug),qg.wc=Ug==0?-1:(1<<Ug)-1,y){S.xb=l3;break e}if((ve=i($*z))==null){S.a=1,B=0;break e}B=(B=si(S,ve,0,$,z,z,null))&&!X.h;break e}return B?(E!=null?E[0]=ve:(e(ve==null),e(y)),S.$=0,y||Ni(se)):Ni(se),B}function Io(d,g){var y=d.c*d.i,S=y+g+16*g;return e(d.c<=g),d.V=i(S),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+y+g,1)}function Al(d,g){var y=d.C,S=g-y,E=d.V,B=d.Ba+d.c*y;for(e(g<=d.l.o);0<S;){var $=16<S?16:S,z=d.l.ma,X=d.l.width,se=X*$,ve=z.ca,Le=z.tb+X*y,De=d.Ta,Te=d.Ua;ks(d,$,E,B),Rr(De,Te,ve,Le,se),ri(z,y,y+$,ve,Le,X),S-=$,E+=$*d.c,y+=$}e(y==g),d.C=d.Ma=g}function Tl(){this.ub=this.yd=this.td=this.Rb=0}function Pl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ol(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Jh(){this.Yb=function(){var d=[];return function g(y,S,E){for(var B=E[S],$=0;$<B&&(y.push(E.length>S+1?[]:0),!(E.length<S+1));$++)g(y[$],S+1,E)}(d,0,[3,11]),d}()}function tg(){this.jb=i(3),this.Wc=o([4,8],Jh),this.Xc=o([4,17],Jh)}function rg(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Ll(){this.ld=this.La=this.dd=this.tc=0}function Qh(){this.Na=this.la=0}function ng(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function uu(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function sg(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ll),this.Y=0,this.ya=Array(new uu),this.aa=0,this.l=new Dl}function Zh(){this.y=i(16),this.f=i(8),this.ea=i(8)}function ig(){this.cb=this.a=0,this.sc="",this.m=new fe,this.Od=new Tl,this.Kc=new Pl,this.ed=new rg,this.Qa=new Ol,this.Ic=this.$c=this.Aa=0,this.D=new sg,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,fe),this.ia=0,this.pb=a(4,ng),this.Pa=new tg,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Zh),this.Hd=0,this.rb=Array(new Qh),this.sb=0,this.wa=Array(new Ll),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new uu),this.L=this.aa=0,this.gd=o([4,2],Ll),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Dl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ag(){var d=new ig;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Nu||(Nu=rd)),d}function Nr(d,g,y){return d.a==0&&(d.a=g,d.sc=y,d.cb=0),0}function ed(d,g,y){return 3<=y&&d[g+0]==157&&d[g+1]==1&&d[g+2]==42}function td(d,g){if(d==null)return 0;if(d.a=0,d.sc="OK",g==null)return Nr(d,2,"null VP8Io passed to VP8GetHeaders()");var y=g.data,S=g.w,E=g.ha;if(4>E)return Nr(d,7,"Truncated header.");var B=y[S+0]|y[S+1]<<8|y[S+2]<<16,$=d.Od;if($.Rb=!(1&B),$.td=B>>1&7,$.yd=B>>4&1,$.ub=B>>5,3<$.td)return Nr(d,3,"Incorrect keyframe parameters.");if(!$.yd)return Nr(d,4,"Frame not displayable.");S+=3,E-=3;var z=d.Kc;if($.Rb){if(7>E)return Nr(d,7,"cannot parse picture header");if(!ed(y,S,E))return Nr(d,3,"Bad code word");z.c=16383&(y[S+4]<<8|y[S+3]),z.Td=y[S+4]>>6,z.i=16383&(y[S+6]<<8|y[S+5]),z.Ud=y[S+6]>>6,S+=7,E-=7,d.za=z.c+15>>4,d.Ub=z.i+15>>4,g.width=z.c,g.height=z.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,s((B=d.Pa).jb,0,255,B.jb.length),e((B=d.Qa)!=null),B.Cb=0,B.Bb=0,B.Fb=1,s(B.Zb,0,0,B.Zb.length),s(B.Lb,0,0,B.Lb)}if($.ub>E)return Nr(d,7,"bad partition length");ee(B=d.m,y,S,$.ub),S+=$.ub,E-=$.ub,$.Rb&&(z.Ld=q(B),z.Kd=q(B)),z=d.Qa;var X,se=d.Pa;if(e(B!=null),e(z!=null),z.Cb=q(B),z.Cb){if(z.Bb=q(B),q(B)){for(z.Fb=q(B),X=0;4>X;++X)z.Zb[X]=q(B)?ae(B,7):0;for(X=0;4>X;++X)z.Lb[X]=q(B)?ae(B,6):0}if(z.Bb)for(X=0;3>X;++X)se.jb[X]=q(B)?W(B,8):255}else z.Bb=0;if(B.Ka)return Nr(d,3,"cannot parse segment header");if((z=d.ed).zd=q(B),z.Tb=W(B,6),z.wb=W(B,3),z.Pc=q(B),z.Pc&&q(B)){for(se=0;4>se;++se)q(B)&&(z.vd[se]=ae(B,6));for(se=0;4>se;++se)q(B)&&(z.od[se]=ae(B,6))}if(d.L=z.Tb==0?0:z.zd?1:2,B.Ka)return Nr(d,3,"cannot parse filter header");var ve=E;if(E=X=S,S=X+ve,z=ve,d.Xb=(1<<W(d.m,2))-1,ve<3*(se=d.Xb))y=7;else{for(X+=3*se,z-=3*se,ve=0;ve<se;++ve){var Le=y[E+0]|y[E+1]<<8|y[E+2]<<16;Le>z&&(Le=z),ee(d.Jc[+ve],y,X,Le),X+=Le,z-=Le,E+=3}ee(d.Jc[+se],y,X,z),y=X<S?0:5}if(y!=0)return Nr(d,y,"cannot parse partitions");for(y=W(X=d.m,7),E=q(X)?ae(X,4):0,S=q(X)?ae(X,4):0,z=q(X)?ae(X,4):0,se=q(X)?ae(X,4):0,X=q(X)?ae(X,4):0,ve=d.Qa,Le=0;4>Le;++Le){if(ve.Cb){var De=ve.Zb[Le];ve.Fb||(De+=y)}else{if(0<Le){d.pb[Le]=d.pb[0];continue}De=y}var Te=d.pb[Le];Te.Sc[0]=Dg[Cs(De+E,127)],Te.Sc[1]=Mg[Cs(De+0,127)],Te.Eb[0]=2*Dg[Cs(De+S,127)],Te.Eb[1]=101581*Mg[Cs(De+z,127)]>>16,8>Te.Eb[1]&&(Te.Eb[1]=8),Te.Qc[0]=Dg[Cs(De+se,117)],Te.Qc[1]=Mg[Cs(De+X,127)],Te.lc=De+X}if(!$.Rb)return Nr(d,4,"Not a key frame.");for(q(B),$=d.Pa,y=0;4>y;++y){for(E=0;8>E;++E)for(S=0;3>S;++S)for(z=0;11>z;++z)se=te(B,a3[y][E][S][z])?W(B,8):s3[y][E][S][z],$.Wc[y][E].Yb[S][z]=se;for(E=0;17>E;++E)$.Xc[y][E]=$.Wc[y][o3[E]]}return d.kc=q(B),d.kc&&(d.Bd=W(B,8)),d.cb=1}function rd(d,g,y,S,E,B,$){var z=g[E].Yb[y];for(y=0;16>E;++E){if(!te(d,z[y+0]))return E;for(;!te(d,z[y+1]);)if(z=g[++E].Yb[0],y=0,E==16)return 16;var X=g[E+1].Yb;if(te(d,z[y+2])){var se=d,ve=0;if(te(se,(De=z)[(Le=y)+3]))if(te(se,De[Le+6])){for(z=0,Le=2*(ve=te(se,De[Le+8]))+(De=te(se,De[Le+9+ve])),ve=0,De=r3[Le];De[z];++z)ve+=ve+te(se,De[z]);ve+=3+(8<<Le)}else te(se,De[Le+7])?(ve=7+2*te(se,165),ve+=te(se,145)):ve=5+te(se,159);else ve=te(se,De[Le+4])?3+te(se,De[Le+5]):2;z=X[2]}else ve=1,z=X[1];X=$+n3[E],0>(se=d).b&&_(se);var Le,De=se.b,Te=(Le=se.Ca>>1)-(se.I>>De)>>31;--se.b,se.Ca+=Te,se.Ca|=1,se.I-=(Le+1&Te)<<De,B[X]=((ve^Te)-Te)*S[(0<E)+0]}return 16}function hu(d){var g=d.rb[d.sb-1];g.la=0,g.Na=0,s(d.zc,0,0,d.zc.length),d.ja=0}function og(d,g){if(d==null)return 0;if(g==null)return Nr(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!td(d,g))return 0;if(e(d.cb),g.ac==null||g.ac(g)){g.ob&&(d.L=0);var y=Ld[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=g.v-y>>4,d.zb=g.j-y>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=g.o+15+y>>4,d.Hb=g.va+15+y>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var S=d.ed;for(y=0;4>y;++y){var E;if(d.Qa.Cb){var B=d.Qa.Lb[y];d.Qa.Fb||(B+=S.Tb)}else B=S.Tb;for(E=0;1>=E;++E){var $=d.gd[y][E],z=B;if(S.Pc&&(z+=S.vd[0],E&&(z+=S.od[0])),0<(z=0>z?0:63<z?63:z)){var X=z;0<S.wb&&(X=4<S.wb?X>>2:X>>1)>9-S.wb&&(X=9-S.wb),1>X&&(X=1),$.dd=X,$.tc=2*z+X,$.ld=40<=z?2:15<=z?1:0}else $.tc=0;$.La=E}}}y=0}else Nr(d,6,"Frame setup failed"),y=d.a;if(y=y==0){if(y){d.$c=0,0<d.Aa||(d.Ic=w3);e:{y=d.Ic,S=4*(X=d.za);var se=32*X,ve=X+1,Le=0<d.L?X*(0<d.Aa?2:1):0,De=(d.Aa==2?2:1)*X;if(($=S+832+(E=3*(16*y+Ld[d.L])/2*se)+(B=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=$)y=0;else{if($>d.Vb){if(d.Vb=0,d.Ec=i($),d.Fc=0,d.Ec==null){y=Nr(d,1,"no memory during frame initialization.");break e}d.Vb=$}$=d.Ec,z=d.Fc,d.Ac=$,d.Bc=z,z+=S,d.Gd=a(se,Zh),d.Hd=0,d.rb=a(ve+1,Qh),d.sb=1,d.wa=Le?a(Le,Ll):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=X),e(!0),d.oc=$,d.pc=z,z+=832,d.ya=a(De,uu),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=X),d.R=16*X,d.B=8*X,X=(se=Ld[d.L])*d.R,se=se/2*d.B,d.sa=$,d.ta=z+X,d.qa=d.sa,d.ra=d.ta+16*y*d.R+se,d.Ha=d.qa,d.Ia=d.ra+8*y*d.B+se,d.$c=0,z+=E,d.mb=B?$:null,d.nb=B?z:null,e(z+B<=d.Fc+d.Vb),hu(d),s(d.Ac,d.Bc,0,S),y=1}}if(y){if(g.ka=0,g.y=d.sa,g.O=d.ta,g.f=d.qa,g.N=d.ra,g.ea=d.Ha,g.Vd=d.Ia,g.fa=d.R,g.Rc=d.B,g.F=null,g.J=0,!_d){for(y=-255;255>=y;++y)tn[255+y]=0>y?-y:y;for(y=-1020;1020>=y;++y)la[1020+y]=-128>y?-128:127<y?127:y;for(y=-112;112>=y;++y)Eu[112+y]=-16>y?-16:15<y?15:y;for(y=-255;510>=y;++y)Xl[255+y]=0>y?0:255<y?255:y;_d=1}Yl=ug,oa=lg,Lu=sd,Hn=cg,Fs=id,jr=nd,Wl=vu,wd=qo,Du=Sg,zo=yu,Ho=xg,za=Fl,Yo=bu,Gl=pd,Wo=fd,Ha=Fi,Mu=sa,Is=_g,li[0]=Ri,li[1]=hg,li[2]=gg,li[3]=mg,li[4]=ld,li[5]=jl,li[6]=cd,li[7]=pu,li[8]=yg,li[9]=vg,Ya[0]=ad,Ya[1]=fg,Ya[2]=na,Ya[3]=El,Ya[4]=Pn,Ya[5]=pg,Ya[6]=od,ca[0]=Ba,ca[1]=dg,ca[2]=bg,ca[3]=gu,ca[4]=$o,ca[5]=wg,ca[6]=mu,y=1}else y=0}y&&(y=function(Te,ze){for(Te.M=0;Te.M<Te.Va;++Te.M){var je,ye=Te.Jc[Te.M&Te.Xb],ke=Te.m,Ue=Te;for(je=0;je<Ue.za;++je){var Ye=ke,Ve=Ue,lt=Ve.Ac,rt=Ve.Bc+4*je,yt=Ve.zc,nt=Ve.ya[Ve.aa+je];if(Ve.Qa.Bb?nt.$b=te(Ye,Ve.Pa.jb[0])?2+te(Ye,Ve.Pa.jb[2]):te(Ye,Ve.Pa.jb[1]):nt.$b=0,Ve.kc&&(nt.Ad=te(Ye,Ve.Bd)),nt.Za=!te(Ye,145)+0,nt.Za){var Gt=nt.Ob,er=0;for(Ve=0;4>Ve;++Ve){var Ht,Bt=yt[0+Ve];for(Ht=0;4>Ht;++Ht){Bt=i3[lt[rt+Ht]][Bt];for(var cr=i1[te(Ye,Bt[0])];0<cr;)cr=i1[2*cr+te(Ye,Bt[cr])];Bt=-cr,lt[rt+Ht]=Bt}r(Gt,er,lt,rt,4),er+=4,yt[0+Ve]=Bt}}else Bt=te(Ye,156)?te(Ye,128)?1:3:te(Ye,163)?2:0,nt.Ob[0]=Bt,s(lt,rt,Bt,4),s(yt,0,Bt,4);nt.Dd=te(Ye,142)?te(Ye,114)?te(Ye,183)?1:3:2:0}if(Ue.m.Ka)return Nr(Te,7,"Premature end-of-partition0 encountered.");for(;Te.ja<Te.za;++Te.ja){if(Ue=ye,Ye=(ke=Te).rb[ke.sb-1],lt=ke.rb[ke.sb+ke.ja],je=ke.ya[ke.aa+ke.ja],rt=ke.kc?je.Ad:0)Ye.la=lt.la=0,je.Za||(Ye.Na=lt.Na=0),je.Hc=0,je.Gc=0,je.ia=0;else{var ar,Nt;if(Ye=lt,lt=Ue,rt=ke.Pa.Xc,yt=ke.ya[ke.aa+ke.ja],nt=ke.pb[yt.$b],Ve=yt.ad,Gt=0,er=ke.rb[ke.sb-1],Bt=Ht=0,s(Ve,Gt,0,384),yt.Za)var Gr=0,ds=rt[3];else{cr=i(16);var Xr=Ye.Na+er.Na;if(Xr=Nu(lt,rt[1],Xr,nt.Eb,0,cr,0),Ye.Na=er.Na=(0<Xr)+0,1<Xr)Yl(cr,0,Ve,Gt);else{var fs=cr[0]+3>>3;for(cr=0;256>cr;cr+=16)Ve[Gt+cr]=fs}Gr=1,ds=rt[0]}var tr=15&Ye.la,Ts=15&er.la;for(cr=0;4>cr;++cr){var Ps=1&Ts;for(fs=Nt=0;4>fs;++fs)tr=tr>>1|(Ps=(Xr=Nu(lt,ds,Xr=Ps+(1&tr),nt.Sc,Gr,Ve,Gt))>Gr)<<7,Nt=Nt<<2|(3<Xr?3:1<Xr?2:Ve[Gt+0]!=0),Gt+=16;tr>>=4,Ts=Ts>>1|Ps<<7,Ht=(Ht<<8|Nt)>>>0}for(ds=tr,Gr=Ts>>4,ar=0;4>ar;ar+=2){for(Nt=0,tr=Ye.la>>4+ar,Ts=er.la>>4+ar,cr=0;2>cr;++cr){for(Ps=1&Ts,fs=0;2>fs;++fs)Xr=Ps+(1&tr),tr=tr>>1|(Ps=0<(Xr=Nu(lt,rt[2],Xr,nt.Qc,0,Ve,Gt)))<<3,Nt=Nt<<2|(3<Xr?3:1<Xr?2:Ve[Gt+0]!=0),Gt+=16;tr>>=2,Ts=Ts>>1|Ps<<5}Bt|=Nt<<4*ar,ds|=tr<<4<<ar,Gr|=(240&Ts)<<ar}Ye.la=ds,er.la=Gr,yt.Hc=Ht,yt.Gc=Bt,yt.ia=43690&Bt?0:nt.ia,rt=!(Ht|Bt)}if(0<ke.L&&(ke.wa[ke.Y+ke.ja]=ke.gd[je.$b][je.Za],ke.wa[ke.Y+ke.ja].La|=!rt),Ue.Ka)return Nr(Te,7,"Premature end-of-file encountered.")}if(hu(Te),ke=ze,Ue=1,je=(ye=Te).D,Ye=0<ye.L&&ye.M>=ye.zb&&ye.M<=ye.Va,ye.Aa==0)e:{if(je.M=ye.M,je.uc=Ye,Cu(ye,je),Ue=1,je=(Nt=ye.D).Nb,Ye=(Bt=Ld[ye.L])*ye.R,lt=Bt/2*ye.B,cr=16*je*ye.R,fs=8*je*ye.B,rt=ye.sa,yt=ye.ta-Ye+cr,nt=ye.qa,Ve=ye.ra-lt+fs,Gt=ye.Ha,er=ye.Ia-lt+fs,Ts=(tr=Nt.M)==0,Ht=tr>=ye.Va-1,ye.Aa==2&&Cu(ye,Nt),Nt.uc)for(Ps=(Xr=ye).D.M,e(Xr.D.uc),Nt=Xr.yb;Nt<Xr.Hb;++Nt){Gr=Nt,ds=Ps;var dn=(Cn=(Lr=Xr).D).Nb;ar=Lr.R;var Cn=Cn.wa[Cn.Y+Gr],Yn=Lr.sa,Us=Lr.ta+16*dn*ar+16*Gr,Bi=Cn.dd,fn=Cn.tc;if(fn!=0)if(e(3<=fn),Lr.L==1)0<Gr&&Ha(Yn,Us,ar,fn+4),Cn.La&&Is(Yn,Us,ar,fn),0<ds&&Wo(Yn,Us,ar,fn+4),Cn.La&&Mu(Yn,Us,ar,fn);else{var ua=Lr.B,Go=Lr.qa,Kl=Lr.ra+8*dn*ua+8*Gr,Ga=Lr.Ha,Lr=Lr.Ia+8*dn*ua+8*Gr;dn=Cn.ld,0<Gr&&(wd(Yn,Us,ar,fn+4,Bi,dn),zo(Go,Kl,Ga,Lr,ua,fn+4,Bi,dn)),Cn.La&&(za(Yn,Us,ar,fn,Bi,dn),Gl(Go,Kl,Ga,Lr,ua,fn,Bi,dn)),0<ds&&(Wl(Yn,Us,ar,fn+4,Bi,dn),Du(Go,Kl,Ga,Lr,ua,fn+4,Bi,dn)),Cn.La&&(Ho(Yn,Us,ar,fn,Bi,dn),Yo(Go,Kl,Ga,Lr,ua,fn,Bi,dn))}}if(ye.ia&&alert("todo:DitherRow"),ke.put!=null){if(Nt=16*tr,tr=16*(tr+1),Ts?(ke.y=ye.sa,ke.O=ye.ta+cr,ke.f=ye.qa,ke.N=ye.ra+fs,ke.ea=ye.Ha,ke.W=ye.Ia+fs):(Nt-=Bt,ke.y=rt,ke.O=yt,ke.f=nt,ke.N=Ve,ke.ea=Gt,ke.W=er),Ht||(tr-=Bt),tr>ke.o&&(tr=ke.o),ke.F=null,ke.J=null,ye.Fa!=null&&0<ye.Fa.length&&Nt<tr&&(ke.J=Su(ye,ke,Nt,tr-Nt),ke.F=ye.mb,ke.F==null&&ke.F.length==0)){Ue=Nr(ye,3,"Could not decode alpha data.");break e}Nt<ke.j&&(Bt=ke.j-Nt,Nt=ke.j,e(!(1&Bt)),ke.O+=ye.R*Bt,ke.N+=ye.B*(Bt>>1),ke.W+=ye.B*(Bt>>1),ke.F!=null&&(ke.J+=ke.width*Bt)),Nt<tr&&(ke.O+=ke.v,ke.N+=ke.v>>1,ke.W+=ke.v>>1,ke.F!=null&&(ke.J+=ke.v),ke.ka=Nt-ke.j,ke.U=ke.va-ke.v,ke.T=tr-Nt,Ue=ke.put(ke))}je+1!=ye.Ic||Ht||(r(ye.sa,ye.ta-Ye,rt,yt+16*ye.R,Ye),r(ye.qa,ye.ra-lt,nt,Ve+8*ye.B,lt),r(ye.Ha,ye.Ia-lt,Gt,er+8*ye.B,lt))}if(!Ue)return Nr(Te,6,"Output aborted.")}return 1}(d,g)),g.bc!=null&&g.bc(g),y&=1}return y?(d.cb=0,y):0}function ii(d,g,y,S,E){E=d[g+y+32*S]+(E>>3),d[g+y+32*S]=-256&E?0>E?0:255:E}function Ml(d,g,y,S,E,B){ii(d,g,0,y,S+E),ii(d,g,1,y,S+B),ii(d,g,2,y,S-B),ii(d,g,3,y,S-E)}function cs(d){return(20091*d>>16)+d}function du(d,g,y,S){var E,B=0,$=i(16);for(E=0;4>E;++E){var z=d[g+0]+d[g+8],X=d[g+0]-d[g+8],se=(35468*d[g+4]>>16)-cs(d[g+12]),ve=cs(d[g+4])+(35468*d[g+12]>>16);$[B+0]=z+ve,$[B+1]=X+se,$[B+2]=X-se,$[B+3]=z-ve,B+=4,g++}for(E=B=0;4>E;++E)z=(d=$[B+0]+4)+$[B+8],X=d-$[B+8],se=(35468*$[B+4]>>16)-cs($[B+12]),ii(y,S,0,0,z+(ve=cs($[B+4])+(35468*$[B+12]>>16))),ii(y,S,1,0,X+se),ii(y,S,2,0,X-se),ii(y,S,3,0,z-ve),B++,S+=32}function nd(d,g,y,S){var E=d[g+0]+4,B=35468*d[g+4]>>16,$=cs(d[g+4]),z=35468*d[g+1]>>16;Ml(y,S,0,E+$,d=cs(d[g+1]),z),Ml(y,S,1,E+B,d,z),Ml(y,S,2,E-B,d,z),Ml(y,S,3,E-$,d,z)}function lg(d,g,y,S,E){du(d,g,y,S),E&&du(d,g+16,y,S+4)}function sd(d,g,y,S){oa(d,g+0,y,S,1),oa(d,g+32,y,S+128,1)}function cg(d,g,y,S){var E;for(d=d[g+0]+4,E=0;4>E;++E)for(g=0;4>g;++g)ii(y,S,g,E,d)}function id(d,g,y,S){d[g+0]&&Hn(d,g+0,y,S),d[g+16]&&Hn(d,g+16,y,S+4),d[g+32]&&Hn(d,g+32,y,S+128),d[g+48]&&Hn(d,g+48,y,S+128+4)}function ug(d,g,y,S){var E,B=i(16);for(E=0;4>E;++E){var $=d[g+0+E]+d[g+12+E],z=d[g+4+E]+d[g+8+E],X=d[g+4+E]-d[g+8+E],se=d[g+0+E]-d[g+12+E];B[0+E]=$+z,B[8+E]=$-z,B[4+E]=se+X,B[12+E]=se-X}for(E=0;4>E;++E)$=(d=B[0+4*E]+3)+B[3+4*E],z=B[1+4*E]+B[2+4*E],X=B[1+4*E]-B[2+4*E],se=d-B[3+4*E],y[S+0]=$+z>>3,y[S+16]=se+X>>3,y[S+32]=$-z>>3,y[S+48]=se-X>>3,S+=64}function fu(d,g,y){var S,E=g-32,B=As,$=255-d[E-1];for(S=0;S<y;++S){var z,X=B,se=$+d[g-1];for(z=0;z<y;++z)d[g+z]=X[se+d[E+z]];g+=32}}function hg(d,g){fu(d,g,4)}function dg(d,g){fu(d,g,8)}function fg(d,g){fu(d,g,16)}function na(d,g){var y;for(y=0;16>y;++y)r(d,g+32*y,d,g-32,16)}function El(d,g){var y;for(y=16;0<y;--y)s(d,g,d[g-1],16),g+=32}function Nl(d,g,y){var S;for(S=0;16>S;++S)s(g,y+32*S,d,16)}function ad(d,g){var y,S=16;for(y=0;16>y;++y)S+=d[g-1+32*y]+d[g+y-32];Nl(S>>5,d,g)}function Pn(d,g){var y,S=8;for(y=0;16>y;++y)S+=d[g-1+32*y];Nl(S>>4,d,g)}function pg(d,g){var y,S=8;for(y=0;16>y;++y)S+=d[g+y-32];Nl(S>>4,d,g)}function od(d,g){Nl(128,d,g)}function Ot(d,g,y){return d+2*g+y+2>>2}function gg(d,g){var y,S=g-32;for(S=new Uint8Array([Ot(d[S-1],d[S+0],d[S+1]),Ot(d[S+0],d[S+1],d[S+2]),Ot(d[S+1],d[S+2],d[S+3]),Ot(d[S+2],d[S+3],d[S+4])]),y=0;4>y;++y)r(d,g+32*y,S,0,S.length)}function mg(d,g){var y=d[g-1],S=d[g-1+32],E=d[g-1+64],B=d[g-1+96];Ae(d,g+0,16843009*Ot(d[g-1-32],y,S)),Ae(d,g+32,16843009*Ot(y,S,E)),Ae(d,g+64,16843009*Ot(S,E,B)),Ae(d,g+96,16843009*Ot(E,B,B))}function Ri(d,g){var y,S=4;for(y=0;4>y;++y)S+=d[g+y-32]+d[g-1+32*y];for(S>>=3,y=0;4>y;++y)s(d,g+32*y,S,4)}function ld(d,g){var y=d[g-1+0],S=d[g-1+32],E=d[g-1+64],B=d[g-1-32],$=d[g+0-32],z=d[g+1-32],X=d[g+2-32],se=d[g+3-32];d[g+0+96]=Ot(S,E,d[g-1+96]),d[g+1+96]=d[g+0+64]=Ot(y,S,E),d[g+2+96]=d[g+1+64]=d[g+0+32]=Ot(B,y,S),d[g+3+96]=d[g+2+64]=d[g+1+32]=d[g+0+0]=Ot($,B,y),d[g+3+64]=d[g+2+32]=d[g+1+0]=Ot(z,$,B),d[g+3+32]=d[g+2+0]=Ot(X,z,$),d[g+3+0]=Ot(se,X,z)}function cd(d,g){var y=d[g+1-32],S=d[g+2-32],E=d[g+3-32],B=d[g+4-32],$=d[g+5-32],z=d[g+6-32],X=d[g+7-32];d[g+0+0]=Ot(d[g+0-32],y,S),d[g+1+0]=d[g+0+32]=Ot(y,S,E),d[g+2+0]=d[g+1+32]=d[g+0+64]=Ot(S,E,B),d[g+3+0]=d[g+2+32]=d[g+1+64]=d[g+0+96]=Ot(E,B,$),d[g+3+32]=d[g+2+64]=d[g+1+96]=Ot(B,$,z),d[g+3+64]=d[g+2+96]=Ot($,z,X),d[g+3+96]=Ot(z,X,X)}function jl(d,g){var y=d[g-1+0],S=d[g-1+32],E=d[g-1+64],B=d[g-1-32],$=d[g+0-32],z=d[g+1-32],X=d[g+2-32],se=d[g+3-32];d[g+0+0]=d[g+1+64]=B+$+1>>1,d[g+1+0]=d[g+2+64]=$+z+1>>1,d[g+2+0]=d[g+3+64]=z+X+1>>1,d[g+3+0]=X+se+1>>1,d[g+0+96]=Ot(E,S,y),d[g+0+64]=Ot(S,y,B),d[g+0+32]=d[g+1+96]=Ot(y,B,$),d[g+1+32]=d[g+2+96]=Ot(B,$,z),d[g+2+32]=d[g+3+96]=Ot($,z,X),d[g+3+32]=Ot(z,X,se)}function pu(d,g){var y=d[g+0-32],S=d[g+1-32],E=d[g+2-32],B=d[g+3-32],$=d[g+4-32],z=d[g+5-32],X=d[g+6-32],se=d[g+7-32];d[g+0+0]=y+S+1>>1,d[g+1+0]=d[g+0+64]=S+E+1>>1,d[g+2+0]=d[g+1+64]=E+B+1>>1,d[g+3+0]=d[g+2+64]=B+$+1>>1,d[g+0+32]=Ot(y,S,E),d[g+1+32]=d[g+0+96]=Ot(S,E,B),d[g+2+32]=d[g+1+96]=Ot(E,B,$),d[g+3+32]=d[g+2+96]=Ot(B,$,z),d[g+3+64]=Ot($,z,X),d[g+3+96]=Ot(z,X,se)}function vg(d,g){var y=d[g-1+0],S=d[g-1+32],E=d[g-1+64],B=d[g-1+96];d[g+0+0]=y+S+1>>1,d[g+2+0]=d[g+0+32]=S+E+1>>1,d[g+2+32]=d[g+0+64]=E+B+1>>1,d[g+1+0]=Ot(y,S,E),d[g+3+0]=d[g+1+32]=Ot(S,E,B),d[g+3+32]=d[g+1+64]=Ot(E,B,B),d[g+3+64]=d[g+2+64]=d[g+0+96]=d[g+1+96]=d[g+2+96]=d[g+3+96]=B}function yg(d,g){var y=d[g-1+0],S=d[g-1+32],E=d[g-1+64],B=d[g-1+96],$=d[g-1-32],z=d[g+0-32],X=d[g+1-32],se=d[g+2-32];d[g+0+0]=d[g+2+32]=y+$+1>>1,d[g+0+32]=d[g+2+64]=S+y+1>>1,d[g+0+64]=d[g+2+96]=E+S+1>>1,d[g+0+96]=B+E+1>>1,d[g+3+0]=Ot(z,X,se),d[g+2+0]=Ot($,z,X),d[g+1+0]=d[g+3+32]=Ot(y,$,z),d[g+1+32]=d[g+3+64]=Ot(S,y,$),d[g+1+64]=d[g+3+96]=Ot(E,S,y),d[g+1+96]=Ot(B,E,S)}function bg(d,g){var y;for(y=0;8>y;++y)r(d,g+32*y,d,g-32,8)}function gu(d,g){var y;for(y=0;8>y;++y)s(d,g,d[g-1],8),g+=32}function Bo(d,g,y){var S;for(S=0;8>S;++S)s(g,y+32*S,d,8)}function Ba(d,g){var y,S=8;for(y=0;8>y;++y)S+=d[g+y-32]+d[g-1+32*y];Bo(S>>4,d,g)}function wg(d,g){var y,S=4;for(y=0;8>y;++y)S+=d[g+y-32];Bo(S>>3,d,g)}function $o(d,g){var y,S=4;for(y=0;8>y;++y)S+=d[g-1+32*y];Bo(S>>3,d,g)}function mu(d,g){Bo(128,d,g)}function Rl(d,g,y){var S=d[g-y],E=d[g+0],B=3*(E-S)+Ag[1020+d[g-2*y]-d[g+y]],$=xd[112+(B+4>>3)];d[g-y]=As[255+S+xd[112+(B+3>>3)]],d[g+0]=As[255+E-$]}function ud(d,g,y,S){var E=d[g+0],B=d[g+y];return $s[255+d[g-2*y]-d[g-y]]>S||$s[255+B-E]>S}function hd(d,g,y,S){return 4*$s[255+d[g-y]-d[g+0]]+$s[255+d[g-2*y]-d[g+y]]<=S}function dd(d,g,y,S,E){var B=d[g-3*y],$=d[g-2*y],z=d[g-y],X=d[g+0],se=d[g+y],ve=d[g+2*y],Le=d[g+3*y];return 4*$s[255+z-X]+$s[255+$-se]>S?0:$s[255+d[g-4*y]-B]<=E&&$s[255+B-$]<=E&&$s[255+$-z]<=E&&$s[255+Le-ve]<=E&&$s[255+ve-se]<=E&&$s[255+se-X]<=E}function fd(d,g,y,S){var E=2*S+1;for(S=0;16>S;++S)hd(d,g+S,y,E)&&Rl(d,g+S,y)}function Fi(d,g,y,S){var E=2*S+1;for(S=0;16>S;++S)hd(d,g+S*y,1,E)&&Rl(d,g+S*y,1)}function sa(d,g,y,S){var E;for(E=3;0<E;--E)fd(d,g+=4*y,y,S)}function _g(d,g,y,S){var E;for(E=3;0<E;--E)Fi(d,g+=4,y,S)}function $a(d,g,y,S,E,B,$,z){for(B=2*B+1;0<E--;){if(dd(d,g,y,B,$))if(ud(d,g,y,z))Rl(d,g,y);else{var X=d,se=g,ve=y,Le=X[se-2*ve],De=X[se-ve],Te=X[se+0],ze=X[se+ve],je=X[se+2*ve],ye=27*(Ue=Ag[1020+3*(Te-De)+Ag[1020+Le-ze]])+63>>7,ke=18*Ue+63>>7,Ue=9*Ue+63>>7;X[se-3*ve]=As[255+X[se-3*ve]+Ue],X[se-2*ve]=As[255+Le+ke],X[se-ve]=As[255+De+ye],X[se+0]=As[255+Te-ye],X[se+ve]=As[255+ze-ke],X[se+2*ve]=As[255+je-Ue]}g+=S}}function ai(d,g,y,S,E,B,$,z){for(B=2*B+1;0<E--;){if(dd(d,g,y,B,$))if(ud(d,g,y,z))Rl(d,g,y);else{var X=d,se=g,ve=y,Le=X[se-ve],De=X[se+0],Te=X[se+ve],ze=xd[112+((je=3*(De-Le))+4>>3)],je=xd[112+(je+3>>3)],ye=ze+1>>1;X[se-2*ve]=As[255+X[se-2*ve]+ye],X[se-ve]=As[255+Le+je],X[se+0]=As[255+De-ze],X[se+ve]=As[255+Te-ye]}g+=S}}function vu(d,g,y,S,E,B){$a(d,g,y,1,16,S,E,B)}function qo(d,g,y,S,E,B){$a(d,g,1,y,16,S,E,B)}function xg(d,g,y,S,E,B){var $;for($=3;0<$;--$)ai(d,g+=4*y,y,1,16,S,E,B)}function Fl(d,g,y,S,E,B){var $;for($=3;0<$;--$)ai(d,g+=4,1,y,16,S,E,B)}function Sg(d,g,y,S,E,B,$,z){$a(d,g,E,1,8,B,$,z),$a(y,S,E,1,8,B,$,z)}function yu(d,g,y,S,E,B,$,z){$a(d,g,1,E,8,B,$,z),$a(y,S,1,E,8,B,$,z)}function bu(d,g,y,S,E,B,$,z){ai(d,g+4*E,E,1,8,B,$,z),ai(y,S+4*E,E,1,8,B,$,z)}function pd(d,g,y,S,E,B,$,z){ai(d,g+4,1,E,8,B,$,z),ai(y,S+4,1,E,8,B,$,z)}function Il(){this.ba=new bt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Qe,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function wu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function _u(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function gd(){this.ua=0,this.Wa=new L,this.vb=new L,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new O}function kg(){this.xb=this.a=0,this.l=new Dl,this.ca=new bt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new gd,this.ab=0,this.gc=a(4,_u),this.Oc=0}function Bl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Dl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Uo(d,g,y,S,E,B,$){for(d=d==null?0:d[g+0],g=0;g<$;++g)E[B+g]=d+y[S+g]&255,d=E[B+g]}function xu(d,g,y,S,E,B,$){var z;if(d==null)Uo(null,null,y,S,E,B,$);else for(z=0;z<$;++z)E[B+z]=d[g+z]+y[S+z]&255}function qa(d,g,y,S,E,B,$){if(d==null)Uo(null,null,y,S,E,B,$);else{var z,X=d[g+0],se=X,ve=X;for(z=0;z<$;++z)se=ve+(X=d[g+z])-se,ve=y[S+z]+(-256&se?0>se?0:255:se)&255,se=X,E[B+z]=ve}}function Su(d,g,y,S){var E=g.width,B=g.o;if(e(d!=null&&g!=null),0>y||0>=S||y+S>B)return null;if(!d.Cc){if(d.ga==null){var $;if(d.ga=new Bl,($=d.ga==null)||($=g.width*g.o,e(d.Gb.length==0),d.Gb=i($),d.Uc=0,d.Gb==null?$=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,$=1),$=!$),!$){$=d.ga;var z=d.Fa,X=d.P,se=d.qc,ve=d.mb,Le=d.nb,De=X+1,Te=se-1,ze=$.l;if(e(z!=null&&ve!=null&&g!=null),Wa[0]=null,Wa[1]=Uo,Wa[2]=xu,Wa[3]=qa,$.ca=ve,$.tb=Le,$.c=g.width,$.i=g.height,e(0<$.c&&0<$.i),1>=se)g=0;else if($.$a=z[X+0]>>0&3,$.Z=z[X+0]>>2&3,$.Lc=z[X+0]>>4&3,X=z[X+0]>>6&3,0>$.$a||1<$.$a||4<=$.Z||1<$.Lc||X)g=0;else if(ze.put=Zr,ze.ac=yr,ze.bc=os,ze.ma=$,ze.width=g.width,ze.height=g.height,ze.Da=g.Da,ze.v=g.v,ze.va=g.va,ze.j=g.j,ze.o=g.o,$.$a)e:{e($.$a==1),g=js();t:for(;;){if(g==null){g=0;break e}if(e($!=null),$.mc=g,g.c=$.c,g.i=$.i,g.l=$.l,g.l.ma=$,g.l.width=$.c,g.l.height=$.i,g.a=0,ne(g.m,z,De,Te),!ji($.c,$.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&ra(g.s)?($.ic=1,z=g.c*g.i,g.Ta=null,g.Ua=0,g.V=i(z),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):($.ic=0,g=Io(g,$.c)),!g))break t;g=1;break e}$.mc=null,g=0}else g=Te>=$.c*$.i;$=!g}if($)return null;d.ga.Lc!=1?d.Ga=0:S=B-y}e(d.ga!=null),e(y+S<=B);e:{if(g=(z=d.ga).c,B=z.l.o,z.$a==0){if(De=d.rc,Te=d.Vc,ze=d.Fa,X=d.P+1+y*g,se=d.mb,ve=d.nb+y*g,e(X<=d.P+d.qc),z.Z!=0)for(e(Wa[z.Z]!=null),$=0;$<S;++$)Wa[z.Z](De,Te,ze,X,se,ve,g),De=se,Te=ve,ve+=g,X+=g;else for($=0;$<S;++$)r(se,ve,ze,X,g),De=se,Te=ve,ve+=g,X+=g;d.rc=De,d.Vc=Te}else{if(e(z.mc!=null),g=y+S,e(($=z.mc)!=null),e(g<=$.i),$.C>=g)g=1;else if(z.ic||Oe(),z.ic){z=$.V,De=$.Ba,Te=$.c;var je=$.i,ye=(ze=1,X=$.$/Te,se=$.$%Te,ve=$.m,Le=$.s,$.$),ke=Te*je,Ue=Te*g,Ye=Le.wc,Ve=ye<Ue?Yr(Le,se,X):null;e(ye<=ke),e(g<=je),e(ra(Le));t:for(;;){for(;!ve.h&&ye<Ue;){if(se&Ye||(Ve=Yr(Le,se,X)),e(Ve!=null),Z(ve),256>(je=ls(Ve.G[0],Ve.H[0],ve)))z[De+ye]=je,++ye,++se>=Te&&(se=0,++X<=g&&!(X%16)&&ni($,X));else{if(!(280>je)){ze=0;break t}je=ti(je-256,ve);var lt,rt=ls(Ve.G[4],Ve.H[4],ve);if(Z(ve),!(ye>=(rt=Ei(Te,rt=ti(rt,ve)))&&ke-ye>=je)){ze=0;break t}for(lt=0;lt<je;++lt)z[De+ye+lt]=z[De+ye+lt-rt];for(ye+=je,se+=je;se>=Te;)se-=Te,++X<=g&&!(X%16)&&ni($,X);ye<Ue&&se&Ye&&(Ve=Yr(Le,se,X))}e(ve.h==F(ve))}ni($,X>g?g:X);break t}!ze||ve.h&&ye<ke?(ze=0,$.a=ve.h?5:3):$.$=ye,g=ze}else g=si($,$.V,$.Ba,$.c,$.i,g,Al);if(!g){S=0;break e}}y+S>=B&&(d.Cc=1),S=1}if(!S)return null;if(d.Cc&&((S=d.ga)!=null&&(S.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+y*E}function m(d,g,y,S,E,B){for(;0<E--;){var $,z=d,X=g+(y?1:0),se=d,ve=g+(y?0:3);for($=0;$<S;++$){var Le=se[ve+4*$];Le!=255&&(Le*=32897,z[X+4*$+0]=z[X+4*$+0]*Le>>23,z[X+4*$+1]=z[X+4*$+1]*Le>>23,z[X+4*$+2]=z[X+4*$+2]*Le>>23)}g+=B}}function N(d,g,y,S,E){for(;0<S--;){var B;for(B=0;B<y;++B){var $=d[g+2*B+0],z=15&(se=d[g+2*B+1]),X=4369*z,se=(240&se|se>>4)*X>>16;d[g+2*B+0]=(240&$|$>>4)*X>>16&240|(15&$|$<<4)*X>>16>>4&15,d[g+2*B+1]=240&se|z}g+=E}}function le(d,g,y,S,E,B,$,z){var X,se,ve=255;for(se=0;se<E;++se){for(X=0;X<S;++X){var Le=d[g+X];B[$+4*X]=Le,ve&=Le}g+=y,$+=z}return ve!=255}function me(d,g,y,S,E){var B;for(B=0;B<E;++B)y[S+B]=d[g+B]>>8}function Oe(){Bs=m,fr=N,pr=le,Rr=me}function Fe(d,g,y){j[d]=function(S,E,B,$,z,X,se,ve,Le,De,Te,ze,je,ye,ke,Ue,Ye){var Ve,lt=Ye-1>>1,rt=z[X+0]|se[ve+0]<<16,yt=Le[De+0]|Te[ze+0]<<16;e(S!=null);var nt=3*rt+yt+131074>>2;for(g(S[E+0],255&nt,nt>>16,je,ye),B!=null&&(nt=3*yt+rt+131074>>2,g(B[$+0],255&nt,nt>>16,ke,Ue)),Ve=1;Ve<=lt;++Ve){var Gt=z[X+Ve]|se[ve+Ve]<<16,er=Le[De+Ve]|Te[ze+Ve]<<16,Ht=rt+Gt+yt+er+524296,Bt=Ht+2*(Gt+yt)>>3;nt=Bt+rt>>1,rt=(Ht=Ht+2*(rt+er)>>3)+Gt>>1,g(S[E+2*Ve-1],255&nt,nt>>16,je,ye+(2*Ve-1)*y),g(S[E+2*Ve-0],255&rt,rt>>16,je,ye+(2*Ve-0)*y),B!=null&&(nt=Ht+yt>>1,rt=Bt+er>>1,g(B[$+2*Ve-1],255&nt,nt>>16,ke,Ue+(2*Ve-1)*y),g(B[$+2*Ve+0],255&rt,rt>>16,ke,Ue+(2*Ve+0)*y)),rt=Gt,yt=er}1&Ye||(nt=3*rt+yt+131074>>2,g(S[E+Ye-1],255&nt,nt>>16,je,ye+(Ye-1)*y),B!=null&&(nt=3*yt+rt+131074>>2,g(B[$+Ye-1],255&nt,nt>>16,ke,Ue+(Ye-1)*y)))}}function Xe(){qs[Sd]=c3,qs[kd]=o1,qs[r1]=u3,qs[Cd]=l1,qs[Ad]=c1,qs[Tg]=u1,qs[n1]=h3,qs[Pg]=o1,qs[Og]=l1,qs[Td]=c1,qs[Lg]=u1}function at(d){return d&-16384?0>d?0:255:d>>d3}function gt(d,g){return at((19077*d>>8)+(26149*g>>8)-14234)}function Mt(d,g,y){return at((19077*d>>8)-(6419*g>>8)-(13320*y>>8)+8708)}function Lt(d,g){return at((19077*d>>8)+(33050*g>>8)-17685)}function zt(d,g,y,S,E){S[E+0]=gt(d,y),S[E+1]=Mt(d,g,y),S[E+2]=Lt(d,g)}function Ar(d,g,y,S,E){S[E+0]=Lt(d,g),S[E+1]=Mt(d,g,y),S[E+2]=gt(d,y)}function Or(d,g,y,S,E){var B=Mt(d,g,y);g=B<<3&224|Lt(d,g)>>3,S[E+0]=248&gt(d,y)|B>>5,S[E+1]=g}function Wr(d,g,y,S,E){var B=240&Lt(d,g)|15;S[E+0]=240&gt(d,y)|Mt(d,g,y)>>4,S[E+1]=B}function On(d,g,y,S,E){S[E+0]=255,zt(d,g,y,S,E+1)}function hn(d,g,y,S,E){Ar(d,g,y,S,E),S[E+3]=255}function oi(d,g,y,S,E){zt(d,g,y,S,E),S[E+3]=255}function Cs(d,g){return 0>d?0:d>g?g:d}function Ii(d,g,y){j[d]=function(S,E,B,$,z,X,se,ve,Le){for(var De=ve+(-2&Le)*y;ve!=De;)g(S[E+0],B[$+0],z[X+0],se,ve),g(S[E+1],B[$+0],z[X+0],se,ve+y),E+=2,++$,++X,ve+=2*y;1&Le&&g(S[E+0],B[$+0],z[X+0],se,ve)}}function md(d,g,y){return y==0?d==0?g==0?6:5:g==0?4:0:y}function ku(d,g,y,S,E){switch(d>>>30){case 3:oa(g,y,S,E,0);break;case 2:jr(g,y,S,E);break;case 1:Hn(g,y,S,E)}}function Cu(d,g){var y,S,E=g.M,B=g.Nb,$=d.oc,z=d.pc+40,X=d.oc,se=d.pc+584,ve=d.oc,Le=d.pc+600;for(y=0;16>y;++y)$[z+32*y-1]=129;for(y=0;8>y;++y)X[se+32*y-1]=129,ve[Le+32*y-1]=129;for(0<E?$[z-1-32]=X[se-1-32]=ve[Le-1-32]=129:(s($,z-32-1,127,21),s(X,se-32-1,127,9),s(ve,Le-32-1,127,9)),S=0;S<d.za;++S){var De=g.ya[g.aa+S];if(0<S){for(y=-1;16>y;++y)r($,z+32*y-4,$,z+32*y+12,4);for(y=-1;8>y;++y)r(X,se+32*y-4,X,se+32*y+4,4),r(ve,Le+32*y-4,ve,Le+32*y+4,4)}var Te=d.Gd,ze=d.Hd+S,je=De.ad,ye=De.Hc;if(0<E&&(r($,z-32,Te[ze].y,0,16),r(X,se-32,Te[ze].f,0,8),r(ve,Le-32,Te[ze].ea,0,8)),De.Za){var ke=$,Ue=z-32+16;for(0<E&&(S>=d.za-1?s(ke,Ue,Te[ze].y[15],4):r(ke,Ue,Te[ze+1].y,0,4)),y=0;4>y;y++)ke[Ue+128+y]=ke[Ue+256+y]=ke[Ue+384+y]=ke[Ue+0+y];for(y=0;16>y;++y,ye<<=2)ke=$,Ue=z+d1[y],li[De.Ob[y]](ke,Ue),ku(ye,je,16*+y,ke,Ue)}else if(ke=md(S,E,De.Ob[0]),Ya[ke]($,z),ye!=0)for(y=0;16>y;++y,ye<<=2)ku(ye,je,16*+y,$,z+d1[y]);for(y=De.Gc,ke=md(S,E,De.Dd),ca[ke](X,se),ca[ke](ve,Le),ye=je,ke=X,Ue=se,255&(De=y>>0)&&(170&De?Lu(ye,256,ke,Ue):Fs(ye,256,ke,Ue)),De=ve,ye=Le,255&(y>>=8)&&(170&y?Lu(je,320,De,ye):Fs(je,320,De,ye)),E<d.Ub-1&&(r(Te[ze].y,0,$,z+480,16),r(Te[ze].f,0,X,se+224,8),r(Te[ze].ea,0,ve,Le+224,8)),y=8*B*d.B,Te=d.sa,ze=d.ta+16*S+16*B*d.R,je=d.qa,De=d.ra+8*S+y,ye=d.Ha,ke=d.Ia+8*S+y,y=0;16>y;++y)r(Te,ze+y*d.R,$,z+32*y,16);for(y=0;8>y;++y)r(je,De+y*d.B,X,se+32*y,8),r(ye,ke+y*d.B,ve,Le+32*y,8)}}function $l(d,g,y,S,E,B,$,z,X){var se=[0],ve=[0],Le=0,De=X!=null?X.kd:0,Te=X??new wu;if(d==null||12>y)return 7;Te.data=d,Te.w=g,Te.ha=y,g=[g],y=[y],Te.gb=[Te.gb];e:{var ze=g,je=y,ye=Te.gb;if(e(d!=null),e(je!=null),e(ye!=null),ye[0]=0,12<=je[0]&&!t(d,ze[0],"RIFF")){if(t(d,ze[0]+8,"WEBP")){ye=3;break e}var ke=R(d,ze[0]+4);if(12>ke||4294967286<ke){ye=3;break e}if(De&&ke>je[0]-8){ye=7;break e}ye[0]=ke,ze[0]+=12,je[0]-=12}ye=0}if(ye!=0)return ye;for(ke=0<Te.gb[0],y=y[0];;){e:{var Ue=d;je=g,ye=y;var Ye=se,Ve=ve,lt=ze=[0];if((nt=Le=[Le])[0]=0,8>ye[0])ye=7;else{if(!t(Ue,je[0],"VP8X")){if(R(Ue,je[0]+4)!=10){ye=3;break e}if(18>ye[0]){ye=7;break e}var rt=R(Ue,je[0]+8),yt=1+V(Ue,je[0]+12);if(2147483648<=yt*(Ue=1+V(Ue,je[0]+15))){ye=3;break e}lt!=null&&(lt[0]=rt),Ye!=null&&(Ye[0]=yt),Ve!=null&&(Ve[0]=Ue),je[0]+=18,ye[0]-=18,nt[0]=1}ye=0}}if(Le=Le[0],ze=ze[0],ye!=0)return ye;if(je=!!(2&ze),!ke&&Le)return 3;if(B!=null&&(B[0]=!!(16&ze)),$!=null&&($[0]=je),z!=null&&(z[0]=0),$=se[0],ze=ve[0],Le&&je&&X==null){ye=0;break}if(4>y){ye=7;break}if(ke&&Le||!ke&&!Le&&!t(d,g[0],"ALPH")){y=[y],Te.na=[Te.na],Te.P=[Te.P],Te.Sa=[Te.Sa];e:{rt=d,ye=g,ke=y;var nt=Te.gb;Ye=Te.na,Ve=Te.P,lt=Te.Sa,yt=22,e(rt!=null),e(ke!=null),Ue=ye[0];var Gt=ke[0];for(e(Ye!=null),e(lt!=null),Ye[0]=null,Ve[0]=null,lt[0]=0;;){if(ye[0]=Ue,ke[0]=Gt,8>Gt){ye=7;break e}var er=R(rt,Ue+4);if(4294967286<er){ye=3;break e}var Ht=8+er+1&-2;if(yt+=Ht,0<nt&&yt>nt){ye=3;break e}if(!t(rt,Ue,"VP8 ")||!t(rt,Ue,"VP8L")){ye=0;break e}if(Gt[0]<Ht){ye=7;break e}t(rt,Ue,"ALPH")||(Ye[0]=rt,Ve[0]=Ue+8,lt[0]=er),Ue+=Ht,Gt-=Ht}}if(y=y[0],Te.na=Te.na[0],Te.P=Te.P[0],Te.Sa=Te.Sa[0],ye!=0)break}y=[y],Te.Ja=[Te.Ja],Te.xa=[Te.xa];e:if(nt=d,ye=g,ke=y,Ye=Te.gb[0],Ve=Te.Ja,lt=Te.xa,rt=ye[0],Ue=!t(nt,rt,"VP8 "),yt=!t(nt,rt,"VP8L"),e(nt!=null),e(ke!=null),e(Ve!=null),e(lt!=null),8>ke[0])ye=7;else{if(Ue||yt){if(nt=R(nt,rt+4),12<=Ye&&nt>Ye-12){ye=3;break e}if(De&&nt>ke[0]-8){ye=7;break e}Ve[0]=nt,ye[0]+=8,ke[0]-=8,lt[0]=yt}else lt[0]=5<=ke[0]&&nt[rt+0]==47&&!(nt[rt+4]>>5),Ve[0]=ke[0];ye=0}if(y=y[0],Te.Ja=Te.Ja[0],Te.xa=Te.xa[0],g=g[0],ye!=0)break;if(4294967286<Te.Ja)return 3;if(z==null||je||(z[0]=Te.xa?2:1),$=[$],ze=[ze],Te.xa){if(5>y){ye=7;break}z=$,De=ze,je=B,d==null||5>y?d=0:5<=y&&d[g+0]==47&&!(d[g+4]>>5)?(ke=[0],nt=[0],Ye=[0],ne(Ve=new P,d,g,y),vt(Ve,ke,nt,Ye)?(z!=null&&(z[0]=ke[0]),De!=null&&(De[0]=nt[0]),je!=null&&(je[0]=Ye[0]),d=1):d=0):d=0}else{if(10>y){ye=7;break}z=ze,d==null||10>y||!ed(d,g+3,y-3)?d=0:(De=d[g+0]|d[g+1]<<8|d[g+2]<<16,je=16383&(d[g+7]<<8|d[g+6]),d=16383&(d[g+9]<<8|d[g+8]),1&De||3<(De>>1&7)||!(De>>4&1)||De>>5>=Te.Ja||!je||!d?d=0:($&&($[0]=je),z&&(z[0]=d),d=1))}if(!d||($=$[0],ze=ze[0],Le&&(se[0]!=$||ve[0]!=ze)))return 3;X!=null&&(X[0]=Te,X.offset=g-X.w,e(4294967286>g-X.w),e(X.offset==X.ha-y));break}return ye==0||ye==7&&Le&&X==null?(B!=null&&(B[0]|=Te.na!=null&&0<Te.na.length),S!=null&&(S[0]=$),E!=null&&(E[0]=ze),0):ye}function Au(d,g,y){var S=g.width,E=g.height,B=0,$=0,z=S,X=E;if(g.Da=d!=null&&0<d.Da,g.Da&&(z=d.cd,X=d.bd,B=d.v,$=d.j,11>y||(B&=-2,$&=-2),0>B||0>$||0>=z||0>=X||B+z>S||$+X>E))return 0;if(g.v=B,g.j=$,g.va=B+z,g.o=$+X,g.U=z,g.T=X,g.da=d!=null&&0<d.da,g.da){if(!he(z,X,y=[d.ib],B=[d.hb]))return 0;g.ib=y[0],g.hb=B[0]}return g.ob=d!=null&&d.ob,g.Kb=d==null||!d.Sd,g.da&&(g.ob=g.ib<3*S/4&&g.hb<3*E/4,g.Kb=0),1}function Tu(d){if(d==null)return 2;if(11>d.S){var g=d.f.RGBA;g.fb+=(d.height-1)*g.A,g.A=-g.A}else g=d.f.kb,d=d.height,g.O+=(d-1)*g.fa,g.fa=-g.fa,g.N+=(d-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(d-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(d-1)*g.lb,g.lb=-g.lb);return 0}function ql(d,g,y,S){if(S==null||0>=d||0>=g)return 2;if(y!=null){if(y.Da){var E=y.cd,B=y.bd,$=-2&y.v,z=-2&y.j;if(0>$||0>z||0>=E||0>=B||$+E>d||z+B>g)return 2;d=E,g=B}if(y.da){if(!he(d,g,E=[y.ib],B=[y.hb]))return 2;d=E[0],g=B[0]}}S.width=d,S.height=g;e:{var X=S.width,se=S.height;if(d=S.S,0>=X||0>=se||!(d>=Sd&&13>d))d=2;else{if(0>=S.Rd&&S.sd==null){$=B=E=g=0;var ve=(z=X*f1[d])*se;if(11>d||(B=(se+1)/2*(g=(X+1)/2),d==12&&($=(E=X)*se)),(se=i(ve+2*B+$))==null){d=1;break e}S.sd=se,11>d?((X=S.f.RGBA).eb=se,X.fb=0,X.A=z,X.size=ve):((X=S.f.kb).y=se,X.O=0,X.fa=z,X.Fd=ve,X.f=se,X.N=0+ve,X.Ab=g,X.Cd=B,X.ea=se,X.W=0+ve+B,X.Db=g,X.Ed=B,d==12&&(X.F=se,X.J=0+ve+2*B),X.Tc=$,X.lb=E)}if(g=1,E=S.S,B=S.width,$=S.height,E>=Sd&&13>E)if(11>E)d=S.f.RGBA,g&=(z=Math.abs(d.A))*($-1)+B<=d.size,g&=z>=B*f1[E],g&=d.eb!=null;else{d=S.f.kb,z=(B+1)/2,ve=($+1)/2,X=Math.abs(d.fa),se=Math.abs(d.Ab);var Le=Math.abs(d.Db),De=Math.abs(d.lb),Te=De*($-1)+B;g&=X*($-1)+B<=d.Fd,g&=se*(ve-1)+z<=d.Cd,g=(g&=Le*(ve-1)+z<=d.Ed)&X>=B&se>=z&Le>=z,g&=d.y!=null,g&=d.f!=null,g&=d.ea!=null,E==12&&(g&=De>=B,g&=Te<=d.Tc,g&=d.F!=null)}else g=0;d=g?0:2}}return d!=0||y!=null&&y.fd&&(d=Tu(S)),d}var kn=64,Ul=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Vl=24,zl=32,Pu=8,us=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];be("Predictor0","PredictorAdd0"),j.Predictor0=function(){return 4278190080},j.Predictor1=function(d){return d},j.Predictor2=function(d,g,y){return g[y+0]},j.Predictor3=function(d,g,y){return g[y+1]},j.Predictor4=function(d,g,y){return g[y-1]},j.Predictor5=function(d,g,y){return Ee(Ee(d,g[y+1]),g[y+0])},j.Predictor6=function(d,g,y){return Ee(d,g[y-1])},j.Predictor7=function(d,g,y){return Ee(d,g[y+0])},j.Predictor8=function(d,g,y){return Ee(g[y-1],g[y+0])},j.Predictor9=function(d,g,y){return Ee(g[y+0],g[y+1])},j.Predictor10=function(d,g,y){return Ee(Ee(d,g[y-1]),Ee(g[y+0],g[y+1]))},j.Predictor11=function(d,g,y){var S=g[y+0];return 0>=Be(S>>24&255,d>>24&255,(g=g[y-1])>>24&255)+Be(S>>16&255,d>>16&255,g>>16&255)+Be(S>>8&255,d>>8&255,g>>8&255)+Be(255&S,255&d,255&g)?S:d},j.Predictor12=function(d,g,y){var S=g[y+0];return(ie((d>>24&255)+(S>>24&255)-((g=g[y-1])>>24&255))<<24|ie((d>>16&255)+(S>>16&255)-(g>>16&255))<<16|ie((d>>8&255)+(S>>8&255)-(g>>8&255))<<8|ie((255&d)+(255&S)-(255&g)))>>>0},j.Predictor13=function(d,g,y){var S=g[y-1];return(Pe((d=Ee(d,g[y+0]))>>24&255,S>>24&255)<<24|Pe(d>>16&255,S>>16&255)<<16|Pe(d>>8&255,S>>8&255)<<8|Pe(d>>0&255,S>>0&255))>>>0};var Cg=j.PredictorAdd0;j.PredictorAdd1=Ze,be("Predictor2","PredictorAdd2"),be("Predictor3","PredictorAdd3"),be("Predictor4","PredictorAdd4"),be("Predictor5","PredictorAdd5"),be("Predictor6","PredictorAdd6"),be("Predictor7","PredictorAdd7"),be("Predictor8","PredictorAdd8"),be("Predictor9","PredictorAdd9"),be("Predictor10","PredictorAdd10"),be("Predictor11","PredictorAdd11"),be("Predictor12","PredictorAdd12"),be("Predictor13","PredictorAdd13");var Ou=j.PredictorAdd2;ft("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var vd,Rs=j.ColorIndexInverseTransform,Hl=j.MapARGB,yd=j.VP8LColorIndexInverseTransformAlpha,bd=j.MapAlpha,Ua=j.VP8LPredictorsAdd=[];Ua.length=16,(j.VP8LPredictors=[]).length=16,(j.VP8LPredictorsAdd_C=[]).length=16,(j.VP8LPredictors_C=[]).length=16;var Vo,hs,zn,Va,ia,aa,Yl,oa,jr,Lu,Hn,Fs,Wl,wd,Du,zo,Ho,za,Yo,Gl,Wo,Ha,Mu,Is,Bs,fr,pr,Rr,tn=i(511),la=i(2041),Eu=i(225),Xl=i(767),_d=0,Ag=la,xd=Eu,As=Xl,$s=tn,Sd=0,kd=1,r1=2,Cd=3,Ad=4,Tg=5,n1=6,Pg=7,Og=8,Td=9,Lg=10,Xx=[2,3,7],Kx=[3,3,11],s1=[280,256,256,256,40],Jx=[0,1,1,1,0],Qx=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Zx=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],e3=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],t3=8,Dg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Mg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Nu=null,r3=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],n3=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],i1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],s3=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],i3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],a3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],o3=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ya=[],li=[],ca=[],l3=1,a1=2,Wa=[],qs=[];Fe("UpsampleRgbLinePair",zt,3),Fe("UpsampleBgrLinePair",Ar,3),Fe("UpsampleRgbaLinePair",oi,4),Fe("UpsampleBgraLinePair",hn,4),Fe("UpsampleArgbLinePair",On,4),Fe("UpsampleRgba4444LinePair",Wr,2),Fe("UpsampleRgb565LinePair",Or,2);var c3=j.UpsampleRgbLinePair,u3=j.UpsampleBgrLinePair,o1=j.UpsampleRgbaLinePair,l1=j.UpsampleBgraLinePair,c1=j.UpsampleArgbLinePair,u1=j.UpsampleRgba4444LinePair,h3=j.UpsampleRgb565LinePair,Pd=16,Od=1<<Pd-1,ju=-227,Eg=482,d3=6,h1=0,f3=i(256),p3=i(256),g3=i(256),m3=i(256),v3=i(Eg-ju),y3=i(Eg-ju);Ii("YuvToRgbRow",zt,3),Ii("YuvToBgrRow",Ar,3),Ii("YuvToRgbaRow",oi,4),Ii("YuvToBgraRow",hn,4),Ii("YuvToArgbRow",On,4),Ii("YuvToRgba4444Row",Wr,2),Ii("YuvToRgb565Row",Or,2);var d1=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ld=[0,2,8],b3=[8,7,6,4,4,2,2,2,1,1,1,1],w3=1;this.WebPDecodeRGBA=function(d,g,y,S,E){var B=kd,$=new Il,z=new bt;$.ba=z,z.S=B,z.width=[z.width],z.height=[z.height];var X=z.width,se=z.height,ve=new Ie;if(ve==null||d==null)var Le=2;else e(ve!=null),Le=$l(d,g,y,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(Le!=0?X=0:(X!=null&&(X[0]=ve.width[0]),se!=null&&(se[0]=ve.height[0]),X=1),X){z.width=z.width[0],z.height=z.height[0],S!=null&&(S[0]=z.width),E!=null&&(E[0]=z.height);e:{if(S=new Dl,(E=new wu).data=d,E.w=g,E.ha=y,E.kd=1,g=[0],e(E!=null),((d=$l(E.data,E.w,E.ha,null,null,null,g,null,E))==0||d==7)&&g[0]&&(d=4),(g=d)==0){if(e($!=null),S.data=E.data,S.w=E.w+E.offset,S.ha=E.ha-E.offset,S.put=Zr,S.ac=yr,S.bc=os,S.ma=$,E.xa){if((d=js())==null){$=1;break e}if(function(De,Te){var ze=[0],je=[0],ye=[0];t:for(;;){if(De==null)return 0;if(Te==null)return De.a=2,0;if(De.l=Te,De.a=0,ne(De.m,Te.data,Te.w,Te.ha),!vt(De.m,ze,je,ye)){De.a=3;break t}if(De.xb=a1,Te.width=ze[0],Te.height=je[0],!ji(ze[0],je[0],1,De,null))break t;return 1}return e(De.a!=0),0}(d,S)){if(S=(g=ql(S.width,S.height,$.Oa,$.ba))==0){t:{S=d;r:for(;;){if(S==null){S=0;break t}if(e(S.s.yc!=null),e(S.s.Ya!=null),e(0<S.s.Wb),e((y=S.l)!=null),e((E=y.ma)!=null),S.xb!=0){if(S.ca=E.ba,S.tb=E.tb,e(S.ca!=null),!Au(E.Oa,y,Cd)){S.a=2;break r}if(!Io(S,y.width)||y.da)break r;if((y.da||Ce(S.ca.S))&&Oe(),11>S.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),S.ca.f.kb.F!=null&&Oe()),S.Pb&&0<S.s.ua&&S.s.vb.X==null&&!re(S.s.vb,S.s.Wa.Xa)){S.a=1;break r}S.xb=0}if(!si(S,S.V,S.Ba,S.c,S.i,y.o,Cl))break r;E.Dc=S.Ma,S=1;break t}e(S.a!=0),S=0}S=!S}S&&(g=d.a)}else g=d.a}else{if((d=new ag)==null){$=1;break e}if(d.Fa=E.na,d.P=E.P,d.qc=E.Sa,td(d,S)){if((g=ql(S.width,S.height,$.Oa,$.ba))==0){if(d.Aa=0,y=$.Oa,e((E=d)!=null),y!=null){if(0<(X=0>(X=y.Md)?0:100<X?255:255*X/100)){for(se=ve=0;4>se;++se)12>(Le=E.pb[se]).lc&&(Le.ia=X*b3[0>Le.lc?0:Le.lc]>>3),ve|=Le.ia;ve&&(alert("todo:VP8InitRandom"),E.ia=1)}E.Ga=y.Id,100<E.Ga?E.Ga=100:0>E.Ga&&(E.Ga=0)}og(d,S)||(g=d.a)}}else g=d.a}g==0&&$.Oa!=null&&$.Oa.fd&&(g=Tu($.ba))}$=g}B=$!=0?null:11>B?z.f.RGBA.eb:z.f.kb.y}else B=null;return B};var f1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(j,U){for(var K="",D=0;D<4;D++)K+=String.fromCharCode(j[U++]);return K}function c(j,U){return(j[U+0]<<0|j[U+1]<<8|j[U+2]<<16)>>>0}function h(j,U){return(j[U+0]<<0|j[U+1]<<8|j[U+2]<<16|j[U+3]<<24)>>>0}new l;var p=[0],f=[0],v=[],b=new l,x=n,w=function(j,U){var K={},D=0,O=!1,J=0,M=0;if(K.frames=[],!function(A,F,G,Z){for(var _=0;_<Z;_++)if(A[F+_]!=G.charCodeAt(_))return!0;return!1}(j,U,"RIFF",4)){for(h(j,U+=4),U+=8;U<j.length;){var ee=u(j,U),W=h(j,U+=4);U+=4;var ae=W+(1&W);switch(ee){case"VP8 ":case"VP8L":K.frames[D]===void 0&&(K.frames[D]={}),(de=K.frames[D]).src_off=O?M:U-8,de.src_size=J+W+8,D++,O&&(O=!1,J=0,M=0);break;case"VP8X":(de=K.header={}).feature_flags=j[U];var ne=U+4;de.canvas_width=1+c(j,ne),ne+=3,de.canvas_height=1+c(j,ne),ne+=3;break;case"ALPH":O=!0,J=ae+8,M=U-8;break;case"ANIM":(de=K.header).bgcolor=h(j,U),ne=U+4,de.loop_count=(fe=j)[(P=ne)+0]<<0|fe[P+1]<<8,ne+=2;break;case"ANMF":var oe,de;(de=K.frames[D]={}).offset_x=2*c(j,U),U+=3,de.offset_y=2*c(j,U),U+=3,de.width=1+c(j,U),U+=3,de.height=1+c(j,U),U+=3,de.duration=c(j,U),U+=3,oe=j[U++],de.dispose=1&oe,de.blend=oe>>1&1}ee!="ANMF"&&(U+=ae)}var fe,P;return K}}(x,0);w.response=x,w.rgbaoutput=!0,w.dataurl=!1;var k=w.header?w.header:null,T=w.frames?w.frames:null;if(k){k.loop_counter=k.loop_count,p=[k.canvas_height],f=[k.canvas_width];for(var I=0;I<T.length&&T[I].blend!=0;I++);}var Y=T[0],Q=b.WebPDecodeRGBA(x,Y.src_off,Y.src_size,f,p);Y.rgba=Q,Y.imgwidth=f[0],Y.imgheight=p[0];for(var H=0;H<f[0]*p[0]*4;H++)v[H]=Q[H];return this.width=f,this.height=p,this.data=v,this}(function(n){var e=function(){return typeof F0=="function"},t=function(p,f,v,b){var x=4,w=a;switch(b){case n.image_compression.FAST:x=1,w=i;break;case n.image_compression.MEDIUM:x=6,w=o;break;case n.image_compression.SLOW:x=9,w=l}p=r(p,f,v,w);var k=F0(p,{level:x});return n.__addimage__.arrayBufferToBinaryString(k)},r=function(p,f,v,b){for(var x,w,k,T=p.length/f,I=new Uint8Array(p.length+T),Y=c(),Q=0;Q<T;Q+=1){if(k=Q*f,x=p.subarray(k,k+f),b)I.set(b(x,v,w),k+Q);else{for(var H,j=Y.length,U=[];H<j;H+=1)U[H]=Y[H](x,v,w);var K=h(U.concat());I.set(U[K],k+Q)}w=x}return I},s=function(p){var f=Array.apply([],p);return f.unshift(0),f},i=function(p,f){var v,b=[],x=p.length;b[0]=1;for(var w=0;w<x;w+=1)v=p[w-f]||0,b[w+1]=p[w]-v+256&255;return b},a=function(p,f,v){var b,x=[],w=p.length;x[0]=2;for(var k=0;k<w;k+=1)b=v&&v[k]||0,x[k+1]=p[k]-b+256&255;return x},o=function(p,f,v){var b,x,w=[],k=p.length;w[0]=3;for(var T=0;T<k;T+=1)b=p[T-f]||0,x=v&&v[T]||0,w[T+1]=p[T]+256-(b+x>>>1)&255;return w},l=function(p,f,v){var b,x,w,k,T=[],I=p.length;T[0]=4;for(var Y=0;Y<I;Y+=1)b=p[Y-f]||0,x=v&&v[Y]||0,w=v&&v[Y-f]||0,k=u(b,x,w),T[Y+1]=p[Y]-k+256&255;return T},u=function(p,f,v){if(p===f&&f===v)return p;var b=Math.abs(f-v),x=Math.abs(p-v),w=Math.abs(p+f-v-v);return b<=x&&b<=w?p:x<=w?f:v},c=function(){return[s,i,a,o,l]},h=function(p){var f=p.map(function(v){return v.reduce(function(b,x){return b+Math.abs(x)},0)});return f.indexOf(Math.min.apply(null,f))};n.processPNG=function(p,f,v,b){var x,w,k,T,I,Y,Q,H,j,U,K,D,O,J,M,ee=this.decode.FLATE_DECODE,W="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(k=new FN(p)).imgData,w=k.bits,x=k.colorSpace,I=k.colors,[4,6].indexOf(k.colorType)!==-1){if(k.bits===8){j=(H=k.pixelBitlength==32?new Uint32Array(k.decodePixels().buffer):k.pixelBitlength==16?new Uint16Array(k.decodePixels().buffer):new Uint8Array(k.decodePixels().buffer)).length,K=new Uint8Array(j*k.colors),U=new Uint8Array(j);var ae,ne=k.pixelBitlength-k.bits;for(J=0,M=0;J<j;J++){for(O=H[J],ae=0;ae<ne;)K[M++]=O>>>ae&255,ae+=k.bits;U[J]=O>>>ae&255}}if(k.bits===16){j=(H=new Uint32Array(k.decodePixels().buffer)).length,K=new Uint8Array(j*(32/k.pixelBitlength)*k.colors),U=new Uint8Array(j*(32/k.pixelBitlength)),D=k.colors>1,J=0,M=0;for(var oe=0;J<j;)O=H[J++],K[M++]=O>>>0&255,D&&(K[M++]=O>>>16&255,O=H[J++],K[M++]=O>>>0&255),U[oe++]=O>>>16&255;w=8}b!==n.image_compression.NONE&&e()?(p=t(K,k.width*k.colors,k.colors,b),Q=t(U,k.width,1,b)):(p=K,Q=U,ee=void 0)}if(k.colorType===3&&(x=this.color_spaces.INDEXED,Y=k.palette,k.transparency.indexed)){var de=k.transparency.indexed,fe=0;for(J=0,j=de.length;J<j;++J)fe+=de[J];if((fe/=255)===j-1&&de.indexOf(0)!==-1)T=[de.indexOf(0)];else if(fe!==j){for(H=k.decodePixels(),U=new Uint8Array(H.length),J=0,j=H.length;J<j;J++)U[J]=de[H[J]];Q=t(U,k.width,1)}}var P=function(A){var F;switch(A){case n.image_compression.FAST:F=11;break;case n.image_compression.MEDIUM:F=13;break;case n.image_compression.SLOW:F=14;break;default:F=12}return F}(b);return ee===this.decode.FLATE_DECODE&&(W="/Predictor "+P+" "),W+="/Colors "+I+" /BitsPerComponent "+w+" /Columns "+k.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(Q&&this.__addimage__.isArrayBuffer(Q)||this.__addimage__.isArrayBufferView(Q))&&(Q=this.__addimage__.arrayBufferToBinaryString(Q)),{alias:v,data:p,index:f,filter:ee,decodeParameters:W,transparency:T,palette:Y,sMask:Q,predictor:P,width:k.width,height:k.height,bitsPerComponent:w,colorSpace:x}}}})(_t.API),function(n){n.processGIF89A=function(e,t,r,s){var i=new IN(e),a=i.width,o=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:a,height:o},c=new Um(100).encode(u,100);return n.processJPEG.call(this,c,t,r,s)},n.processGIF87A=n.processGIF89A}(_t.API),di.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:t,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},di.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){ur.log("bit decode error:"+t)}},di.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[i>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}t!==0&&(this.pos+=4-t)}},di.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<n;s++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*s*4,o=i>>4,l=15&i,u=this.palette[o];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*s+1>=this.width)break;u=this.palette[l],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},di.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}n!==0&&(this.pos+=4-n)}},di.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,l=(i>>10&e)/e*255|0,u=i>>15?255:0,c=r*this.width*4+4*s;this.data[c]=l,this.data[c+1]=o,this.data[c+2]=a,this.data[c+3]=u}this.pos+=n}},di.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&t)/t*255|0,u=(a>>11)/e*255|0,c=s*this.width*4+4*i;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=o,this.data[c+3]=255}this.pos+=n}},di.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},di.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=a}},di.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,s){var i=new di(e,!1),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},u=new Um(100).encode(l,100);return n.processJPEG.call(this,u,t,r,s)}}(_t.API),Cb.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,s){var i=new Cb(e),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},u=new Um(100).encode(l,100);return n.processJPEG.call(this,u,t,r,s)}}(_t.API),_t.API.processRGBA=function(n,e,t){for(var r=n.data,s=r.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,l=0,u=0;u<s;u+=4){var c=r[u],h=r[u+1],p=r[u+2],f=r[u+3];i[o++]=c,i[o++]=h,i[o++]=p,a[l++]=f}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:v,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},_t.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},pc=_t.API,Pf=pc.getCharWidthsArray=function(n,e){var t,r,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:s.metadata.Unicode.kerning,c=u.fof?u.fof:1,h=e.doKerning!==!1,p=0,f=n.length,v=0,b=o[0]||l,x=[];for(t=0;t<f;t++)r=n.charCodeAt(t),typeof s.metadata.widthOfString=="function"?x.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+a*(1e3/i)||0)/1e3):(p=h&&sr(u[r])==="object"&&!isNaN(parseInt(u[r][v],10))?u[r][v]/c:0,x.push((o[r]||b)/l+p)),v=r;return x},_b=pc.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return pc.processArabic&&(n=pc.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,s)/t:Pf.apply(this,arguments).reduce(function(i,a){return i+a},0)},xb=function(n,e,t,r){for(var s=[],i=0,a=n.length,o=0;i!==a&&o+e[i]<t;)o+=e[i],i++;s.push(n.slice(0,i));var l=i;for(o=0;i!==a;)o+e[i]>r&&(s.push(n.slice(l,i)),o=0,l=i),o+=e[i],i++;return l!==i&&s.push(n.slice(l,i)),s},Sb=function(n,e,t){t||(t={});var r,s,i,a,o,l,u,c=[],h=[c],p=t.textIndent||0,f=0,v=0,b=n.split(" "),x=Pf.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?b[0].length+2:t.lineIndent||0){var w=Array(l).join(" "),k=[];b.map(function(I){(I=I.split(/\s*\n/)).length>1?k=k.concat(I.map(function(Y,Q){return(Q&&Y.length?`
`:"")+Y})):k.push(I[0])}),b=k,l=_b.apply(this,[w,t])}for(i=0,a=b.length;i<a;i++){var T=0;if(r=b[i],l&&r[0]==`
`&&(r=r.substr(1),T=1),p+f+(v=(s=Pf.apply(this,[r,t])).reduce(function(I,Y){return I+Y},0))>e||T){if(v>e){for(o=xb.apply(this,[r,s,e-(p+f),e]),c.push(o.shift()),c=[o.pop()];o.length;)h.push([o.shift()]);v=s.slice(r.length-(c[0]?c[0].length:0)).reduce(function(I,Y){return I+Y},0)}else c=[r];h.push(c),p=v+l,f=x}else c.push(r),p+=f+v,f=x}return u=l?function(I,Y){return(Y?w:"")+I.join(" ")}:function(I){return I.join(" ")},h.map(u)},pc.splitTextToSize=function(n,e,t){var r,s=(t=t||{}).fontSize||this.internal.getFontSize(),i=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var h=this.internal.getFont(c.fontName,c.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=t.lineIndent;var o,l,u=[];for(o=0,l=r.length;o<l;o++)u=u.concat(Sb.apply(this,[r[o],a,i]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},s=0;s<e.length;s++)t[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var i=function(h){return"0x"+parseInt(h,10).toString(16)},a=n.__fontmetrics__.compress=function(h){var p,f,v,b,x=["{"];for(var w in h){if(p=h[w],isNaN(parseInt(w,10))?f="'"+w+"'":(w=parseInt(w,10),f=(f=i(w).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof p=="number")p<0?(v=i(p).slice(3),b="-"):(v=i(p).slice(2),b=""),v=b+v.slice(0,-1)+r[v.slice(-1)];else{if(sr(p)!=="object")throw new Error("Don't know what to do with value type "+sr(p)+".");v=a(p)}x.push(f+v)}return x.push("}"),x.join("")},o=n.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,f,v,b,x={},w=1,k=x,T=[],I="",Y="",Q=h.length-1,H=1;H<Q;H+=1)(b=h[H])=="'"?p?(v=p.join(""),p=void 0):p=[]:p?p.push(b):b=="{"?(T.push([k,v]),k={},v=void 0):b=="}"?((f=T.pop())[0][f[1]]=k,v=void 0,k=f[0]):b=="-"?w=-1:v===void 0?t.hasOwnProperty(b)?(I+=t[b],v=parseInt(I,16)*w,w=1,I=""):I+=b:t.hasOwnProperty(b)?(Y+=t[b],k[v]=parseInt(Y,16)*w,w=1,v=void 0,Y=""):Y+=b;return x},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},c={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(h){var p=h.font,f=c.Unicode[p.postScriptName];f&&(p.metadata.Unicode={},p.metadata.Unicode.widths=f.widths,p.metadata.Unicode.kerning=f.kerning);var v=u.Unicode[p.postScriptName];v&&(p.metadata.Unicode.encoding=v,p.encoding=v.codePages[0])}])}(_t.API),function(n){var e=function(t){for(var r=t.length,s=new Uint8Array(r),i=0;i<r;i++)s[i]=t.charCodeAt(i);return s};n.API.events.push(["addFont",function(t){var r=void 0,s=t.font,i=t.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(bh(o)),a.metadata=n.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,r)}}])}(_t),function(n){function e(){return(St.canvg?Promise.resolve(St.canvg):Pa(()=>import("./index.es-BT0w10xE.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}_t.API.addSvgAsImage=function(t,r,s,i,a,o,l,u){if(isNaN(r)||isNaN(s))throw ur.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw ur.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=i,c.height=a;var h=c.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,c.width,c.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(v){return v.fromString(h,t,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(p)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),r,s,i,a,l,u)})}}(),_t.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,t);return this},_t.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],u=0,c=0,h=0;function p(v,b){var x,w=!1;for(x=0;x<v.length;x+=1)v[x]===b&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var f=o.length;for(h=0;h<f;h+=1)t[o[h]].value=t[o[h]].defaultValue,t[o[h]].explicitSet=!1}if(sr(n)==="object"){for(s in n)if(i=n[s],p(o,s)&&i!==void 0){if(t[s].type==="boolean"&&typeof i=="boolean")t[s].value=i;else if(t[s].type==="name"&&p(t[s].valueSet,i))t[s].value=i;else if(t[s].type==="integer"&&Number.isInteger(i))t[s].value=i;else if(t[s].type==="array"){for(u=0;u<i.length;u+=1)if(r=!0,i[u].length===1&&typeof i[u][0]=="number")l.push(String(i[u]-1));else if(i[u].length>1){for(c=0;c<i[u].length;c+=1)typeof i[u][c]!="number"&&(r=!1);r===!0&&l.push([i[u][0]-1,i[u][1]-1].join(" "))}t[s].value="["+l.join(" ")+"]"}else t[s].value=t[s].defaultValue;t[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,b=[];for(v in t)t[v].explicitSet===!0&&(t[v].type==="name"?b.push("/"+v+" /"+t[v].value):b.push("/"+v+" "+t[v].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+a.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(s+i+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(_t.API),function(n){var e=n.API,t=e.pdfEscape16=function(i,a){for(var o,l=a.metadata.Unicode.widths,u=["","0","00","000","0000"],c=[""],h=0,p=i.length;h<p;++h){if(o=a.metadata.characterToGlyph(i.charCodeAt(h)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(h),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return c.join("");o=o.toString(16),c.push(u[4-o.length],o)}return c.join("")},r=function(i){var a,o,l,u,c,h,p;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,p=(o=Object.keys(i).sort(function(f,v){return f-v})).length;h<p;h++)a=o[h],l.length>=100&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(u=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+u+">"));return l.length&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var o=a.font,l=a.out,u=a.newObject,c=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),f="",v=0;v<p.length;v++)f+=String.fromCharCode(p[v]);var b=u();c({data:f,addLength1:!0,objectId:b}),l("endobj");var x=u();c({data:r(o.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var w=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+xc(o.fontName)),l("/FontFile2 "+b+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var k=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+xc(o.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+n.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+x+" 0 R"),l("/BaseFont /"+xc(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+k+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var o=a.font,l=a.out,u=a.newObject,c=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,p="",f=0;f<h.length;f++)p+=String.fromCharCode(h[f]);var v=u();c({data:p,addLength1:!0,objectId:v}),l("endobj");var b=u();c({data:r(o.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var x=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+xc(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var w=0;w<o.metadata.hmtx.widths.length;w++)o.metadata.hmtx.widths[w]=parseInt(o.metadata.hmtx.widths[w]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+xc(o.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,o=i.text||"",l=i.x,u=i.y,c=i.options||{},h=i.mutex||{},p=h.pdfEscape,f=h.activeFontKey,v=h.fonts,b=f,x="",w=0,k="",T=v[b].encoding;if(v[b].encoding!=="Identity-H")return{text:o,x:l,y:u,options:c,mutex:h};for(k=o,b=f,Array.isArray(o)&&(k=o[0]),w=0;w<k.length;w+=1)v[b].metadata.hasOwnProperty("cmap")&&(a=v[b].metadata.cmap.unicode.codeMap[k[w].charCodeAt(0)]),a||k[w].charCodeAt(0)<256&&v[b].metadata.hasOwnProperty("Unicode")?x+=k[w]:x+="";var I="";return parseInt(b.slice(1))<14||T==="WinAnsiEncoding"?I=p(x,b).split("").map(function(Y){return Y.charCodeAt(0).toString(16)}).join(""):T==="Identity-H"&&(I=t(x,v[b])),h.isHex=!0,{text:I,x:l,y:u,options:c,mutex:h}};e.events.push(["postProcessText",function(i){var a=i.text||"",o=[],l={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?o.push([s(Object.assign({},l,{text:a[u][0]})).text,a[u][1],a[u][2]]):o.push(s(Object.assign({},l,{text:a[u]})).text);i.text=o}else i.text=s(Object.assign({},l,{text:a})).text}])}(_t),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(_t.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var s,i,a,o,l,u,c,h=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,T=0;this.__bidiEngine__={};var I=function(D){var O=D.charCodeAt(),J=O>>8,M=b[J];return M!==void 0?h[256*M+(255&O)]:J===252||J===253?"AL":w.test(J)?"L":J===8?"R":"N"},Y=function(D){for(var O,J=0;J<D.length;J++){if((O=I(D.charAt(J)))==="L")return!1;if(O==="R")return!0}return!1},Q=function(D,O,J,M){var ee,W,ae,ne,oe=O[M];switch(oe){case"L":case"R":k=!1;break;case"N":case"AN":break;case"EN":k&&(oe="AN");break;case"AL":k=!0,oe="R";break;case"WS":oe="N";break;case"CS":M<1||M+1>=O.length||(ee=J[M-1])!=="EN"&&ee!=="AN"||(W=O[M+1])!=="EN"&&W!=="AN"?oe="N":k&&(W="AN"),oe=W===ee?W:"N";break;case"ES":oe=(ee=M>0?J[M-1]:"B")==="EN"&&M+1<O.length&&O[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&J[M-1]==="EN"){oe="EN";break}if(k){oe="N";break}for(ae=M+1,ne=O.length;ae<ne&&O[ae]==="ET";)ae++;oe=ae<ne&&O[ae]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(ne=O.length,ae=M+1;ae<ne&&O[ae]==="NSM";)ae++;if(ae<ne){var de=D[M],fe=de>=1425&&de<=2303||de===64286;if(ee=O[ae],fe&&(ee==="R"||ee==="AL")){oe="R";break}}}oe=M<1||(ee=O[M-1])==="B"?"N":J[M-1];break;case"B":k=!1,s=!0,oe=T;break;case"S":i=!0,oe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"BN":oe="N"}return oe},H=function(D,O,J){var M=D.split("");return J&&j(M,J,{hiLevel:T}),M.reverse(),O&&O.reverse(),M.join("")},j=function(D,O,J){var M,ee,W,ae,ne,oe=-1,de=D.length,fe=0,P=[],A=T?f:p,F=[];for(k=!1,s=!1,i=!1,ee=0;ee<de;ee++)F[ee]=I(D[ee]);for(W=0;W<de;W++){if(ne=fe,P[W]=Q(D,F,P,W),M=240&(fe=A[ne][v[P[W]]]),fe&=15,O[W]=ae=A[fe][5],M>0)if(M===16){for(ee=oe;ee<W;ee++)O[ee]=1;oe=-1}else oe=-1;if(A[fe][6])oe===-1&&(oe=W);else if(oe>-1){for(ee=oe;ee<W;ee++)O[ee]=ae;oe=-1}F[W]==="B"&&(O[W]=0),J.hiLevel|=ae}i&&function(G,Z,_){for(var q=0;q<_;q++)if(G[q]==="S"){Z[q]=T;for(var te=q-1;te>=0&&G[te]==="WS";te--)Z[te]=T}}(F,O,de)},U=function(D,O,J,M,ee){if(!(ee.hiLevel<D)){if(D===1&&T===1&&!s)return O.reverse(),void(J&&J.reverse());for(var W,ae,ne,oe,de=O.length,fe=0;fe<de;){if(M[fe]>=D){for(ne=fe+1;ne<de&&M[ne]>=D;)ne++;for(oe=fe,ae=ne-1;oe<ae;oe++,ae--)W=O[oe],O[oe]=O[ae],O[ae]=W,J&&(W=J[oe],J[oe]=J[ae],J[ae]=W);fe=ne}fe++}}},K=function(D,O,J){var M=D.split(""),ee={hiLevel:T};return J||(J=[]),j(M,J,ee),function(W,ae,ne){if(ne.hiLevel!==0&&c)for(var oe,de=0;de<W.length;de++)ae[de]===1&&(oe=x.indexOf(W[de]))>=0&&(W[de]=x[oe+1])}(M,J,ee),U(2,M,O,J,ee),U(1,M,O,J,ee),M.join("")};return this.__bidiEngine__.doBidiReorder=function(D,O,J){if(function(ee,W){if(W)for(var ae=0;ae<ee.length;ae++)W[ae]=ae;o===void 0&&(o=Y(ee)),u===void 0&&(u=Y(ee))}(D,O),a||!l||u)if(a&&l&&o^u)T=o?1:0,D=H(D,O,J);else if(!a&&l&&u)T=o?1:0,D=K(D,O,J),D=H(D,O);else if(!a||o||l||u){if(a&&!l&&o^u)D=H(D,O),o?(T=0,D=K(D,O,J)):(T=1,D=K(D,O,J),D=H(D,O));else if(a&&o&&!l&&u)T=1,D=K(D,O,J),D=H(D,O);else if(!a&&!l&&o^u){var M=c;o?(T=1,D=K(D,O,J),T=0,c=!1,D=K(D,O,J),c=M):(T=0,D=K(D,O,J),D=H(D,O),T=1,c=!1,D=K(D,O,J),c=M,D=H(D,O))}}else T=0,D=K(D,O,J);else T=o?1:0,D=K(D,O,J);return D},this.__bidiEngine__.setOptions=function(D){D&&(a=D.isInputVisual,l=D.isOutputVisual,o=D.isInputRtl,u=D.isOutputRtl,c=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var s=r.text;r.x,r.y;var i=r.options||{};r.mutex,i.lang;var a=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,t.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([t.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([t.doBidiReorder(s[o])]);r.text=a}else r.text=t.doBidiReorder(s);t.setOptions({isInputVisual:!0})}])}(_t),_t.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Oo(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new ZN(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new BN(this.contents),this.head=new qN(this),this.name=new YN(this),this.cmap=new Hx(this),this.toUnicode={},this.hhea=new UN(this),this.maxp=new WN(this),this.hmtx=new GN(this),this.post=new zN(this),this.os2=new VN(this),this.loca=new QN(this),this.glyf=new XN(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,u;for(u=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),(32768&(t=s>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var s,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Mi,Oo=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,s;for(s=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)s.push(this.writeByte(e.charCodeAt(t)));return s},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,s,i,a,o,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*s+16777216*i+65536*a+256*o+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,s,i;for(i=[],r=0,s=e.length;r<s;r++)t=e[r],i.push(this.writeByte(t));return i},n}(),BN=function(){var n;function e(t){var r,s,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,s,i,a,o,l,u,c,h,p,f,v,b;for(b in f=Object.keys(t).length,l=Math.log(2),h=16*Math.floor(Math.log(f)/l),a=Math.floor(h/l),c=16*f-h,(s=new Oo).writeInt(this.scalarType),s.writeShort(f),s.writeShort(h),s.writeShort(a),s.writeShort(c),i=16*f,u=s.pos+i,o=null,v=[],t)for(p=t[b],s.writeString(b),s.writeInt(n(p)),s.writeInt(u),s.writeInt(p.length),v=v.concat(p),b==="head"&&(o=u),u+=p.length;u%4;)v.push(0),u++;return s.write(v),r=2981146554-n(s.data),s.pos=o+8,s.writeUInt32(r),s.data},n=function(t){var r,s,i,a;for(t=Yx.call(t);t.length%4;)t.push(0);for(i=new Oo(t),s=0,r=0,a=t.length;r<a;r=r+=4)s+=i.readUInt32();return 4294967295&s},e}(),$N={}.hasOwnProperty,ta=function(n,e){for(var t in e)$N.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Mi=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var qN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ta(e,Mi),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Oo).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),Ab=function(){function n(e,t){var r,s,i,a,o,l,u,c,h,p,f,v,b,x,w,k,T;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),p=f/2,e.pos+=6,i=function(){var I,Y;for(Y=[],l=I=0;0<=p?I<p:I>p;l=0<=p?++I:--I)Y.push(e.readUInt16());return Y}(),e.pos+=2,b=function(){var I,Y;for(Y=[],l=I=0;0<=p?I<p:I>p;l=0<=p?++I:--I)Y.push(e.readUInt16());return Y}(),u=function(){var I,Y;for(Y=[],l=I=0;0<=p?I<p:I>p;l=0<=p?++I:--I)Y.push(e.readUInt16());return Y}(),c=function(){var I,Y;for(Y=[],l=I=0;0<=p?I<p:I>p;l=0<=p?++I:--I)Y.push(e.readUInt16());return Y}(),s=(this.length-e.pos+this.offset)/2,o=function(){var I,Y;for(Y=[],l=I=0;0<=s?I<s:I>s;l=0<=s?++I:--I)Y.push(e.readUInt16());return Y}(),l=w=0,T=i.length;w<T;l=++w)for(x=i[l],r=k=v=b[l];v<=x?k<=x:k>=x;r=v<=x?++k:--k)c[l]===0?a=r+u[l]:(a=o[c[l]/2+(r-v)-(p-l)]||0)!==0&&(a+=u[l]),this.codeMap[r]=65535&a}e.pos=h}return n.encode=function(e,t){var r,s,i,a,o,l,u,c,h,p,f,v,b,x,w,k,T,I,Y,Q,H,j,U,K,D,O,J,M,ee,W,ae,ne,oe,de,fe,P,A,F,G,Z,_,q,te,Ae,ce,V;switch(M=new Oo,a=Object.keys(e).sort(function(R,re){return R-re}),t){case"macroman":for(b=0,x=function(){var R=[];for(v=0;v<256;++v)R.push(0);return R}(),k={0:0},i={},ee=0,oe=a.length;ee<oe;ee++)k[te=e[s=a[ee]]]==null&&(k[te]=++b),i[s]={old:e[s],new:k[e[s]]},x[s]=k[e[s]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(x),{charMap:i,subtable:M.data,maxGlyphID:b+1};case"unicode":for(O=[],h=[],T=0,k={},r={},w=u=null,W=0,de=a.length;W<de;W++)k[Y=e[s=a[W]]]==null&&(k[Y]=++T),r[s]={old:Y,new:k[Y]},o=k[Y]-s,w!=null&&o===u||(w&&h.push(w),O.push(s),u=o),w=s;for(w&&h.push(w),h.push(65535),O.push(65535),K=2*(U=O.length),j=2*Math.pow(Math.log(U)/Math.LN2,2),p=Math.log(j/2)/Math.LN2,H=2*U-j,l=[],Q=[],f=[],v=ae=0,fe=O.length;ae<fe;v=++ae){if(D=O[v],c=h[v],D===65535){l.push(0),Q.push(0);break}if(D-(J=r[D].new)>=32768)for(l.push(0),Q.push(2*(f.length+U-v)),s=ne=D;D<=c?ne<=c:ne>=c;s=D<=c?++ne:--ne)f.push(r[s].new);else l.push(J-D),Q.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*U+2*f.length),M.writeUInt16(0),M.writeUInt16(K),M.writeUInt16(j),M.writeUInt16(p),M.writeUInt16(H),_=0,P=h.length;_<P;_++)s=h[_],M.writeUInt16(s);for(M.writeUInt16(0),q=0,A=O.length;q<A;q++)s=O[q],M.writeUInt16(s);for(Ae=0,F=l.length;Ae<F;Ae++)o=l[Ae],M.writeUInt16(o);for(ce=0,G=Q.length;ce<G;ce++)I=Q[ce],M.writeUInt16(I);for(V=0,Z=f.length;V<Z;V++)b=f[V],M.writeUInt16(b);return{charMap:r,subtable:M.data,maxGlyphID:T+1}}},n}(),Hx=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ta(e,Mi),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,s,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)r=new Ab(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var s,i;return r==null&&(r="macroman"),s=Ab.encode(t,r),(i=new Oo).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},e}(),UN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ta(e,Mi),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),VN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ta(e,Mi),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(t.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(t.readInt());return s}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(t.readInt());return s}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),zN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ta(e,Mi),e.prototype.tag="post",e.prototype.parse=function(t){var r,s,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(s=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return s=t.readUInt16(),this.offsets=t.read(s);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)u.push(t.readUInt32());return u}).call(this)}},e}(),HN=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},YN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ta(e,Mi),e.prototype.tag="name",e.prototype.parse=function(t){var r,s,i,a,o,l,u,c,h,p,f;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),s=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)s.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},a=h=0,p=s.length;h<p;a=++h)i=s[a],t.pos=i.offset,c=t.readString(i.length),o=new HN(c,i),u[f=i.nameID]==null&&(u[f]=[]),u[i.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),WN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ta(e,Mi),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),GN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ta(e,Mi),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,s,i,a,o,l,u;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,h;for(h=[],r=c=0;0<=i?c<i:c>i;r=0<=i?++c:--c)h.push(t.readInt16());return h}(),this.widths=(function(){var c,h,p,f;for(f=[],c=0,h=(p=this.metrics).length;c<h;c++)a=p[c],f.push(a.advance);return f}).call(this),s=this.widths[this.widths.length-1],u=[],r=o=0;0<=i?o<i:o>i;r=0<=i?++o:--o)u.push(this.widths.push(s));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Yx=[].slice,XN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ta(e,Mi),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,s,i,a,o,l,u,c,h,p;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,s=a.indexOf(t),(i=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+s,o=(l=new Oo(r.read(i))).readShort(),c=l.readShort(),p=l.readShort(),u=l.readShort(),h=l.readShort(),this.cache[t]=o===-1?new JN(l,c,p,u,h):new KN(l,o,c,p,u,h),this.cache[t]))},e.prototype.encode=function(t,r,s){var i,a,o,l,u;for(o=[],a=[],l=0,u=r.length;l<u;l++)i=t[r[l]],a.push(o.length),i&&(o=o.concat(i.encode(s)));return a.push(o.length),{table:o,offsets:a}},e}(),KN=function(){function n(e,t,r,s,i,a){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),JN=function(){function n(e,t,r,s,i){var a,o;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Oo(Yx.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),QN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ta(e,Mi),e.prototype.tag="loca",e.prototype.parse=function(t){var r,s;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var s=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<s.length;++o)if(s[o]=i,a<r.length&&r[a]==o){++a,s[o]=i;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(i+=u)}for(var c=new Array(4*s.length),h=0;h<s.length;++h)c[4*h+3]=255&s[h],c[4*h+2]=(65280&s[h])>>8,c[4*h+1]=(16711680&s[h])>>16,c[4*h]=(4278190080&s[h])>>24;return c},e}(),ZN=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,s,i;for(t in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)r=i[t],e[t]=s[r];return e},n.prototype.glyphsFor=function(e){var t,r,s,i,a,o,l;for(s={},a=0,o=e.length;a<o;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in t=[],s)(r=s[i])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(i in l=this.glyphsFor(t))r=l[i],s[i]=r;return s},n.prototype.encode=function(e,t){var r,s,i,a,o,l,u,c,h,p,f,v,b,x,w;for(s in r=Hx.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),f={0:0},w=r.charMap)f[(l=w[s]).old]=l.new;for(v in p=r.maxGlyphID,a)v in f||(f[v]=p++);return c=function(k){var T,I;for(T in I={},k)I[k[T]]=T;return I}(f),h=Object.keys(c).sort(function(k,T){return k-T}),b=function(){var k,T,I;for(I=[],k=0,T=h.length;k<T;k++)o=h[k],I.push(c[o]);return I}(),i=this.font.glyf.encode(a,b,f),u=this.font.loca.encode(i.offsets,b),x={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},n}();_t.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,s,i,a;if(Array.isArray(t))return"["+function(){var o,l,u;for(u=[],o=0,l=t.length;o<l;o++)r=t[o],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(s in i=["<<"],t)a=t[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+t},e}();/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),e7=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),t7=n=>{const e=e7(n);return e.charAt(0).toUpperCase()+e.slice(1)},r7=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Of={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=({size:n,strokeWidth:e=2,absoluteStrokeWidth:t,color:r,iconNode:s,name:i,class:a,...o},{slots:l})=>vl("svg",{...Of,width:n||Of.width,height:n||Of.height,stroke:r||Of.stroke,"stroke-width":t?Number(e)*24/Number(n):e,class:r7("lucide",...i?[`lucide-${Tb(t7(i))}-icon`,`lucide-${Tb(i)}`]:["lucide-icon"]),...o},[...s.map(u=>vl(...u)),...l.default?[l.default()]:[]]);/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=(n,e)=>(t,{slots:r})=>vl(n7,{...t,iconNode:e,name:n},r);/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=cu("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=cu("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=cu("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=cu("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=cu("rectangle-horizontal",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]);/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=cu("trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),l7={class:"toolbar-basic"},c7=["value"],u7={__name:"Toolbar",props:["addShape","deleteSelected","selectedColor","saveAsPDF"],emits:["updateColor"],setup(n,{emit:e}){const t=e,r=s=>{t("updateColor",s)};return(s,i)=>(_e(),Me("div",l7,[Ne("button",{onClick:i[0]||(i[0]=a=>n.addShape("rectangle")),title:"Rectangle"},[ot(ue(Ob))]),Ne("button",{onClick:i[1]||(i[1]=a=>n.addShape("rectangle-nofill")),title:"Rectangle"},[ot(ue(Ob))]),Ne("button",{onClick:i[2]||(i[2]=a=>n.addShape("circle")),title:"Circle"},[ot(ue(Pb))]),Ne("button",{onClick:i[3]||(i[3]=a=>n.addShape("circle-nofill")),title:"Circle"},[ot(ue(Pb))]),Ne("button",{onClick:i[4]||(i[4]=a=>n.addShape("line")),title:"Line"},[ot(ue(a7))]),Ne("button",{onClick:i[5]||(i[5]=a=>n.addShape("text")),title:"Line"},[ot(ue(i7))]),Ne("button",{onClick:i[6]||(i[6]=(...a)=>n.deleteSelected&&n.deleteSelected(...a)),title:"Delete"},[ot(ue(o7))]),Ne("input",{type:"color",value:n.selectedColor,onInput:i[7]||(i[7]=a=>r(a.target.value))},null,40,c7),Ne("button",{onClick:i[8]||(i[8]=(...a)=>n.saveAsPDF&&n.saveAsPDF(...a)),title:"Save as PDF"},[ot(ue(s7))])]))}},h7=xn(u7,[["__scopeId","data-v-bce60b8f"]]),d7={class:"drawing-container"},f7={__name:"GkPaint",setup(n){const e=$e(null);let t=null;const r=$e("#000000");let s=null;dr(()=>{t=new D0(e.value),a(),window.addEventListener("resize",a),window.addEventListener("keydown",i)}),Ra(()=>{window.removeEventListener("keydown",i)});const i=p=>{p.key==="Delete"?o():p.ctrlKey&&p.key==="c"?l():p.ctrlKey&&p.key==="v"?u():p.ctrlKey&&p.key==="z"&&undo()},a=()=>{if(!e.value||!t)return;const p=window.innerWidth*.8,f=window.innerHeight-130;t.setWidth(p),t.setHeight(f),t.renderAll()},o=()=>{const p=t.getActiveObject();p&&(t.remove(p),t.discardActiveObject(),t.requestRenderAll())},l=()=>{t.getActiveObject().clone().then(p=>{s=p})};async function u(){const p=await s.clone();t.discardActiveObject(),p.set({left:p.left+20,top:p.top+20,evented:!0}),p instanceof bo?(p.canvas=t,p.forEachObject(f=>{t.add(f)}),p.setCoords()):t.add(p),s.top+=10,s.left+=10,t.setActiveObject(p),t.requestRenderAll()}const c=(p,f={})=>{let v;const b=r.value;switch(p){case"rectangle":v=new Ys({left:f.left||50,top:f.top||50,width:f.width||100,height:f.height||60,fill:b,selectable:!0});break;case"rectangle-nofill":v=new Ys({left:f.left||60,top:f.top||60,width:f.width||100,height:f.height||60,strokeWidth:.6,stroke:b,fill:"transparent",selectable:!0});break;case"circle":v=new bi({left:f.left||100,top:f.top||100,radius:f.radius||40,fill:b,selectable:!0});break;case"circle-nofill":v=new bi({left:f.left||110,top:f.top||110,radius:f.radius||40,strokeWidth:1,stroke:b,fill:"transparent",selectable:!0});break;case"line":v=new mo([f.x1||50,f.y1||150,f.x2||200,f.y2||150],{stroke:b,strokeWidth:f.strokeWidth||3});break;case"text":v=new yo(f.text||"Hello!",{left:f.left||150,top:f.top||150,fill:b,fontSize:f.fontSize||20});break;default:console.log("Shape type not recognized.");return}t.add(v)},h=()=>{const v=t.width,b=t.height,x=new _t("landscape","pt",[1190.55,841.89]),w=1190.55/v,k=841.89/b,T=Math.min(w,k),I=v*T,Y=b*T,Q=(1190.55-I)/2,H=(841.89-Y)/2,j=t.toDataURL("image/png",1);x.addImage(j,"PNG",Q,H,I,Y),x.save("drawing.pdf")};return(p,f)=>(_e(),Me("div",d7,[ot(h7,{addShape:c,deleteSelected:o,selectedColor:r.value,saveAsPDF:h,onUpdateColor:f[0]||(f[0]=v=>r.value=v)},null,8,["selectedColor"]),Ne("canvas",{ref_key:"canvasEl",ref:e},null,512)]))}},p7=xn(f7,[["__scopeId","data-v-4856ca58"]]),g7=[{path:"/",component:FT},{path:"/dashboard",component:MT,meta:{requiresAuth:!0},children:[{path:"/not-authorized",component:XD},{path:"/:pathMatch(.*)*",component:JD},{path:"/technicians",component:GT,meta:{requiresAuth:!0,allowedRoles:["service_leader"]}},{path:"/technicians/edit/:id",component:hP,meta:{requiresAuth:!0,allowedRoles:["service_leader"]},props:!0},{path:"/technicians/add",component:fP,meta:{requiresAuth:!0,allowedRoles:["service_leader"]}},{path:"/services",name:"Service",component:pP,meta:{requiresAuth:!0}},{path:"/services/edit/:id",name:"EditService",props:!0,component:FD,meta:{requiresAuth:!0,allowedRoles:["service_leader"]}},{path:"/services/:id",name:"ServiceDetail",component:zD,props:!0,meta:{requiresAuth:!0}},{path:"/services/add",name:"AddService",component:LD,meta:{requiresAuth:!0,allowedRoles:["service_leader"]}},{path:"/orders",component:iP,meta:{requiresAuth:!0}},{path:"/orders/edit/:id",component:YD,rops:!0,meta:{requiresAuth:!0,allowedRoles:["service_leader"]}},{path:"/orders/:id",component:WD,rops:!0,meta:{requiresAuth:!0}},{path:"/orders/add",component:HD,meta:{requiresAuth:!0,allowedRoles:["service_leader"]}},{path:"/projects",component:QD,meta:{requiresAuth:!0,allowedRoles:["service_leader"]}},{path:"/projects/edit/:id",component:ZD,meta:{requiresAuth:!0,allowedRoles:["service_leader"]}},{path:"/projects/:id",component:e8,meta:{requiresAuth:!0,allowedRoles:["service_leader"]}},{path:"/projects/add",component:t8,meta:{requiresAuth:!0,allowedRoles:["service_leader"]}},{path:"/devices",component:r8,meta:{requiresAuth:!0,allowedRoles:["service_leader"]}},{path:"/devices/:id",component:c8,meta:{requiresAuth:!0,allowedRoles:["service_leader"]}},{path:"/devices/edit/:id",component:n8,meta:{requiresAuth:!0,allowedRoles:["service_leader"]}},{path:"/devices/add",component:s8,meta:{requiresAuth:!0,allowedRoles:["service_leader"]}},{path:"/jobs",component:lP,meta:{requiresAuth:!0}},{path:"/skogsblomman",component:g8,meta:{requiresAuth:!0}},{path:"/department",component:l8,meta:{requiresAuth:!0}},{path:"/gkpaint",component:p7,meta:{requiresAuth:!0}}]}],Wx=hC({history:$4(),routes:g7});Wx.beforeEach(async(n,e,t)=>{const{data:{user:r}}=await sn.auth.getUser();if(n.meta.requiresAuth&&!r)return t("/");if(n.meta.allowedRoles){const{data:s,error:i}=await sn.from("users").select("role").eq("auth_id",r.id).single();if(i||!s||!n.meta.allowedRoles.includes(s.role))return t("/not-authorized")}t()});const Gx=n4(l4);Gx.use(Wx);Gx.mount("#app");export{sr as _,v7 as c,_C as g};
